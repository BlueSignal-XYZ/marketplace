var Que=Object.defineProperty;var Xue=(t,e,n)=>e in t?Que(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ce=(t,e,n)=>(Xue(t,typeof e!="symbol"?e+"":e,n),n),aT=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Me=(t,e,n)=>(aT(t,e,"read from private field"),n?n.call(t):e.get(t)),Bs=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Qv=(t,e,n,r)=>(aT(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Ut=(t,e,n)=>(aT(t,e,"access private method"),n);function Zue(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ku(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YG={exports:{}},Zw={},QG={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0=Symbol.for("react.element"),Jue=Symbol.for("react.portal"),ede=Symbol.for("react.fragment"),tde=Symbol.for("react.strict_mode"),nde=Symbol.for("react.profiler"),rde=Symbol.for("react.provider"),ide=Symbol.for("react.context"),sde=Symbol.for("react.forward_ref"),ode=Symbol.for("react.suspense"),ade=Symbol.for("react.memo"),lde=Symbol.for("react.lazy"),P5=Symbol.iterator;function cde(t){return t===null||typeof t!="object"?null:(t=P5&&t[P5]||t["@@iterator"],typeof t=="function"?t:null)}var XG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZG=Object.assign,JG={};function zh(t,e,n){this.props=t,this.context=e,this.refs=JG,this.updater=n||XG}zh.prototype.isReactComponent={};zh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function eK(){}eK.prototype=zh.prototype;function rO(t,e,n){this.props=t,this.context=e,this.refs=JG,this.updater=n||XG}var iO=rO.prototype=new eK;iO.constructor=rO;ZG(iO,zh.prototype);iO.isPureReactComponent=!0;var I5=Array.isArray,tK=Object.prototype.hasOwnProperty,sO={current:null},nK={key:!0,ref:!0,__self:!0,__source:!0};function rK(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)tK.call(e,r)&&!nK.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:J0,type:t,key:s,ref:o,props:i,_owner:sO.current}}function ude(t,e){return{$$typeof:J0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oO(t){return typeof t=="object"&&t!==null&&t.$$typeof===J0}function dde(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var A5=/\/+/g;function lT(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dde(""+t.key):e.toString(36)}function J1(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case J0:case Jue:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+lT(o,0):r,I5(i)?(n="",t!=null&&(n=t.replace(A5,"$&/")+"/"),J1(i,e,n,"",function(c){return c})):i!=null&&(oO(i)&&(i=ude(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(A5,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",I5(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+lT(s,a);o+=J1(s,e,n,l,i)}else if(l=cde(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+lT(s,a++),o+=J1(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xv(t,e,n){if(t==null)return t;var r=[],i=0;return J1(t,r,"","",function(s){return e.call(n,s,i++)}),r}function fde(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pr={current:null},ex={transition:null},hde={ReactCurrentDispatcher:Pr,ReactCurrentBatchConfig:ex,ReactCurrentOwner:sO};function iK(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Xv,forEach:function(t,e,n){Xv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xv(t,function(){e++}),e},toArray:function(t){return Xv(t,function(e){return e})||[]},only:function(t){if(!oO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=zh;qe.Fragment=ede;qe.Profiler=nde;qe.PureComponent=rO;qe.StrictMode=tde;qe.Suspense=ode;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hde;qe.act=iK;qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ZG({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sO.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)tK.call(e,l)&&!nK.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:J0,type:t.type,key:i,ref:s,props:r,_owner:o}};qe.createContext=function(t){return t={$$typeof:ide,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rde,_context:t},t.Consumer=t};qe.createElement=rK;qe.createFactory=function(t){var e=rK.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:sde,render:t}};qe.isValidElement=oO;qe.lazy=function(t){return{$$typeof:lde,_payload:{_status:-1,_result:t},_init:fde}};qe.memo=function(t,e){return{$$typeof:ade,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=ex.transition;ex.transition={};try{t()}finally{ex.transition=e}};qe.unstable_act=iK;qe.useCallback=function(t,e){return Pr.current.useCallback(t,e)};qe.useContext=function(t){return Pr.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return Pr.current.useDeferredValue(t)};qe.useEffect=function(t,e){return Pr.current.useEffect(t,e)};qe.useId=function(){return Pr.current.useId()};qe.useImperativeHandle=function(t,e,n){return Pr.current.useImperativeHandle(t,e,n)};qe.useInsertionEffect=function(t,e){return Pr.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return Pr.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return Pr.current.useMemo(t,e)};qe.useReducer=function(t,e,n){return Pr.current.useReducer(t,e,n)};qe.useRef=function(t){return Pr.current.useRef(t)};qe.useState=function(t){return Pr.current.useState(t)};qe.useSyncExternalStore=function(t,e,n){return Pr.current.useSyncExternalStore(t,e,n)};qe.useTransition=function(){return Pr.current.useTransition()};qe.version="18.3.1";QG.exports=qe;var v=QG.exports;const te=Ku(v),Jw=Zue({__proto__:null,default:te},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pde=v,mde=Symbol.for("react.element"),gde=Symbol.for("react.fragment"),vde=Object.prototype.hasOwnProperty,yde=pde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xde={key:!0,ref:!0,__self:!0,__source:!0};function sK(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vde.call(e,r)&&!xde.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:mde,type:t,key:s,ref:o,props:i,_owner:yde.current}}Zw.Fragment=gde;Zw.jsx=sK;Zw.jsxs=sK;YG.exports=Zw;var b=YG.exports,vP={},oK={exports:{}},yi={},aK={exports:{}},lK={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var B=k.length;k.push(M);e:for(;0<B;){var N=B-1>>>1,V=k[N];if(0<i(V,M))k[N]=M,k[B]=V,B=N;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],B=k.pop();if(B!==M){k[0]=B;e:for(var N=0,V=k.length,H=V>>>1;N<H;){var W=2*(N+1)-1,z=k[W],G=W+1,K=k[G];if(0>i(z,B))G<V&&0>i(K,z)?(k[N]=K,k[G]=B,N=G):(k[N]=z,k[W]=B,N=W);else if(G<V&&0>i(K,B))k[N]=K,k[G]=B,N=G;else break e}}return M}function i(k,M){var B=k.sortIndex-M.sortIndex;return B!==0?B:k.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(k){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=k)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function w(k){if(m=!1,S(k),!p)if(n(l)!==null)p=!0,C(E);else{var M=n(c);M!==null&&P(w,M.startTime-k)}}function E(k,M){p=!1,m&&(m=!1,y(I),I=-1),h=!0;var B=f;try{for(S(M),d=n(l);d!==null&&(!(d.expirationTime>M)||k&&!j());){var N=d.callback;if(typeof N=="function"){d.callback=null,f=d.priorityLevel;var V=N(d.expirationTime<=M);M=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&r(l),S(M)}else r(l);d=n(l)}if(d!==null)var H=!0;else{var W=n(c);W!==null&&P(w,W.startTime-M),H=!1}return H}finally{d=null,f=B,h=!1}}var T=!1,_=null,I=-1,A=5,L=-1;function j(){return!(t.unstable_now()-L<A)}function D(){if(_!==null){var k=t.unstable_now();L=k;var M=!0;try{M=_(!0,k)}finally{M?O():(T=!1,_=null)}}else T=!1}var O;if(typeof x=="function")O=function(){x(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,R=$.port2;$.port1.onmessage=D,O=function(){R.postMessage(null)}}else O=function(){g(D,0)};function C(k){_=k,T||(T=!0,O())}function P(k,M){I=g(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,C(E))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(k){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var B=f;f=M;try{return k()}finally{f=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var B=f;f=k;try{return M()}finally{f=B}},t.unstable_scheduleCallback=function(k,M,B){var N=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?N+B:N):B=N,k){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=B+V,k={id:u++,callback:M,priorityLevel:k,startTime:B,expirationTime:V,sortIndex:-1},B>N?(k.sortIndex=B,e(c,k),n(l)===null&&k===n(c)&&(m?(y(I),I=-1):m=!0,P(w,B-N))):(k.sortIndex=V,e(l,k),p||h||(p=!0,C(E))),k},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(k){var M=f;return function(){var B=f;f=M;try{return k.apply(this,arguments)}finally{f=B}}}})(lK);aK.exports=lK;var bde=aK.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sde=v,gi=bde;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cK=new Set,_g={};function qu(t,e){nh(t,e),nh(t+"Capture",e)}function nh(t,e){for(_g[t]=e,t=0;t<e.length;t++)cK.add(e[t])}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yP=Object.prototype.hasOwnProperty,wde=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L5={},R5={};function Ede(t){return yP.call(R5,t)?!0:yP.call(L5,t)?!1:wde.test(t)?R5[t]=!0:(L5[t]=!0,!1)}function _de(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tde(t,e,n,r){if(e===null||typeof e>"u"||_de(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ir(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kn[t]=new Ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kn[e]=new Ir(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kn[t]=new Ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kn[t]=new Ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kn[t]=new Ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kn[t]=new Ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kn[t]=new Ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kn[t]=new Ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kn[t]=new Ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var aO=/[\-:]([a-z])/g;function lO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(aO,lO);Kn[e]=new Ir(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(aO,lO);Kn[e]=new Ir(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(aO,lO);Kn[e]=new Ir(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kn[t]=new Ir(t,1,!1,t.toLowerCase(),null,!1,!1)});Kn.xlinkHref=new Ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kn[t]=new Ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function cO(t,e,n,r){var i=Kn.hasOwnProperty(e)?Kn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tde(e,n,i,r)&&(n=null),r||i===null?Ede(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ka=Sde.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zv=Symbol.for("react.element"),qd=Symbol.for("react.portal"),Yd=Symbol.for("react.fragment"),uO=Symbol.for("react.strict_mode"),xP=Symbol.for("react.profiler"),uK=Symbol.for("react.provider"),dK=Symbol.for("react.context"),dO=Symbol.for("react.forward_ref"),bP=Symbol.for("react.suspense"),SP=Symbol.for("react.suspense_list"),fO=Symbol.for("react.memo"),rl=Symbol.for("react.lazy"),fK=Symbol.for("react.offscreen"),O5=Symbol.iterator;function wp(t){return t===null||typeof t!="object"?null:(t=O5&&t[O5]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,cT;function lm(t){if(cT===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cT=e&&e[1]||""}return`
`+cT+t}var uT=!1;function dT(t,e){if(!t||uT)return"";uT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{uT=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lm(t):""}function Cde(t){switch(t.tag){case 5:return lm(t.type);case 16:return lm("Lazy");case 13:return lm("Suspense");case 19:return lm("SuspenseList");case 0:case 2:case 15:return t=dT(t.type,!1),t;case 11:return t=dT(t.type.render,!1),t;case 1:return t=dT(t.type,!0),t;default:return""}}function wP(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yd:return"Fragment";case qd:return"Portal";case xP:return"Profiler";case uO:return"StrictMode";case bP:return"Suspense";case SP:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dK:return(t.displayName||"Context")+".Consumer";case uK:return(t._context.displayName||"Context")+".Provider";case dO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fO:return e=t.displayName||null,e!==null?e:wP(t.type)||"Memo";case rl:e=t._payload,t=t._init;try{return wP(t(e))}catch{}}return null}function kde(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wP(e);case 8:return e===uO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hK(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Pde(t){var e=hK(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jv(t){t._valueTracker||(t._valueTracker=Pde(t))}function pK(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hK(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fb(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function EP(t,e){var n=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function D5(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mK(t,e){e=e.checked,e!=null&&cO(t,"checked",e,!1)}function _P(t,e){mK(t,e);var n=Zl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?TP(t,e.type,n):e.hasOwnProperty("defaultValue")&&TP(t,e.type,Zl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function M5(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function TP(t,e,n){(e!=="number"||fb(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cm=Array.isArray;function Pf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function CP(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $5(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(cm(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zl(n)}}function gK(t,e){var n=Zl(e.value),r=Zl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function N5(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vK(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kP(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vK(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ey,yK=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ey=ey||document.createElement("div"),ey.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ey.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tg(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ide=["Webkit","ms","Moz","O"];Object.keys(Dm).forEach(function(t){Ide.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dm[e]=Dm[t]})});function xK(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dm.hasOwnProperty(t)&&Dm[t]?(""+e).trim():e+"px"}function bK(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=xK(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ade=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function PP(t,e){if(e){if(Ade[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function IP(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var AP=null;function hO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var LP=null,If=null,Af=null;function F5(t){if(t=nv(t)){if(typeof LP!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=iE(e),LP(t.stateNode,t.type,e))}}function SK(t){If?Af?Af.push(t):Af=[t]:If=t}function wK(){if(If){var t=If,e=Af;if(Af=If=null,F5(t),e)for(t=0;t<e.length;t++)F5(e[t])}}function EK(t,e){return t(e)}function _K(){}var fT=!1;function TK(t,e,n){if(fT)return t(e,n);fT=!0;try{return EK(t,e,n)}finally{fT=!1,(If!==null||Af!==null)&&(_K(),wK())}}function Cg(t,e){var n=t.stateNode;if(n===null)return null;var r=iE(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var RP=!1;if(fa)try{var Ep={};Object.defineProperty(Ep,"passive",{get:function(){RP=!0}}),window.addEventListener("test",Ep,Ep),window.removeEventListener("test",Ep,Ep)}catch{RP=!1}function Lde(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Mm=!1,hb=null,pb=!1,OP=null,Rde={onError:function(t){Mm=!0,hb=t}};function Ode(t,e,n,r,i,s,o,a,l){Mm=!1,hb=null,Lde.apply(Rde,arguments)}function Dde(t,e,n,r,i,s,o,a,l){if(Ode.apply(this,arguments),Mm){if(Mm){var c=hb;Mm=!1,hb=null}else throw Error(ae(198));pb||(pb=!0,OP=c)}}function Yu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function CK(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function j5(t){if(Yu(t)!==t)throw Error(ae(188))}function Mde(t){var e=t.alternate;if(!e){if(e=Yu(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return j5(i),t;if(s===r)return j5(i),e;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function kK(t){return t=Mde(t),t!==null?PK(t):null}function PK(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=PK(t);if(e!==null)return e;t=t.sibling}return null}var IK=gi.unstable_scheduleCallback,B5=gi.unstable_cancelCallback,$de=gi.unstable_shouldYield,Nde=gi.unstable_requestPaint,ln=gi.unstable_now,Fde=gi.unstable_getCurrentPriorityLevel,pO=gi.unstable_ImmediatePriority,AK=gi.unstable_UserBlockingPriority,mb=gi.unstable_NormalPriority,jde=gi.unstable_LowPriority,LK=gi.unstable_IdlePriority,eE=null,mo=null;function Bde(t){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(eE,t,void 0,(t.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:zde,Ude=Math.log,Vde=Math.LN2;function zde(t){return t>>>=0,t===0?32:31-(Ude(t)/Vde|0)|0}var ty=64,ny=4194304;function um(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gb(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=um(a):(s&=o,s!==0&&(r=um(s)))}else o=n&~i,o!==0?r=um(o):s!==0&&(r=um(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Es(e),i=1<<n,r|=t[n],e&=~i;return r}function Hde(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wde(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Es(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Hde(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function DP(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function RK(){var t=ty;return ty<<=1,!(ty&4194240)&&(ty=64),t}function hT(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ev(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Es(e),t[e]=n}function Gde(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Es(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function mO(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Es(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ft=0;function OK(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DK,gO,MK,$K,NK,MP=!1,ry=[],Rl=null,Ol=null,Dl=null,kg=new Map,Pg=new Map,pl=[],Kde="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U5(t,e){switch(t){case"focusin":case"focusout":Rl=null;break;case"dragenter":case"dragleave":Ol=null;break;case"mouseover":case"mouseout":Dl=null;break;case"pointerover":case"pointerout":kg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pg.delete(e.pointerId)}}function _p(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=nv(e),e!==null&&gO(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qde(t,e,n,r,i){switch(e){case"focusin":return Rl=_p(Rl,t,e,n,r,i),!0;case"dragenter":return Ol=_p(Ol,t,e,n,r,i),!0;case"mouseover":return Dl=_p(Dl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return kg.set(s,_p(kg.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pg.set(s,_p(Pg.get(s)||null,t,e,n,r,i)),!0}return!1}function FK(t){var e=Yc(t.target);if(e!==null){var n=Yu(e);if(n!==null){if(e=n.tag,e===13){if(e=CK(n),e!==null){t.blockedOn=e,NK(t.priority,function(){MK(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$P(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);AP=r,n.target.dispatchEvent(r),AP=null}else return e=nv(n),e!==null&&gO(e),t.blockedOn=n,!1;e.shift()}return!0}function V5(t,e,n){tx(t)&&n.delete(e)}function Yde(){MP=!1,Rl!==null&&tx(Rl)&&(Rl=null),Ol!==null&&tx(Ol)&&(Ol=null),Dl!==null&&tx(Dl)&&(Dl=null),kg.forEach(V5),Pg.forEach(V5)}function Tp(t,e){t.blockedOn===e&&(t.blockedOn=null,MP||(MP=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,Yde)))}function Ig(t){function e(i){return Tp(i,t)}if(0<ry.length){Tp(ry[0],t);for(var n=1;n<ry.length;n++){var r=ry[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rl!==null&&Tp(Rl,t),Ol!==null&&Tp(Ol,t),Dl!==null&&Tp(Dl,t),kg.forEach(e),Pg.forEach(e),n=0;n<pl.length;n++)r=pl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pl.length&&(n=pl[0],n.blockedOn===null);)FK(n),n.blockedOn===null&&pl.shift()}var Lf=ka.ReactCurrentBatchConfig,vb=!0;function Qde(t,e,n,r){var i=ft,s=Lf.transition;Lf.transition=null;try{ft=1,vO(t,e,n,r)}finally{ft=i,Lf.transition=s}}function Xde(t,e,n,r){var i=ft,s=Lf.transition;Lf.transition=null;try{ft=4,vO(t,e,n,r)}finally{ft=i,Lf.transition=s}}function vO(t,e,n,r){if(vb){var i=$P(t,e,n,r);if(i===null)ET(t,e,r,yb,n),U5(t,r);else if(qde(i,t,e,n,r))r.stopPropagation();else if(U5(t,r),e&4&&-1<Kde.indexOf(t)){for(;i!==null;){var s=nv(i);if(s!==null&&DK(s),s=$P(t,e,n,r),s===null&&ET(t,e,r,yb,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ET(t,e,r,null,n)}}var yb=null;function $P(t,e,n,r){if(yb=null,t=hO(r),t=Yc(t),t!==null)if(e=Yu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=CK(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yb=t,null}function jK(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fde()){case pO:return 1;case AK:return 4;case mb:case jde:return 16;case LK:return 536870912;default:return 16}default:return 16}}var xl=null,yO=null,nx=null;function BK(){if(nx)return nx;var t,e=yO,n=e.length,r,i="value"in xl?xl.value:xl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nx=i.slice(t,1<r?1-r:void 0)}function rx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iy(){return!0}function z5(){return!1}function xi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?iy:z5,this.isPropagationStopped=z5,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iy)},persist:function(){},isPersistent:iy}),e}var Hh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xO=xi(Hh),tv=Qt({},Hh,{view:0,detail:0}),Zde=xi(tv),pT,mT,Cp,tE=Qt({},tv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cp&&(Cp&&t.type==="mousemove"?(pT=t.screenX-Cp.screenX,mT=t.screenY-Cp.screenY):mT=pT=0,Cp=t),pT)},movementY:function(t){return"movementY"in t?t.movementY:mT}}),H5=xi(tE),Jde=Qt({},tE,{dataTransfer:0}),efe=xi(Jde),tfe=Qt({},tv,{relatedTarget:0}),gT=xi(tfe),nfe=Qt({},Hh,{animationName:0,elapsedTime:0,pseudoElement:0}),rfe=xi(nfe),ife=Qt({},Hh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sfe=xi(ife),ofe=Qt({},Hh,{data:0}),W5=xi(ofe),afe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lfe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cfe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ufe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cfe[t])?!!e[t]:!1}function bO(){return ufe}var dfe=Qt({},tv,{key:function(t){if(t.key){var e=afe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lfe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bO,charCode:function(t){return t.type==="keypress"?rx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ffe=xi(dfe),hfe=Qt({},tE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G5=xi(hfe),pfe=Qt({},tv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bO}),mfe=xi(pfe),gfe=Qt({},Hh,{propertyName:0,elapsedTime:0,pseudoElement:0}),vfe=xi(gfe),yfe=Qt({},tE,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xfe=xi(yfe),bfe=[9,13,27,32],SO=fa&&"CompositionEvent"in window,$m=null;fa&&"documentMode"in document&&($m=document.documentMode);var Sfe=fa&&"TextEvent"in window&&!$m,UK=fa&&(!SO||$m&&8<$m&&11>=$m),K5=String.fromCharCode(32),q5=!1;function VK(t,e){switch(t){case"keyup":return bfe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zK(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qd=!1;function wfe(t,e){switch(t){case"compositionend":return zK(e);case"keypress":return e.which!==32?null:(q5=!0,K5);case"textInput":return t=e.data,t===K5&&q5?null:t;default:return null}}function Efe(t,e){if(Qd)return t==="compositionend"||!SO&&VK(t,e)?(t=BK(),nx=yO=xl=null,Qd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UK&&e.locale!=="ko"?null:e.data;default:return null}}var _fe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_fe[t.type]:e==="textarea"}function HK(t,e,n,r){SK(r),e=xb(e,"onChange"),0<e.length&&(n=new xO("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Nm=null,Ag=null;function Tfe(t){tq(t,0)}function nE(t){var e=Jd(t);if(pK(e))return t}function Cfe(t,e){if(t==="change")return e}var WK=!1;if(fa){var vT;if(fa){var yT="oninput"in document;if(!yT){var Q5=document.createElement("div");Q5.setAttribute("oninput","return;"),yT=typeof Q5.oninput=="function"}vT=yT}else vT=!1;WK=vT&&(!document.documentMode||9<document.documentMode)}function X5(){Nm&&(Nm.detachEvent("onpropertychange",GK),Ag=Nm=null)}function GK(t){if(t.propertyName==="value"&&nE(Ag)){var e=[];HK(e,Ag,t,hO(t)),TK(Tfe,e)}}function kfe(t,e,n){t==="focusin"?(X5(),Nm=e,Ag=n,Nm.attachEvent("onpropertychange",GK)):t==="focusout"&&X5()}function Pfe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nE(Ag)}function Ife(t,e){if(t==="click")return nE(e)}function Afe(t,e){if(t==="input"||t==="change")return nE(e)}function Lfe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Is=typeof Object.is=="function"?Object.is:Lfe;function Lg(t,e){if(Is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!yP.call(e,i)||!Is(t[i],e[i]))return!1}return!0}function Z5(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function J5(t,e){var n=Z5(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z5(n)}}function KK(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?KK(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qK(){for(var t=window,e=fb();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fb(t.document)}return e}function wO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rfe(t){var e=qK(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&KK(n.ownerDocument.documentElement,n)){if(r!==null&&wO(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=J5(n,s);var o=J5(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ofe=fa&&"documentMode"in document&&11>=document.documentMode,Xd=null,NP=null,Fm=null,FP=!1;function e$(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;FP||Xd==null||Xd!==fb(r)||(r=Xd,"selectionStart"in r&&wO(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fm&&Lg(Fm,r)||(Fm=r,r=xb(NP,"onSelect"),0<r.length&&(e=new xO("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xd)))}function sy(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zd={animationend:sy("Animation","AnimationEnd"),animationiteration:sy("Animation","AnimationIteration"),animationstart:sy("Animation","AnimationStart"),transitionend:sy("Transition","TransitionEnd")},xT={},YK={};fa&&(YK=document.createElement("div").style,"AnimationEvent"in window||(delete Zd.animationend.animation,delete Zd.animationiteration.animation,delete Zd.animationstart.animation),"TransitionEvent"in window||delete Zd.transitionend.transition);function rE(t){if(xT[t])return xT[t];if(!Zd[t])return t;var e=Zd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in YK)return xT[t]=e[n];return t}var QK=rE("animationend"),XK=rE("animationiteration"),ZK=rE("animationstart"),JK=rE("transitionend"),eq=new Map,t$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fc(t,e){eq.set(t,e),qu(e,[t])}for(var bT=0;bT<t$.length;bT++){var ST=t$[bT],Dfe=ST.toLowerCase(),Mfe=ST[0].toUpperCase()+ST.slice(1);fc(Dfe,"on"+Mfe)}fc(QK,"onAnimationEnd");fc(XK,"onAnimationIteration");fc(ZK,"onAnimationStart");fc("dblclick","onDoubleClick");fc("focusin","onFocus");fc("focusout","onBlur");fc(JK,"onTransitionEnd");nh("onMouseEnter",["mouseout","mouseover"]);nh("onMouseLeave",["mouseout","mouseover"]);nh("onPointerEnter",["pointerout","pointerover"]);nh("onPointerLeave",["pointerout","pointerover"]);qu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qu("onBeforeInput",["compositionend","keypress","textInput","paste"]);qu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$fe=new Set("cancel close invalid load scroll toggle".split(" ").concat(dm));function n$(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Dde(r,e,void 0,t),t.currentTarget=null}function tq(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;n$(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;n$(i,a,c),s=l}}}if(pb)throw t=OP,pb=!1,OP=null,t}function kt(t,e){var n=e[zP];n===void 0&&(n=e[zP]=new Set);var r=t+"__bubble";n.has(r)||(nq(e,t,2,!1),n.add(r))}function wT(t,e,n){var r=0;e&&(r|=4),nq(n,t,r,e)}var oy="_reactListening"+Math.random().toString(36).slice(2);function Rg(t){if(!t[oy]){t[oy]=!0,cK.forEach(function(n){n!=="selectionchange"&&($fe.has(n)||wT(n,!1,t),wT(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oy]||(e[oy]=!0,wT("selectionchange",!1,e))}}function nq(t,e,n,r){switch(jK(e)){case 1:var i=Qde;break;case 4:i=Xde;break;default:i=vO}n=i.bind(null,e,n,t),i=void 0,!RP||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ET(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Yc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}TK(function(){var c=s,u=hO(n),d=[];e:{var f=eq.get(t);if(f!==void 0){var h=xO,p=t;switch(t){case"keypress":if(rx(n)===0)break e;case"keydown":case"keyup":h=ffe;break;case"focusin":p="focus",h=gT;break;case"focusout":p="blur",h=gT;break;case"beforeblur":case"afterblur":h=gT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=H5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=efe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=mfe;break;case QK:case XK:case ZK:h=rfe;break;case JK:h=vfe;break;case"scroll":h=Zde;break;case"wheel":h=xfe;break;case"copy":case"cut":case"paste":h=sfe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=G5}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var x=c,S;x!==null;){S=x;var w=S.stateNode;if(S.tag===5&&w!==null&&(S=w,y!==null&&(w=Cg(x,y),w!=null&&m.push(Og(x,w,S)))),g)break;x=x.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==AP&&(p=n.relatedTarget||n.fromElement)&&(Yc(p)||p[ha]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Yc(p):null,p!==null&&(g=Yu(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=H5,w="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=G5,w="onPointerLeave",y="onPointerEnter",x="pointer"),g=h==null?f:Jd(h),S=p==null?f:Jd(p),f=new m(w,x+"leave",h,n,u),f.target=g,f.relatedTarget=S,w=null,Yc(u)===c&&(m=new m(y,x+"enter",p,n,u),m.target=S,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,x=0,S=m;S;S=gd(S))x++;for(S=0,w=y;w;w=gd(w))S++;for(;0<x-S;)m=gd(m),x--;for(;0<S-x;)y=gd(y),S--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=gd(m),y=gd(y)}m=null}else m=null;h!==null&&r$(d,f,h,m,!1),p!==null&&g!==null&&r$(d,g,p,m,!0)}}e:{if(f=c?Jd(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var E=Cfe;else if(Y5(f))if(WK)E=Afe;else{E=Pfe;var T=kfe}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=Ife);if(E&&(E=E(t,c))){HK(d,E,n,u);break e}T&&T(t,f,c),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&TP(f,"number",f.value)}switch(T=c?Jd(c):window,t){case"focusin":(Y5(T)||T.contentEditable==="true")&&(Xd=T,NP=c,Fm=null);break;case"focusout":Fm=NP=Xd=null;break;case"mousedown":FP=!0;break;case"contextmenu":case"mouseup":case"dragend":FP=!1,e$(d,n,u);break;case"selectionchange":if(Ofe)break;case"keydown":case"keyup":e$(d,n,u)}var _;if(SO)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Qd?VK(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(UK&&n.locale!=="ko"&&(Qd||I!=="onCompositionStart"?I==="onCompositionEnd"&&Qd&&(_=BK()):(xl=u,yO="value"in xl?xl.value:xl.textContent,Qd=!0)),T=xb(c,I),0<T.length&&(I=new W5(I,t,null,n,u),d.push({event:I,listeners:T}),_?I.data=_:(_=zK(n),_!==null&&(I.data=_)))),(_=Sfe?wfe(t,n):Efe(t,n))&&(c=xb(c,"onBeforeInput"),0<c.length&&(u=new W5("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=_))}tq(d,e)})}function Og(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xb(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cg(t,n),s!=null&&r.unshift(Og(t,s,i)),s=Cg(t,e),s!=null&&r.push(Og(t,s,i))),t=t.return}return r}function gd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function r$(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Cg(n,s),l!=null&&o.unshift(Og(n,l,a))):i||(l=Cg(n,s),l!=null&&o.push(Og(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Nfe=/\r\n?/g,Ffe=/\u0000|\uFFFD/g;function i$(t){return(typeof t=="string"?t:""+t).replace(Nfe,`
`).replace(Ffe,"")}function ay(t,e,n){if(e=i$(e),i$(t)!==e&&n)throw Error(ae(425))}function bb(){}var jP=null,BP=null;function UP(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var VP=typeof setTimeout=="function"?setTimeout:void 0,jfe=typeof clearTimeout=="function"?clearTimeout:void 0,s$=typeof Promise=="function"?Promise:void 0,Bfe=typeof queueMicrotask=="function"?queueMicrotask:typeof s$<"u"?function(t){return s$.resolve(null).then(t).catch(Ufe)}:VP;function Ufe(t){setTimeout(function(){throw t})}function _T(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ig(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ig(e)}function Ml(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function o$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wh=Math.random().toString(36).slice(2),ro="__reactFiber$"+Wh,Dg="__reactProps$"+Wh,ha="__reactContainer$"+Wh,zP="__reactEvents$"+Wh,Vfe="__reactListeners$"+Wh,zfe="__reactHandles$"+Wh;function Yc(t){var e=t[ro];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ha]||n[ro]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=o$(t);t!==null;){if(n=t[ro])return n;t=o$(t)}return e}t=n,n=t.parentNode}return null}function nv(t){return t=t[ro]||t[ha],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function iE(t){return t[Dg]||null}var HP=[],ef=-1;function hc(t){return{current:t}}function Ot(t){0>ef||(t.current=HP[ef],HP[ef]=null,ef--)}function wt(t,e){ef++,HP[ef]=t.current,t.current=e}var Jl={},lr=hc(Jl),zr=hc(!1),yu=Jl;function rh(t,e){var n=t.type.contextTypes;if(!n)return Jl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Hr(t){return t=t.childContextTypes,t!=null}function Sb(){Ot(zr),Ot(lr)}function a$(t,e,n){if(lr.current!==Jl)throw Error(ae(168));wt(lr,e),wt(zr,n)}function rq(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ae(108,kde(t)||"Unknown",i));return Qt({},n,r)}function wb(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jl,yu=lr.current,wt(lr,t),wt(zr,zr.current),!0}function l$(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=rq(t,e,yu),r.__reactInternalMemoizedMergedChildContext=t,Ot(zr),Ot(lr),wt(lr,t)):Ot(zr),wt(zr,n)}var qo=null,sE=!1,TT=!1;function iq(t){qo===null?qo=[t]:qo.push(t)}function Hfe(t){sE=!0,iq(t)}function pc(){if(!TT&&qo!==null){TT=!0;var t=0,e=ft;try{var n=qo;for(ft=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qo=null,sE=!1}catch(i){throw qo!==null&&(qo=qo.slice(t+1)),IK(pO,pc),i}finally{ft=e,TT=!1}}return null}var tf=[],nf=0,Eb=null,_b=0,Oi=[],Di=0,xu=null,Zo=1,Jo="";function $c(t,e){tf[nf++]=_b,tf[nf++]=Eb,Eb=t,_b=e}function sq(t,e,n){Oi[Di++]=Zo,Oi[Di++]=Jo,Oi[Di++]=xu,xu=t;var r=Zo;t=Jo;var i=32-Es(r)-1;r&=~(1<<i),n+=1;var s=32-Es(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zo=1<<32-Es(e)+i|n<<i|r,Jo=s+t}else Zo=1<<s|n<<i|r,Jo=t}function EO(t){t.return!==null&&($c(t,1),sq(t,1,0))}function _O(t){for(;t===Eb;)Eb=tf[--nf],tf[nf]=null,_b=tf[--nf],tf[nf]=null;for(;t===xu;)xu=Oi[--Di],Oi[Di]=null,Jo=Oi[--Di],Oi[Di]=null,Zo=Oi[--Di],Oi[Di]=null}var di=null,ci=null,Ft=!1,fs=null;function oq(t,e){var n=ji(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c$(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,di=t,ci=Ml(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,di=t,ci=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xu!==null?{id:Zo,overflow:Jo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ji(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,di=t,ci=null,!0):!1;default:return!1}}function WP(t){return(t.mode&1)!==0&&(t.flags&128)===0}function GP(t){if(Ft){var e=ci;if(e){var n=e;if(!c$(t,e)){if(WP(t))throw Error(ae(418));e=Ml(n.nextSibling);var r=di;e&&c$(t,e)?oq(r,n):(t.flags=t.flags&-4097|2,Ft=!1,di=t)}}else{if(WP(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Ft=!1,di=t}}}function u$(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;di=t}function ly(t){if(t!==di)return!1;if(!Ft)return u$(t),Ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!UP(t.type,t.memoizedProps)),e&&(e=ci)){if(WP(t))throw aq(),Error(ae(418));for(;e;)oq(t,e),e=Ml(e.nextSibling)}if(u$(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ci=Ml(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ci=null}}else ci=di?Ml(t.stateNode.nextSibling):null;return!0}function aq(){for(var t=ci;t;)t=Ml(t.nextSibling)}function ih(){ci=di=null,Ft=!1}function TO(t){fs===null?fs=[t]:fs.push(t)}var Wfe=ka.ReactCurrentBatchConfig;function kp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function cy(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function d$(t){var e=t._init;return e(t._payload)}function lq(t){function e(y,x){if(t){var S=y.deletions;S===null?(y.deletions=[x],y.flags|=16):S.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=jl(y,x),y.index=0,y.sibling=null,y}function s(y,x,S){return y.index=S,t?(S=y.alternate,S!==null?(S=S.index,S<x?(y.flags|=2,x):S):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,S,w){return x===null||x.tag!==6?(x=RT(S,y.mode,w),x.return=y,x):(x=i(x,S),x.return=y,x)}function l(y,x,S,w){var E=S.type;return E===Yd?u(y,x,S.props.children,w,S.key):x!==null&&(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===rl&&d$(E)===x.type)?(w=i(x,S.props),w.ref=kp(y,x,S),w.return=y,w):(w=ux(S.type,S.key,S.props,null,y.mode,w),w.ref=kp(y,x,S),w.return=y,w)}function c(y,x,S,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=OT(S,y.mode,w),x.return=y,x):(x=i(x,S.children||[]),x.return=y,x)}function u(y,x,S,w,E){return x===null||x.tag!==7?(x=cu(S,y.mode,w,E),x.return=y,x):(x=i(x,S),x.return=y,x)}function d(y,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=RT(""+x,y.mode,S),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zv:return S=ux(x.type,x.key,x.props,null,y.mode,S),S.ref=kp(y,null,x),S.return=y,S;case qd:return x=OT(x,y.mode,S),x.return=y,x;case rl:var w=x._init;return d(y,w(x._payload),S)}if(cm(x)||wp(x))return x=cu(x,y.mode,S,null),x.return=y,x;cy(y,x)}return null}function f(y,x,S,w){var E=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return E!==null?null:a(y,x,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zv:return S.key===E?l(y,x,S,w):null;case qd:return S.key===E?c(y,x,S,w):null;case rl:return E=S._init,f(y,x,E(S._payload),w)}if(cm(S)||wp(S))return E!==null?null:u(y,x,S,w,null);cy(y,S)}return null}function h(y,x,S,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(S)||null,a(x,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zv:return y=y.get(w.key===null?S:w.key)||null,l(x,y,w,E);case qd:return y=y.get(w.key===null?S:w.key)||null,c(x,y,w,E);case rl:var T=w._init;return h(y,x,S,T(w._payload),E)}if(cm(w)||wp(w))return y=y.get(S)||null,u(x,y,w,E,null);cy(x,w)}return null}function p(y,x,S,w){for(var E=null,T=null,_=x,I=x=0,A=null;_!==null&&I<S.length;I++){_.index>I?(A=_,_=null):A=_.sibling;var L=f(y,_,S[I],w);if(L===null){_===null&&(_=A);break}t&&_&&L.alternate===null&&e(y,_),x=s(L,x,I),T===null?E=L:T.sibling=L,T=L,_=A}if(I===S.length)return n(y,_),Ft&&$c(y,I),E;if(_===null){for(;I<S.length;I++)_=d(y,S[I],w),_!==null&&(x=s(_,x,I),T===null?E=_:T.sibling=_,T=_);return Ft&&$c(y,I),E}for(_=r(y,_);I<S.length;I++)A=h(_,y,I,S[I],w),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?I:A.key),x=s(A,x,I),T===null?E=A:T.sibling=A,T=A);return t&&_.forEach(function(j){return e(y,j)}),Ft&&$c(y,I),E}function m(y,x,S,w){var E=wp(S);if(typeof E!="function")throw Error(ae(150));if(S=E.call(S),S==null)throw Error(ae(151));for(var T=E=null,_=x,I=x=0,A=null,L=S.next();_!==null&&!L.done;I++,L=S.next()){_.index>I?(A=_,_=null):A=_.sibling;var j=f(y,_,L.value,w);if(j===null){_===null&&(_=A);break}t&&_&&j.alternate===null&&e(y,_),x=s(j,x,I),T===null?E=j:T.sibling=j,T=j,_=A}if(L.done)return n(y,_),Ft&&$c(y,I),E;if(_===null){for(;!L.done;I++,L=S.next())L=d(y,L.value,w),L!==null&&(x=s(L,x,I),T===null?E=L:T.sibling=L,T=L);return Ft&&$c(y,I),E}for(_=r(y,_);!L.done;I++,L=S.next())L=h(_,y,I,L.value,w),L!==null&&(t&&L.alternate!==null&&_.delete(L.key===null?I:L.key),x=s(L,x,I),T===null?E=L:T.sibling=L,T=L);return t&&_.forEach(function(D){return e(y,D)}),Ft&&$c(y,I),E}function g(y,x,S,w){if(typeof S=="object"&&S!==null&&S.type===Yd&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Zv:e:{for(var E=S.key,T=x;T!==null;){if(T.key===E){if(E=S.type,E===Yd){if(T.tag===7){n(y,T.sibling),x=i(T,S.props.children),x.return=y,y=x;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===rl&&d$(E)===T.type){n(y,T.sibling),x=i(T,S.props),x.ref=kp(y,T,S),x.return=y,y=x;break e}n(y,T);break}else e(y,T);T=T.sibling}S.type===Yd?(x=cu(S.props.children,y.mode,w,S.key),x.return=y,y=x):(w=ux(S.type,S.key,S.props,null,y.mode,w),w.ref=kp(y,x,S),w.return=y,y=w)}return o(y);case qd:e:{for(T=S.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(y,x.sibling),x=i(x,S.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=OT(S,y.mode,w),x.return=y,y=x}return o(y);case rl:return T=S._init,g(y,x,T(S._payload),w)}if(cm(S))return p(y,x,S,w);if(wp(S))return m(y,x,S,w);cy(y,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,S),x.return=y,y=x):(n(y,x),x=RT(S,y.mode,w),x.return=y,y=x),o(y)):n(y,x)}return g}var sh=lq(!0),cq=lq(!1),Tb=hc(null),Cb=null,rf=null,CO=null;function kO(){CO=rf=Cb=null}function PO(t){var e=Tb.current;Ot(Tb),t._currentValue=e}function KP(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rf(t,e){Cb=t,CO=rf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Br=!0),t.firstContext=null)}function Wi(t){var e=t._currentValue;if(CO!==t)if(t={context:t,memoizedValue:e,next:null},rf===null){if(Cb===null)throw Error(ae(308));rf=t,Cb.dependencies={lanes:0,firstContext:t}}else rf=rf.next=t;return e}var Qc=null;function IO(t){Qc===null?Qc=[t]:Qc.push(t)}function uq(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,IO(e)):(n.next=i.next,i.next=n),e.interleaved=n,pa(t,r)}function pa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var il=!1;function AO(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dq(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function aa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function $l(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pa(t,n)}return i=r.interleaved,i===null?(e.next=e,IO(r)):(e.next=i.next,i.next=e),r.interleaved=e,pa(t,n)}function ix(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mO(t,n)}}function f$(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kb(t,e,n,r){var i=t.updateQueue;il=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Qt({},d,f);break e;case 2:il=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Su|=o,t.lanes=o,t.memoizedState=d}}function h$(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var rv={},go=hc(rv),Mg=hc(rv),$g=hc(rv);function Xc(t){if(t===rv)throw Error(ae(174));return t}function LO(t,e){switch(wt($g,e),wt(Mg,t),wt(go,rv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kP(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kP(e,t)}Ot(go),wt(go,e)}function oh(){Ot(go),Ot(Mg),Ot($g)}function fq(t){Xc($g.current);var e=Xc(go.current),n=kP(e,t.type);e!==n&&(wt(Mg,t),wt(go,n))}function RO(t){Mg.current===t&&(Ot(go),Ot(Mg))}var Wt=hc(0);function Pb(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var CT=[];function OO(){for(var t=0;t<CT.length;t++)CT[t]._workInProgressVersionPrimary=null;CT.length=0}var sx=ka.ReactCurrentDispatcher,kT=ka.ReactCurrentBatchConfig,bu=0,Yt=null,En=null,Rn=null,Ib=!1,jm=!1,Ng=0,Gfe=0;function qn(){throw Error(ae(321))}function DO(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Is(t[n],e[n]))return!1;return!0}function MO(t,e,n,r,i,s){if(bu=s,Yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sx.current=t===null||t.memoizedState===null?Qfe:Xfe,t=n(r,i),jm){s=0;do{if(jm=!1,Ng=0,25<=s)throw Error(ae(301));s+=1,Rn=En=null,e.updateQueue=null,sx.current=Zfe,t=n(r,i)}while(jm)}if(sx.current=Ab,e=En!==null&&En.next!==null,bu=0,Rn=En=Yt=null,Ib=!1,e)throw Error(ae(300));return t}function $O(){var t=Ng!==0;return Ng=0,t}function Ys(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rn===null?Yt.memoizedState=Rn=t:Rn=Rn.next=t,Rn}function Gi(){if(En===null){var t=Yt.alternate;t=t!==null?t.memoizedState:null}else t=En.next;var e=Rn===null?Yt.memoizedState:Rn.next;if(e!==null)Rn=e,En=t;else{if(t===null)throw Error(ae(310));En=t,t={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Rn===null?Yt.memoizedState=Rn=t:Rn=Rn.next=t}return Rn}function Fg(t,e){return typeof e=="function"?e(t):e}function PT(t){var e=Gi(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=En,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((bu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Yt.lanes|=u,Su|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Is(r,e.memoizedState)||(Br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Yt.lanes|=s,Su|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function IT(t){var e=Gi(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Is(s,e.memoizedState)||(Br=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hq(){}function pq(t,e){var n=Yt,r=Gi(),i=e(),s=!Is(r.memoizedState,i);if(s&&(r.memoizedState=i,Br=!0),r=r.queue,NO(vq.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Rn!==null&&Rn.memoizedState.tag&1){if(n.flags|=2048,jg(9,gq.bind(null,n,r,i,e),void 0,null),Fn===null)throw Error(ae(349));bu&30||mq(n,e,i)}return i}function mq(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Yt.updateQueue,e===null?(e={lastEffect:null,stores:null},Yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gq(t,e,n,r){e.value=n,e.getSnapshot=r,yq(e)&&xq(t)}function vq(t,e,n){return n(function(){yq(e)&&xq(t)})}function yq(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Is(t,n)}catch{return!0}}function xq(t){var e=pa(t,1);e!==null&&_s(e,t,1,-1)}function p$(t){var e=Ys();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fg,lastRenderedState:t},e.queue=t,t=t.dispatch=Yfe.bind(null,Yt,t),[e.memoizedState,t]}function jg(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Yt.updateQueue,e===null?(e={lastEffect:null,stores:null},Yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bq(){return Gi().memoizedState}function ox(t,e,n,r){var i=Ys();Yt.flags|=t,i.memoizedState=jg(1|e,n,void 0,r===void 0?null:r)}function oE(t,e,n,r){var i=Gi();r=r===void 0?null:r;var s=void 0;if(En!==null){var o=En.memoizedState;if(s=o.destroy,r!==null&&DO(r,o.deps)){i.memoizedState=jg(e,n,s,r);return}}Yt.flags|=t,i.memoizedState=jg(1|e,n,s,r)}function m$(t,e){return ox(8390656,8,t,e)}function NO(t,e){return oE(2048,8,t,e)}function Sq(t,e){return oE(4,2,t,e)}function wq(t,e){return oE(4,4,t,e)}function Eq(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _q(t,e,n){return n=n!=null?n.concat([t]):null,oE(4,4,Eq.bind(null,e,t),n)}function FO(){}function Tq(t,e){var n=Gi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&DO(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cq(t,e){var n=Gi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&DO(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kq(t,e,n){return bu&21?(Is(n,e)||(n=RK(),Yt.lanes|=n,Su|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Br=!0),t.memoizedState=n)}function Kfe(t,e){var n=ft;ft=n!==0&&4>n?n:4,t(!0);var r=kT.transition;kT.transition={};try{t(!1),e()}finally{ft=n,kT.transition=r}}function Pq(){return Gi().memoizedState}function qfe(t,e,n){var r=Fl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Iq(t))Aq(e,n);else if(n=uq(t,e,n,r),n!==null){var i=Tr();_s(n,t,r,i),Lq(n,e,r)}}function Yfe(t,e,n){var r=Fl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Iq(t))Aq(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Is(a,o)){var l=e.interleaved;l===null?(i.next=i,IO(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=uq(t,e,i,r),n!==null&&(i=Tr(),_s(n,t,r,i),Lq(n,e,r))}}function Iq(t){var e=t.alternate;return t===Yt||e!==null&&e===Yt}function Aq(t,e){jm=Ib=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lq(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,mO(t,n)}}var Ab={readContext:Wi,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},Qfe={readContext:Wi,useCallback:function(t,e){return Ys().memoizedState=[t,e===void 0?null:e],t},useContext:Wi,useEffect:m$,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ox(4194308,4,Eq.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ox(4194308,4,t,e)},useInsertionEffect:function(t,e){return ox(4,2,t,e)},useMemo:function(t,e){var n=Ys();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ys();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=qfe.bind(null,Yt,t),[r.memoizedState,t]},useRef:function(t){var e=Ys();return t={current:t},e.memoizedState=t},useState:p$,useDebugValue:FO,useDeferredValue:function(t){return Ys().memoizedState=t},useTransition:function(){var t=p$(!1),e=t[0];return t=Kfe.bind(null,t[1]),Ys().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Yt,i=Ys();if(Ft){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Fn===null)throw Error(ae(349));bu&30||mq(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,m$(vq.bind(null,r,s,t),[t]),r.flags|=2048,jg(9,gq.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ys(),e=Fn.identifierPrefix;if(Ft){var n=Jo,r=Zo;n=(r&~(1<<32-Es(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ng++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Gfe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Xfe={readContext:Wi,useCallback:Tq,useContext:Wi,useEffect:NO,useImperativeHandle:_q,useInsertionEffect:Sq,useLayoutEffect:wq,useMemo:Cq,useReducer:PT,useRef:bq,useState:function(){return PT(Fg)},useDebugValue:FO,useDeferredValue:function(t){var e=Gi();return kq(e,En.memoizedState,t)},useTransition:function(){var t=PT(Fg)[0],e=Gi().memoizedState;return[t,e]},useMutableSource:hq,useSyncExternalStore:pq,useId:Pq,unstable_isNewReconciler:!1},Zfe={readContext:Wi,useCallback:Tq,useContext:Wi,useEffect:NO,useImperativeHandle:_q,useInsertionEffect:Sq,useLayoutEffect:wq,useMemo:Cq,useReducer:IT,useRef:bq,useState:function(){return IT(Fg)},useDebugValue:FO,useDeferredValue:function(t){var e=Gi();return En===null?e.memoizedState=t:kq(e,En.memoizedState,t)},useTransition:function(){var t=IT(Fg)[0],e=Gi().memoizedState;return[t,e]},useMutableSource:hq,useSyncExternalStore:pq,useId:Pq,unstable_isNewReconciler:!1};function ls(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qP(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var aE={isMounted:function(t){return(t=t._reactInternals)?Yu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tr(),i=Fl(t),s=aa(r,i);s.payload=e,n!=null&&(s.callback=n),e=$l(t,s,i),e!==null&&(_s(e,t,i,r),ix(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tr(),i=Fl(t),s=aa(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=$l(t,s,i),e!==null&&(_s(e,t,i,r),ix(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tr(),r=Fl(t),i=aa(n,r);i.tag=2,e!=null&&(i.callback=e),e=$l(t,i,r),e!==null&&(_s(e,t,r,n),ix(e,t,r))}};function g$(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Lg(n,r)||!Lg(i,s):!0}function Rq(t,e,n){var r=!1,i=Jl,s=e.contextType;return typeof s=="object"&&s!==null?s=Wi(s):(i=Hr(e)?yu:lr.current,r=e.contextTypes,s=(r=r!=null)?rh(t,i):Jl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=aE,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function v$(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&aE.enqueueReplaceState(e,e.state,null)}function YP(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},AO(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Wi(s):(s=Hr(e)?yu:lr.current,i.context=rh(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qP(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&aE.enqueueReplaceState(i,i.state,null),kb(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ah(t,e){try{var n="",r=e;do n+=Cde(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function AT(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function QP(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Jfe=typeof WeakMap=="function"?WeakMap:Map;function Oq(t,e,n){n=aa(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Rb||(Rb=!0,oI=r),QP(t,e)},n}function Dq(t,e,n){n=aa(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){QP(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){QP(t,e),typeof r!="function"&&(Nl===null?Nl=new Set([this]):Nl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function y$(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Jfe;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=hhe.bind(null,t,e,n),e.then(t,t))}function x$(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b$(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=aa(-1,1),e.tag=2,$l(n,e,1))),n.lanes|=1),t)}var ehe=ka.ReactCurrentOwner,Br=!1;function xr(t,e,n,r){e.child=t===null?cq(e,null,n,r):sh(e,t.child,n,r)}function S$(t,e,n,r,i){n=n.render;var s=e.ref;return Rf(e,i),r=MO(t,e,n,r,s,i),n=$O(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ma(t,e,i)):(Ft&&n&&EO(e),e.flags|=1,xr(t,e,r,i),e.child)}function w$(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!GO(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Mq(t,e,s,r,i)):(t=ux(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Lg,n(o,r)&&t.ref===e.ref)return ma(t,e,i)}return e.flags|=1,t=jl(s,r),t.ref=e.ref,t.return=e,e.child=t}function Mq(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Lg(s,r)&&t.ref===e.ref)if(Br=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Br=!0);else return e.lanes=t.lanes,ma(t,e,i)}return XP(t,e,n,r,i)}function $q(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(of,si),si|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wt(of,si),si|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,wt(of,si),si|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,wt(of,si),si|=r;return xr(t,e,i,n),e.child}function Nq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function XP(t,e,n,r,i){var s=Hr(n)?yu:lr.current;return s=rh(e,s),Rf(e,i),n=MO(t,e,n,r,s,i),r=$O(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ma(t,e,i)):(Ft&&r&&EO(e),e.flags|=1,xr(t,e,n,i),e.child)}function E$(t,e,n,r,i){if(Hr(n)){var s=!0;wb(e)}else s=!1;if(Rf(e,i),e.stateNode===null)ax(t,e),Rq(e,n,r),YP(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Wi(c):(c=Hr(n)?yu:lr.current,c=rh(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&v$(e,o,r,c),il=!1;var f=e.memoizedState;o.state=f,kb(e,r,o,i),l=e.memoizedState,a!==r||f!==l||zr.current||il?(typeof u=="function"&&(qP(e,n,u,r),l=e.memoizedState),(a=il||g$(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,dq(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ls(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Wi(l):(l=Hr(n)?yu:lr.current,l=rh(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&v$(e,o,r,l),il=!1,f=e.memoizedState,o.state=f,kb(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||zr.current||il?(typeof h=="function"&&(qP(e,n,h,r),p=e.memoizedState),(c=il||g$(e,n,c,r,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ZP(t,e,n,r,s,i)}function ZP(t,e,n,r,i,s){Nq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&l$(e,n,!1),ma(t,e,s);r=e.stateNode,ehe.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=sh(e,t.child,null,s),e.child=sh(e,null,a,s)):xr(t,e,a,s),e.memoizedState=r.state,i&&l$(e,n,!0),e.child}function Fq(t){var e=t.stateNode;e.pendingContext?a$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&a$(t,e.context,!1),LO(t,e.containerInfo)}function _$(t,e,n,r,i){return ih(),TO(i),e.flags|=256,xr(t,e,n,r),e.child}var JP={dehydrated:null,treeContext:null,retryLane:0};function eI(t){return{baseLanes:t,cachePool:null,transitions:null}}function jq(t,e,n){var r=e.pendingProps,i=Wt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),wt(Wt,i&1),t===null)return GP(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=uE(o,r,0,null),t=cu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=eI(n),e.memoizedState=JP,t):jO(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return the(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=jl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=jl(a,s):(s=cu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?eI(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=JP,r}return s=t.child,t=s.sibling,r=jl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jO(t,e){return e=uE({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uy(t,e,n,r){return r!==null&&TO(r),sh(e,t.child,null,n),t=jO(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function the(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=AT(Error(ae(422))),uy(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=uE({mode:"visible",children:r.children},i,0,null),s=cu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&sh(e,t.child,null,o),e.child.memoizedState=eI(o),e.memoizedState=JP,s);if(!(e.mode&1))return uy(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=AT(s,r,void 0),uy(t,e,o,r)}if(a=(o&t.childLanes)!==0,Br||a){if(r=Fn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pa(t,i),_s(r,t,i,-1))}return WO(),r=AT(Error(ae(421))),uy(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=phe.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ci=Ml(i.nextSibling),di=e,Ft=!0,fs=null,t!==null&&(Oi[Di++]=Zo,Oi[Di++]=Jo,Oi[Di++]=xu,Zo=t.id,Jo=t.overflow,xu=e),e=jO(e,r.children),e.flags|=4096,e)}function T$(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),KP(t.return,e,n)}function LT(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bq(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xr(t,e,r.children,n),r=Wt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&T$(t,n,e);else if(t.tag===19)T$(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(wt(Wt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Pb(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),LT(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Pb(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}LT(e,!0,n,null,s);break;case"together":LT(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ax(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ma(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Su|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=jl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nhe(t,e,n){switch(e.tag){case 3:Fq(e),ih();break;case 5:fq(e);break;case 1:Hr(e.type)&&wb(e);break;case 4:LO(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;wt(Tb,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wt(Wt,Wt.current&1),e.flags|=128,null):n&e.child.childLanes?jq(t,e,n):(wt(Wt,Wt.current&1),t=ma(t,e,n),t!==null?t.sibling:null);wt(Wt,Wt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Bq(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wt(Wt,Wt.current),r)break;return null;case 22:case 23:return e.lanes=0,$q(t,e,n)}return ma(t,e,n)}var Uq,tI,Vq,zq;Uq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tI=function(){};Vq=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Xc(go.current);var s=null;switch(n){case"input":i=EP(t,i),r=EP(t,r),s=[];break;case"select":i=Qt({},i,{value:void 0}),r=Qt({},r,{value:void 0}),s=[];break;case"textarea":i=CP(t,i),r=CP(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bb)}PP(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_g.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_g.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&kt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};zq=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pp(t,e){if(!Ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function rhe(t,e,n){var r=e.pendingProps;switch(_O(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yn(e),null;case 1:return Hr(e.type)&&Sb(),Yn(e),null;case 3:return r=e.stateNode,oh(),Ot(zr),Ot(lr),OO(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ly(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fs!==null&&(cI(fs),fs=null))),tI(t,e),Yn(e),null;case 5:RO(e);var i=Xc($g.current);if(n=e.type,t!==null&&e.stateNode!=null)Vq(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Yn(e),null}if(t=Xc(go.current),ly(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ro]=e,r[Dg]=s,t=(e.mode&1)!==0,n){case"dialog":kt("cancel",r),kt("close",r);break;case"iframe":case"object":case"embed":kt("load",r);break;case"video":case"audio":for(i=0;i<dm.length;i++)kt(dm[i],r);break;case"source":kt("error",r);break;case"img":case"image":case"link":kt("error",r),kt("load",r);break;case"details":kt("toggle",r);break;case"input":D5(r,s),kt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},kt("invalid",r);break;case"textarea":$5(r,s),kt("invalid",r)}PP(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ay(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ay(r.textContent,a,t),i=["children",""+a]):_g.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&kt("scroll",r)}switch(n){case"input":Jv(r),M5(r,s,!0);break;case"textarea":Jv(r),N5(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=bb)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vK(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ro]=e,t[Dg]=r,Uq(t,e,!1,!1),e.stateNode=t;e:{switch(o=IP(n,r),n){case"dialog":kt("cancel",t),kt("close",t),i=r;break;case"iframe":case"object":case"embed":kt("load",t),i=r;break;case"video":case"audio":for(i=0;i<dm.length;i++)kt(dm[i],t);i=r;break;case"source":kt("error",t),i=r;break;case"img":case"image":case"link":kt("error",t),kt("load",t),i=r;break;case"details":kt("toggle",t),i=r;break;case"input":D5(t,r),i=EP(t,r),kt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Qt({},r,{value:void 0}),kt("invalid",t);break;case"textarea":$5(t,r),i=CP(t,r),kt("invalid",t);break;default:i=r}PP(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?bK(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yK(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Tg(t,l):typeof l=="number"&&Tg(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_g.hasOwnProperty(s)?l!=null&&s==="onScroll"&&kt("scroll",t):l!=null&&cO(t,s,l,o))}switch(n){case"input":Jv(t),M5(t,r,!1);break;case"textarea":Jv(t),N5(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Pf(t,!!r.multiple,s,!1):r.defaultValue!=null&&Pf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=bb)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Yn(e),null;case 6:if(t&&e.stateNode!=null)zq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Xc($g.current),Xc(go.current),ly(e)){if(r=e.stateNode,n=e.memoizedProps,r[ro]=e,(s=r.nodeValue!==n)&&(t=di,t!==null))switch(t.tag){case 3:ay(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ay(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ro]=e,e.stateNode=r}return Yn(e),null;case 13:if(Ot(Wt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ft&&ci!==null&&e.mode&1&&!(e.flags&128))aq(),ih(),e.flags|=98560,s=!1;else if(s=ly(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[ro]=e}else ih(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Yn(e),s=!1}else fs!==null&&(cI(fs),fs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Wt.current&1?Tn===0&&(Tn=3):WO())),e.updateQueue!==null&&(e.flags|=4),Yn(e),null);case 4:return oh(),tI(t,e),t===null&&Rg(e.stateNode.containerInfo),Yn(e),null;case 10:return PO(e.type._context),Yn(e),null;case 17:return Hr(e.type)&&Sb(),Yn(e),null;case 19:if(Ot(Wt),s=e.memoizedState,s===null)return Yn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Pp(s,!1);else{if(Tn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pb(t),o!==null){for(e.flags|=128,Pp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return wt(Wt,Wt.current&1|2),e.child}t=t.sibling}s.tail!==null&&ln()>lh&&(e.flags|=128,r=!0,Pp(s,!1),e.lanes=4194304)}else{if(!r)if(t=Pb(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ft)return Yn(e),null}else 2*ln()-s.renderingStartTime>lh&&n!==1073741824&&(e.flags|=128,r=!0,Pp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ln(),e.sibling=null,n=Wt.current,wt(Wt,r?n&1|2:n&1),e):(Yn(e),null);case 22:case 23:return HO(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?si&1073741824&&(Yn(e),e.subtreeFlags&6&&(e.flags|=8192)):Yn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function ihe(t,e){switch(_O(e),e.tag){case 1:return Hr(e.type)&&Sb(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oh(),Ot(zr),Ot(lr),OO(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return RO(e),null;case 13:if(Ot(Wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));ih()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ot(Wt),null;case 4:return oh(),null;case 10:return PO(e.type._context),null;case 22:case 23:return HO(),null;case 24:return null;default:return null}}var dy=!1,tr=!1,she=typeof WeakSet=="function"?WeakSet:Set,ye=null;function sf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){en(t,e,r)}else n.current=null}function nI(t,e,n){try{n()}catch(r){en(t,e,r)}}var C$=!1;function ohe(t,e){if(jP=vb,t=qK(),wO(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(a=o),f===s&&++u===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(BP={focusedElem:t,selectionRange:n},vb=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ls(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(w){en(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return p=C$,C$=!1,p}function Bm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&nI(e,n,s)}i=i.next}while(i!==r)}}function lE(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rI(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Hq(t){var e=t.alternate;e!==null&&(t.alternate=null,Hq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ro],delete e[Dg],delete e[zP],delete e[Vfe],delete e[zfe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wq(t){return t.tag===5||t.tag===3||t.tag===4}function k$(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bb));else if(r!==4&&(t=t.child,t!==null))for(iI(t,e,n),t=t.sibling;t!==null;)iI(t,e,n),t=t.sibling}function sI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sI(t,e,n),t=t.sibling;t!==null;)sI(t,e,n),t=t.sibling}var Bn=null,ds=!1;function Ua(t,e,n){for(n=n.child;n!==null;)Gq(t,e,n),n=n.sibling}function Gq(t,e,n){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(eE,n)}catch{}switch(n.tag){case 5:tr||sf(n,e);case 6:var r=Bn,i=ds;Bn=null,Ua(t,e,n),Bn=r,ds=i,Bn!==null&&(ds?(t=Bn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(ds?(t=Bn,n=n.stateNode,t.nodeType===8?_T(t.parentNode,n):t.nodeType===1&&_T(t,n),Ig(t)):_T(Bn,n.stateNode));break;case 4:r=Bn,i=ds,Bn=n.stateNode.containerInfo,ds=!0,Ua(t,e,n),Bn=r,ds=i;break;case 0:case 11:case 14:case 15:if(!tr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nI(n,e,o),i=i.next}while(i!==r)}Ua(t,e,n);break;case 1:if(!tr&&(sf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){en(n,e,a)}Ua(t,e,n);break;case 21:Ua(t,e,n);break;case 22:n.mode&1?(tr=(r=tr)||n.memoizedState!==null,Ua(t,e,n),tr=r):Ua(t,e,n);break;default:Ua(t,e,n)}}function P$(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new she),e.forEach(function(r){var i=mhe.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function es(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bn=a.stateNode,ds=!1;break e;case 3:Bn=a.stateNode.containerInfo,ds=!0;break e;case 4:Bn=a.stateNode.containerInfo,ds=!0;break e}a=a.return}if(Bn===null)throw Error(ae(160));Gq(s,o,i),Bn=null,ds=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){en(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Kq(e,t),e=e.sibling}function Kq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(es(e,t),Us(t),r&4){try{Bm(3,t,t.return),lE(3,t)}catch(m){en(t,t.return,m)}try{Bm(5,t,t.return)}catch(m){en(t,t.return,m)}}break;case 1:es(e,t),Us(t),r&512&&n!==null&&sf(n,n.return);break;case 5:if(es(e,t),Us(t),r&512&&n!==null&&sf(n,n.return),t.flags&32){var i=t.stateNode;try{Tg(i,"")}catch(m){en(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&mK(i,s),IP(a,o);var c=IP(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?bK(i,d):u==="dangerouslySetInnerHTML"?yK(i,d):u==="children"?Tg(i,d):cO(i,u,d,c)}switch(a){case"input":_P(i,s);break;case"textarea":gK(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Pf(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Pf(i,!!s.multiple,s.defaultValue,!0):Pf(i,!!s.multiple,s.multiple?[]:"",!1))}i[Dg]=s}catch(m){en(t,t.return,m)}}break;case 6:if(es(e,t),Us(t),r&4){if(t.stateNode===null)throw Error(ae(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){en(t,t.return,m)}}break;case 3:if(es(e,t),Us(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ig(e.containerInfo)}catch(m){en(t,t.return,m)}break;case 4:es(e,t),Us(t);break;case 13:es(e,t),Us(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(VO=ln())),r&4&&P$(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(tr=(c=tr)||u,es(e,t),tr=c):es(e,t),Us(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ye=t,u=t.child;u!==null;){for(d=ye=u;ye!==null;){switch(f=ye,h=f.child,f.tag){case 0:case 11:case 14:case 15:Bm(4,f,f.return);break;case 1:sf(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){en(r,n,m)}}break;case 5:sf(f,f.return);break;case 22:if(f.memoizedState!==null){A$(d);continue}}h!==null?(h.return=f,ye=h):A$(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xK("display",o))}catch(m){en(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){en(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:es(e,t),Us(t),r&4&&P$(t);break;case 21:break;default:es(e,t),Us(t)}}function Us(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wq(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Tg(i,""),r.flags&=-33);var s=k$(t);sI(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=k$(t);iI(t,a,o);break;default:throw Error(ae(161))}}catch(l){en(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ahe(t,e,n){ye=t,qq(t)}function qq(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var i=ye,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||dy;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||tr;a=dy;var c=tr;if(dy=o,(tr=l)&&!c)for(ye=i;ye!==null;)o=ye,l=o.child,o.tag===22&&o.memoizedState!==null?L$(i):l!==null?(l.return=o,ye=l):L$(i);for(;s!==null;)ye=s,qq(s),s=s.sibling;ye=i,dy=a,tr=c}I$(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ye=s):I$(t)}}function I$(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||lE(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ls(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&h$(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}h$(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ig(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}tr||e.flags&512&&rI(e)}catch(f){en(e,e.return,f)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function A$(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function L$(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lE(4,e)}catch(l){en(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){en(e,i,l)}}var s=e.return;try{rI(e)}catch(l){en(e,s,l)}break;case 5:var o=e.return;try{rI(e)}catch(l){en(e,o,l)}}}catch(l){en(e,e.return,l)}if(e===t){ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ye=a;break}ye=e.return}}var lhe=Math.ceil,Lb=ka.ReactCurrentDispatcher,BO=ka.ReactCurrentOwner,zi=ka.ReactCurrentBatchConfig,tt=0,Fn=null,mn=null,Gn=0,si=0,of=hc(0),Tn=0,Bg=null,Su=0,cE=0,UO=0,Um=null,Fr=null,VO=0,lh=1/0,Vo=null,Rb=!1,oI=null,Nl=null,fy=!1,bl=null,Ob=0,Vm=0,aI=null,lx=-1,cx=0;function Tr(){return tt&6?ln():lx!==-1?lx:lx=ln()}function Fl(t){return t.mode&1?tt&2&&Gn!==0?Gn&-Gn:Wfe.transition!==null?(cx===0&&(cx=RK()),cx):(t=ft,t!==0||(t=window.event,t=t===void 0?16:jK(t.type)),t):1}function _s(t,e,n,r){if(50<Vm)throw Vm=0,aI=null,Error(ae(185));ev(t,n,r),(!(tt&2)||t!==Fn)&&(t===Fn&&(!(tt&2)&&(cE|=n),Tn===4&&ml(t,Gn)),Wr(t,r),n===1&&tt===0&&!(e.mode&1)&&(lh=ln()+500,sE&&pc()))}function Wr(t,e){var n=t.callbackNode;Wde(t,e);var r=gb(t,t===Fn?Gn:0);if(r===0)n!==null&&B5(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&B5(n),e===1)t.tag===0?Hfe(R$.bind(null,t)):iq(R$.bind(null,t)),Bfe(function(){!(tt&6)&&pc()}),n=null;else{switch(OK(r)){case 1:n=pO;break;case 4:n=AK;break;case 16:n=mb;break;case 536870912:n=LK;break;default:n=mb}n=nY(n,Yq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yq(t,e){if(lx=-1,cx=0,tt&6)throw Error(ae(327));var n=t.callbackNode;if(Of()&&t.callbackNode!==n)return null;var r=gb(t,t===Fn?Gn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Db(t,r);else{e=r;var i=tt;tt|=2;var s=Xq();(Fn!==t||Gn!==e)&&(Vo=null,lh=ln()+500,lu(t,e));do try{dhe();break}catch(a){Qq(t,a)}while(1);kO(),Lb.current=s,tt=i,mn!==null?e=0:(Fn=null,Gn=0,e=Tn)}if(e!==0){if(e===2&&(i=DP(t),i!==0&&(r=i,e=lI(t,i))),e===1)throw n=Bg,lu(t,0),ml(t,r),Wr(t,ln()),n;if(e===6)ml(t,r);else{if(i=t.current.alternate,!(r&30)&&!che(i)&&(e=Db(t,r),e===2&&(s=DP(t),s!==0&&(r=s,e=lI(t,s))),e===1))throw n=Bg,lu(t,0),ml(t,r),Wr(t,ln()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:Nc(t,Fr,Vo);break;case 3:if(ml(t,r),(r&130023424)===r&&(e=VO+500-ln(),10<e)){if(gb(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=VP(Nc.bind(null,t,Fr,Vo),e);break}Nc(t,Fr,Vo);break;case 4:if(ml(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Es(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ln()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lhe(r/1960))-r,10<r){t.timeoutHandle=VP(Nc.bind(null,t,Fr,Vo),r);break}Nc(t,Fr,Vo);break;case 5:Nc(t,Fr,Vo);break;default:throw Error(ae(329))}}}return Wr(t,ln()),t.callbackNode===n?Yq.bind(null,t):null}function lI(t,e){var n=Um;return t.current.memoizedState.isDehydrated&&(lu(t,e).flags|=256),t=Db(t,e),t!==2&&(e=Fr,Fr=n,e!==null&&cI(e)),t}function cI(t){Fr===null?Fr=t:Fr.push.apply(Fr,t)}function che(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Is(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ml(t,e){for(e&=~UO,e&=~cE,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Es(e),r=1<<n;t[n]=-1,e&=~r}}function R$(t){if(tt&6)throw Error(ae(327));Of();var e=gb(t,0);if(!(e&1))return Wr(t,ln()),null;var n=Db(t,e);if(t.tag!==0&&n===2){var r=DP(t);r!==0&&(e=r,n=lI(t,r))}if(n===1)throw n=Bg,lu(t,0),ml(t,e),Wr(t,ln()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nc(t,Fr,Vo),Wr(t,ln()),null}function zO(t,e){var n=tt;tt|=1;try{return t(e)}finally{tt=n,tt===0&&(lh=ln()+500,sE&&pc())}}function wu(t){bl!==null&&bl.tag===0&&!(tt&6)&&Of();var e=tt;tt|=1;var n=zi.transition,r=ft;try{if(zi.transition=null,ft=1,t)return t()}finally{ft=r,zi.transition=n,tt=e,!(tt&6)&&pc()}}function HO(){si=of.current,Ot(of)}function lu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jfe(n)),mn!==null)for(n=mn.return;n!==null;){var r=n;switch(_O(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sb();break;case 3:oh(),Ot(zr),Ot(lr),OO();break;case 5:RO(r);break;case 4:oh();break;case 13:Ot(Wt);break;case 19:Ot(Wt);break;case 10:PO(r.type._context);break;case 22:case 23:HO()}n=n.return}if(Fn=t,mn=t=jl(t.current,null),Gn=si=e,Tn=0,Bg=null,UO=cE=Su=0,Fr=Um=null,Qc!==null){for(e=0;e<Qc.length;e++)if(n=Qc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Qc=null}return t}function Qq(t,e){do{var n=mn;try{if(kO(),sx.current=Ab,Ib){for(var r=Yt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ib=!1}if(bu=0,Rn=En=Yt=null,jm=!1,Ng=0,BO.current=null,n===null||n.return===null){Tn=1,Bg=e,mn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Gn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=x$(o);if(h!==null){h.flags&=-257,b$(h,o,a,s,e),h.mode&1&&y$(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){y$(s,c,e),WO();break e}l=Error(ae(426))}}else if(Ft&&a.mode&1){var g=x$(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),b$(g,o,a,s,e),TO(ah(l,a));break e}}s=l=ah(l,a),Tn!==4&&(Tn=2),Um===null?Um=[s]:Um.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=Oq(s,l,e);f$(s,y);break e;case 1:a=l;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Nl===null||!Nl.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var w=Dq(s,a,e);f$(s,w);break e}}s=s.return}while(s!==null)}Jq(n)}catch(E){e=E,mn===n&&n!==null&&(mn=n=n.return);continue}break}while(1)}function Xq(){var t=Lb.current;return Lb.current=Ab,t===null?Ab:t}function WO(){(Tn===0||Tn===3||Tn===2)&&(Tn=4),Fn===null||!(Su&268435455)&&!(cE&268435455)||ml(Fn,Gn)}function Db(t,e){var n=tt;tt|=2;var r=Xq();(Fn!==t||Gn!==e)&&(Vo=null,lu(t,e));do try{uhe();break}catch(i){Qq(t,i)}while(1);if(kO(),tt=n,Lb.current=r,mn!==null)throw Error(ae(261));return Fn=null,Gn=0,Tn}function uhe(){for(;mn!==null;)Zq(mn)}function dhe(){for(;mn!==null&&!$de();)Zq(mn)}function Zq(t){var e=tY(t.alternate,t,si);t.memoizedProps=t.pendingProps,e===null?Jq(t):mn=e,BO.current=null}function Jq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ihe(n,e),n!==null){n.flags&=32767,mn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tn=6,mn=null;return}}else if(n=rhe(n,e,si),n!==null){mn=n;return}if(e=e.sibling,e!==null){mn=e;return}mn=e=t}while(e!==null);Tn===0&&(Tn=5)}function Nc(t,e,n){var r=ft,i=zi.transition;try{zi.transition=null,ft=1,fhe(t,e,n,r)}finally{zi.transition=i,ft=r}return null}function fhe(t,e,n,r){do Of();while(bl!==null);if(tt&6)throw Error(ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Gde(t,s),t===Fn&&(mn=Fn=null,Gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fy||(fy=!0,nY(mb,function(){return Of(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=zi.transition,zi.transition=null;var o=ft;ft=1;var a=tt;tt|=4,BO.current=null,ohe(t,n),Kq(n,t),Rfe(BP),vb=!!jP,BP=jP=null,t.current=n,ahe(n),Nde(),tt=a,ft=o,zi.transition=s}else t.current=n;if(fy&&(fy=!1,bl=t,Ob=i),s=t.pendingLanes,s===0&&(Nl=null),Bde(n.stateNode),Wr(t,ln()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Rb)throw Rb=!1,t=oI,oI=null,t;return Ob&1&&t.tag!==0&&Of(),s=t.pendingLanes,s&1?t===aI?Vm++:(Vm=0,aI=t):Vm=0,pc(),null}function Of(){if(bl!==null){var t=OK(Ob),e=zi.transition,n=ft;try{if(zi.transition=null,ft=16>t?16:t,bl===null)var r=!1;else{if(t=bl,bl=null,Ob=0,tt&6)throw Error(ae(331));var i=tt;for(tt|=4,ye=t.current;ye!==null;){var s=ye,o=s.child;if(ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ye=c;ye!==null;){var u=ye;switch(u.tag){case 0:case 11:case 15:Bm(8,u,s)}var d=u.child;if(d!==null)d.return=u,ye=d;else for(;ye!==null;){u=ye;var f=u.sibling,h=u.return;if(Hq(u),u===c){ye=null;break}if(f!==null){f.return=h,ye=f;break}ye=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ye=o;else e:for(;ye!==null;){if(s=ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bm(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,ye=y;break e}ye=s.return}}var x=t.current;for(ye=x;ye!==null;){o=ye;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ye=S;else e:for(o=x;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lE(9,a)}}catch(E){en(a,a.return,E)}if(a===o){ye=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,ye=w;break e}ye=a.return}}if(tt=i,pc(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(eE,t)}catch{}r=!0}return r}finally{ft=n,zi.transition=e}}return!1}function O$(t,e,n){e=ah(n,e),e=Oq(t,e,1),t=$l(t,e,1),e=Tr(),t!==null&&(ev(t,1,e),Wr(t,e))}function en(t,e,n){if(t.tag===3)O$(t,t,n);else for(;e!==null;){if(e.tag===3){O$(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nl===null||!Nl.has(r))){t=ah(n,t),t=Dq(e,t,1),e=$l(e,t,1),t=Tr(),e!==null&&(ev(e,1,t),Wr(e,t));break}}e=e.return}}function hhe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tr(),t.pingedLanes|=t.suspendedLanes&n,Fn===t&&(Gn&n)===n&&(Tn===4||Tn===3&&(Gn&130023424)===Gn&&500>ln()-VO?lu(t,0):UO|=n),Wr(t,e)}function eY(t,e){e===0&&(t.mode&1?(e=ny,ny<<=1,!(ny&130023424)&&(ny=4194304)):e=1);var n=Tr();t=pa(t,e),t!==null&&(ev(t,e,n),Wr(t,n))}function phe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eY(t,n)}function mhe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),eY(t,n)}var tY;tY=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zr.current)Br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Br=!1,nhe(t,e,n);Br=!!(t.flags&131072)}else Br=!1,Ft&&e.flags&1048576&&sq(e,_b,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ax(t,e),t=e.pendingProps;var i=rh(e,lr.current);Rf(e,n),i=MO(null,e,r,t,i,n);var s=$O();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hr(r)?(s=!0,wb(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,AO(e),i.updater=aE,e.stateNode=i,i._reactInternals=e,YP(e,r,t,n),e=ZP(null,e,r,!0,s,n)):(e.tag=0,Ft&&s&&EO(e),xr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ax(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=vhe(r),t=ls(r,t),i){case 0:e=XP(null,e,r,t,n);break e;case 1:e=E$(null,e,r,t,n);break e;case 11:e=S$(null,e,r,t,n);break e;case 14:e=w$(null,e,r,ls(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ls(r,i),XP(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ls(r,i),E$(t,e,r,i,n);case 3:e:{if(Fq(e),t===null)throw Error(ae(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dq(t,e),kb(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ah(Error(ae(423)),e),e=_$(t,e,r,n,i);break e}else if(r!==i){i=ah(Error(ae(424)),e),e=_$(t,e,r,n,i);break e}else for(ci=Ml(e.stateNode.containerInfo.firstChild),di=e,Ft=!0,fs=null,n=cq(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ih(),r===i){e=ma(t,e,n);break e}xr(t,e,r,n)}e=e.child}return e;case 5:return fq(e),t===null&&GP(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,UP(r,i)?o=null:s!==null&&UP(r,s)&&(e.flags|=32),Nq(t,e),xr(t,e,o,n),e.child;case 6:return t===null&&GP(e),null;case 13:return jq(t,e,n);case 4:return LO(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sh(e,null,r,n):xr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ls(r,i),S$(t,e,r,i,n);case 7:return xr(t,e,e.pendingProps,n),e.child;case 8:return xr(t,e,e.pendingProps.children,n),e.child;case 12:return xr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,wt(Tb,r._currentValue),r._currentValue=o,s!==null)if(Is(s.value,o)){if(s.children===i.children&&!zr.current){e=ma(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=aa(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),KP(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),KP(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rf(e,n),i=Wi(i),r=r(i),e.flags|=1,xr(t,e,r,n),e.child;case 14:return r=e.type,i=ls(r,e.pendingProps),i=ls(r.type,i),w$(t,e,r,i,n);case 15:return Mq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ls(r,i),ax(t,e),e.tag=1,Hr(r)?(t=!0,wb(e)):t=!1,Rf(e,n),Rq(e,r,i),YP(e,r,i,n),ZP(null,e,r,!0,t,n);case 19:return Bq(t,e,n);case 22:return $q(t,e,n)}throw Error(ae(156,e.tag))};function nY(t,e){return IK(t,e)}function ghe(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(t,e,n,r){return new ghe(t,e,n,r)}function GO(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vhe(t){if(typeof t=="function")return GO(t)?1:0;if(t!=null){if(t=t.$$typeof,t===dO)return 11;if(t===fO)return 14}return 2}function jl(t,e){var n=t.alternate;return n===null?(n=ji(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ux(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")GO(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yd:return cu(n.children,i,s,e);case uO:o=8,i|=8;break;case xP:return t=ji(12,n,e,i|2),t.elementType=xP,t.lanes=s,t;case bP:return t=ji(13,n,e,i),t.elementType=bP,t.lanes=s,t;case SP:return t=ji(19,n,e,i),t.elementType=SP,t.lanes=s,t;case fK:return uE(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case uK:o=10;break e;case dK:o=9;break e;case dO:o=11;break e;case fO:o=14;break e;case rl:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=ji(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function cu(t,e,n,r){return t=ji(7,t,r,e),t.lanes=n,t}function uE(t,e,n,r){return t=ji(22,t,r,e),t.elementType=fK,t.lanes=n,t.stateNode={isHidden:!1},t}function RT(t,e,n){return t=ji(6,t,null,e),t.lanes=n,t}function OT(t,e,n){return e=ji(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yhe(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hT(0),this.expirationTimes=hT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function KO(t,e,n,r,i,s,o,a,l){return t=new yhe(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ji(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},AO(s),t}function xhe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rY(t){if(!t)return Jl;t=t._reactInternals;e:{if(Yu(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Hr(n))return rq(t,n,e)}return e}function iY(t,e,n,r,i,s,o,a,l){return t=KO(n,r,!0,t,i,s,o,a,l),t.context=rY(null),n=t.current,r=Tr(),i=Fl(n),s=aa(r,i),s.callback=e??null,$l(n,s,i),t.current.lanes=i,ev(t,i,r),Wr(t,r),t}function dE(t,e,n,r){var i=e.current,s=Tr(),o=Fl(i);return n=rY(n),e.context===null?e.context=n:e.pendingContext=n,e=aa(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=$l(i,e,o),t!==null&&(_s(t,i,o,s),ix(t,i,o)),o}function Mb(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D$(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qO(t,e){D$(t,e),(t=t.alternate)&&D$(t,e)}function bhe(){return null}var sY=typeof reportError=="function"?reportError:function(t){console.error(t)};function YO(t){this._internalRoot=t}fE.prototype.render=YO.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));dE(t,e,null,null)};fE.prototype.unmount=YO.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wu(function(){dE(null,t,null,null)}),e[ha]=null}};function fE(t){this._internalRoot=t}fE.prototype.unstable_scheduleHydration=function(t){if(t){var e=$K();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pl.length&&e!==0&&e<pl[n].priority;n++);pl.splice(n,0,t),n===0&&FK(t)}};function QO(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M$(){}function She(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Mb(o);s.call(c)}}var o=iY(e,r,t,0,null,!1,!1,"",M$);return t._reactRootContainer=o,t[ha]=o.current,Rg(t.nodeType===8?t.parentNode:t),wu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Mb(l);a.call(c)}}var l=KO(t,0,!1,null,null,!1,!1,"",M$);return t._reactRootContainer=l,t[ha]=l.current,Rg(t.nodeType===8?t.parentNode:t),wu(function(){dE(e,l,n,r)}),l}function pE(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Mb(o);a.call(l)}}dE(e,o,t,i)}else o=She(n,e,t,i,r);return Mb(o)}DK=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=um(e.pendingLanes);n!==0&&(mO(e,n|1),Wr(e,ln()),!(tt&6)&&(lh=ln()+500,pc()))}break;case 13:wu(function(){var r=pa(t,1);if(r!==null){var i=Tr();_s(r,t,1,i)}}),qO(t,1)}};gO=function(t){if(t.tag===13){var e=pa(t,134217728);if(e!==null){var n=Tr();_s(e,t,134217728,n)}qO(t,134217728)}};MK=function(t){if(t.tag===13){var e=Fl(t),n=pa(t,e);if(n!==null){var r=Tr();_s(n,t,e,r)}qO(t,e)}};$K=function(){return ft};NK=function(t,e){var n=ft;try{return ft=t,e()}finally{ft=n}};LP=function(t,e,n){switch(e){case"input":if(_P(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=iE(r);if(!i)throw Error(ae(90));pK(r),_P(r,i)}}}break;case"textarea":gK(t,n);break;case"select":e=n.value,e!=null&&Pf(t,!!n.multiple,e,!1)}};EK=zO;_K=wu;var whe={usingClientEntryPoint:!1,Events:[nv,Jd,iE,SK,wK,zO]},Ip={findFiberByHostInstance:Yc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ehe={bundleType:Ip.bundleType,version:Ip.version,rendererPackageName:Ip.rendererPackageName,rendererConfig:Ip.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kK(t),t===null?null:t.stateNode},findFiberByHostInstance:Ip.findFiberByHostInstance||bhe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hy.isDisabled&&hy.supportsFiber)try{eE=hy.inject(Ehe),mo=hy}catch{}}yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=whe;yi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!QO(e))throw Error(ae(200));return xhe(t,e,null,n)};yi.createRoot=function(t,e){if(!QO(t))throw Error(ae(299));var n=!1,r="",i=sY;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=KO(t,1,!1,null,null,n,!1,r,i),t[ha]=e.current,Rg(t.nodeType===8?t.parentNode:t),new YO(e)};yi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=kK(e),t=t===null?null:t.stateNode,t};yi.flushSync=function(t){return wu(t)};yi.hydrate=function(t,e,n){if(!hE(e))throw Error(ae(200));return pE(null,t,e,!0,n)};yi.hydrateRoot=function(t,e,n){if(!QO(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sY;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iY(e,null,t,1,n??null,i,!1,s,o),t[ha]=e.current,Rg(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new fE(e)};yi.render=function(t,e,n){if(!hE(e))throw Error(ae(200));return pE(null,t,e,!1,n)};yi.unmountComponentAtNode=function(t){if(!hE(t))throw Error(ae(40));return t._reactRootContainer?(wu(function(){pE(null,null,t,!1,function(){t._reactRootContainer=null,t[ha]=null})}),!0):!1};yi.unstable_batchedUpdates=zO;yi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hE(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return pE(t,e,n,!1,r)};yi.version="18.3.1-next-f1338f8080-20240426";function oY(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oY)}catch(t){console.error(t)}}oY(),oK.exports=yi;var Yr=oK.exports;const XO=Ku(Yr);var $$=Yr;vP.createRoot=$$.createRoot,vP.hydrateRoot=$$.hydrateRoot;function uI(t,e){return uI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},uI(t,e)}function Gh(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,uI(t,e)}var Kh=function(){function t(){this.listeners=[]}var e=t.prototype;return e.subscribe=function(r){var i=this,s=r||function(){};return this.listeners.push(s),this.onSubscribe(),function(){i.listeners=i.listeners.filter(function(o){return o!==s}),i.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},t}();function be(){return be=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},be.apply(null,arguments)}var $b=typeof window>"u";function Un(){}function _he(t,e){return typeof t=="function"?t(e):t}function dI(t){return typeof t=="number"&&t>=0&&t!==1/0}function Nb(t){return Array.isArray(t)?t:[t]}function aY(t,e){return Math.max(t+(e||0)-Date.now(),0)}function dx(t,e,n){return iv(t)?typeof e=="function"?be({},n,{queryKey:t,queryFn:e}):be({},e,{queryKey:t}):t}function The(t,e,n){return iv(t)?typeof e=="function"?be({},n,{mutationKey:t,mutationFn:e}):be({},e,{mutationKey:t}):typeof t=="function"?be({},e,{mutationFn:t}):be({},t)}function sl(t,e,n){return iv(t)?[be({},e,{queryKey:t}),n]:[t||{},e]}function Che(t,e){if(t===!0&&e===!0||t==null&&e==null)return"all";if(t===!1&&e===!1)return"none";var n=t??!e;return n?"active":"inactive"}function N$(t,e){var n=t.active,r=t.exact,i=t.fetching,s=t.inactive,o=t.predicate,a=t.queryKey,l=t.stale;if(iv(a)){if(r){if(e.queryHash!==ZO(a,e.options))return!1}else if(!Fb(e.queryKey,a))return!1}var c=Che(n,s);if(c==="none")return!1;if(c!=="all"){var u=e.isActive();if(c==="active"&&!u||c==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof i=="boolean"&&e.isFetching()!==i||o&&!o(e))}function F$(t,e){var n=t.exact,r=t.fetching,i=t.predicate,s=t.mutationKey;if(iv(s)){if(!e.options.mutationKey)return!1;if(n){if(Zc(e.options.mutationKey)!==Zc(s))return!1}else if(!Fb(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function ZO(t,e){var n=(e==null?void 0:e.queryKeyHashFn)||Zc;return n(t)}function Zc(t){var e=Nb(t);return khe(e)}function khe(t){return JSON.stringify(t,function(e,n){return fI(n)?Object.keys(n).sort().reduce(function(r,i){return r[i]=n[i],r},{}):n})}function Fb(t,e){return lY(Nb(t),Nb(e))}function lY(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(function(n){return!lY(t[n],e[n])}):!1}function jb(t,e){if(t===e)return t;var n=Array.isArray(t)&&Array.isArray(e);if(n||fI(t)&&fI(e)){for(var r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,o=n?[]:{},a=0,l=0;l<s;l++){var c=n?l:i[l];o[c]=jb(t[c],e[c]),o[c]===t[c]&&a++}return r===s&&a===r?t:o}return e}function Phe(t,e){if(t&&!e||e&&!t)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}function fI(t){if(!j$(t))return!1;var e=t.constructor;if(typeof e>"u")return!0;var n=e.prototype;return!(!j$(n)||!n.hasOwnProperty("isPrototypeOf"))}function j$(t){return Object.prototype.toString.call(t)==="[object Object]"}function iv(t){return typeof t=="string"||Array.isArray(t)}function Ihe(t){return new Promise(function(e){setTimeout(e,t)})}function B$(t){Promise.resolve().then(t).catch(function(e){return setTimeout(function(){throw e})})}function cY(){if(typeof AbortController=="function")return new AbortController}var Ahe=function(t){Gh(e,t);function e(){var r;return r=t.call(this)||this,r.setup=function(i){var s;if(!$b&&((s=window)!=null&&s.addEventListener)){var o=function(){return i()};return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}},r}var n=e.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},n.setEventListener=function(i){var s,o=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(a){typeof a=="boolean"?o.setFocused(a):o.onFocus()})},n.setFocused=function(i){this.focused=i,i&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(i){i()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(Kh),zm=new Ahe,Lhe=function(t){Gh(e,t);function e(){var r;return r=t.call(this)||this,r.setup=function(i){var s;if(!$b&&((s=window)!=null&&s.addEventListener)){var o=function(){return i()};return window.addEventListener("online",o,!1),window.addEventListener("offline",o,!1),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}}},r}var n=e.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},n.setEventListener=function(i){var s,o=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(a){typeof a=="boolean"?o.setOnline(a):o.onOnline()})},n.setOnline=function(i){this.online=i,i&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(i){i()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(Kh),fx=new Lhe;function Rhe(t){return Math.min(1e3*Math.pow(2,t),3e4)}function Bb(t){return typeof(t==null?void 0:t.cancel)=="function"}var uY=function(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent};function hx(t){return t instanceof uY}var dY=function(e){var n=this,r=!1,i,s,o,a;this.abort=e.abort,this.cancel=function(f){return i==null?void 0:i(f)},this.cancelRetry=function(){r=!0},this.continueRetry=function(){r=!1},this.continue=function(){return s==null?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(f,h){o=f,a=h});var l=function(h){n.isResolved||(n.isResolved=!0,e.onSuccess==null||e.onSuccess(h),s==null||s(),o(h))},c=function(h){n.isResolved||(n.isResolved=!0,e.onError==null||e.onError(h),s==null||s(),a(h))},u=function(){return new Promise(function(h){s=h,n.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){s=void 0,n.isPaused=!1,e.onContinue==null||e.onContinue()})},d=function f(){if(!n.isResolved){var h;try{h=e.fn()}catch(p){h=Promise.reject(p)}i=function(m){if(!n.isResolved&&(c(new uY(m)),n.abort==null||n.abort(),Bb(h)))try{h.cancel()}catch{}},n.isTransportCancelable=Bb(h),Promise.resolve(h).then(l).catch(function(p){var m,g;if(!n.isResolved){var y=(m=e.retry)!=null?m:3,x=(g=e.retryDelay)!=null?g:Rhe,S=typeof x=="function"?x(n.failureCount,p):x,w=y===!0||typeof y=="number"&&n.failureCount<y||typeof y=="function"&&y(n.failureCount,p);if(r||!w){c(p);return}n.failureCount++,e.onFail==null||e.onFail(n.failureCount,p),Ihe(S).then(function(){if(!zm.isFocused()||!fx.isOnline())return u()}).then(function(){r?c(p):f()})}})}};d()},Ohe=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var e=t.prototype;return e.batch=function(r){var i;this.transactions++;try{i=r()}finally{this.transactions--,this.transactions||this.flush()}return i},e.schedule=function(r){var i=this;this.transactions?this.queue.push(r):B$(function(){i.notifyFn(r)})},e.batchCalls=function(r){var i=this;return function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];i.schedule(function(){r.apply(void 0,o)})}},e.flush=function(){var r=this,i=this.queue;this.queue=[],i.length&&B$(function(){r.batchNotifyFn(function(){i.forEach(function(s){r.notifyFn(s)})})})},e.setNotifyFunction=function(r){this.notifyFn=r},e.setBatchNotifyFunction=function(r){this.batchNotifyFn=r},t}(),Nt=new Ohe,fY=console;function Ub(){return fY}function Dhe(t){fY=t}var Mhe=function(){function t(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var e=t.prototype;return e.setOptions=function(r){var i;this.options=be({},this.defaultOptions,r),this.meta=r==null?void 0:r.meta,this.cacheTime=Math.max(this.cacheTime||0,(i=this.options.cacheTime)!=null?i:5*60*1e3)},e.setDefaultOptions=function(r){this.defaultOptions=r},e.scheduleGc=function(){var r=this;this.clearGcTimeout(),dI(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){r.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(r,i){var s,o,a=this.state.data,l=_he(r,a);return(s=(o=this.options).isDataEqual)!=null&&s.call(o,a,l)?l=a:this.options.structuralSharing!==!1&&(l=jb(a,l)),this.dispatch({data:l,type:"success",dataUpdatedAt:i==null?void 0:i.updatedAt}),l},e.setState=function(r,i){this.dispatch({type:"setState",state:r,setStateOptions:i})},e.cancel=function(r){var i,s=this.promise;return(i=this.retryer)==null||i.cancel(r),s?s.then(Un).catch(Un):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(r){return r.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(r){return r.getCurrentResult().isStale})},e.isStaleByTime=function(r){return r===void 0&&(r=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!aY(this.state.dataUpdatedAt,r)},e.onFocus=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnWindowFocus()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},e.onOnline=function(){var r,i=this.observers.find(function(s){return s.shouldFetchOnReconnect()});i&&i.refetch(),(r=this.retryer)==null||r.continue()},e.addObserver=function(r){this.observers.indexOf(r)===-1&&(this.observers.push(r),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:r}))},e.removeObserver=function(r){this.observers.indexOf(r)!==-1&&(this.observers=this.observers.filter(function(i){return i!==r}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:r}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(r,i){var s=this,o,a,l;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(i!=null&&i.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(r&&this.setOptions(r),!this.options.queryFn){var u=this.observers.find(function(x){return x.options.queryFn});u&&this.setOptions(u.options)}var d=Nb(this.queryKey),f=cY(),h={queryKey:d,pageParam:void 0,meta:this.meta};Object.defineProperty(h,"signal",{enumerable:!0,get:function(){if(f)return s.abortSignalConsumed=!0,f.signal}});var p=function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(h)):Promise.reject("Missing queryFn")},m={fetchOptions:i,options:this.options,queryKey:d,state:this.state,fetchFn:p,meta:this.meta};if((o=this.options.behavior)!=null&&o.onFetch){var g;(g=this.options.behavior)==null||g.onFetch(m)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((a=m.fetchOptions)==null?void 0:a.meta)){var y;this.dispatch({type:"fetch",meta:(y=m.fetchOptions)==null?void 0:y.meta})}return this.retryer=new dY({fn:m.fetchFn,abort:f==null||(l=f.abort)==null?void 0:l.bind(f),onSuccess:function(S){s.setData(S),s.cache.config.onSuccess==null||s.cache.config.onSuccess(S,s),s.cacheTime===0&&s.optionalRemove()},onError:function(S){hx(S)&&S.silent||s.dispatch({type:"error",error:S}),hx(S)||(s.cache.config.onError==null||s.cache.config.onError(S,s),Ub().error(S)),s.cacheTime===0&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(r){var i=this;this.state=this.reducer(this.state,r),Nt.batch(function(){i.observers.forEach(function(s){s.onQueryUpdate(r)}),i.cache.notify({query:i,type:"queryUpdated",action:r})})},e.getDefaultState=function(r){var i=typeof r.initialData=="function"?r.initialData():r.initialData,s=typeof r.initialData<"u",o=s?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0,a=typeof i<"u";return{data:i,dataUpdateCount:0,dataUpdatedAt:a?o??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:a?"success":"idle"}},e.reducer=function(r,i){var s,o;switch(i.type){case"failed":return be({},r,{fetchFailureCount:r.fetchFailureCount+1});case"pause":return be({},r,{isPaused:!0});case"continue":return be({},r,{isPaused:!1});case"fetch":return be({},r,{fetchFailureCount:0,fetchMeta:(s=i.meta)!=null?s:null,isFetching:!0,isPaused:!1},!r.dataUpdatedAt&&{error:null,status:"loading"});case"success":return be({},r,{data:i.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(o=i.dataUpdatedAt)!=null?o:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=i.error;return hx(a)&&a.revert&&this.revertState?be({},this.revertState):be({},r,{error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return be({},r,{isInvalidated:!0});case"setState":return be({},r,i.state);default:return r}},t}(),$he=function(t){Gh(e,t);function e(r){var i;return i=t.call(this)||this,i.config=r||{},i.queries=[],i.queriesMap={},i}var n=e.prototype;return n.build=function(i,s,o){var a,l=s.queryKey,c=(a=s.queryHash)!=null?a:ZO(l,s),u=this.get(c);return u||(u=new Mhe({cache:this,queryKey:l,queryHash:c,options:i.defaultQueryOptions(s),state:o,defaultOptions:i.getQueryDefaults(l),meta:s.meta}),this.add(u)),u},n.add=function(i){this.queriesMap[i.queryHash]||(this.queriesMap[i.queryHash]=i,this.queries.push(i),this.notify({type:"queryAdded",query:i}))},n.remove=function(i){var s=this.queriesMap[i.queryHash];s&&(i.destroy(),this.queries=this.queries.filter(function(o){return o!==i}),s===i&&delete this.queriesMap[i.queryHash],this.notify({type:"queryRemoved",query:i}))},n.clear=function(){var i=this;Nt.batch(function(){i.queries.forEach(function(s){i.remove(s)})})},n.get=function(i){return this.queriesMap[i]},n.getAll=function(){return this.queries},n.find=function(i,s){var o=sl(i,s),a=o[0];return typeof a.exact>"u"&&(a.exact=!0),this.queries.find(function(l){return N$(a,l)})},n.findAll=function(i,s){var o=sl(i,s),a=o[0];return Object.keys(a).length>0?this.queries.filter(function(l){return N$(a,l)}):this.queries},n.notify=function(i){var s=this;Nt.batch(function(){s.listeners.forEach(function(o){o(i)})})},n.onFocus=function(){var i=this;Nt.batch(function(){i.queries.forEach(function(s){s.onFocus()})})},n.onOnline=function(){var i=this;Nt.batch(function(){i.queries.forEach(function(s){s.onOnline()})})},e}(Kh),Nhe=function(){function t(n){this.options=be({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||hY(),this.meta=n.meta}var e=t.prototype;return e.setState=function(r){this.dispatch({type:"setState",state:r})},e.addObserver=function(r){this.observers.indexOf(r)===-1&&this.observers.push(r)},e.removeObserver=function(r){this.observers=this.observers.filter(function(i){return i!==r})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Un).catch(Un)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var r=this,i,s=this.state.status==="loading",o=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),o=o.then(function(){r.mutationCache.config.onMutate==null||r.mutationCache.config.onMutate(r.state.variables,r)}).then(function(){return r.options.onMutate==null?void 0:r.options.onMutate(r.state.variables)}).then(function(a){a!==r.state.context&&r.dispatch({type:"loading",context:a,variables:r.state.variables})})),o.then(function(){return r.executeMutation()}).then(function(a){i=a,r.mutationCache.config.onSuccess==null||r.mutationCache.config.onSuccess(i,r.state.variables,r.state.context,r)}).then(function(){return r.options.onSuccess==null?void 0:r.options.onSuccess(i,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(i,null,r.state.variables,r.state.context)}).then(function(){return r.dispatch({type:"success",data:i}),i}).catch(function(a){return r.mutationCache.config.onError==null||r.mutationCache.config.onError(a,r.state.variables,r.state.context,r),Ub().error(a),Promise.resolve().then(function(){return r.options.onError==null?void 0:r.options.onError(a,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(void 0,a,r.state.variables,r.state.context)}).then(function(){throw r.dispatch({type:"error",error:a}),a})})},e.executeMutation=function(){var r=this,i;return this.retryer=new dY({fn:function(){return r.options.mutationFn?r.options.mutationFn(r.state.variables):Promise.reject("No mutationFn found")},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(r){var i=this;this.state=Fhe(this.state,r),Nt.batch(function(){i.observers.forEach(function(s){s.onMutationUpdate(r)}),i.mutationCache.notify(i)})},t}();function hY(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Fhe(t,e){switch(e.type){case"failed":return be({},t,{failureCount:t.failureCount+1});case"pause":return be({},t,{isPaused:!0});case"continue":return be({},t,{isPaused:!1});case"loading":return be({},t,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return be({},t,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return be({},t,{data:void 0,error:e.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return be({},t,e.state);default:return t}}var jhe=function(t){Gh(e,t);function e(r){var i;return i=t.call(this)||this,i.config=r||{},i.mutations=[],i.mutationId=0,i}var n=e.prototype;return n.build=function(i,s,o){var a=new Nhe({mutationCache:this,mutationId:++this.mutationId,options:i.defaultMutationOptions(s),state:o,defaultOptions:s.mutationKey?i.getMutationDefaults(s.mutationKey):void 0,meta:s.meta});return this.add(a),a},n.add=function(i){this.mutations.push(i),this.notify(i)},n.remove=function(i){this.mutations=this.mutations.filter(function(s){return s!==i}),i.cancel(),this.notify(i)},n.clear=function(){var i=this;Nt.batch(function(){i.mutations.forEach(function(s){i.remove(s)})})},n.getAll=function(){return this.mutations},n.find=function(i){return typeof i.exact>"u"&&(i.exact=!0),this.mutations.find(function(s){return F$(i,s)})},n.findAll=function(i){return this.mutations.filter(function(s){return F$(i,s)})},n.notify=function(i){var s=this;Nt.batch(function(){s.listeners.forEach(function(o){o(i)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var i=this.mutations.filter(function(s){return s.state.isPaused});return Nt.batch(function(){return i.reduce(function(s,o){return s.then(function(){return o.continue().catch(Un)})},Promise.resolve())})},e}(Kh);function Bhe(){return{onFetch:function(e){e.fetchFn=function(){var n,r,i,s,o,a,l=(n=e.fetchOptions)==null||(r=n.meta)==null?void 0:r.refetchPage,c=(i=e.fetchOptions)==null||(s=i.meta)==null?void 0:s.fetchMore,u=c==null?void 0:c.pageParam,d=(c==null?void 0:c.direction)==="forward",f=(c==null?void 0:c.direction)==="backward",h=((o=e.state.data)==null?void 0:o.pages)||[],p=((a=e.state.data)==null?void 0:a.pageParams)||[],m=cY(),g=m==null?void 0:m.signal,y=p,x=!1,S=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},w=function($,R,C,P){return y=P?[R].concat(y):[].concat(y,[R]),P?[C].concat($):[].concat($,[C])},E=function($,R,C,P){if(x)return Promise.reject("Cancelled");if(typeof C>"u"&&!R&&$.length)return Promise.resolve($);var k={queryKey:e.queryKey,signal:g,pageParam:C,meta:e.meta},M=S(k),B=Promise.resolve(M).then(function(V){return w($,C,V,P)});if(Bb(M)){var N=B;N.cancel=M.cancel}return B},T;if(!h.length)T=E([]);else if(d){var _=typeof u<"u",I=_?u:U$(e.options,h);T=E(h,_,I)}else if(f){var A=typeof u<"u",L=A?u:Uhe(e.options,h);T=E(h,A,L,!0)}else(function(){y=[];var O=typeof e.options.getNextPageParam>"u",$=l&&h[0]?l(h[0],0,h):!0;T=$?E([],O,p[0]):Promise.resolve(w([],p[0],h[0]));for(var R=function(k){T=T.then(function(M){var B=l&&h[k]?l(h[k],k,h):!0;if(B){var N=O?p[k]:U$(e.options,M);return E(M,O,N)}return Promise.resolve(w(M,p[k],h[k]))})},C=1;C<h.length;C++)R(C)})();var j=T.then(function(O){return{pages:O,pageParams:y}}),D=j;return D.cancel=function(){x=!0,m==null||m.abort(),Bb(T)&&T.cancel()},j}}}}function U$(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function Uhe(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}var Vhe=function(){function t(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new $he,this.mutationCache=n.mutationCache||new jhe,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=t.prototype;return e.mount=function(){var r=this;this.unsubscribeFocus=zm.subscribe(function(){zm.isFocused()&&fx.isOnline()&&(r.mutationCache.onFocus(),r.queryCache.onFocus())}),this.unsubscribeOnline=fx.subscribe(function(){zm.isFocused()&&fx.isOnline()&&(r.mutationCache.onOnline(),r.queryCache.onOnline())})},e.unmount=function(){var r,i;(r=this.unsubscribeFocus)==null||r.call(this),(i=this.unsubscribeOnline)==null||i.call(this)},e.isFetching=function(r,i){var s=sl(r,i),o=s[0];return o.fetching=!0,this.queryCache.findAll(o).length},e.isMutating=function(r){return this.mutationCache.findAll(be({},r,{fetching:!0})).length},e.getQueryData=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state.data},e.getQueriesData=function(r){return this.getQueryCache().findAll(r).map(function(i){var s=i.queryKey,o=i.state,a=o.data;return[s,a]})},e.setQueryData=function(r,i,s){var o=dx(r),a=this.defaultQueryOptions(o);return this.queryCache.build(this,a).setData(i,s)},e.setQueriesData=function(r,i,s){var o=this;return Nt.batch(function(){return o.getQueryCache().findAll(r).map(function(a){var l=a.queryKey;return[l,o.setQueryData(l,i,s)]})})},e.getQueryState=function(r,i){var s;return(s=this.queryCache.find(r,i))==null?void 0:s.state},e.removeQueries=function(r,i){var s=sl(r,i),o=s[0],a=this.queryCache;Nt.batch(function(){a.findAll(o).forEach(function(l){a.remove(l)})})},e.resetQueries=function(r,i,s){var o=this,a=sl(r,i,s),l=a[0],c=a[1],u=this.queryCache,d=be({},l,{active:!0});return Nt.batch(function(){return u.findAll(l).forEach(function(f){f.reset()}),o.refetchQueries(d,c)})},e.cancelQueries=function(r,i,s){var o=this,a=sl(r,i,s),l=a[0],c=a[1],u=c===void 0?{}:c;typeof u.revert>"u"&&(u.revert=!0);var d=Nt.batch(function(){return o.queryCache.findAll(l).map(function(f){return f.cancel(u)})});return Promise.all(d).then(Un).catch(Un)},e.invalidateQueries=function(r,i,s){var o,a,l,c=this,u=sl(r,i,s),d=u[0],f=u[1],h=be({},d,{active:(o=(a=d.refetchActive)!=null?a:d.active)!=null?o:!0,inactive:(l=d.refetchInactive)!=null?l:!1});return Nt.batch(function(){return c.queryCache.findAll(d).forEach(function(p){p.invalidate()}),c.refetchQueries(h,f)})},e.refetchQueries=function(r,i,s){var o=this,a=sl(r,i,s),l=a[0],c=a[1],u=Nt.batch(function(){return o.queryCache.findAll(l).map(function(f){return f.fetch(void 0,be({},c,{meta:{refetchPage:l==null?void 0:l.refetchPage}}))})}),d=Promise.all(u).then(Un);return c!=null&&c.throwOnError||(d=d.catch(Un)),d},e.fetchQuery=function(r,i,s){var o=dx(r,i,s),a=this.defaultQueryOptions(o);typeof a.retry>"u"&&(a.retry=!1);var l=this.queryCache.build(this,a);return l.isStaleByTime(a.staleTime)?l.fetch(a):Promise.resolve(l.state.data)},e.prefetchQuery=function(r,i,s){return this.fetchQuery(r,i,s).then(Un).catch(Un)},e.fetchInfiniteQuery=function(r,i,s){var o=dx(r,i,s);return o.behavior=Bhe(),this.fetchQuery(o)},e.prefetchInfiniteQuery=function(r,i,s){return this.fetchInfiniteQuery(r,i,s).then(Un).catch(Un)},e.cancelMutations=function(){var r=this,i=Nt.batch(function(){return r.mutationCache.getAll().map(function(s){return s.cancel()})});return Promise.all(i).then(Un).catch(Un)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(r){return this.mutationCache.build(this,r).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(r){this.defaultOptions=r},e.setQueryDefaults=function(r,i){var s=this.queryDefaults.find(function(o){return Zc(r)===Zc(o.queryKey)});s?s.defaultOptions=i:this.queryDefaults.push({queryKey:r,defaultOptions:i})},e.getQueryDefaults=function(r){var i;return r?(i=this.queryDefaults.find(function(s){return Fb(r,s.queryKey)}))==null?void 0:i.defaultOptions:void 0},e.setMutationDefaults=function(r,i){var s=this.mutationDefaults.find(function(o){return Zc(r)===Zc(o.mutationKey)});s?s.defaultOptions=i:this.mutationDefaults.push({mutationKey:r,defaultOptions:i})},e.getMutationDefaults=function(r){var i;return r?(i=this.mutationDefaults.find(function(s){return Fb(r,s.mutationKey)}))==null?void 0:i.defaultOptions:void 0},e.defaultQueryOptions=function(r){if(r!=null&&r._defaulted)return r;var i=be({},this.defaultOptions.queries,this.getQueryDefaults(r==null?void 0:r.queryKey),r,{_defaulted:!0});return!i.queryHash&&i.queryKey&&(i.queryHash=ZO(i.queryKey,i)),i},e.defaultQueryObserverOptions=function(r){return this.defaultQueryOptions(r)},e.defaultMutationOptions=function(r){return r!=null&&r._defaulted?r:be({},this.defaultOptions.mutations,this.getMutationDefaults(r==null?void 0:r.mutationKey),r,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),zhe=function(t){Gh(e,t);function e(r,i){var s;return s=t.call(this)||this,s.client=r,s.options=i,s.trackedProps=[],s.selectError=null,s.bindMethods(),s.setOptions(i),s}var n=e.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),V$(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return hI(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return hI(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(i,s){var o=this.options,a=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(i),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var l=this.hasListeners();l&&z$(this.currentQuery,a,this.options,o)&&this.executeFetch(),this.updateResult(s),l&&(this.currentQuery!==a||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var c=this.computeRefetchInterval();l&&(this.currentQuery!==a||this.options.enabled!==o.enabled||c!==this.currentRefetchInterval)&&this.updateRefetchInterval(c)},n.getOptimisticResult=function(i){var s=this.client.defaultQueryObserverOptions(i),o=this.client.getQueryCache().build(this.client,s);return this.createResult(o,s)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(i,s){var o=this,a={},l=function(u){o.trackedProps.includes(u)||o.trackedProps.push(u)};return Object.keys(i).forEach(function(c){Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:function(){return l(c),i[c]}})}),(s.useErrorBoundary||s.suspense)&&l("error"),a},n.getNextResult=function(i){var s=this;return new Promise(function(o,a){var l=s.subscribe(function(c){c.isFetching||(l(),c.isError&&(i!=null&&i.throwOnError)?a(c.error):o(c))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(i){return this.fetch(be({},i,{meta:{refetchPage:i==null?void 0:i.refetchPage}}))},n.fetchOptimistic=function(i){var s=this,o=this.client.defaultQueryObserverOptions(i),a=this.client.getQueryCache().build(this.client,o);return a.fetch().then(function(){return s.createResult(a,o)})},n.fetch=function(i){var s=this;return this.executeFetch(i).then(function(){return s.updateResult(),s.currentResult})},n.executeFetch=function(i){this.updateQuery();var s=this.currentQuery.fetch(this.options,i);return i!=null&&i.throwOnError||(s=s.catch(Un)),s},n.updateStaleTimeout=function(){var i=this;if(this.clearStaleTimeout(),!($b||this.currentResult.isStale||!dI(this.options.staleTime))){var s=aY(this.currentResult.dataUpdatedAt,this.options.staleTime),o=s+1;this.staleTimeoutId=setTimeout(function(){i.currentResult.isStale||i.updateResult()},o)}},n.computeRefetchInterval=function(){var i;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(i=this.options.refetchInterval)!=null?i:!1},n.updateRefetchInterval=function(i){var s=this;this.clearRefetchInterval(),this.currentRefetchInterval=i,!($b||this.options.enabled===!1||!dI(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(s.options.refetchIntervalInBackground||zm.isFocused())&&s.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(i,s){var o=this.currentQuery,a=this.options,l=this.currentResult,c=this.currentResultState,u=this.currentResultOptions,d=i!==o,f=d?i.state:this.currentQueryInitialState,h=d?this.currentResult:this.previousQueryResult,p=i.state,m=p.dataUpdatedAt,g=p.error,y=p.errorUpdatedAt,x=p.isFetching,S=p.status,w=!1,E=!1,T;if(s.optimisticResults){var _=this.hasListeners(),I=!_&&V$(i,s),A=_&&z$(i,o,s,a);(I||A)&&(x=!0,m||(S="loading"))}if(s.keepPreviousData&&!p.dataUpdateCount&&(h!=null&&h.isSuccess)&&S!=="error")T=h.data,m=h.dataUpdatedAt,S=h.status,w=!0;else if(s.select&&typeof p.data<"u")if(l&&p.data===(c==null?void 0:c.data)&&s.select===this.selectFn)T=this.selectResult;else try{this.selectFn=s.select,T=s.select(p.data),s.structuralSharing!==!1&&(T=jb(l==null?void 0:l.data,T)),this.selectResult=T,this.selectError=null}catch(D){Ub().error(D),this.selectError=D}else T=p.data;if(typeof s.placeholderData<"u"&&typeof T>"u"&&(S==="loading"||S==="idle")){var L;if(l!=null&&l.isPlaceholderData&&s.placeholderData===(u==null?void 0:u.placeholderData))L=l.data;else if(L=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof L<"u")try{L=s.select(L),s.structuralSharing!==!1&&(L=jb(l==null?void 0:l.data,L)),this.selectError=null}catch(D){Ub().error(D),this.selectError=D}typeof L<"u"&&(S="success",T=L,E=!0)}this.selectError&&(g=this.selectError,T=this.selectResult,y=Date.now(),S="error");var j={status:S,isLoading:S==="loading",isSuccess:S==="success",isError:S==="error",isIdle:S==="idle",data:T,dataUpdatedAt:m,error:g,errorUpdatedAt:y,failureCount:p.fetchFailureCount,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>f.dataUpdateCount||p.errorUpdateCount>f.errorUpdateCount,isFetching:x,isRefetching:x&&S!=="loading",isLoadingError:S==="error"&&p.dataUpdatedAt===0,isPlaceholderData:E,isPreviousData:w,isRefetchError:S==="error"&&p.dataUpdatedAt!==0,isStale:JO(i,s),refetch:this.refetch,remove:this.remove};return j},n.shouldNotifyListeners=function(i,s){if(!s)return!0;var o=this.options,a=o.notifyOnChangeProps,l=o.notifyOnChangePropsExclusions;if(!a&&!l||a==="tracked"&&!this.trackedProps.length)return!0;var c=a==="tracked"?this.trackedProps:a;return Object.keys(i).some(function(u){var d=u,f=i[d]!==s[d],h=c==null?void 0:c.some(function(m){return m===u}),p=l==null?void 0:l.some(function(m){return m===u});return f&&!p&&(!c||h)})},n.updateResult=function(i){var s=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Phe(this.currentResult,s)){var o={cache:!0};(i==null?void 0:i.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,s)&&(o.listeners=!0),this.notify(be({},o,i))}},n.updateQuery=function(){var i=this.client.getQueryCache().build(this.client,this.options);if(i!==this.currentQuery){var s=this.currentQuery;this.currentQuery=i,this.currentQueryInitialState=i.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),i.addObserver(this))}},n.onQueryUpdate=function(i){var s={};i.type==="success"?s.onSuccess=!0:i.type==="error"&&!hx(i.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()},n.notify=function(i){var s=this;Nt.batch(function(){i.onSuccess?(s.options.onSuccess==null||s.options.onSuccess(s.currentResult.data),s.options.onSettled==null||s.options.onSettled(s.currentResult.data,null)):i.onError&&(s.options.onError==null||s.options.onError(s.currentResult.error),s.options.onSettled==null||s.options.onSettled(void 0,s.currentResult.error)),i.listeners&&s.listeners.forEach(function(o){o(s.currentResult)}),i.cache&&s.client.getQueryCache().notify({query:s.currentQuery,type:"observerResultsUpdated"})})},e}(Kh);function Hhe(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function V$(t,e){return Hhe(t,e)||t.state.dataUpdatedAt>0&&hI(t,e,e.refetchOnMount)}function hI(t,e,n){if(e.enabled!==!1){var r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&JO(t,e)}return!1}function z$(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&JO(t,n)}function JO(t,e){return t.isStaleByTime(e.staleTime)}var Whe=function(t){Gh(e,t);function e(r,i){var s;return s=t.call(this)||this,s.client=r,s.setOptions(i),s.bindMethods(),s.updateResult(),s}var n=e.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(i){this.options=this.client.defaultMutationOptions(i)},n.onUnsubscribe=function(){if(!this.listeners.length){var i;(i=this.currentMutation)==null||i.removeObserver(this)}},n.onMutationUpdate=function(i){this.updateResult();var s={listeners:!0};i.type==="success"?s.onSuccess=!0:i.type==="error"&&(s.onError=!0),this.notify(s)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(i,s){return this.mutateOptions=s,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,be({},this.options,{variables:typeof i<"u"?i:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var i=this.currentMutation?this.currentMutation.state:hY(),s=be({},i,{isLoading:i.status==="loading",isSuccess:i.status==="success",isError:i.status==="error",isIdle:i.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=s},n.notify=function(i){var s=this;Nt.batch(function(){s.mutateOptions&&(i.onSuccess?(s.mutateOptions.onSuccess==null||s.mutateOptions.onSuccess(s.currentResult.data,s.currentResult.variables,s.currentResult.context),s.mutateOptions.onSettled==null||s.mutateOptions.onSettled(s.currentResult.data,null,s.currentResult.variables,s.currentResult.context)):i.onError&&(s.mutateOptions.onError==null||s.mutateOptions.onError(s.currentResult.error,s.currentResult.variables,s.currentResult.context),s.mutateOptions.onSettled==null||s.mutateOptions.onSettled(void 0,s.currentResult.error,s.currentResult.variables,s.currentResult.context))),i.listeners&&s.listeners.forEach(function(o){o(s.currentResult)})})},e}(Kh),Ghe=XO.unstable_batchedUpdates;Nt.setBatchNotifyFunction(Ghe);var Khe=console;Dhe(Khe);var H$=te.createContext(void 0),pY=te.createContext(!1);function mY(t){return t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=H$),window.ReactQueryClientContext):H$}var gY=function(){var e=te.useContext(mY(te.useContext(pY)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qhe=function(e){var n=e.client,r=e.contextSharing,i=r===void 0?!1:r,s=e.children;te.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var o=mY(i);return te.createElement(pY.Provider,{value:i},te.createElement(o.Provider,{value:n},s))};function Yhe(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var Qhe=te.createContext(Yhe()),Xhe=function(){return te.useContext(Qhe)};function vY(t,e,n){return typeof e=="function"?e.apply(void 0,n):typeof e=="boolean"?e:!!t}function py(t,e,n){var r=te.useRef(!1),i=te.useState(0),s=i[1],o=The(t,e,n),a=gY(),l=te.useRef();l.current?l.current.setOptions(o):l.current=new Whe(a,o);var c=l.current.getCurrentResult();te.useEffect(function(){r.current=!0;var d=l.current.subscribe(Nt.batchCalls(function(){r.current&&s(function(f){return f+1})}));return function(){r.current=!1,d()}},[]);var u=te.useCallback(function(d,f){l.current.mutate(d,f).catch(Un)},[]);if(c.error&&vY(void 0,l.current.options.useErrorBoundary,[c.error]))throw c.error;return be({},c,{mutate:u,mutateAsync:c.mutate})}function Zhe(t,e){var n=te.useRef(!1),r=te.useState(0),i=r[1],s=gY(),o=Xhe(),a=s.defaultQueryObserverOptions(t);a.optimisticResults=!0,a.onError&&(a.onError=Nt.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=Nt.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=Nt.batchCalls(a.onSettled)),a.suspense&&(typeof a.staleTime!="number"&&(a.staleTime=1e3),a.cacheTime===0&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&(o.isReset()||(a.retryOnMount=!1));var l=te.useState(function(){return new e(s,a)}),c=l[0],u=c.getOptimisticResult(a);if(te.useEffect(function(){n.current=!0,o.clearReset();var d=c.subscribe(Nt.batchCalls(function(){n.current&&i(function(f){return f+1})}));return c.updateResult(),function(){n.current=!1,d()}},[o,c]),te.useEffect(function(){c.setOptions(a,{listeners:!1})},[a,c]),a.suspense&&u.isLoading)throw c.fetchOptimistic(a).then(function(d){var f=d.data;a.onSuccess==null||a.onSuccess(f),a.onSettled==null||a.onSettled(f,null)}).catch(function(d){o.clearReset(),a.onError==null||a.onError(d),a.onSettled==null||a.onSettled(void 0,d)});if(u.isError&&!o.isReset()&&!u.isFetching&&vY(a.suspense,a.useErrorBoundary,[u.error,c.getCurrentQuery()]))throw u.error;return a.notifyOnChangeProps==="tracked"&&(u=c.trackResult(u,a)),u}function Jhe(t,e,n){var r=dx(t,e,n);return Zhe(r,zhe)}var Nn=function(){return Nn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nn.apply(this,arguments)};function ch(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Pt="-ms-",Hm="-moz-",at="-webkit-",yY="comm",mE="rule",eD="decl",epe="@import",xY="@keyframes",tpe="@layer",bY=Math.abs,tD=String.fromCharCode,pI=Object.assign;function npe(t,e){return On(t,0)^45?(((e<<2^On(t,0))<<2^On(t,1))<<2^On(t,2))<<2^On(t,3):0}function SY(t){return t.trim()}function zo(t,e){return(t=e.exec(t))?t[0]:t}function ze(t,e,n){return t.replace(e,n)}function px(t,e,n){return t.indexOf(e,n)}function On(t,e){return t.charCodeAt(e)|0}function uh(t,e,n){return t.slice(e,n)}function Js(t){return t.length}function wY(t){return t.length}function fm(t,e){return e.push(t),t}function rpe(t,e){return t.map(e).join("")}function W$(t,e){return t.filter(function(n){return!zo(n,e)})}var gE=1,dh=1,EY=0,Ki=0,hn=0,qh="";function vE(t,e,n,r,i,s,o,a){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:gE,column:dh,length:o,return:"",siblings:a}}function Za(t,e){return pI(vE("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function vd(t){for(;t.root;)t=Za(t.root,{children:[t]});fm(t,t.siblings)}function ipe(){return hn}function spe(){return hn=Ki>0?On(qh,--Ki):0,dh--,hn===10&&(dh=1,gE--),hn}function Ts(){return hn=Ki<EY?On(qh,Ki++):0,dh++,hn===10&&(dh=1,gE++),hn}function uu(){return On(qh,Ki)}function mx(){return Ki}function yE(t,e){return uh(qh,t,e)}function mI(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ope(t){return gE=dh=1,EY=Js(qh=t),Ki=0,[]}function ape(t){return qh="",t}function DT(t){return SY(yE(Ki-1,gI(t===91?t+2:t===40?t+1:t)))}function lpe(t){for(;(hn=uu())&&hn<33;)Ts();return mI(t)>2||mI(hn)>3?"":" "}function cpe(t,e){for(;--e&&Ts()&&!(hn<48||hn>102||hn>57&&hn<65||hn>70&&hn<97););return yE(t,mx()+(e<6&&uu()==32&&Ts()==32))}function gI(t){for(;Ts();)switch(hn){case t:return Ki;case 34:case 39:t!==34&&t!==39&&gI(hn);break;case 40:t===41&&gI(t);break;case 92:Ts();break}return Ki}function upe(t,e){for(;Ts()&&t+hn!==47+10;)if(t+hn===42+42&&uu()===47)break;return"/*"+yE(e,Ki-1)+"*"+tD(t===47?t:Ts())}function dpe(t){for(;!mI(uu());)Ts();return yE(t,Ki)}function fpe(t){return ape(gx("",null,null,null,[""],t=ope(t),0,[0],t))}function gx(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,f=0,h=0,p=0,m=1,g=1,y=1,x=0,S="",w=i,E=s,T=r,_=S;g;)switch(p=x,x=Ts()){case 40:if(p!=108&&On(_,d-1)==58){px(_+=ze(DT(x),"&","&\f"),"&\f",bY(c?a[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:_+=DT(x);break;case 9:case 10:case 13:case 32:_+=lpe(p);break;case 92:_+=cpe(mx()-1,7);continue;case 47:switch(uu()){case 42:case 47:fm(hpe(upe(Ts(),mx()),e,n,l),l);break;default:_+="/"}break;case 123*m:a[c++]=Js(_)*y;case 125*m:case 59:case 0:switch(x){case 0:case 125:g=0;case 59+u:y==-1&&(_=ze(_,/\f/g,"")),h>0&&Js(_)-d&&fm(h>32?K$(_+";",r,n,d-1,l):K$(ze(_," ","")+";",r,n,d-2,l),l);break;case 59:_+=";";default:if(fm(T=G$(_,e,n,c,u,i,a,S,w=[],E=[],d,s),s),x===123)if(u===0)gx(_,e,T,T,w,s,d,a,E);else switch(f===99&&On(_,3)===110?100:f){case 100:case 108:case 109:case 115:gx(t,T,T,r&&fm(G$(t,T,T,0,0,i,a,S,i,w=[],d,E),E),i,E,d,a,r?w:E);break;default:gx(_,T,T,T,[""],E,0,a,E)}}c=u=h=0,m=y=1,S=_="",d=o;break;case 58:d=1+Js(_),h=p;default:if(m<1){if(x==123)--m;else if(x==125&&m++==0&&spe()==125)continue}switch(_+=tD(x),x*m){case 38:y=u>0?1:(_+="\f",-1);break;case 44:a[c++]=(Js(_)-1)*y,y=1;break;case 64:uu()===45&&(_+=DT(Ts())),f=uu(),u=d=Js(S=_+=dpe(mx())),x++;break;case 45:p===45&&Js(_)==2&&(m=0)}}return s}function G$(t,e,n,r,i,s,o,a,l,c,u,d){for(var f=i-1,h=i===0?s:[""],p=wY(h),m=0,g=0,y=0;m<r;++m)for(var x=0,S=uh(t,f+1,f=bY(g=o[m])),w=t;x<p;++x)(w=SY(g>0?h[x]+" "+S:ze(S,/&\f/g,h[x])))&&(l[y++]=w);return vE(t,e,n,i===0?mE:a,l,c,u,d)}function hpe(t,e,n,r){return vE(t,e,n,yY,tD(ipe()),uh(t,2,-2),0,r)}function K$(t,e,n,r,i){return vE(t,e,n,eD,uh(t,0,r),uh(t,r+1,-1),r,i)}function _Y(t,e,n){switch(npe(t,e)){case 5103:return at+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return at+t+t;case 4789:return Hm+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return at+t+Hm+t+Pt+t+t;case 5936:switch(On(t,e+11)){case 114:return at+t+Pt+ze(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return at+t+Pt+ze(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return at+t+Pt+ze(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return at+t+Pt+t+t;case 6165:return at+t+Pt+"flex-"+t+t;case 5187:return at+t+ze(t,/(\w+).+(:[^]+)/,at+"box-$1$2"+Pt+"flex-$1$2")+t;case 5443:return at+t+Pt+"flex-item-"+ze(t,/flex-|-self/g,"")+(zo(t,/flex-|baseline/)?"":Pt+"grid-row-"+ze(t,/flex-|-self/g,""))+t;case 4675:return at+t+Pt+"flex-line-pack"+ze(t,/align-content|flex-|-self/g,"")+t;case 5548:return at+t+Pt+ze(t,"shrink","negative")+t;case 5292:return at+t+Pt+ze(t,"basis","preferred-size")+t;case 6060:return at+"box-"+ze(t,"-grow","")+at+t+Pt+ze(t,"grow","positive")+t;case 4554:return at+ze(t,/([^-])(transform)/g,"$1"+at+"$2")+t;case 6187:return ze(ze(ze(t,/(zoom-|grab)/,at+"$1"),/(image-set)/,at+"$1"),t,"")+t;case 5495:case 3959:return ze(t,/(image-set\([^]*)/,at+"$1$`$1");case 4968:return ze(ze(t,/(.+:)(flex-)?(.*)/,at+"box-pack:$3"+Pt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+at+t+t;case 4200:if(!zo(t,/flex-|baseline/))return Pt+"grid-column-align"+uh(t,e)+t;break;case 2592:case 3360:return Pt+ze(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,zo(r.props,/grid-\w+-end/)})?~px(t+(n=n[e].value),"span",0)?t:Pt+ze(t,"-start","")+t+Pt+"grid-row-span:"+(~px(n,"span",0)?zo(n,/\d+/):+zo(n,/\d+/)-+zo(t,/\d+/))+";":Pt+ze(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return zo(r.props,/grid-\w+-start/)})?t:Pt+ze(ze(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return ze(t,/(.+)-inline(.+)/,at+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Js(t)-1-e>6)switch(On(t,e+1)){case 109:if(On(t,e+4)!==45)break;case 102:return ze(t,/(.+:)(.+)-([^]+)/,"$1"+at+"$2-$3$1"+Hm+(On(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~px(t,"stretch",0)?_Y(ze(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return ze(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,a,l,c){return Pt+i+":"+s+c+(o?Pt+i+"-span:"+(a?l:+l-+s)+c:"")+t});case 4949:if(On(t,e+6)===121)return ze(t,":",":"+at)+t;break;case 6444:switch(On(t,On(t,14)===45?18:11)){case 120:return ze(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+at+(On(t,14)===45?"inline-":"")+"box$3$1"+at+"$2$3$1"+Pt+"$2box$3")+t;case 100:return ze(t,":",":"+Pt)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ze(t,"scroll-","scroll-snap-")+t}return t}function Vb(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function ppe(t,e,n,r){switch(t.type){case tpe:if(t.children.length)break;case epe:case eD:return t.return=t.return||t.value;case yY:return"";case xY:return t.return=t.value+"{"+Vb(t.children,r)+"}";case mE:if(!Js(t.value=t.props.join(",")))return""}return Js(n=Vb(t.children,r))?t.return=t.value+"{"+n+"}":""}function mpe(t){var e=wY(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function gpe(t){return function(e){e.root||(e=e.return)&&t(e)}}function vpe(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case eD:t.return=_Y(t.value,t.length,n);return;case xY:return Vb([Za(t,{value:ze(t.value,"@","@"+at)})],r);case mE:if(t.length)return rpe(n=t.props,function(i){switch(zo(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":vd(Za(t,{props:[ze(i,/:(read-\w+)/,":"+Hm+"$1")]})),vd(Za(t,{props:[i]})),pI(t,{props:W$(n,r)});break;case"::placeholder":vd(Za(t,{props:[ze(i,/:(plac\w+)/,":"+at+"input-$1")]})),vd(Za(t,{props:[ze(i,/:(plac\w+)/,":"+Hm+"$1")]})),vd(Za(t,{props:[ze(i,/:(plac\w+)/,Pt+"input-$1")]})),vd(Za(t,{props:[i]})),pI(t,{props:W$(n,r)});break}return""})}}var ype={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},fh=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",TY="active",CY="data-styled-version",xE="6.1.19",nD=`/*!sc*/
`,zb=typeof window<"u"&&typeof document<"u",xpe=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY),bpe={},bE=Object.freeze([]),hh=Object.freeze({});function kY(t,e,n){return n===void 0&&(n=hh),t.theme!==n.theme&&t.theme||e||n.theme}var PY=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Spe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,wpe=/(^-|-$)/g;function q$(t){return t.replace(Spe,"-").replace(wpe,"")}var Epe=/(a)(d)/gi,my=52,Y$=function(t){return String.fromCharCode(t+(t>25?39:97))};function vI(t){var e,n="";for(e=Math.abs(t);e>my;e=e/my|0)n=Y$(e%my)+n;return(Y$(e%my)+n).replace(Epe,"$1-$2")}var MT,IY=5381,af=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},AY=function(t){return af(IY,t)};function rD(t){return vI(AY(t)>>>0)}function _pe(t){return t.displayName||t.name||"Component"}function $T(t){return typeof t=="string"&&!0}var LY=typeof Symbol=="function"&&Symbol.for,RY=LY?Symbol.for("react.memo"):60115,Tpe=LY?Symbol.for("react.forward_ref"):60112,Cpe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},kpe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},OY={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ppe=((MT={})[Tpe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MT[RY]=OY,MT);function Q$(t){return("type"in(e=t)&&e.type.$$typeof)===RY?OY:"$$typeof"in t?Ppe[t.$$typeof]:Cpe;var e}var Ipe=Object.defineProperty,Ape=Object.getOwnPropertyNames,X$=Object.getOwnPropertySymbols,Lpe=Object.getOwnPropertyDescriptor,Rpe=Object.getPrototypeOf,Z$=Object.prototype;function DY(t,e,n){if(typeof e!="string"){if(Z$){var r=Rpe(e);r&&r!==Z$&&DY(t,r,n)}var i=Ape(e);X$&&(i=i.concat(X$(e)));for(var s=Q$(t),o=Q$(e),a=0;a<i.length;++a){var l=i[a];if(!(l in kpe||n&&n[l]||o&&l in o||s&&l in s)){var c=Lpe(e,l);try{Ipe(t,l,c)}catch{}}}}return t}function Eu(t){return typeof t=="function"}function iD(t){return typeof t=="object"&&"styledComponentId"in t}function Jc(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function Hb(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=e?e+t[r]:t[r];return n}function Ug(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function yI(t,e,n){if(n===void 0&&(n=!1),!n&&!Ug(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=yI(t[r],e[r]);else if(Ug(e))for(var r in e)t[r]=yI(t[r],e[r]);return t}function sD(t,e){Object.defineProperty(t,"toString",{value:e})}function _u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var Ope=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw _u(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var a=this.indexOfGroup(e+1),l=(o=0,n.length);o<l;o++)this.tag.insertRule(a,n[o])&&(this.groupSizes[e]++,a++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)n+="".concat(this.tag.getRule(o)).concat(nD);return n},t}(),vx=new Map,Wb=new Map,yx=1,gy=function(t){if(vx.has(t))return vx.get(t);for(;Wb.has(yx);)yx++;var e=yx++;return vx.set(t,e),Wb.set(e,t),e},Dpe=function(t,e){yx=e+1,vx.set(t,e),Wb.set(e,t)},Mpe="style[".concat(fh,"][").concat(CY,'="').concat(xE,'"]'),$pe=new RegExp("^".concat(fh,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Npe=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},Fpe=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(nD),i=[],s=0,o=r.length;s<o;s++){var a=r[s].trim();if(a){var l=a.match($pe);if(l){var c=0|parseInt(l[1],10),u=l[2];c!==0&&(Dpe(u,c),Npe(t,u,l[3]),t.getTag().insertRules(c,i)),i.length=0}else i.push(a)}}},J$=function(t){for(var e=document.querySelectorAll(Mpe),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(fh)!==TY&&(Fpe(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function jpe(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var MY=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(a){var l=Array.from(a.querySelectorAll("style[".concat(fh,"]")));return l[l.length-1]}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(fh,TY),r.setAttribute(CY,xE);var o=jpe();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},Bpe=function(){function t(e){this.element=MY(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===n)return o}throw _u(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),Upe=function(){function t(e){this.element=MY(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),Vpe=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),eN=zb,zpe={isServer:!zb,useCSSOMInjection:!xpe},Gb=function(){function t(e,n,r){e===void 0&&(e=hh),n===void 0&&(n={});var i=this;this.options=Nn(Nn({},zpe),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&zb&&eN&&(eN=!1,J$(this)),sD(this,function(){return function(s){for(var o=s.getTag(),a=o.length,l="",c=function(d){var f=function(y){return Wb.get(y)}(d);if(f===void 0)return"continue";var h=s.names.get(f),p=o.getGroup(d);if(h===void 0||!h.size||p.length===0)return"continue";var m="".concat(fh,".g").concat(d,'[id="').concat(f,'"]'),g="";h!==void 0&&h.forEach(function(y){y.length>0&&(g+="".concat(y,","))}),l+="".concat(p).concat(m,'{content:"').concat(g,'"}').concat(nD)},u=0;u<a;u++)c(u);return l}(i)})}return t.registerId=function(e){return gy(e)},t.prototype.rehydrate=function(){!this.server&&zb&&J$(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(Nn(Nn({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new Vpe(i):r?new Bpe(i):new Upe(i)}(this.options),new Ope(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(gy(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(gy(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(gy(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),Hpe=/&/g,Wpe=/^\s*\/\/.*$/gm;function $Y(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=$Y(n.children,e)),n})}function Gpe(t){var e,n,r,i=t===void 0?hh:t,s=i.options,o=s===void 0?hh:s,a=i.plugins,l=a===void 0?bE:a,c=function(f,h,p){return p.startsWith(n)&&p.endsWith(n)&&p.replaceAll(n,"").length>0?".".concat(e):f},u=l.slice();u.push(function(f){f.type===mE&&f.value.includes("&")&&(f.props[0]=f.props[0].replace(Hpe,n).replace(r,c))}),o.prefix&&u.push(vpe),u.push(ppe);var d=function(f,h,p,m){h===void 0&&(h=""),p===void 0&&(p=""),m===void 0&&(m="&"),e=m,n=h,r=new RegExp("\\".concat(n,"\\b"),"g");var g=f.replace(Wpe,""),y=fpe(p||h?"".concat(p," ").concat(h," { ").concat(g," }"):g);o.namespace&&(y=$Y(y,o.namespace));var x=[];return Vb(y,mpe(u.concat(gpe(function(S){return x.push(S)})))),x};return d.hash=l.length?l.reduce(function(f,h){return h.name||_u(15),af(f,h.name)},IY).toString():"",d}var Kpe=new Gb,xI=Gpe(),NY=te.createContext({shouldForwardProp:void 0,styleSheet:Kpe,stylis:xI});NY.Consumer;te.createContext(void 0);function bI(){return v.useContext(NY)}var FY=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=xI);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,sD(this,function(){throw _u(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=xI),this.name+e.hash},t}(),qpe=function(t){return t>="A"&&t<="Z"};function tN(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;qpe(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var jY=function(t){return t==null||t===!1||t===""},BY=function(t){var e,n,r=[];for(var i in t){var s=t[i];t.hasOwnProperty(i)&&!jY(s)&&(Array.isArray(s)&&s.isCss||Eu(s)?r.push("".concat(tN(i),":"),s,";"):Ug(s)?r.push.apply(r,ch(ch(["".concat(i," {")],BY(s),!1),["}"],!1)):r.push("".concat(tN(i),": ").concat((e=i,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in ype||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Bl(t,e,n,r){if(jY(t))return[];if(iD(t))return[".".concat(t.styledComponentId)];if(Eu(t)){if(!Eu(s=t)||s.prototype&&s.prototype.isReactComponent||!e)return[t];var i=t(e);return Bl(i,e,n,r)}var s;return t instanceof FY?n?(t.inject(n,r),[t.getName(r)]):[t]:Ug(t)?BY(t):Array.isArray(t)?Array.prototype.concat.apply(bE,t.map(function(o){return Bl(o,e,n,r)})):[t.toString()]}function UY(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Eu(n)&&!iD(n))return!1}return!0}var Ype=AY(xE),Qpe=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&UY(e),this.componentId=n,this.baseHash=af(Ype,n),this.baseStyle=r,Gb.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=Jc(i,this.staticRulesId);else{var s=Hb(Bl(this.rules,e,n,r)),o=vI(af(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,o)){var a=r(s,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,a)}i=Jc(i,o),this.staticRulesId=o}else{for(var l=af(this.baseHash,r.hash),c="",u=0;u<this.rules.length;u++){var d=this.rules[u];if(typeof d=="string")c+=d;else if(d){var f=Hb(Bl(d,e,n,r));l=af(l,f+u),c+=f}}if(c){var h=vI(l>>>0);n.hasNameForId(this.componentId,h)||n.insertRules(this.componentId,h,r(c,".".concat(h),void 0,this.componentId)),i=Jc(i,h)}}return i},t}(),Vg=te.createContext(void 0);Vg.Consumer;function Xpe(t){var e=te.useContext(Vg),n=v.useMemo(function(){return function(r,i){if(!r)throw _u(14);if(Eu(r)){var s=r(i);return s}if(Array.isArray(r)||typeof r!="object")throw _u(8);return i?Nn(Nn({},i),r):r}(t.theme,e)},[t.theme,e]);return t.children?te.createElement(Vg.Provider,{value:n},t.children):null}var NT={};function Zpe(t,e,n){var r=iD(t),i=t,s=!$T(t),o=e.attrs,a=o===void 0?bE:o,l=e.componentId,c=l===void 0?function(w,E){var T=typeof w!="string"?"sc":q$(w);NT[T]=(NT[T]||0)+1;var _="".concat(T,"-").concat(rD(xE+T+NT[T]));return E?"".concat(E,"-").concat(_):_}(e.displayName,e.parentComponentId):l,u=e.displayName,d=u===void 0?function(w){return $T(w)?"styled.".concat(w):"Styled(".concat(_pe(w),")")}(t):u,f=e.displayName&&e.componentId?"".concat(q$(e.displayName),"-").concat(e.componentId):e.componentId||c,h=r&&i.attrs?i.attrs.concat(a).filter(Boolean):a,p=e.shouldForwardProp;if(r&&i.shouldForwardProp){var m=i.shouldForwardProp;if(e.shouldForwardProp){var g=e.shouldForwardProp;p=function(w,E){return m(w,E)&&g(w,E)}}else p=m}var y=new Qpe(n,f,r?i.componentStyle:void 0);function x(w,E){return function(T,_,I){var A=T.attrs,L=T.componentStyle,j=T.defaultProps,D=T.foldedComponentIds,O=T.styledComponentId,$=T.target,R=te.useContext(Vg),C=bI(),P=T.shouldForwardProp||C.shouldForwardProp,k=kY(_,R,j)||hh,M=function(z,G,K){for(var Q,ne=Nn(Nn({},G),{className:void 0,theme:K}),Z=0;Z<z.length;Z+=1){var re=Eu(Q=z[Z])?Q(ne):Q;for(var de in re)ne[de]=de==="className"?Jc(ne[de],re[de]):de==="style"?Nn(Nn({},ne[de]),re[de]):re[de]}return G.className&&(ne.className=Jc(ne.className,G.className)),ne}(A,_,k),B=M.as||$,N={};for(var V in M)M[V]===void 0||V[0]==="$"||V==="as"||V==="theme"&&M.theme===k||(V==="forwardedAs"?N.as=M.forwardedAs:P&&!P(V,B)||(N[V]=M[V]));var H=function(z,G){var K=bI(),Q=z.generateAndInjectStyles(G,K.styleSheet,K.stylis);return Q}(L,M),W=Jc(D,O);return H&&(W+=" "+H),M.className&&(W+=" "+M.className),N[$T(B)&&!PY.has(B)?"class":"className"]=W,I&&(N.ref=I),v.createElement(B,N)}(S,w,E)}x.displayName=d;var S=te.forwardRef(x);return S.attrs=h,S.componentStyle=y,S.displayName=d,S.shouldForwardProp=p,S.foldedComponentIds=r?Jc(i.foldedComponentIds,i.styledComponentId):"",S.styledComponentId=f,S.target=r?i.target:t,Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(w){this._foldedDefaultProps=r?function(E){for(var T=[],_=1;_<arguments.length;_++)T[_-1]=arguments[_];for(var I=0,A=T;I<A.length;I++)yI(E,A[I],!0);return E}({},i.defaultProps,w):w}}),sD(S,function(){return".".concat(S.styledComponentId)}),s&&DY(S,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),S}function nN(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var rN=function(t){return Object.assign(t,{isCss:!0})};function oD(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Eu(t)||Ug(t))return rN(Bl(nN(bE,ch([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?Bl(r):rN(Bl(nN(r,e)))}function SI(t,e,n){if(n===void 0&&(n=hh),!e)throw _u(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return t(e,n,oD.apply(void 0,ch([i],s,!1)))};return r.attrs=function(i){return SI(t,e,Nn(Nn({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return SI(t,e,Nn(Nn({},n),i))},r}var VY=function(t){return SI(Zpe,t)},U=VY;PY.forEach(function(t){U[t]=VY(t)});var Jpe=function(){function t(e,n){this.rules=e,this.componentId=n,this.isStatic=UY(e),Gb.registerId(this.componentId+1)}return t.prototype.createStyles=function(e,n,r,i){var s=i(Hb(Bl(this.rules,n,r,i)),""),o=this.componentId+e;r.insertRules(o,o,s)},t.prototype.removeStyles=function(e,n){n.clearRules(this.componentId+e)},t.prototype.renderStyles=function(e,n,r,i){e>2&&Gb.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,n,r,i)},t}();function eme(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=oD.apply(void 0,ch([t],e,!1)),i="sc-global-".concat(rD(JSON.stringify(r))),s=new Jpe(r,i),o=function(l){var c=bI(),u=te.useContext(Vg),d=te.useRef(c.styleSheet.allocateGSInstance(i)).current;return c.styleSheet.server&&a(d,l,c.styleSheet,u,c.stylis),te.useLayoutEffect(function(){if(!c.styleSheet.server)return a(d,l,c.styleSheet,u,c.stylis),function(){return s.removeStyles(d,c.styleSheet)}},[d,l,c.styleSheet,u,c.stylis]),null};function a(l,c,u,d,f){if(s.isStatic)s.renderStyles(l,bpe,u,f);else{var h=Nn(Nn({},c),{theme:kY(c,d,o.defaultProps)});s.renderStyles(l,h,u,f)}}return te.memo(o)}function Ms(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Hb(oD.apply(void 0,ch([t],e,!1))),i=rD(r);return new FY(i,r)}const tme="/assets/Satoshi-Regular-50dca57f.woff2",nme="/assets/Satoshi-Medium-af02a722.woff2",rme="/assets/Satoshi-Bold-353a7fbf.woff2",ime=eme`

    @font-face {
        font-family: "Satoshi";
        src: url(${tme}) format("woff2");
        font-weight: 400;
    }
    @font-face {
        font-family: "Satoshi";
        src: url(${nme}) format("woff2");
        font-weight: 500;
    }
    

    @font-face {
        font-family: "Satoshi";
        src: url(${rme}) format("woff2");
        font-weight: 600;
    }


    * { 
    padding: 0px;
    margin: 0px;
    box-sizing: border-box;
    font-family: "Satoshi", sans-serif;
}

body{
         box-sizing: border-box;
         padding: 0px;
         margin: 0px;
         box-sizing: border-box;
    }
`;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zg(){return zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zg.apply(this,arguments)}var Sl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Sl||(Sl={}));const iN="popstate";function sme(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return wI("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Kb(i)}return ame(e,n,null,t)}function gn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zY(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ome(){return Math.random().toString(36).substr(2,8)}function sN(t,e){return{usr:t.state,key:t.key,idx:e}}function wI(t,e,n,r){return n===void 0&&(n=null),zg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Yh(e):e,{state:n,key:e&&e.key||r||ome()})}function Kb(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ame(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Sl.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(zg({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Sl.Pop;let g=u(),y=g==null?null:g-c;c=g,l&&l({action:a,location:m.location,delta:y})}function f(g,y){a=Sl.Push;let x=wI(m.location,g,y);n&&n(x,g),c=u()+1;let S=sN(x,c),w=m.createHref(x);try{o.pushState(S,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a=Sl.Replace;let x=wI(m.location,g,y);n&&n(x,g),c=u();let S=sN(x,c),w=m.createHref(x);o.replaceState(S,"",w),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof g=="string"?g:Kb(g);return x=x.replace(/ $/,"%20"),gn(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let m={get action(){return a},get location(){return t(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(iN,d),l=g,()=>{i.removeEventListener(iN,d),l=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(g){return o.go(g)}};return m}var oN;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oN||(oN={}));function lme(t,e,n){return n===void 0&&(n="/"),cme(t,e,n,!1)}function cme(t,e,n,r){let i=typeof e=="string"?Yh(e):e,s=aD(i.pathname||"/",n);if(s==null)return null;let o=HY(t);ume(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=Sme(s);a=xme(o[l],c,r)}return a}function HY(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(gn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ul([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(gn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),HY(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:vme(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of WY(s.path))i(s,o,l)}),e}function WY(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=WY(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function ume(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yme(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dme=/^:[\w-]+$/,fme=3,hme=2,pme=1,mme=10,gme=-2,aN=t=>t==="*";function vme(t,e){let n=t.split("/"),r=n.length;return n.some(aN)&&(r+=gme),e&&(r+=hme),n.filter(i=>!aN(i)).reduce((i,s)=>i+(dme.test(s)?fme:s===""?pme:mme),r)}function yme(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function xme(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=lN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=lN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ul([s,d.pathname]),pathnameBase:Tme(Ul([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Ul([s,d.pathnameBase]))}return o}function lN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=bme(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?c[f]=void 0:c[f]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function bme(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),zY(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Sme(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zY(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function aD(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function wme(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Yh(t):t;return{pathname:n?n.startsWith("/")?n:Eme(n,e):e,search:Cme(r),hash:kme(i)}}function Eme(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function FT(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _me(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function GY(t,e){let n=_me(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function KY(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Yh(t):(i=zg({},t),gn(!i.pathname||!i.pathname.includes("?"),FT("?","pathname","search",i)),gn(!i.pathname||!i.pathname.includes("#"),FT("#","pathname","hash",i)),gn(!i.search||!i.search.includes("#"),FT("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=wme(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ul=t=>t.join("/").replace(/\/\/+/g,"/"),Tme=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Cme=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kme=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pme(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const qY=["post","put","patch","delete"];new Set(qY);const Ime=["get",...qY];new Set(Ime);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hg(){return Hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hg.apply(this,arguments)}const lD=v.createContext(null),Ame=v.createContext(null),Qu=v.createContext(null),SE=v.createContext(null),mc=v.createContext({outlet:null,matches:[],isDataRoute:!1}),YY=v.createContext(null);function Lme(t,e){let{relative:n}=e===void 0?{}:e;sv()||gn(!1);let{basename:r,navigator:i}=v.useContext(Qu),{hash:s,pathname:o,search:a}=XY(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ul([r,o])),i.createHref({pathname:l,search:a,hash:s})}function sv(){return v.useContext(SE)!=null}function Qh(){return sv()||gn(!1),v.useContext(SE).location}function QY(t){v.useContext(Qu).static||v.useLayoutEffect(t)}function Po(){let{isDataRoute:t}=v.useContext(mc);return t?Hme():Rme()}function Rme(){sv()||gn(!1);let t=v.useContext(lD),{basename:e,future:n,navigator:r}=v.useContext(Qu),{matches:i}=v.useContext(mc),{pathname:s}=Qh(),o=JSON.stringify(GY(i,n.v7_relativeSplatPath)),a=v.useRef(!1);return QY(()=>{a.current=!0}),v.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=KY(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ul([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}function cD(){let{matches:t}=v.useContext(mc),e=t[t.length-1];return e?e.params:{}}function XY(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=v.useContext(Qu),{matches:i}=v.useContext(mc),{pathname:s}=Qh(),o=JSON.stringify(GY(i,r.v7_relativeSplatPath));return v.useMemo(()=>KY(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Ome(t,e){return Dme(t,e)}function Dme(t,e,n,r){sv()||gn(!1);let{navigator:i}=v.useContext(Qu),{matches:s}=v.useContext(mc),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Qh(),u;if(e){var d;let g=typeof e=="string"?Yh(e):e;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||gn(!1),u=g}else u=c;let f=u.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=lme(t,{pathname:h}),m=jme(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Ul([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Ul([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return e&&m?v.createElement(SE.Provider,{value:{location:Hg({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Sl.Pop}},m):m}function Mme(){let t=zme(),e=Pme(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,s)}const $me=v.createElement(Mme,null);class Nme extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?v.createElement(mc.Provider,{value:this.props.routeContext},v.createElement(YY.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fme(t){let{routeContext:e,match:n,children:r}=t,i=v.useContext(lD);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(mc.Provider,{value:e},r)}function jme(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||gn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,p=!1,m=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||$me,l&&(c<0&&f===0?(Wme("route-fallback",!1),p=!0,g=null):c===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),x=()=>{let S;return h?S=m:p?S=g:d.route.Component?S=v.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,v.createElement(Fme,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?v.createElement(Nme,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var ZY=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ZY||{}),qb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qb||{});function Bme(t){let e=v.useContext(lD);return e||gn(!1),e}function Ume(t){let e=v.useContext(Ame);return e||gn(!1),e}function Vme(t){let e=v.useContext(mc);return e||gn(!1),e}function JY(t){let e=Vme(),n=e.matches[e.matches.length-1];return n.route.id||gn(!1),n.route.id}function zme(){var t;let e=v.useContext(YY),n=Ume(qb.UseRouteError),r=JY(qb.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Hme(){let{router:t}=Bme(ZY.UseNavigateStable),e=JY(qb.UseNavigateStable),n=v.useRef(!1);return QY(()=>{n.current=!0}),v.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Hg({fromRouteId:e},s)))},[t,e])}const cN={};function Wme(t,e,n){!e&&!cN[t]&&(cN[t]=!0)}function Gme(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Ht(t){gn(!1)}function Kme(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Sl.Pop,navigator:s,static:o=!1,future:a}=t;sv()&&gn(!1);let l=e.replace(/^\/*/,"/"),c=v.useMemo(()=>({basename:l,navigator:s,static:o,future:Hg({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Yh(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=v.useMemo(()=>{let g=aD(u,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:i}},[l,u,d,f,h,p,i]);return m==null?null:v.createElement(Qu.Provider,{value:c},v.createElement(SE.Provider,{children:n,value:m}))}function eQ(t){let{children:e,location:n}=t;return Ome(EI(e),n)}new Promise(()=>{});function EI(t,e){e===void 0&&(e=[]);let n=[];return v.Children.forEach(t,(r,i)=>{if(!v.isValidElement(r))return;let s=[...e,i];if(r.type===v.Fragment){n.push.apply(n,EI(r.props.children,s));return}r.type!==Ht&&gn(!1),!r.props.index||!r.props.children||gn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=EI(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_I.apply(this,arguments)}function qme(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Yme(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Qme(t,e){return t.button===0&&(!e||e==="_self")&&!Yme(t)}const Xme=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zme="6";try{window.__reactRouterVersion=Zme}catch{}const Jme="startTransition",uN=Jw[Jme];function ege(t){let{basename:e,children:n,future:r,window:i}=t,s=v.useRef();s.current==null&&(s.current=sme({window:i,v5Compat:!0}));let o=s.current,[a,l]=v.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=v.useCallback(d=>{c&&uN?uN(()=>l(d)):l(d)},[l,c]);return v.useLayoutEffect(()=>o.listen(u),[o,u]),v.useEffect(()=>Gme(r),[r]),v.createElement(Kme,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const tge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nge=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rge=v.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,f=qme(e,Xme),{basename:h}=v.useContext(Qu),p,m=!1;if(typeof c=="string"&&nge.test(c)&&(p=c,tge))try{let S=new URL(window.location.href),w=c.startsWith("//")?new URL(S.protocol+c):new URL(c),E=aD(w.pathname,h);w.origin===S.origin&&E!=null?c=E+w.search+w.hash:m=!0}catch{}let g=Lme(c,{relative:i}),y=ige(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function x(S){r&&r(S),S.defaultPrevented||y(S)}return v.createElement("a",_I({},f,{href:p||g,onClick:m||s?r:x,ref:n,target:l}))});var dN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(dN||(dN={}));var fN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fN||(fN={}));function ige(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Po(),c=Qh(),u=XY(t,{relative:o});return v.useCallback(d=>{if(Qme(d,n)){d.preventDefault();let f=r!==void 0?r:Kb(c)===Kb(u);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function sge(t,e,n){return(e=age(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hN(Object(n),!0).forEach(function(r){sge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function age(t){var e=oge(t,"string");return typeof e=="symbol"?e:e+""}const pN=()=>{};let uD={},tQ={},nQ=null,rQ={mark:pN,measure:pN};try{typeof window<"u"&&(uD=window),typeof document<"u"&&(tQ=document),typeof MutationObserver<"u"&&(nQ=MutationObserver),typeof performance<"u"&&(rQ=performance)}catch{}const{userAgent:mN=""}=uD.navigator||{},ec=uD,Dt=tQ,gN=nQ,vy=rQ;ec.document;const Pa=!!Dt.documentElement&&!!Dt.head&&typeof Dt.addEventListener=="function"&&typeof Dt.createElement=="function",iQ=~mN.indexOf("MSIE")||~mN.indexOf("Trident/");var lge=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,cge=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,sQ={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},uge={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},oQ=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],cr="classic",wE="duotone",dge="sharp",fge="sharp-duotone",aQ=[cr,wE,dge,fge],hge={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},pge={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},mge=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),gge={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},vge=["fak","fa-kit","fakd","fa-kit-duotone"],vN={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},yge=["kit"],xge={kit:{"fa-kit":"fak"},"kit-duotone":{"fa-kit-duotone":"fakd"}},bge=["fak","fakd"],Sge={kit:{fak:"fa-kit"},"kit-duotone":{fakd:"fa-kit-duotone"}},yN={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},yy={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},wge=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Ege=["fak","fa-kit","fakd","fa-kit-duotone"],_ge={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},Tge={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},Cge={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},TI={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},kge=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],CI=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...wge,...kge],Pge=["solid","regular","light","thin","duotone","brands"],lQ=[1,2,3,4,5,6,7,8,9,10],Ige=lQ.concat([11,12,13,14,15,16,17,18,19,20]),Age=[...Object.keys(Cge),...Pge,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",yy.GROUP,yy.SWAP_OPACITY,yy.PRIMARY,yy.SECONDARY].concat(lQ.map(t=>"".concat(t,"x"))).concat(Ige.map(t=>"w-".concat(t))),Lge={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const ga="___FONT_AWESOME___",kI=16,cQ="fa",uQ="svg-inline--fa",Tu="data-fa-i2svg",PI="data-fa-pseudo-element",Rge="data-fa-pseudo-element-pending",dD="data-prefix",fD="data-icon",xN="fontawesome-i2svg",Oge="async",Dge=["HTML","HEAD","STYLE","SCRIPT"],dQ=(()=>{try{return!0}catch{return!1}})();function ov(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[cr]}})}const fQ=oe({},sQ);fQ[cr]=oe(oe(oe(oe({},{"fa-duotone":"duotone"}),sQ[cr]),vN.kit),vN["kit-duotone"]);const Mge=ov(fQ),II=oe({},gge);II[cr]=oe(oe(oe(oe({},{duotone:"fad"}),II[cr]),yN.kit),yN["kit-duotone"]);const bN=ov(II),AI=oe({},TI);AI[cr]=oe(oe({},AI[cr]),Sge.kit);const hD=ov(AI),LI=oe({},Tge);LI[cr]=oe(oe({},LI[cr]),xge.kit);ov(LI);const $ge=lge,hQ="fa-layers-text",Nge=cge,Fge=oe({},hge);ov(Fge);const jge=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],jT=uge,Bge=[...yge,...Age],Wm=ec.FontAwesomeConfig||{};function Uge(t){var e=Dt.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function Vge(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}Dt&&typeof Dt.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,r]=e;const i=Vge(Uge(n));i!=null&&(Wm[r]=i)});const pQ={styleDefault:"solid",familyDefault:cr,cssPrefix:cQ,replacementClass:uQ,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Wm.familyPrefix&&(Wm.cssPrefix=Wm.familyPrefix);const ph=oe(oe({},pQ),Wm);ph.autoReplaceSvg||(ph.observeMutations=!1);const Ce={};Object.keys(pQ).forEach(t=>{Object.defineProperty(Ce,t,{enumerable:!0,set:function(e){ph[t]=e,Gm.forEach(n=>n(Ce))},get:function(){return ph[t]}})});Object.defineProperty(Ce,"familyPrefix",{enumerable:!0,set:function(t){ph.cssPrefix=t,Gm.forEach(e=>e(Ce))},get:function(){return ph.cssPrefix}});ec.FontAwesomeConfig=Ce;const Gm=[];function zge(t){return Gm.push(t),()=>{Gm.splice(Gm.indexOf(t),1)}}const Va=kI,so={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Hge(t){if(!t||!Pa)return;const e=Dt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=Dt.head.childNodes;let r=null;for(let i=n.length-1;i>-1;i--){const s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Dt.head.insertBefore(e,r),t}const Wge="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Wg(){let t=12,e="";for(;t-- >0;)e+=Wge[Math.random()*62|0];return e}function Xh(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function pD(t){return t.classList?Xh(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function mQ(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Gge(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat(mQ(t[n]),'" '),"").trim()}function EE(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function mD(t){return t.size!==so.size||t.x!==so.x||t.y!==so.y||t.rotate!==so.rotate||t.flipX||t.flipY}function Kge(t){let{transform:e,containerWidth:n,iconWidth:r}=t;const i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function qge(t){let{transform:e,width:n=kI,height:r=kI,startCentered:i=!1}=t,s="";return i&&iQ?s+="translate(".concat(e.x/Va-n/2,"em, ").concat(e.y/Va-r/2,"em) "):i?s+="translate(calc(-50% + ".concat(e.x/Va,"em), calc(-50% + ").concat(e.y/Va,"em)) "):s+="translate(".concat(e.x/Va,"em, ").concat(e.y/Va,"em) "),s+="scale(".concat(e.size/Va*(e.flipX?-1:1),", ").concat(e.size/Va*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var Yge=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function gQ(){const t=cQ,e=uQ,n=Ce.cssPrefix,r=Ce.replacementClass;let i=Yge;if(n!==t||r!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}let SN=!1;function BT(){Ce.autoAddCss&&!SN&&(Hge(gQ()),SN=!0)}var Qge={mixout(){return{dom:{css:gQ,insertCss:BT}}},hooks(){return{beforeDOMElementCreation(){BT()},beforeI2svg(){BT()}}}};const va=ec||{};va[ga]||(va[ga]={});va[ga].styles||(va[ga].styles={});va[ga].hooks||(va[ga].hooks={});va[ga].shims||(va[ga].shims=[]);var oo=va[ga];const vQ=[],yQ=function(){Dt.removeEventListener("DOMContentLoaded",yQ),Yb=1,vQ.map(t=>t())};let Yb=!1;Pa&&(Yb=(Dt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Dt.readyState),Yb||Dt.addEventListener("DOMContentLoaded",yQ));function Xge(t){Pa&&(Yb?setTimeout(t,0):vQ.push(t))}function av(t){const{tag:e,attributes:n={},children:r=[]}=t;return typeof t=="string"?mQ(t):"<".concat(e," ").concat(Gge(n),">").concat(r.map(av).join(""),"</").concat(e,">")}function wN(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Zge=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},UT=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?Zge(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function Jge(t){const e=[];let n=0;const r=t.length;for(;n<r;){const i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function RI(t){const e=Jge(t);return e.length===1?e[0].toString(16):null}function e0e(t,e){const n=t.length;let r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function EN(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return!!r.icon?e[r.iconName]=r.icon:e[n]=r,e},{})}function OI(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:r=!1}=n,i=EN(e);typeof oo.hooks.addPack=="function"&&!r?oo.hooks.addPack(t,EN(e)):oo.styles[t]=oe(oe({},oo.styles[t]||{}),i),t==="fas"&&OI("fa",e)}const{styles:Gg,shims:t0e}=oo,xQ=Object.keys(hD),n0e=xQ.reduce((t,e)=>(t[e]=Object.keys(hD[e]),t),{});let gD=null,bQ={},SQ={},wQ={},EQ={},_Q={};function r0e(t){return~Bge.indexOf(t)}function i0e(t,e){const n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!r0e(i)?i:null}const TQ=()=>{const t=r=>UT(Gg,(i,s,o)=>(i[o]=UT(s,r,{}),i),{});bQ=t((r,i,s)=>(i[3]&&(r[i[3]]=s),i[2]&&i[2].filter(a=>typeof a=="number").forEach(a=>{r[a.toString(16)]=s}),r)),SQ=t((r,i,s)=>(r[s]=s,i[2]&&i[2].filter(a=>typeof a=="string").forEach(a=>{r[a]=s}),r)),_Q=t((r,i,s)=>{const o=i[2];return r[s]=s,o.forEach(a=>{r[a]=s}),r});const e="far"in Gg||Ce.autoFetchSvg,n=UT(t0e,(r,i)=>{const s=i[0];let o=i[1];const a=i[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(r.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(r.unicodes[s.toString(16)]={prefix:o,iconName:a}),r},{names:{},unicodes:{}});wQ=n.names,EQ=n.unicodes,gD=_E(Ce.styleDefault,{family:Ce.familyDefault})};zge(t=>{gD=_E(t.styleDefault,{family:Ce.familyDefault})});TQ();function vD(t,e){return(bQ[t]||{})[e]}function s0e(t,e){return(SQ[t]||{})[e]}function eu(t,e){return(_Q[t]||{})[e]}function CQ(t){return wQ[t]||{prefix:null,iconName:null}}function o0e(t){const e=EQ[t],n=vD("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function tc(){return gD}const kQ=()=>({prefix:null,iconName:null,rest:[]});function a0e(t){let e=cr;const n=xQ.reduce((r,i)=>(r[i]="".concat(Ce.cssPrefix,"-").concat(i),r),{});return aQ.forEach(r=>{(t.includes(n[r])||t.some(i=>n0e[r].includes(i)))&&(e=r)}),e}function _E(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=cr}=e,r=Mge[n][t];if(n===wE&&!t)return"fad";const i=bN[n][t]||bN[n][r],s=t in oo.styles?t:null;return i||s||null}function l0e(t){let e=[],n=null;return t.forEach(r=>{const i=i0e(Ce.cssPrefix,r);i?n=i:r&&e.push(r)}),{iconName:n,rest:e}}function _N(t){return t.sort().filter((e,n,r)=>r.indexOf(e)===n)}function TE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let r=null;const i=CI.concat(Ege),s=_N(t.filter(d=>i.includes(d))),o=_N(t.filter(d=>!CI.includes(d))),a=s.filter(d=>(r=d,!oQ.includes(d))),[l=null]=a,c=a0e(s),u=oe(oe({},l0e(o)),{},{prefix:_E(l,{family:c})});return oe(oe(oe({},u),f0e({values:t,family:c,styles:Gg,config:Ce,canonical:u,givenPrefix:r})),c0e(n,r,u))}function c0e(t,e,n){let{prefix:r,iconName:i}=n;if(t||!r||!i)return{prefix:r,iconName:i};const s=e==="fa"?CQ(i):{},o=eu(r,i);return i=s.iconName||o||i,r=s.prefix||r,r==="far"&&!Gg.far&&Gg.fas&&!Ce.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}const u0e=aQ.filter(t=>t!==cr||t!==wE),d0e=Object.keys(TI).filter(t=>t!==cr).map(t=>Object.keys(TI[t])).flat();function f0e(t){const{values:e,family:n,canonical:r,givenPrefix:i="",styles:s={},config:o={}}=t,a=n===wE,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=r.prefix==="fad"||r.prefix==="fa-duotone";if(!a&&(l||c||u)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&u0e.includes(n)&&(Object.keys(s).find(f=>d0e.includes(f))||o.autoFetchSvg)){const f=mge.get(n).defaultShortPrefixId;r.prefix=f,r.iconName=eu(r.prefix,r.iconName)||r.iconName}return(r.prefix==="fa"||i==="fa")&&(r.prefix=tc()||"fas"),r}class h0e{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];const i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach(s=>{this.definitions[s]=oe(oe({},this.definitions[s]||{}),i[s]),OI(s,i[s]);const o=hD[cr][s];o&&OI(o,i[s]),TQ()})}reset(){this.definitions={}}_pullDefinitions(e,n){const r=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(r).map(i=>{const{prefix:s,iconName:o,icon:a}=r[i],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let TN=[],lf={};const Df={},p0e=Object.keys(Df);function m0e(t,e){let{mixoutsTo:n}=e;return TN=t,lf={},Object.keys(Df).forEach(r=>{p0e.indexOf(r)===-1&&delete Df[r]}),TN.forEach(r=>{const i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(s=>{typeof i[s]=="function"&&(n[s]=i[s]),typeof i[s]=="object"&&Object.keys(i[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=i[s][o]})}),r.hooks){const s=r.hooks();Object.keys(s).forEach(o=>{lf[o]||(lf[o]=[]),lf[o].push(s[o])})}r.provides&&r.provides(Df)}),n}function DI(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(lf[t]||[]).forEach(o=>{e=o.apply(null,[e,...r])}),e}function Cu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(lf[t]||[]).forEach(s=>{s.apply(null,n)})}function nc(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Df[t]?Df[t].apply(null,e):void 0}function MI(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||tc();if(e)return e=eu(n,e)||e,wN(PQ.definitions,n,e)||wN(oo.styles,n,e)}const PQ=new h0e,g0e=()=>{Ce.autoReplaceSvg=!1,Ce.observeMutations=!1,Cu("noAuto")},v0e={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Pa?(Cu("beforeI2svg",t),nc("pseudoElements2svg",t),nc("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Ce.autoReplaceSvg===!1&&(Ce.autoReplaceSvg=!0),Ce.observeMutations=!0,Xge(()=>{x0e({autoReplaceSvgRoot:e}),Cu("watch",t)})}},y0e={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:eu(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=_E(t[0]);return{prefix:n,iconName:eu(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Ce.cssPrefix,"-"))>-1||t.match($ge))){const e=TE(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||tc(),iconName:eu(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=tc();return{prefix:e,iconName:eu(e,t)||t}}}},bi={noAuto:g0e,config:Ce,dom:v0e,parse:y0e,library:PQ,findIconDefinition:MI,toHtml:av},x0e=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=Dt}=t;(Object.keys(oo.styles).length>0||Ce.autoFetchSvg)&&Pa&&Ce.autoReplaceSvg&&bi.dom.i2svg({node:e})};function CE(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>av(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Pa)return;const n=Dt.createElement("div");return n.innerHTML=t.html,n.children}}),t}function b0e(t){let{children:e,main:n,mask:r,attributes:i,styles:s,transform:o}=t;if(mD(o)&&n.found&&!r.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};i.style=EE(oe(oe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function S0e(t){let{prefix:e,iconName:n,children:r,attributes:i,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Ce.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:oe(oe({},i),{},{id:o}),children:r}]}]}function yD(t){const{icons:{main:e,mask:n},prefix:r,iconName:i,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:h}=n.found?n:e,p=bge.includes(r),m=[Ce.replacementClass,i?"".concat(Ce.cssPrefix,"-").concat(i):""].filter(E=>u.classes.indexOf(E)===-1).filter(E=>E!==""||!!E).concat(u.classes).join(" ");let g={children:[],attributes:oe(oe({},u.attributes),{},{"data-prefix":r,"data-icon":i,class:m,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(h)})};const y=p&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/h*16*.0625,"em")}:{};d&&(g.attributes[Tu]=""),a&&(g.children.push({tag:"title",attributes:{id:g.attributes["aria-labelledby"]||"title-".concat(c||Wg())},children:[a]}),delete g.attributes.title);const x=oe(oe({},g),{},{prefix:r,iconName:i,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:oe(oe({},y),u.styles)}),{children:S,attributes:w}=n.found&&e.found?nc("generateAbstractMask",x)||{children:[],attributes:{}}:nc("generateAbstractIcon",x)||{children:[],attributes:{}};return x.children=S,x.attributes=w,o?S0e(x):b0e(x)}function CN(t){const{content:e,width:n,height:r,transform:i,title:s,extra:o,watchable:a=!1}=t,l=oe(oe(oe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[Tu]="");const c=oe({},o.styles);mD(i)&&(c.transform=qge({transform:i,startCentered:!0,width:n,height:r}),c["-webkit-transform"]=c.transform);const u=EE(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function w0e(t){const{content:e,title:n,extra:r}=t,i=oe(oe(oe({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=EE(r.styles);s.length>0&&(i.style=s);const o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:VT}=oo;function $I(t){const e=t[0],n=t[1],[r]=t.slice(4);let i=null;return Array.isArray(r)?i={tag:"g",attributes:{class:"".concat(Ce.cssPrefix,"-").concat(jT.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ce.cssPrefix,"-").concat(jT.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(Ce.cssPrefix,"-").concat(jT.PRIMARY),fill:"currentColor",d:r[1]}}]}:i={tag:"path",attributes:{fill:"currentColor",d:r}},{found:!0,width:e,height:n,icon:i}}const E0e={found:!1,width:512,height:512};function _0e(t,e){!dQ&&!Ce.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function NI(t,e){let n=e;return e==="fa"&&Ce.styleDefault!==null&&(e=tc()),new Promise((r,i)=>{if(n==="fa"){const s=CQ(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&VT[e]&&VT[e][t]){const s=VT[e][t];return r($I(s))}_0e(t,e),r(oe(oe({},E0e),{},{icon:Ce.showMissingIcons&&t?nc("missingIconAbstract")||{}:{}}))})}const kN=()=>{},FI=Ce.measurePerformance&&vy&&vy.mark&&vy.measure?vy:{mark:kN,measure:kN},hm='FA "6.7.2"',T0e=t=>(FI.mark("".concat(hm," ").concat(t," begins")),()=>IQ(t)),IQ=t=>{FI.mark("".concat(hm," ").concat(t," ends")),FI.measure("".concat(hm," ").concat(t),"".concat(hm," ").concat(t," begins"),"".concat(hm," ").concat(t," ends"))};var xD={begin:T0e,end:IQ};const xx=()=>{};function PN(t){return typeof(t.getAttribute?t.getAttribute(Tu):null)=="string"}function C0e(t){const e=t.getAttribute?t.getAttribute(dD):null,n=t.getAttribute?t.getAttribute(fD):null;return e&&n}function k0e(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ce.replacementClass)}function P0e(){return Ce.autoReplaceSvg===!0?bx.replace:bx[Ce.autoReplaceSvg]||bx.replace}function I0e(t){return Dt.createElementNS("http://www.w3.org/2000/svg",t)}function A0e(t){return Dt.createElement(t)}function AQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?I0e:A0e}=e;if(typeof t=="string")return Dt.createTextNode(t);const r=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){r.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){r.appendChild(AQ(s,{ceFn:n}))}),r}function L0e(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const bx={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(AQ(n),e)}),e.getAttribute(Tu)===null&&Ce.keepOriginalSource){let n=Dt.createComment(L0e(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~pD(e).indexOf(Ce.replacementClass))return bx.replace(t);const r=new RegExp("".concat(Ce.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Ce.replacementClass||a.match(r)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const i=n.map(s=>av(s)).join(`
`);e.setAttribute(Tu,""),e.innerHTML=i}};function IN(t){t()}function LQ(t,e){const n=typeof e=="function"?e:xx;if(t.length===0)n();else{let r=IN;Ce.mutateApproach===Oge&&(r=ec.requestAnimationFrame||IN),r(()=>{const i=P0e(),s=xD.begin("mutate");t.map(i),s(),n()})}}let bD=!1;function RQ(){bD=!0}function jI(){bD=!1}let Qb=null;function AN(t){if(!gN||!Ce.observeMutations)return;const{treeCallback:e=xx,nodeCallback:n=xx,pseudoElementsCallback:r=xx,observeMutationsRoot:i=Dt}=t;Qb=new gN(s=>{if(bD)return;const o=tc();Xh(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!PN(a.addedNodes[0])&&(Ce.searchPseudoElements&&r(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Ce.searchPseudoElements&&r(a.target.parentNode),a.type==="attributes"&&PN(a.target)&&~jge.indexOf(a.attributeName))if(a.attributeName==="class"&&C0e(a.target)){const{prefix:l,iconName:c}=TE(pD(a.target));a.target.setAttribute(dD,l||o),c&&a.target.setAttribute(fD,c)}else k0e(a.target)&&n(a.target)})}),Pa&&Qb.observe(i,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function R0e(){Qb&&Qb.disconnect()}function O0e(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((r,i)=>{const s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function D0e(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"";let i=TE(pD(t));return i.prefix||(i.prefix=tc()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=s0e(i.prefix,t.innerText)||vD(i.prefix,RI(t.innerText))),!i.iconName&&Ce.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function M0e(t){const e=Xh(t.attributes).reduce((i,s)=>(i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i),{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return Ce.autoA11y&&(n?e["aria-labelledby"]="".concat(Ce.replacementClass,"-title-").concat(r||Wg()):(e["aria-hidden"]="true",e.focusable="false")),e}function $0e(){return{iconName:null,title:null,titleId:null,prefix:null,transform:so,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function LN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:r,rest:i}=D0e(t),s=M0e(t),o=DI("parseNodeAttributes",{},t);let a=e.styleParser?O0e(t):[];return oe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:r,transform:so,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:i,styles:a,attributes:s}},o)}const{styles:N0e}=oo;function OQ(t){const e=Ce.autoReplaceSvg==="nest"?LN(t,{styleParser:!1}):LN(t);return~e.extra.classes.indexOf(hQ)?nc("generateLayersText",t,e):nc("generateSvgReplacementMutation",t,e)}function F0e(){return[...vge,...CI]}function RN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Pa)return Promise.resolve();const n=Dt.documentElement.classList,r=u=>n.add("".concat(xN,"-").concat(u)),i=u=>n.remove("".concat(xN,"-").concat(u)),s=Ce.autoFetchSvg?F0e():oQ.concat(Object.keys(N0e));s.includes("fa")||s.push("fa");const o=[".".concat(hQ,":not([").concat(Tu,"])")].concat(s.map(u=>".".concat(u,":not([").concat(Tu,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Xh(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();const l=xD.begin("onTree"),c=a.reduce((u,d)=>{try{const f=OQ(d);f&&u.push(f)}catch(f){dQ||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{LQ(f,()=>{r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function j0e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;OQ(t).then(n=>{n&&LQ([n],e)})}function B0e(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(e||{}).icon?e:MI(e||{});let{mask:i}=n;return i&&(i=(i||{}).icon?i:MI(i||{})),t(r,oe(oe({},n),{},{mask:i}))}}const U0e=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=so,symbol:r=!1,mask:i=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:h}=t;return CE(oe({type:"icon"},t),()=>(Cu("beforeDOMElementCreation",{iconDefinition:t,params:e}),Ce.autoA11y&&(o?c["aria-labelledby"]="".concat(Ce.replacementClass,"-title-").concat(a||Wg()):(c["aria-hidden"]="true",c.focusable="false")),yD({icons:{main:$I(h),mask:i?$I(i.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:oe(oe({},so),n),symbol:r,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var V0e={mixout(){return{icon:B0e(U0e)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=RN,t.nodeCallback=j0e,t}}},provides(t){t.i2svg=function(e){const{node:n=Dt,callback:r=()=>{}}=e;return RN(n,r)},t.generateSvgReplacementMutation=function(e,n){const{iconName:r,title:i,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,h)=>{Promise.all([NI(r,o),c.iconName?NI(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(p=>{let[m,g]=p;f([e,yD({icons:{main:m,mask:g},prefix:o,iconName:r,transform:a,symbol:l,maskId:u,title:i,titleId:s,extra:d,watchable:!0})])}).catch(h)})},t.generateAbstractIcon=function(e){let{children:n,attributes:r,main:i,transform:s,styles:o}=e;const a=EE(o);a.length>0&&(r.style=a);let l;return mD(s)&&(l=nc("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(l||i.icon),{children:n,attributes:r}}}},z0e={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return CE({type:"layer"},()=>{Cu("beforeDOMElementCreation",{assembler:t,params:e});let r=[];return t(i=>{Array.isArray(i)?i.map(s=>{r=r.concat(s.abstract)}):r=r.concat(i.abstract)}),[{tag:"span",attributes:{class:["".concat(Ce.cssPrefix,"-layers"),...n].join(" ")},children:r}]})}}}},H0e={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:r=[],attributes:i={},styles:s={}}=e;return CE({type:"counter",content:t},()=>(Cu("beforeDOMElementCreation",{content:t,params:e}),w0e({content:t.toString(),title:n,extra:{attributes:i,styles:s,classes:["".concat(Ce.cssPrefix,"-layers-counter"),...r]}})))}}}},W0e={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=so,title:r=null,classes:i=[],attributes:s={},styles:o={}}=e;return CE({type:"text",content:t},()=>(Cu("beforeDOMElementCreation",{content:t,params:e}),CN({content:t,transform:oe(oe({},so),n),title:r,extra:{attributes:s,styles:o,classes:["".concat(Ce.cssPrefix,"-layers-text"),...i]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:r,transform:i,extra:s}=n;let o=null,a=null;if(iQ){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Ce.autoA11y&&!r&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,CN({content:e.innerHTML,width:o,height:a,transform:i,title:r,extra:s,watchable:!0})])}}};const G0e=new RegExp('"',"ug"),ON=[1105920,1112319],DN=oe(oe(oe(oe({},{FontAwesome:{normal:"fas",400:"fas"}}),pge),Lge),_ge),BI=Object.keys(DN).reduce((t,e)=>(t[e.toLowerCase()]=DN[e],t),{}),K0e=Object.keys(BI).reduce((t,e)=>{const n=BI[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function q0e(t){const e=t.replace(G0e,""),n=e0e(e,0),r=n>=ON[0]&&n<=ON[1],i=e.length===2?e[0]===e[1]:!1;return{value:RI(i?e[0]:e),isSecondary:r||i}}function Y0e(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),i=isNaN(r)?"normal":r;return(BI[n]||{})[i]||K0e[n]}function MN(t,e){const n="".concat(Rge).concat(e.replace(":","-"));return new Promise((r,i)=>{if(t.getAttribute(n)!==null)return r();const o=Xh(t.children).filter(f=>f.getAttribute(PI)===e)[0],a=ec.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(Nge),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),r();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let h=Y0e(l,u);const{value:p,isSecondary:m}=q0e(f),g=c[0].startsWith("FontAwesome");let y=vD(h,p),x=y;if(g){const S=o0e(p);S.iconName&&S.prefix&&(y=S.iconName,h=S.prefix)}if(y&&!m&&(!o||o.getAttribute(dD)!==h||o.getAttribute(fD)!==x)){t.setAttribute(n,x),o&&t.removeChild(o);const S=$0e(),{extra:w}=S;w.attributes[PI]=e,NI(y,h).then(E=>{const T=yD(oe(oe({},S),{},{icons:{main:E,mask:kQ()},prefix:h,iconName:x,extra:w,watchable:!0})),_=Dt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(_,t.firstChild):t.appendChild(_),_.outerHTML=T.map(I=>av(I)).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function Q0e(t){return Promise.all([MN(t,"::before"),MN(t,"::after")])}function X0e(t){return t.parentNode!==document.head&&!~Dge.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(PI)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function $N(t){if(Pa)return new Promise((e,n)=>{const r=Xh(t.querySelectorAll("*")).filter(X0e).map(Q0e),i=xD.begin("searchPseudoElements");RQ(),Promise.all(r).then(()=>{i(),jI(),e()}).catch(()=>{i(),jI(),n()})})}var Z0e={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=$N,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=Dt}=e;Ce.searchPseudoElements&&$N(n)}}};let NN=!1;var J0e={mixout(){return{dom:{unwatch(){RQ(),NN=!0}}}},hooks(){return{bootstrap(){AN(DI("mutationObserverCallbacks",{}))},noAuto(){R0e()},watch(t){const{observeMutationsRoot:e}=t;NN?jI():AN(DI("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const FN=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,r)=>{const i=r.toLowerCase().split("-"),s=i[0];let o=i.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var eve={mixout(){return{parse:{transform:t=>FN(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=FN(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:r,containerWidth:i,iconWidth:s}=e;const o={transform:"translate(".concat(i/2," 256)")},a="translate(".concat(r.x*32,", ").concat(r.y*32,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),c="rotate(".concat(r.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:oe({},f.outer),children:[{tag:"g",attributes:oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:oe(oe({},n.icon.attributes),f.path)}]}]}}}};const zT={x:0,y:0,width:"100%",height:"100%"};function jN(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function tve(t){return t.tag==="g"?t.children:[t]}var nve={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),r=n?TE(n.split(" ").map(i=>i.trim())):kQ();return r.prefix||(r.prefix=tc()),t.mask=r,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:r,main:i,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=i,{width:u,icon:d}=s,f=Kge({transform:a,containerWidth:u,iconWidth:l}),h={tag:"rect",attributes:oe(oe({},zT),{},{fill:"white"})},p=c.children?{children:c.children.map(jN)}:{},m={tag:"g",attributes:oe({},f.inner),children:[jN(oe({tag:c.tag,attributes:oe(oe({},c.attributes),f.path)},p))]},g={tag:"g",attributes:oe({},f.outer),children:[m]},y="mask-".concat(o||Wg()),x="clip-".concat(o||Wg()),S={tag:"mask",attributes:oe(oe({},zT),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,g]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:tve(d)},S]};return n.push(w,{tag:"rect",attributes:oe({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(y,")")},zT)}),{children:n,attributes:r}}}},rve={provides(t){let e=!1;ec.matchMedia&&(e=ec.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],r={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:oe(oe({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=oe(oe({},i),{},{attributeName:"opacity"}),o={tag:"circle",attributes:oe(oe({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:oe(oe({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:oe(oe({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:oe(oe({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:oe(oe({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},ive={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),r=n===null?!1:n===""?!0:n;return t.symbol=r,t}}}},sve=[Qge,V0e,z0e,H0e,W0e,Z0e,J0e,eve,nve,rve,ive];m0e(sve,{mixoutsTo:bi});bi.noAuto;bi.config;bi.library;bi.dom;const UI=bi.parse;bi.findIconDefinition;bi.toHtml;const ove=bi.icon;bi.layer;bi.text;bi.counter;var DQ={exports:{}},ave="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",lve=ave,cve=lve;function MQ(){}function $Q(){}$Q.resetWarningCache=MQ;var uve=function(){function t(r,i,s,o,a,l){if(l!==cve){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:$Q,resetWarningCache:MQ};return n.PropTypes=n,n};DQ.exports=uve();var SD=DQ.exports;const ie=Ku(SD);function VI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function dve(t){if(Array.isArray(t))return t}function fve(t){if(Array.isArray(t))return VI(t)}function ol(t,e,n){return(e=bve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function mve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BN(Object(n),!0).forEach(function(r){ol(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vve(t,e){if(t==null)return{};var n,r,i=yve(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function UN(t,e){return dve(t)||pve(t,e)||NQ(t,e)||mve()}function zI(t){return fve(t)||hve(t)||NQ(t)||gve()}function xve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bve(t){var e=xve(t,"string");return typeof e=="symbol"?e:e+""}function Xb(t){"@babel/helpers - typeof";return Xb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(t)}function NQ(t,e){if(t){if(typeof t=="string")return VI(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VI(t,e):void 0}}var Sve="7.0.0",HI;try{var wve=require("@fortawesome/fontawesome-svg-core/package.json");HI=wve.version}catch{HI=typeof process<"u"&&{}.FA_VERSION||"7.0.0"}function Eve(t){var e=t.beat,n=t.fade,r=t.beatFade,i=t.bounce,s=t.shake,o=t.flash,a=t.spin,l=t.spinPulse,c=t.spinReverse,u=t.pulse,d=t.fixedWidth,f=t.inverse,h=t.border,p=t.listItem,m=t.flip,g=t.size,y=t.rotation,x=t.pull,S=t.swapOpacity,w=t.rotateBy,E=t.widthAuto,T=_ve(HI,Sve),_=ol(ol(ol(ol(ol(ol({"fa-beat":e,"fa-fade":n,"fa-beat-fade":r,"fa-bounce":i,"fa-shake":s,"fa-flash":o,"fa-spin":a,"fa-spin-reverse":c,"fa-spin-pulse":l,"fa-pulse":u,"fa-fw":d,"fa-inverse":f,"fa-border":h,"fa-li":p,"fa-flip":m===!0,"fa-flip-horizontal":m==="horizontal"||m==="both","fa-flip-vertical":m==="vertical"||m==="both"},"fa-".concat(g),typeof g<"u"&&g!==null),"fa-rotate-".concat(y),typeof y<"u"&&y!==null&&y!==0),"fa-pull-".concat(x),typeof x<"u"&&x!==null),"fa-swap-opacity",S),"fa-rotate-by",T&&w),"fa-width-auto",T&&E);return Object.keys(_).map(function(I){return _[I]?I:null}).filter(function(I){return I})}function _ve(t,e){for(var n=t.split("-"),r=UN(n,2),i=r[0],s=r[1],o=e.split("-"),a=UN(o,2),l=a[0],c=a[1],u=i.split("."),d=l.split("."),f=0;f<Math.max(u.length,d.length);f++){var h=u[f]||"0",p=d[f]||"0",m=parseInt(h,10),g=parseInt(p,10);if(m!==g)return m>g}for(var y=0;y<Math.max(u.length,d.length);y++){var x=u[y]||"0",S=d[y]||"0";if(x!==S&&x.length!==S.length)return x.length<S.length}return!(s&&!c)}function Tve(t){return t=t-0,t===t}function FQ(t){return Tve(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var Cve=["style"];function kve(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Pve(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=FQ(n.slice(0,r)),s=n.slice(r+1).trim();return i.startsWith("webkit")?e[kve(i)]=s:e[i]=s,e},{})}function jQ(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(l){return jQ(t,l)}),i=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=Pve(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[FQ(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=vve(n,Cve);return i.attrs.style=eo(eo({},i.attrs.style),o),t.apply(void 0,[e.tag,eo(eo({},i.attrs),a)].concat(zI(r)))}var BQ=!1;try{BQ=!0}catch{}function Ive(){if(!BQ&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function VN(t){if(t&&Xb(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(UI.icon)return UI.icon(t);if(t===null)return null;if(t&&Xb(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function HT(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?ol({},t,e):{}}var zN={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},jt=te.forwardRef(function(t,e){var n=eo(eo({},zN),t),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=VN(r),d=HT("classes",[].concat(zI(Eve(n)),zI((o||"").split(" ")))),f=HT("transform",typeof n.transform=="string"?UI.transform(n.transform):n.transform),h=HT("mask",VN(i)),p=ove(u,eo(eo(eo(eo({},d),f),h),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!p)return Ive("Could not find icon",u),null;var m=p.abstract,g={ref:e};return Object.keys(n).forEach(function(y){zN.hasOwnProperty(y)||(g[y]=n[y])}),Ave(m[0],g)});jt.displayName="FontAwesomeIcon";jt.propTypes={beat:ie.bool,border:ie.bool,beatFade:ie.bool,bounce:ie.bool,className:ie.string,fade:ie.bool,flash:ie.bool,mask:ie.oneOfType([ie.object,ie.array,ie.string]),maskId:ie.string,fixedWidth:ie.bool,inverse:ie.bool,flip:ie.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ie.oneOfType([ie.object,ie.array,ie.string]),listItem:ie.bool,pull:ie.oneOf(["right","left"]),pulse:ie.bool,rotation:ie.oneOf([0,90,180,270]),rotateBy:ie.bool,shake:ie.bool,size:ie.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ie.bool,spinPulse:ie.bool,spinReverse:ie.bool,symbol:ie.oneOfType([ie.bool,ie.string]),title:ie.string,titleId:ie.string,transform:ie.oneOfType([ie.string,ie.object]),swapOpacity:ie.bool,widthAuto:ie.bool};var Ave=jQ.bind(null,te.createElement);/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const wD={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},Lve={prefix:"fas",iconName:"sack-dollar",icon:[512,512,[128176],"f81d","M320 96L192 96 144.6 24.9C137.5 14.2 145.1 0 157.9 0L354.1 0c12.8 0 20.4 14.2 13.3 24.9L320 96zM192 128l128 0c3.8 2.5 8.1 5.3 13 8.4C389.7 172.7 512 250.9 512 416c0 53-43 96-96 96L96 512c-53 0-96-43-96-96C0 250.9 122.3 172.7 179 136.4c0 0 0 0 0 0s0 0 0 0c4.8-3.1 9.2-5.9 13-8.4zm84 88c0-11-9-20-20-20s-20 9-20 20l0 14c-7.6 1.7-15.2 4.4-22.2 8.5c-13.9 8.3-25.9 22.8-25.8 43.9c.1 20.3 12 33.1 24.7 40.7c11 6.6 24.7 10.8 35.6 14l1.7 .5c12.6 3.8 21.8 6.8 28 10.7c5.1 3.2 5.8 5.4 5.9 8.2c.1 5-1.8 8-5.9 10.5c-5 3.1-12.9 5-21.4 4.7c-11.1-.4-21.5-3.9-35.1-8.5c-2.3-.8-4.7-1.6-7.2-2.4c-10.5-3.5-21.8 2.2-25.3 12.6s2.2 21.8 12.6 25.3c1.9 .6 4 1.3 6.1 2.1c0 0 0 0 0 0s0 0 0 0c8.3 2.9 17.9 6.2 28.2 8.4l0 14.6c0 11 9 20 20 20s20-9 20-20l0-13.8c8-1.7 16-4.5 23.2-9c14.3-8.9 25.1-24.1 24.8-45c-.3-20.3-11.7-33.4-24.6-41.6c-11.5-7.2-25.9-11.6-37.1-15c0 0 0 0 0 0l-.7-.2c-12.8-3.9-21.9-6.7-28.3-10.5c-5.2-3.1-5.3-4.9-5.3-6.7c0-3.7 1.4-6.5 6.2-9.3c5.4-3.2 13.6-5.1 21.5-5c9.6 .1 20.2 2.2 31.2 5.2c10.7 2.8 21.6-3.5 24.5-14.2s-3.5-21.6-14.2-24.5c-6.5-1.7-13.7-3.4-21.1-4.7l0-13.9z"]},Rve={prefix:"fas",iconName:"hourglass-half",icon:[384,512,["hourglass-2"],"f252","M32 0C14.3 0 0 14.3 0 32S14.3 64 32 64l0 11c0 42.4 16.9 83.1 46.9 113.1L146.7 256 78.9 323.9C48.9 353.9 32 394.6 32 437l0 11c-17.7 0-32 14.3-32 32s14.3 32 32 32l32 0 256 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-11c0-42.4-16.9-83.1-46.9-113.1L237.3 256l67.9-67.9c30-30 46.9-70.7 46.9-113.1l0-11c17.7 0 32-14.3 32-32s-14.3-32-32-32L320 0 64 0 32 0zM96 75l0-11 192 0 0 11c0 19-5.6 37.4-16 53L112 128c-10.3-15.6-16-34-16-53zm16 309c3.5-5.3 7.6-10.3 12.1-14.9L192 301.3l67.9 67.9c4.6 4.6 8.6 9.6 12.1 14.9L112 384z"]},Ove={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},Dve={prefix:"fas",iconName:"chart-simple",icon:[448,512,[],"e473","M160 80c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-352zM0 272c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 160c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48L0 272zM368 96l32 0c26.5 0 48 21.5 48 48l0 288c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48z"]},Mve={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},$ve={prefix:"fas",iconName:"caret-up",icon:[320,512,[],"f0d8","M182.6 137.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8l256 0c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]},Nve={prefix:"fas",iconName:"question",icon:[320,512,[10067,10068,61736],"3f","M80 160c0-35.3 28.7-64 64-64l32 0c35.3 0 64 28.7 64 64l0 3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74l0 1.4c0 17.7 14.3 32 32 32s32-14.3 32-32l0-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7l0-3.6c0-70.7-57.3-128-128-128l-32 0C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},Fve={prefix:"fas",iconName:"leaf",icon:[512,512,[],"f06c","M272 96c-78.6 0-145.1 51.5-167.7 122.5c33.6-17 71.5-26.5 111.7-26.5l88 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0-72 0s0 0 0 0c-16.6 0-32.7 1.9-48.3 5.4c-25.9 5.9-49.9 16.4-71.4 30.7c0 0 0 0 0 0C38.3 298.8 0 364.9 0 440l0 16c0 13.3 10.7 24 24 24s24-10.7 24-24l0-16c0-48.7 20.7-92.5 53.8-123.2C121.6 392.3 190.3 448 272 448l1 0c132.1-.7 239-130.9 239-291.4c0-42.6-7.5-83.1-21.1-119.6c-2.6-6.9-12.7-6.6-16.2-.1C455.9 72.1 418.7 96 376 96L272 96z"]},jve={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},Bve={prefix:"fas",iconName:"wallet",icon:[512,512,[],"f555","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L80 128c-8.8 0-16-7.2-16-16s7.2-16 16-16l368 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L64 32zM416 272a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},UQ={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},Uve={prefix:"fas",iconName:"user-gear",icon:[640,512,["user-cog"],"f4fe","M224 0a128 128 0 1 1 0 256A128 128 0 1 1 224 0zM178.3 304l91.4 0c11.8 0 23.4 1.2 34.5 3.3c-2.1 18.5 7.4 35.6 21.8 44.8c-16.6 10.6-26.7 31.6-20 53.3c4 12.9 9.4 25.5 16.4 37.6s15.2 23.1 24.4 33c15.7 16.9 39.6 18.4 57.2 8.7l0 .9c0 9.2 2.7 18.5 7.9 26.3L29.7 512C13.3 512 0 498.7 0 482.3C0 383.8 79.8 304 178.3 304zM436 218.2c0-7 4.5-13.3 11.3-14.8c10.5-2.4 21.5-3.7 32.7-3.7s22.2 1.3 32.7 3.7c6.8 1.5 11.3 7.8 11.3 14.8l0 30.6c7.9 3.4 15.4 7.7 22.3 12.8l24.9-14.3c6.1-3.5 13.7-2.7 18.5 2.4c7.6 8.1 14.3 17.2 20.1 27.2s10.3 20.4 13.5 31c2.1 6.7-1.1 13.7-7.2 17.2l-25 14.4c.4 4 .7 8.1 .7 12.3s-.2 8.2-.7 12.3l25 14.4c6.1 3.5 9.2 10.5 7.2 17.2c-3.3 10.6-7.8 21-13.5 31s-12.5 19.1-20.1 27.2c-4.8 5.1-12.5 5.9-18.5 2.4l-24.9-14.3c-6.9 5.1-14.3 9.4-22.3 12.8l0 30.6c0 7-4.5 13.3-11.3 14.8c-10.5 2.4-21.5 3.7-32.7 3.7s-22.2-1.3-32.7-3.7c-6.8-1.5-11.3-7.8-11.3-14.8l0-30.5c-8-3.4-15.6-7.7-22.5-12.9l-24.7 14.3c-6.1 3.5-13.7 2.7-18.5-2.4c-7.6-8.1-14.3-17.2-20.1-27.2s-10.3-20.4-13.5-31c-2.1-6.7 1.1-13.7 7.2-17.2l24.8-14.3c-.4-4.1-.7-8.2-.7-12.4s.2-8.3 .7-12.4L343.8 325c-6.1-3.5-9.2-10.5-7.2-17.2c3.3-10.6 7.7-21 13.5-31s12.5-19.1 20.1-27.2c4.8-5.1 12.4-5.9 18.5-2.4l24.8 14.3c6.9-5.1 14.5-9.4 22.5-12.9l0-30.5zm92.1 133.5a48.1 48.1 0 1 0 -96.1 0 48.1 48.1 0 1 0 96.1 0z"]},Vve={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},zve={prefix:"fas",iconName:"money-bill-1",icon:[576,512,["money-bill-alt"],"f3d1","M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm64 320l-64 0 0-64c35.3 0 64 28.7 64 64zM64 192l0-64 64 0c0 35.3-28.7 64-64 64zM448 384c0-35.3 28.7-64 64-64l0 64-64 0zm64-192c-35.3 0-64-28.7-64-64l64 0 0 64zM176 256a112 112 0 1 1 224 0 112 112 0 1 1 -224 0zm76-48c0 9.7 6.9 17.7 16 19.6l0 48.4-4 0c-11 0-20 9-20 20s9 20 20 20l24 0 24 0c11 0 20-9 20-20s-9-20-20-20l-4 0 0-68c0-11-9-20-20-20l-16 0c-11 0-20 9-20 20z"]},Hve={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"]},Wve={prefix:"fas",iconName:"angle-down",icon:[448,512,[8964],"f107","M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"]},Gve={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},Kve=Gve,VQ={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},qve=VQ,zQ=VQ,Yve={prefix:"fas",iconName:"angle-up",icon:[448,512,[8963],"f106","M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"]},Qve={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},Xve={prefix:"fas",iconName:"calendar",icon:[448,512,[128197,128198],"f133","M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272z"]},HQ="/assets/bluesignal-logo-330f2420.png",Zve=U.header`
  width: 100%;
  border-bottom: 1px solid ${({theme:t})=>t.colors.ui200};
  background: ${({theme:t})=>t.colors.bg};
`,Jve=U.div`
  max-width: 1120px;
  margin: 0 auto;
  padding: 0 16px;

  height: 64px;
  display: flex;
  justify-content: space-between;
  align-items: center;

  @media (min-width: 1024px) {
    padding: 0;
  }
`,eye=U.div`
  height: 100%;
  display: flex;
  align-items: center;
`,tye=U.img`
  max-height: 44px;
  width: auto;
  display: block;
`,nye=U.button`
  height: 100%;
  width: 48px;

  background: none;
  border: none;
  padding: 0;
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: center;

  color: ${({theme:t})=>t.colors.ui900};
  font-size: 24px;
  line-height: 1;

  &:hover {
    color: ${({theme:t})=>t.colors.primary500};
  }
`;function rye({onMenuClick:t}){return b.jsx(Zve,{children:b.jsxs(Jve,{children:[b.jsx(eye,{children:b.jsx(tye,{src:HQ,alt:"BlueSignal Cloud Monitoring"})}),b.jsx(nye,{onClick:t,"aria-label":"Open cloud menu",children:b.jsx(jt,{icon:wD})})]})})}const WQ="/assets/logo-73981db0.png",iye="WaterQuality.Trading",sye=U.header`
  position: sticky;
  top: 0;
  z-index: 50;
  width: 100%;
  border-bottom: 1px solid ${({theme:t})=>t.colors.ui200};
  background: ${({theme:t})=>t.colors.bg||"#ffffff"};
`,oye=U.div`
  max-width: 1120px;
  margin: 0 auto;
  padding: 0 16px;

  height: 60px;
  display: flex;
  justify-content: space-between;
  align-items: center;

  @media (min-width: 768px) {
    height: 72px;
  }

  @media (min-width: 1024px) {
    padding: 0;
  }
`,aye=U.img`
  height: 40px;
  width: auto;
  display: block;

  @media (min-width: 768px) {
    height: 48px;
  }

  @media (min-width: 1024px) {
    height: 56px;
  }
`,lye=U.button`
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: center;

  color: ${({theme:t})=>t.colors.ui900};
  font-size: 24px;
  line-height: 1;

  &:hover {
    color: ${({theme:t})=>t.colors.primary500};
  }
`;function cye({onMenuClick:t}){return b.jsx(sye,{children:b.jsxs(oye,{children:[b.jsx(aye,{src:WQ,alt:iye}),b.jsx(lye,{onClick:t,"aria-label":"Open menu",children:b.jsx(jt,{icon:wD})})]})})}function uye(){return null}function dye(){return null}function fye(){const{pathname:t}=Qh(),e=t.startsWith("/dashboard"),[n,r]=te.useState({status:"checking",count:0,last:null});if(te.useEffect(()=>{if(!e)return;let c=!1;async function u(){var f;try{const h=await fetch("/api/v1/devices",{headers:{Accept:"application/json"}});if(!h.ok)throw new Error(String(h.status));const p=await h.json();if(c)return;const m=(p==null?void 0:p.devices)??[];r({status:"ok",count:m.length,last:((f=m[0])==null?void 0:f.last_seen)??null})}catch{c||r(h=>({...h,status:"down",count:0,last:null}))}}u();const d=setInterval(u,1e4);return()=>{c=!0,clearInterval(d)}},[e]),!e)return null;const{status:i,count:s,last:o}=n,a=i==="checking"?"#888":i==="ok"?"#0a0":"#c00",l=i==="checking"?"Checking link":i==="ok"?"Cloud linked":"No link";return b.jsxs("div",{style:{position:"fixed",right:16,bottom:16,zIndex:9999,background:a,color:"#fff",padding:"8px 12px",borderRadius:999,fontFamily:"system-ui, sans-serif",cursor:"default",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},title:"Neptune cloud connectivity",children:[l,"  ",s," device",s===1?"":"s",o?`  last ${o}`:""]})}const GQ=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),kE=v.createContext({}),PE=v.createContext(null),IE=typeof document<"u",ED=IE?v.useLayoutEffect:v.useEffect,KQ=v.createContext({strict:!1}),_D=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),hye="framerAppearId",qQ="data-"+_D(hye);function pye(t,e,n,r){const{visualElement:i}=v.useContext(kE),s=v.useContext(KQ),o=v.useContext(PE),a=v.useContext(GQ).reducedMotion,l=v.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;v.useInsertionEffect(()=>{c&&c.update(n,o)});const u=v.useRef(!!(n[qQ]&&!window.HandoffComplete));return ED(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),v.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function cf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function mye(t,e,n){return v.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):cf(n)&&(n.current=r))},[e])}function Kg(t){return typeof t=="string"||Array.isArray(t)}function AE(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const TD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],CD=["initial",...TD];function LE(t){return AE(t.animate)||CD.some(e=>Kg(t[e]))}function YQ(t){return!!(LE(t)||t.variants)}function gye(t,e){if(LE(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Kg(n)?n:void 0,animate:Kg(r)?r:void 0}}return t.inherit!==!1?e:{}}function vye(t){const{initial:e,animate:n}=gye(t,v.useContext(kE));return v.useMemo(()=>({initial:e,animate:n}),[HN(e),HN(n)])}function HN(t){return Array.isArray(t)?t.join(" "):t}const WN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qg={};for(const t in WN)qg[t]={isEnabled:e=>WN[t].some(n=>!!e[n])};function yye(t){for(const e in t)qg[e]={...qg[e],...t[e]}}const kD=v.createContext({}),QQ=v.createContext({}),xye=Symbol.for("motionComponentSymbol");function bye({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&yye(t);function s(a,l){let c;const u={...v.useContext(GQ),...a,layoutId:Sye(a)},{isStatic:d}=u,f=vye(a),h=r(a,d);if(!d&&IE){f.visualElement=pye(i,h,u,e);const p=v.useContext(QQ),m=v.useContext(KQ).strict;f.visualElement&&(c=f.visualElement.loadFeatures(u,m,t,p))}return v.createElement(kE.Provider,{value:f},c&&f.visualElement?v.createElement(c,{visualElement:f.visualElement,...u}):null,n(i,a,mye(h,f.visualElement,l),h,d,f.visualElement))}const o=v.forwardRef(s);return o[xye]=i,o}function Sye({layoutId:t}){const e=v.useContext(kD).id;return e&&t!==void 0?e+"-"+t:t}function wye(t){function e(r,i={}){return bye(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const Eye=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function PD(t){return typeof t!="string"||t.includes("-")?!1:!!(Eye.indexOf(t)>-1||/[A-Z]/.test(t))}const Zb={};function _ye(t){Object.assign(Zb,t)}const lv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xu=new Set(lv);function XQ(t,{layout:e,layoutId:n}){return Xu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Zb[t]||t==="opacity")}const Kr=t=>!!(t&&t.getVelocity),Tye={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Cye=lv.length;function kye(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<Cye;o++){const a=lv[o];if(t[a]!==void 0){const l=Tye[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const ZQ=t=>e=>typeof e=="string"&&e.startsWith(t),JQ=ZQ("--"),WI=ZQ("var(--"),Pye=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Iye=(t,e)=>e&&typeof t=="number"?e.transform(t):t,rc=(t,e,n)=>Math.min(Math.max(n,t),e),Zu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Km={...Zu,transform:t=>rc(0,1,t)},xy={...Zu,default:1},qm=t=>Math.round(t*1e5)/1e5,RE=/(-)?([\d]*\.?[\d])+/g,eX=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Aye=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function cv(t){return typeof t=="string"}const uv=t=>({test:e=>cv(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ja=uv("deg"),vo=uv("%"),Ae=uv("px"),Lye=uv("vh"),Rye=uv("vw"),GN={...vo,parse:t=>vo.parse(t)/100,transform:t=>vo.transform(t*100)},KN={...Zu,transform:Math.round},tX={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,size:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,rotate:Ja,rotateX:Ja,rotateY:Ja,rotateZ:Ja,scale:xy,scaleX:xy,scaleY:xy,scaleZ:xy,skew:Ja,skewX:Ja,skewY:Ja,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:Km,originX:GN,originY:GN,originZ:Ae,zIndex:KN,fillOpacity:Km,strokeOpacity:Km,numOctaves:KN};function ID(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,c=!1,u=!0;for(const d in e){const f=e[d];if(JQ(d)){s[d]=f;continue}const h=tX[d],p=Iye(f,h);if(Xu.has(d)){if(l=!0,o[d]=p,!u)continue;f!==(h.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,a[d]=p):i[d]=p}if(e.transform||(l||r?i.transform=kye(t.transform,n,u,r):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:h=0}=a;i.transformOrigin=`${d} ${f} ${h}`}}const AD=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nX(t,e,n){for(const r in e)!Kr(e[r])&&!XQ(r,n)&&(t[r]=e[r])}function Oye({transformTemplate:t},e,n){return v.useMemo(()=>{const r=AD();return ID(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function Dye(t,e,n){const r=t.style||{},i={};return nX(i,r,t),Object.assign(i,Oye(t,e,n)),t.transformValues?t.transformValues(i):i}function Mye(t,e,n){const r={},i=Dye(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const $ye=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jb(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$ye.has(t)}let rX=t=>!Jb(t);function Nye(t){t&&(rX=e=>e.startsWith("on")?!Jb(e):t(e))}try{Nye(require("@emotion/is-prop-valid").default)}catch{}function Fye(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(rX(i)||n===!0&&Jb(i)||!e&&!Jb(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function qN(t,e,n){return typeof t=="string"?t:Ae.transform(e+n*t)}function jye(t,e,n){const r=qN(e,t.x,t.width),i=qN(n,t.y,t.height);return`${r} ${i}`}const Bye={offset:"stroke-dashoffset",array:"stroke-dasharray"},Uye={offset:"strokeDashoffset",array:"strokeDasharray"};function Vye(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Bye:Uye;t[s.offset]=Ae.transform(-r);const o=Ae.transform(e),a=Ae.transform(n);t[s.array]=`${o} ${a}`}function LD(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d,f){if(ID(t,c,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:m}=t;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=jye(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&Vye(h,o,a,l,!1)}const iX=()=>({...AD(),attrs:{}}),RD=t=>typeof t=="string"&&t.toLowerCase()==="svg";function zye(t,e,n,r){const i=v.useMemo(()=>{const s=iX();return LD(s,e,{enableHardwareAcceleration:!1},RD(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};nX(s,t.style,t),i.style={...s,...i.style}}return i}function Hye(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(PD(n)?zye:Mye)(r,s,o,n),u={...Fye(r,typeof n=="string",t),...l,ref:i},{children:d}=r,f=v.useMemo(()=>Kr(d)?d.get():d,[d]);return v.createElement(n,{...u,children:f})}}function sX(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const oX=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aX(t,e,n,r){sX(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(oX.has(i)?i:_D(i),e.attrs[i])}function OD(t,e){const{style:n}=t,r={};for(const i in n)(Kr(n[i])||e.style&&Kr(e.style[i])||XQ(i,t))&&(r[i]=n[i]);return r}function lX(t,e){const n=OD(t,e);for(const r in t)if(Kr(t[r])||Kr(e[r])){const i=lv.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function DD(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function cX(t){const e=v.useRef(null);return e.current===null&&(e.current=t()),e.current}const eS=t=>Array.isArray(t),Wye=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Gye=t=>eS(t)?t[t.length-1]||0:t;function Sx(t){const e=Kr(t)?t.get():t;return Wye(e)?e.toValue():e}function Kye({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:qye(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const uX=t=>(e,n)=>{const r=v.useContext(kE),i=v.useContext(PE),s=()=>Kye(t,e,r,i);return n?s():cX(s)};function qye(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=Sx(s[f]);let{initial:o,animate:a}=t;const l=LE(t),c=YQ(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;return d&&typeof d!="boolean"&&!AE(d)&&(Array.isArray(d)?d:[d]).forEach(h=>{const p=DD(t,h);if(!p)return;const{transitionEnd:m,transition:g,...y}=p;for(const x in y){let S=y[x];if(Array.isArray(S)){const w=u?S.length-1:0;S=S[w]}S!==null&&(i[x]=S)}for(const x in m)i[x]=m[x]}),i}const nn=t=>t;let YN=class{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}};function Yye(t){let e=new YN,n=new YN,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,u=!1)=>{const d=u&&i,f=d?e:n;return c&&o.add(l),f.add(l)&&d&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const u=e.order[c];u(l),o.has(u)&&(a.schedule(u),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const by=["prepare","read","update","preRender","render","postRender"],Qye=40;function Xye(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=by.reduce((d,f)=>(d[f]=Yye(()=>n=!0),d),{}),o=d=>s[d].process(i),a=()=>{const d=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(d-i.timestamp,Qye),1),i.timestamp=d,i.isProcessing=!0,by.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:by.reduce((d,f)=>{const h=s[f];return d[f]=(p,m=!1,g=!1)=>(n||l(),h.schedule(p,m,g)),d},{}),cancel:d=>by.forEach(f=>s[f].cancel(d)),state:i,steps:s}}const{schedule:Et,cancel:ya,state:Qn,steps:WT}=Xye(typeof requestAnimationFrame<"u"?requestAnimationFrame:nn,!0),Zye={useVisualState:uX({scrapeMotionValuesFromProps:lX,createRenderState:iX,onMount:(t,e,{renderState:n,latestValues:r})=>{Et.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Et.render(()=>{LD(n,r,{enableHardwareAcceleration:!1},RD(e.tagName),t.transformTemplate),aX(e,n)})}})},Jye={useVisualState:uX({scrapeMotionValuesFromProps:OD,createRenderState:AD})};function e1e(t,{forwardMotionProps:e=!1},n,r){return{...PD(t)?Zye:Jye,preloadedFeatures:n,useRender:Hye(e),createVisualElement:r,Component:t}}function ea(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const dX=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function OE(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const t1e=t=>e=>dX(e)&&t(e,OE(e));function la(t,e,n,r){return ea(t,e,t1e(n),r)}const n1e=(t,e)=>n=>e(t(n)),Vl=(...t)=>t.reduce(n1e);function fX(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const QN=fX("dragHorizontal"),XN=fX("dragVertical");function hX(t){let e=!1;if(t==="y")e=XN();else if(t==="x")e=QN();else{const n=QN(),r=XN();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function pX(){const t=hX(!0);return t?(t(),!1):!0}class gc{constructor(e){this.isMounted=!1,this.node=e}update(){}}function ZN(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||pX())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Et.update(()=>a[r](s,o))};return la(t.current,n,i,{passive:!t.getProps()[r]})}class r1e extends gc{mount(){this.unmount=Vl(ZN(this.node,!0),ZN(this.node,!1))}unmount(){}}class i1e extends gc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vl(ea(this.node.current,"focus",()=>this.onFocus()),ea(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const mX=(t,e)=>e?t===e?!0:mX(t,e.parentElement):!1;function GT(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,OE(n))}class s1e extends gc{constructor(){super(...arguments),this.removeStartListeners=nn,this.removeEndListeners=nn,this.removeAccessibleListeners=nn,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=la(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:d}=this.node.getProps();Et.update(()=>{!d&&!mX(this.node.current,a.target)?u&&u(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=la(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Vl(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||GT("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Et.update(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=ea(this.node.current,"keyup",o),GT("down",(a,l)=>{this.startPress(a,l)})},n=ea(this.node.current,"keydown",e),r=()=>{this.isPressing&&GT("cancel",(s,o)=>this.cancelPress(s,o))},i=ea(this.node.current,"blur",r);this.removeAccessibleListeners=Vl(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Et.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!pX()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Et.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=la(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ea(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Vl(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const GI=new WeakMap,KT=new WeakMap,o1e=t=>{const e=GI.get(t.target);e&&e(t)},a1e=t=>{t.forEach(o1e)};function l1e({root:t,...e}){const n=t||document;KT.has(n)||KT.set(n,{});const r=KT.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(a1e,{root:t,...e})),r[i]}function c1e(t,e,n){const r=l1e(e);return GI.set(t,n),r.observe(t),()=>{GI.delete(t),r.unobserve(t)}}const u1e={some:0,all:1};class d1e extends gc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:u1e[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=c?u:d;f&&f(l)};return c1e(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(f1e(e,n))&&this.startObserver()}unmount(){}}function f1e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const h1e={inView:{Feature:d1e},tap:{Feature:s1e},focus:{Feature:i1e},hover:{Feature:r1e}};function gX(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function p1e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function m1e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function DE(t,e,n){const r=t.getProps();return DD(r,e,n!==void 0?n:r.custom,p1e(t),m1e(t))}let g1e=nn,MD=nn;const zl=t=>t*1e3,ca=t=>t/1e3,v1e={current:!1},vX=t=>Array.isArray(t)&&typeof t[0]=="number";function yX(t){return!!(!t||typeof t=="string"&&xX[t]||vX(t)||Array.isArray(t)&&t.every(yX))}const pm=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,xX={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:pm([0,.65,.55,1]),circOut:pm([.55,0,1,.45]),backIn:pm([.31,.01,.66,-.59]),backOut:pm([.33,1.53,.69,.99])};function bX(t){if(t)return vX(t)?pm(t):Array.isArray(t)?t.map(bX):xX[t]}function y1e(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=bX(a);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function x1e(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const SX=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,b1e=1e-7,S1e=12;function w1e(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=SX(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>b1e&&++a<S1e);return o}function dv(t,e,n,r){if(t===e&&n===r)return nn;const i=s=>w1e(s,0,1,t,n);return s=>s===0||s===1?s:SX(i(s),e,r)}const E1e=dv(.42,0,1,1),_1e=dv(0,0,.58,1),wX=dv(.42,0,.58,1),T1e=t=>Array.isArray(t)&&typeof t[0]!="number",EX=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,_X=t=>e=>1-t(1-e),$D=t=>1-Math.sin(Math.acos(t)),TX=_X($D),C1e=EX($D),CX=dv(.33,1.53,.69,.99),ND=_X(CX),k1e=EX(ND),P1e=t=>(t*=2)<1?.5*ND(t):.5*(2-Math.pow(2,-10*(t-1))),I1e={linear:nn,easeIn:E1e,easeInOut:wX,easeOut:_1e,circIn:$D,circInOut:C1e,circOut:TX,backIn:ND,backInOut:k1e,backOut:CX,anticipate:P1e},JN=t=>{if(Array.isArray(t)){MD(t.length===4);const[e,n,r,i]=t;return dv(e,n,r,i)}else if(typeof t=="string")return I1e[t];return t},FD=(t,e)=>n=>!!(cv(n)&&Aye.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),kX=(t,e,n)=>r=>{if(!cv(r))return r;const[i,s,o,a]=r.match(RE);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},A1e=t=>rc(0,255,t),qT={...Zu,transform:t=>Math.round(A1e(t))},tu={test:FD("rgb","red"),parse:kX("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+qT.transform(t)+", "+qT.transform(e)+", "+qT.transform(n)+", "+qm(Km.transform(r))+")"};function L1e(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const KI={test:FD("#"),parse:L1e,transform:tu.transform},uf={test:FD("hsl","hue"),parse:kX("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+vo.transform(qm(e))+", "+vo.transform(qm(n))+", "+qm(Km.transform(r))+")"},gr={test:t=>tu.test(t)||KI.test(t)||uf.test(t),parse:t=>tu.test(t)?tu.parse(t):uf.test(t)?uf.parse(t):KI.parse(t),transform:t=>cv(t)?t:t.hasOwnProperty("red")?tu.transform(t):uf.transform(t)},Kt=(t,e,n)=>-n*t+n*e+t;function YT(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function R1e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=YT(l,a,t+1/3),s=YT(l,a,t),o=YT(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const QT=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},O1e=[KI,tu,uf],D1e=t=>O1e.find(e=>e.test(t));function e8(t){const e=D1e(t);let n=e.parse(t);return e===uf&&(n=R1e(n)),n}const PX=(t,e)=>{const n=e8(t),r=e8(e),i={...n};return s=>(i.red=QT(n.red,r.red,s),i.green=QT(n.green,r.green,s),i.blue=QT(n.blue,r.blue,s),i.alpha=Kt(n.alpha,r.alpha,s),tu.transform(i))};function M1e(t){var e,n;return isNaN(t)&&cv(t)&&(((e=t.match(RE))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(eX))===null||n===void 0?void 0:n.length)||0)>0}const IX={regex:Pye,countKey:"Vars",token:"${v}",parse:nn},AX={regex:eX,countKey:"Colors",token:"${c}",parse:gr.parse},LX={regex:RE,countKey:"Numbers",token:"${n}",parse:Zu.parse};function XT(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function tS(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&XT(n,IX),XT(n,AX),XT(n,LX),n}function RX(t){return tS(t).values}function OX(t){const{values:e,numColors:n,numVars:r,tokenised:i}=tS(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(IX.token,o[l]):l<r+n?a=a.replace(AX.token,gr.transform(o[l])):a=a.replace(LX.token,qm(o[l]));return a}}const $1e=t=>typeof t=="number"?0:t;function N1e(t){const e=RX(t);return OX(t)(e.map($1e))}const ic={test:M1e,parse:RX,createTransformer:OX,getAnimatableNone:N1e},DX=(t,e)=>n=>`${n>0?e:t}`;function MX(t,e){return typeof t=="number"?n=>Kt(t,e,n):gr.test(t)?PX(t,e):t.startsWith("var(")?DX(t,e):NX(t,e)}const $X=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>MX(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},F1e=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=MX(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},NX=(t,e)=>{const n=ic.createTransformer(e),r=tS(t),i=tS(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Vl($X(r.values,i.values),n):DX(t,e)},Yg=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},t8=(t,e)=>n=>Kt(t,e,n);function j1e(t){return typeof t=="number"?t8:typeof t=="string"?gr.test(t)?PX:NX:Array.isArray(t)?$X:typeof t=="object"?F1e:t8}function B1e(t,e,n){const r=[],i=n||j1e(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||nn:e;a=Vl(l,a)}r.push(a)}return r}function FX(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(MD(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=B1e(e,r,i),a=o.length,l=c=>{let u=0;if(a>1)for(;u<t.length-2&&!(c<t[u+1]);u++);const d=Yg(t[u],t[u+1],c);return o[u](d)};return n?c=>l(rc(t[0],t[s-1],c)):l}function U1e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Yg(0,e,r);t.push(Kt(n,1,i))}}function V1e(t){const e=[0];return U1e(e,t.length-1),e}function z1e(t,e){return t.map(n=>n*e)}function H1e(t,e){return t.map(()=>e||wX).splice(0,t.length-1)}function nS({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=T1e(r)?r.map(JN):JN(r),s={done:!1,value:e[0]},o=z1e(n&&n.length===e.length?n:V1e(e),t),a=FX(o,e,{ease:Array.isArray(i)?i:H1e(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function jX(t,e){return e?t*(1e3/e):0}const W1e=5;function BX(t,e,n){const r=Math.max(e-W1e,0);return jX(n-t(r),e-r)}const ZT=.001,G1e=.01,n8=10,K1e=.05,q1e=1;function Y1e({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;g1e(t<=zl(n8));let o=1-e;o=rc(K1e,q1e,o),t=rc(G1e,n8,ca(t)),o<1?(i=c=>{const u=c*o,d=u*t,f=u-n,h=qI(c,o),p=Math.exp(-d);return ZT-f/h*p},s=c=>{const d=c*o*t,f=d*n+n,h=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-d),m=qI(Math.pow(c,2),o);return(-i(c)+ZT>0?-1:1)*((f-h)*p)/m}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-ZT+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=X1e(i,s,a);if(t=zl(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Q1e=12;function X1e(t,e,n){let r=n;for(let i=1;i<Q1e;i++)r=r-t(r)/e(r);return r}function qI(t,e){return t*Math.sqrt(1-e*e)}const Z1e=["duration","bounce"],J1e=["stiffness","damping","mass"];function r8(t,e){return e.some(n=>t[n]!==void 0)}function exe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!r8(t,J1e)&&r8(t,Z1e)){const n=Y1e(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function UX({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:f}=exe({...r,velocity:-ca(r.velocity||0)}),h=d||0,p=l/(2*Math.sqrt(a*c)),m=s-i,g=ca(Math.sqrt(a/c)),y=Math.abs(m)<5;n||(n=y?.01:2),e||(e=y?.005:.5);let x;if(p<1){const S=qI(g,p);x=w=>{const E=Math.exp(-p*g*w);return s-E*((h+p*g*m)/S*Math.sin(S*w)+m*Math.cos(S*w))}}else if(p===1)x=S=>s-Math.exp(-g*S)*(m+(h+g*m)*S);else{const S=g*Math.sqrt(p*p-1);x=w=>{const E=Math.exp(-p*g*w),T=Math.min(S*w,300);return s-E*((h+p*g*m)*Math.sinh(T)+S*m*Math.cosh(T))/S}}return{calculatedDuration:f&&u||null,next:S=>{const w=x(S);if(f)o.done=S>=u;else{let E=h;S!==0&&(p<1?E=BX(x,S,w):E=0);const T=Math.abs(E)<=n,_=Math.abs(s-w)<=e;o.done=T&&_}return o.value=o.done?s:w,o}}}function i8({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],f={done:!1,value:d},h=I=>a!==void 0&&I<a||l!==void 0&&I>l,p=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let m=n*e;const g=d+m,y=o===void 0?g:o(g);y!==g&&(m=y-d);const x=I=>-m*Math.exp(-I/r),S=I=>y+x(I),w=I=>{const A=x(I),L=S(I);f.done=Math.abs(A)<=c,f.value=f.done?y:L};let E,T;const _=I=>{h(f.value)&&(E=I,T=UX({keyframes:[f.value,p(f.value)],velocity:BX(S,I,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return _(0),{calculatedDuration:null,next:I=>{let A=!1;return!T&&E===void 0&&(A=!0,w(I),_(I)),E!==void 0&&I>E?T.next(I-E):(!A&&w(I),f)}}}const txe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Et.update(e,!0),stop:()=>ya(e),now:()=>Qn.isProcessing?Qn.timestamp:performance.now()}},s8=2e4;function o8(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<s8;)e+=n,r=t.next(e);return e>=s8?1/0:e}const nxe={decay:i8,inertia:i8,tween:nS,keyframes:nS,spring:UX};function rS({autoplay:t=!0,delay:e=0,driver:n=txe,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...f}){let h=1,p=!1,m,g;const y=()=>{g=new Promise(N=>{m=N})};y();let x;const S=nxe[i]||nS;let w;S!==nS&&typeof r[0]!="number"&&(w=FX([0,100],r,{clamp:!1}),r=[0,100]);const E=S({...f,keyframes:r});let T;a==="mirror"&&(T=S({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let _="idle",I=null,A=null,L=null;E.calculatedDuration===null&&s&&(E.calculatedDuration=o8(E));const{calculatedDuration:j}=E;let D=1/0,O=1/0;j!==null&&(D=j+o,O=D*(s+1)-o);let $=0;const R=N=>{if(A===null)return;h>0&&(A=Math.min(A,N)),h<0&&(A=Math.min(N-O/h,A)),I!==null?$=I:$=Math.round(N-A)*h;const V=$-e*(h>=0?1:-1),H=h>=0?V<0:V>O;$=Math.max(V,0),_==="finished"&&I===null&&($=O);let W=$,z=E;if(s){const ne=Math.min($,O)/D;let Z=Math.floor(ne),re=ne%1;!re&&ne>=1&&(re=1),re===1&&Z--,Z=Math.min(Z,s+1),!!(Z%2)&&(a==="reverse"?(re=1-re,o&&(re-=o/D)):a==="mirror"&&(z=T)),W=rc(0,1,re)*D}const G=H?{done:!1,value:r[0]}:z.next(W);w&&(G.value=w(G.value));let{done:K}=G;!H&&j!==null&&(K=h>=0?$>=O:$<=0);const Q=I===null&&(_==="finished"||_==="running"&&K);return d&&d(G.value),Q&&k(),G},C=()=>{x&&x.stop(),x=void 0},P=()=>{_="idle",C(),m(),y(),A=L=null},k=()=>{_="finished",u&&u(),C(),m()},M=()=>{if(p)return;x||(x=n(R));const N=x.now();l&&l(),I!==null?A=N-I:(!A||_==="finished")&&(A=N),_==="finished"&&y(),L=A,I=null,_="running",x.start()};t&&M();const B={then(N,V){return g.then(N,V)},get time(){return ca($)},set time(N){N=zl(N),$=N,I!==null||!x||h===0?I=N:A=x.now()-N/h},get duration(){const N=E.calculatedDuration===null?o8(E):E.calculatedDuration;return ca(N)},get speed(){return h},set speed(N){N===h||!x||(h=N,B.time=ca($))},get state(){return _},play:M,pause:()=>{_="paused",I=$},stop:()=>{p=!0,_!=="idle"&&(_="idle",c&&c(),P())},cancel:()=>{L!==null&&R(L),P()},complete:()=>{_="finished"},sample:N=>(A=0,R(N))};return B}function rxe(t){let e;return()=>(e===void 0&&(e=t()),e)}const ixe=rxe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sxe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Sy=10,oxe=2e4,axe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!yX(e.ease);function lxe(t,e,{onUpdate:n,onComplete:r,...i}){if(!(ixe()&&sxe.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const u=()=>{l=new Promise(S=>{a=S})};u();let{keyframes:d,duration:f=300,ease:h,times:p}=i;if(axe(e,i)){const S=rS({...i,repeat:0,delay:0});let w={done:!1,value:d[0]};const E=[];let T=0;for(;!w.done&&T<oxe;)w=S.sample(T),E.push(w.value),T+=Sy;p=void 0,d=E,f=T-Sy,h="linear"}const m=y1e(t.owner.current,e,d,{...i,duration:f,ease:h,times:p}),g=()=>{c=!1,m.cancel()},y=()=>{c=!0,Et.update(g),a(),u()};return m.onfinish=()=>{c||(t.set(x1e(d,i)),r&&r(),y())},{then(S,w){return l.then(S,w)},attachTimeline(S){return m.timeline=S,m.onfinish=null,nn},get time(){return ca(m.currentTime||0)},set time(S){m.currentTime=zl(S)},get speed(){return m.playbackRate},set speed(S){m.playbackRate=S},get duration(){return ca(f)},play:()=>{o||(m.play(),ya(g))},pause:()=>m.pause(),stop:()=>{if(o=!0,m.playState==="idle")return;const{currentTime:S}=m;if(S){const w=rS({...i,autoplay:!1});t.setWithVelocity(w.sample(S-Sy).value,w.sample(S).value,Sy)}y()},complete:()=>{c||m.finish()},cancel:y}}function cxe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:nn,pause:nn,stop:nn,then:s=>(s(),Promise.resolve()),cancel:nn,complete:nn});return e?rS({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const uxe={type:"spring",stiffness:500,damping:25,restSpeed:10},dxe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),fxe={type:"keyframes",duration:.8},hxe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pxe=(t,{keyframes:e})=>e.length>2?fxe:Xu.has(t)?t.startsWith("scale")?dxe(e[1]):uxe:hxe,YI=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ic.test(e)||e==="0")&&!e.startsWith("url(")),mxe=new Set(["brightness","contrast","saturate","opacity"]);function gxe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(RE)||[];if(!r)return t;const i=n.replace(r,"");let s=mxe.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const vxe=/([a-z-]*)\(.*?\)/g,QI={...ic,getAnimatableNone:t=>{const e=t.match(vxe);return e?e.map(gxe).join(" "):t}},yxe={...tX,color:gr,backgroundColor:gr,outlineColor:gr,fill:gr,stroke:gr,borderColor:gr,borderTopColor:gr,borderRightColor:gr,borderBottomColor:gr,borderLeftColor:gr,filter:QI,WebkitFilter:QI},jD=t=>yxe[t];function VX(t,e){let n=jD(t);return n!==QI&&(n=ic),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const zX=t=>/^0[^.\s]+$/.test(t);function xxe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||zX(t)}function bxe(t,e,n,r){const i=YI(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),xxe(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const u=l[c];s[u]=VX(e,a)}return s}function Sxe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}function BD(t,e){return t[e]||t.default||t}const wxe={skipAnimations:!1},UD=(t,e,n,r={})=>i=>{const s=BD(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-zl(o);const l=bxe(e,t,n,s),c=l[0],u=l[l.length-1],d=YI(t,c),f=YI(t,u);let h={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:p=>{e.set(p),s.onUpdate&&s.onUpdate(p)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(Sxe(s)||(h={...h,...pxe(t,h)}),h.duration&&(h.duration=zl(h.duration)),h.repeatDelay&&(h.repeatDelay=zl(h.repeatDelay)),!d||!f||v1e.current||s.type===!1||wxe.skipAnimations)return cxe(h);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=lxe(e,t,h);if(p)return p}return rS(h)};function iS(t){return!!(Kr(t)&&t.add)}const HX=t=>/^\-?\d*\.?\d+$/.test(t);function VD(t,e){t.indexOf(e)===-1&&t.push(e)}function zD(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class HD{constructor(){this.subscriptions=[]}add(e){return VD(this.subscriptions,e),()=>zD(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Exe=t=>!isNaN(parseFloat(t));class _xe{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Qn;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,Et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Exe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new HD);const r=this.events[e].add(n);return e==="change"?()=>{r(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?jX(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mh(t,e){return new _xe(t,e)}const WX=t=>e=>e.test(t),Txe={test:t=>t==="auto",parse:t=>t},GX=[Zu,Ae,vo,Ja,Rye,Lye,Txe],Ap=t=>GX.find(WX(t)),Cxe=[...GX,gr,ic],kxe=t=>Cxe.find(WX(t));function Pxe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,mh(n))}function Ixe(t,e){const n=DE(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=Gye(s[o]);Pxe(t,o,a)}}function Axe(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),u!=null&&(typeof u=="string"&&(HX(u)||zX(u))?u=parseFloat(u):!kxe(u)&&ic.test(c)&&(u=VX(l,c)),t.addValue(l,mh(u,{owner:t})),n[l]===void 0&&(n[l]=u),u!==null&&t.setBaseTarget(l,u))}}function Lxe(t,e){return e?(e[t]||e.default||e).from:void 0}function Rxe(t,e,n){const r={};for(const i in t){const s=Lxe(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function Oxe({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Dxe(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function KX(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in a){const f=t.getValue(d),h=a[d];if(!f||h===void 0||u&&Oxe(u,d))continue;const p={delay:n,elapsed:0,...BD(s||{},d)};if(window.HandoffAppearAnimations){const y=t.getProps()[qQ];if(y){const x=window.HandoffAppearAnimations(y,d,f,Et);x!==null&&(p.elapsed=x,p.isHandoff=!0)}}let m=!p.isHandoff&&!Dxe(f,h);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(m=!1),f.animation&&(m=!1),m)continue;f.start(UD(d,f,h,t.shouldReduceMotion&&Xu.has(d)?{type:!1}:p));const g=f.animation;iS(l)&&(l.add(d),g.then(()=>l.remove(d))),c.push(g)}return o&&Promise.all(c).then(()=>{o&&Ixe(t,o)}),c}function XI(t,e,n={}){const r=DE(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(KX(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:d}=i;return Mxe(t,e,c+l,u,d,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function Mxe(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort($xe).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(XI(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function $xe(t,e){return t.sortNodePosition(e)}function Nxe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>XI(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=XI(t,e,n);else{const i=typeof e=="function"?DE(t,e,n.custom):e;r=Promise.all(KX(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const Fxe=[...TD].reverse(),jxe=TD.length;function Bxe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Nxe(t,n,r)))}function Uxe(t){let e=Bxe(t);const n=zxe();let r=!0;const i=(l,c)=>{const u=DE(t,c);if(u){const{transition:d,transitionEnd:f,...h}=u;l={...l,...h,...f}}return l};function s(l){e=l(t)}function o(l,c){const u=t.getProps(),d=t.getVariantContext(!0)||{},f=[],h=new Set;let p={},m=1/0;for(let y=0;y<jxe;y++){const x=Fxe[y],S=n[x],w=u[x]!==void 0?u[x]:d[x],E=Kg(w),T=x===c?S.isActive:null;T===!1&&(m=y);let _=w===d[x]&&w!==u[x]&&E;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),S.protectedKeys={...p},!S.isActive&&T===null||!w&&!S.prevProp||AE(w)||typeof w=="boolean")continue;let A=Vxe(S.prevProp,w)||x===c&&S.isActive&&!_&&E||y>m&&E,L=!1;const j=Array.isArray(w)?w:[w];let D=j.reduce(i,{});T===!1&&(D={});const{prevResolvedValues:O={}}=S,$={...O,...D},R=C=>{A=!0,h.has(C)&&(L=!0,h.delete(C)),S.needsAnimating[C]=!0};for(const C in $){const P=D[C],k=O[C];if(p.hasOwnProperty(C))continue;let M=!1;eS(P)&&eS(k)?M=!gX(P,k):M=P!==k,M?P!==void 0?R(C):h.add(C):P!==void 0&&h.has(C)?R(C):S.protectedKeys[C]=!0}S.prevProp=w,S.prevResolvedValues=D,S.isActive&&(p={...p,...D}),r&&t.blockInitialAnimation&&(A=!1),A&&(!_||L)&&f.push(...j.map(C=>({animation:C,options:{type:x,...l}})))}if(h.size){const y={};h.forEach(x=>{const S=t.getBaseTarget(x);S!==void 0&&(y[x]=S)}),f.push({animation:y})}let g=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(f):Promise.resolve()}function a(l,c,u){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const f=o(u,l);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function Vxe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!gX(e,t):!1}function Sc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zxe(){return{animate:Sc(!0),whileInView:Sc(),whileHover:Sc(),whileTap:Sc(),whileDrag:Sc(),whileFocus:Sc(),exit:Sc()}}class Hxe extends gc{constructor(e){super(e),e.animationState||(e.animationState=Uxe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),AE(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Wxe=0;class Gxe extends gc{constructor(){super(...arguments),this.id=Wxe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Kxe={animation:{Feature:Hxe},exit:{Feature:Gxe}},a8=(t,e)=>Math.abs(t-e);function qxe(t,e){const n=a8(t.x,e.x),r=a8(t.y,e.y);return Math.sqrt(n**2+r**2)}class qX{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=eC(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=qxe(d.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=d,{timestamp:m}=Qn;this.history.push({...p,timestamp:m});const{onStart:g,onMove:y}=this.handlers;f||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=JT(f,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:h,onSessionEnd:p,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=eC(d.type==="pointercancel"?this.lastMoveEventInfo:JT(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(d,g),p&&p(d,g)},!dX(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=OE(e),a=JT(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Qn;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,eC(a,this.history)),this.removeListeners=Vl(la(this.contextWindow,"pointermove",this.handlePointerMove),la(this.contextWindow,"pointerup",this.handlePointerUp),la(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ya(this.updatePoint)}}function JT(t,e){return e?{point:e(t.point)}:t}function l8(t,e){return{x:t.x-e.x,y:t.y-e.y}}function eC({point:t},e){return{point:t,delta:l8(t,YX(e)),offset:l8(t,Yxe(e)),velocity:Qxe(e,.1)}}function Yxe(t){return t[0]}function YX(t){return t[t.length-1]}function Qxe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=YX(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>zl(e)));)n--;if(!r)return{x:0,y:0};const s=ca(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function vi(t){return t.max-t.min}function ZI(t,e=0,n=.01){return Math.abs(t-e)<=n}function c8(t,e,n,r=.5){t.origin=r,t.originPoint=Kt(e.min,e.max,t.origin),t.scale=vi(n)/vi(e),(ZI(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Kt(n.min,n.max,t.origin)-t.originPoint,(ZI(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ym(t,e,n,r){c8(t.x,e.x,n.x,r?r.originX:void 0),c8(t.y,e.y,n.y,r?r.originY:void 0)}function u8(t,e,n){t.min=n.min+e.min,t.max=t.min+vi(e)}function Xxe(t,e,n){u8(t.x,e.x,n.x),u8(t.y,e.y,n.y)}function d8(t,e,n){t.min=e.min-n.min,t.max=t.min+vi(e)}function Qm(t,e,n){d8(t.x,e.x,n.x),d8(t.y,e.y,n.y)}function Zxe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Kt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Kt(n,t,r.max):Math.min(t,n)),t}function f8(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Jxe(t,{top:e,left:n,bottom:r,right:i}){return{x:f8(t.x,n,i),y:f8(t.y,e,r)}}function h8(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function ebe(t,e){return{x:h8(t.x,e.x),y:h8(t.y,e.y)}}function tbe(t,e){let n=.5;const r=vi(t),i=vi(e);return i>r?n=Yg(e.min,e.max-r,t.min):r>i&&(n=Yg(t.min,t.max-i,e.min)),rc(0,1,n)}function nbe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const JI=.35;function rbe(t=JI){return t===!1?t=0:t===!0&&(t=JI),{x:p8(t,"left","right"),y:p8(t,"top","bottom")}}function p8(t,e,n){return{min:m8(t,e),max:m8(t,n)}}function m8(t,e){return typeof t=="number"?t:t[e]||0}const g8=()=>({translate:0,scale:1,origin:0,originPoint:0}),df=()=>({x:g8(),y:g8()}),v8=()=>({min:0,max:0}),fn=()=>({x:v8(),y:v8()});function Ii(t){return[t("x"),t("y")]}function QX({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function ibe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function sbe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function tC(t){return t===void 0||t===1}function eA({scale:t,scaleX:e,scaleY:n}){return!tC(t)||!tC(e)||!tC(n)}function Fc(t){return eA(t)||XX(t)||t.z||t.rotate||t.rotateX||t.rotateY}function XX(t){return y8(t.x)||y8(t.y)}function y8(t){return t&&t!=="0%"}function sS(t,e,n){const r=t-n,i=e*r;return n+i}function x8(t,e,n,r,i){return i!==void 0&&(t=sS(t,i,r)),sS(t,n,r)+e}function tA(t,e=0,n=1,r,i){t.min=x8(t.min,e,n,r,i),t.max=x8(t.max,e,n,r,i)}function ZX(t,{x:e,y:n}){tA(t.x,e.translate,e.scale,e.originPoint),tA(t.y,n.translate,n.scale,n.originPoint)}function obe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ff(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ZX(t,o)),r&&Fc(s.latestValues)&&ff(t,s.latestValues))}e.x=b8(e.x),e.y=b8(e.y)}function b8(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function al(t,e){t.min=t.min+e,t.max=t.max+e}function S8(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Kt(t.min,t.max,s);tA(t,e[n],e[r],o,e.scale)}const abe=["x","scaleX","originX"],lbe=["y","scaleY","originY"];function ff(t,e){S8(t.x,e,abe),S8(t.y,e,lbe)}function JX(t,e){return QX(sbe(t.getBoundingClientRect(),e))}function cbe(t,e,n){const r=JX(t,n),{scroll:i}=e;return i&&(al(r.x,i.offset.x),al(r.y,i.offset.y)),r}const eZ=({current:t})=>t?t.ownerDocument.defaultView:null,ube=new WeakMap;class dbe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(OE(u,"page").point)},s=(u,d)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hX(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ii(g=>{let y=this.getAxisMotionValue(g).get()||0;if(vo.test(y)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[g];S&&(y=vi(S)*(parseFloat(y)/100))}}this.originPoint[g]=y}),p&&Et.update(()=>p(u,d),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:g}=d;if(h&&this.currentDirection===null){this.currentDirection=fbe(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),m&&m(u,d)},a=(u,d)=>this.stop(u,d),l=()=>Ii(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new qX(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:eZ(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Et.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Zxe(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&cf(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Jxe(i.layoutBox,n):this.constraints=!1,this.elastic=rbe(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ii(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=nbe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=cbe(r,i.root,this.visualElement.getTransformPagePoint());let o=ebe(i.layout.layoutBox,s);if(n){const a=n(ibe(o));this.hasMutatedConstraints=!!a,a&&(o=QX(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ii(u=>{if(!wy(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const f=i?200:1e6,h=i?40:1e7,p={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(UD(e,r,0,n))}stopAnimation(){Ii(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ii(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ii(n=>{const{drag:r}=this.getProps();if(!wy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Kt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!cf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ii(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=tbe({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ii(o=>{if(!wy(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Kt(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;ube.set(this.visualElement,this);const e=this.visualElement.current,n=la(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();cf(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=ea(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ii(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=JI,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function wy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function fbe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class hbe extends gc{constructor(e){super(e),this.removeGroupControls=nn,this.removeListeners=nn,this.controls=new dbe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nn}unmount(){this.removeGroupControls(),this.removeListeners()}}const w8=t=>(e,n)=>{t&&Et.update(()=>t(e,n))};class pbe extends gc{constructor(){super(...arguments),this.removePointerDownListener=nn}onPointerDown(e){this.session=new qX(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:eZ(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:w8(e),onStart:w8(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Et.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=la(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function mbe(){const t=v.useContext(PE);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=v.useId();return v.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const wx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function E8(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lp={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ae.test(t))t=parseFloat(t);else return t;const n=E8(t,e.target.x),r=E8(t,e.target.y);return`${n}% ${r}%`}},gbe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ic.parse(t);if(i.length>5)return r;const s=ic.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Kt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class vbe extends te.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;_ye(ybe),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),wx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Et.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function tZ(t){const[e,n]=mbe(),r=v.useContext(kD);return te.createElement(vbe,{...t,layoutGroup:r,switchLayoutGroup:v.useContext(QQ),isPresent:e,safeToRemove:n})}const ybe={borderRadius:{...Lp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lp,borderTopRightRadius:Lp,borderBottomLeftRadius:Lp,borderBottomRightRadius:Lp,boxShadow:gbe},nZ=["TopLeft","TopRight","BottomLeft","BottomRight"],xbe=nZ.length,_8=t=>typeof t=="string"?parseFloat(t):t,T8=t=>typeof t=="number"||Ae.test(t);function bbe(t,e,n,r,i,s){i?(t.opacity=Kt(0,n.opacity!==void 0?n.opacity:1,Sbe(r)),t.opacityExit=Kt(e.opacity!==void 0?e.opacity:1,0,wbe(r))):s&&(t.opacity=Kt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<xbe;o++){const a=`border${nZ[o]}Radius`;let l=C8(e,a),c=C8(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||T8(l)===T8(c)?(t[a]=Math.max(Kt(_8(l),_8(c),r),0),(vo.test(c)||vo.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Kt(e.rotate||0,n.rotate||0,r))}function C8(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Sbe=rZ(0,.5,TX),wbe=rZ(.5,.95,nn);function rZ(t,e,n){return r=>r<t?0:r>e?1:n(Yg(t,e,r))}function k8(t,e){t.min=e.min,t.max=e.max}function _i(t,e){k8(t.x,e.x),k8(t.y,e.y)}function P8(t,e,n,r,i){return t-=e,t=sS(t,1/n,r),i!==void 0&&(t=sS(t,1/i,r)),t}function Ebe(t,e=0,n=1,r=.5,i,s=t,o=t){if(vo.test(e)&&(e=parseFloat(e),e=Kt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Kt(s.min,s.max,r);t===s&&(a-=e),t.min=P8(t.min,e,n,a,i),t.max=P8(t.max,e,n,a,i)}function I8(t,e,[n,r,i],s,o){Ebe(t,e[n],e[r],e[i],e.scale,s,o)}const _be=["x","scaleX","originX"],Tbe=["y","scaleY","originY"];function A8(t,e,n,r){I8(t.x,e,_be,n?n.x:void 0,r?r.x:void 0),I8(t.y,e,Tbe,n?n.y:void 0,r?r.y:void 0)}function L8(t){return t.translate===0&&t.scale===1}function iZ(t){return L8(t.x)&&L8(t.y)}function Cbe(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function sZ(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function R8(t){return vi(t.x)/vi(t.y)}class kbe{constructor(){this.members=[]}add(e){VD(this.members,e),e.scheduleRender()}remove(e){if(zD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function O8(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:c,rotateY:u}=n;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Pbe=(t,e)=>t.depth-e.depth;class Ibe{constructor(){this.children=[],this.isDirty=!1}add(e){VD(this.children,e),this.isDirty=!0}remove(e){zD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Pbe),this.isDirty=!1,this.children.forEach(e)}}function Abe(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ya(r),t(s-e))};return Et.read(r,!0),()=>ya(r)}function Lbe(t){window.MotionDebug&&window.MotionDebug.record(t)}function Rbe(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Obe(t,e,n){const r=Kr(t)?t:mh(t);return r.start(UD("",r,e,n)),r.animation}const D8=["","X","Y","Z"],Dbe={visibility:"hidden"},M8=1e3;let Mbe=0;const jc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function oZ({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Mbe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jc.totalNodes=jc.resolvedTargetDeltas=jc.recalculatedProjection=0,this.nodes.forEach(Fbe),this.nodes.forEach(zbe),this.nodes.forEach(Hbe),this.nodes.forEach(jbe),Lbe(jc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ibe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new HD),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Rbe(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Abe(f,250),wx.hasAnimatedSinceResize&&(wx.hasAnimatedSinceResize=!1,this.nodes.forEach(N8))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||Ybe,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=u.getProps(),x=!this.targetLayout||!sZ(this.targetLayout,p)||h,S=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const w={...BD(m,"layout"),onPlay:g,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||N8(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ya(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Wbe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($8);return}this.isUpdating||this.nodes.forEach(Ube),this.isUpdating=!1,this.nodes.forEach(Vbe),this.nodes.forEach($be),this.nodes.forEach(Nbe),this.clearAllSnapshots();const a=performance.now();Qn.delta=rc(0,1e3/60,a-Qn.timestamp),Qn.timestamp=a,Qn.isProcessing=!0,WT.update.process(Qn),WT.preRender.process(Qn),WT.render.process(Qn),Qn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Bbe),this.sharedNodes.forEach(Gbe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!iZ(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||Fc(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Qbe(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return fn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(al(a.x,l.offset.x),al(a.y,l.offset.y)),a}removeElementScroll(o){const a=fn();_i(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:d}=c;if(c!==this.root&&u&&d.layoutScroll){if(u.isRoot){_i(a,o);const{scroll:f}=this.root;f&&(al(a.x,-f.offset.x),al(a.y,-f.offset.y))}al(a.x,u.offset.x),al(a.y,u.offset.y)}}return a}applyTransform(o,a=!1){const l=fn();_i(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ff(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Fc(u.latestValues)&&ff(l,u.latestValues)}return Fc(this.latestValues)&&ff(l,this.latestValues),l}removeTransform(o){const a=fn();_i(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Fc(c.latestValues))continue;eA(c.latestValues)&&c.updateSnapshot();const u=fn(),d=c.measurePageBox();_i(u,d),A8(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Fc(this.latestValues)&&A8(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Qn.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),Qm(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),_i(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=fn(),this.targetWithTransforms=fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Xxe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_i(this.target,this.layout.layoutBox),ZX(this.target,this.targetDelta)):_i(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),Qm(this.relativeTargetOrigin,this.target,h.target),_i(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||eA(this.parent.latestValues)||XX(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Qn.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;_i(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;obe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:p}=a;if(!p){this.projectionTransform&&(this.projectionDelta=df(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=df(),this.projectionDeltaWithTransform=df());const m=this.projectionTransform;Ym(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=O8(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==f||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),jc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=df();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=fn(),h=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=h!==p,g=this.getStack(),y=!g||g.members.length<=1,x=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(qbe));this.animationProgress=0;let S;this.mixTargetDelta=w=>{const E=w/1e3;F8(d.x,o.x,E),F8(d.y,o.y,E),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qm(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Kbe(this.relativeTarget,this.relativeTargetOrigin,f,E),S&&Cbe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=fn()),_i(S,this.relativeTarget)),m&&(this.animationValues=u,bbe(u,c,this.latestValues,E,x,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ya(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{wx.hasAnimatedSinceResize=!0,this.currentAnimation=Obe(0,M8,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(M8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&aZ(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||fn();const d=vi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=vi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}_i(a,l),ff(a,u),Ym(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new kbe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let u=0;u<D8.length;u++){const d="rotate"+D8[u];l[d]&&(c[d]=l[d],o.setStaticValue(d,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Dbe;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Sx(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Sx(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Fc(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=O8(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:h,y:p}=this.projectionDelta;c.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in Zb){if(f[m]===void 0)continue;const{correct:g,applyTo:y}=Zb[m],x=c.transform==="none"?f[m]:g(f[m],d);if(y){const S=y.length;for(let w=0;w<S;w++)c[y[w]]=x}else c[m]=x}return this.options.layoutId&&(c.pointerEvents=d===this?Sx(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach($8),this.root.sharedNodes.clear()}}}function $be(t){t.updateLayout()}function Nbe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Ii(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=vi(f);f.min=r[d].min,f.max=f.min+h}):aZ(s,n.layoutBox,r)&&Ii(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],h=vi(r[d]);f.max=f.min+h,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+h)});const a=df();Ym(a,r,n.layoutBox);const l=df();o?Ym(l,t.applyTransform(i,!0),n.measuredBox):Ym(l,r,n.layoutBox);const c=!iZ(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const p=fn();Qm(p,n.layoutBox,f.layoutBox);const m=fn();Qm(m,r,h.layoutBox),sZ(p,m)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Fbe(t){jc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function jbe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Bbe(t){t.clearSnapshot()}function $8(t){t.clearMeasurements()}function Ube(t){t.isLayoutDirty=!1}function Vbe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function N8(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zbe(t){t.resolveTargetDelta()}function Hbe(t){t.calcProjection()}function Wbe(t){t.resetRotation()}function Gbe(t){t.removeLeadSnapshot()}function F8(t,e,n){t.translate=Kt(e.translate,0,n),t.scale=Kt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function j8(t,e,n,r){t.min=Kt(e.min,n.min,r),t.max=Kt(e.max,n.max,r)}function Kbe(t,e,n,r){j8(t.x,e.x,n.x,r),j8(t.y,e.y,n.y,r)}function qbe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Ybe={duration:.45,ease:[.4,0,.1,1]},B8=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),U8=B8("applewebkit/")&&!B8("chrome/")?Math.round:nn;function V8(t){t.min=U8(t.min),t.max=U8(t.max)}function Qbe(t){V8(t.x),V8(t.y)}function aZ(t,e,n){return t==="position"||t==="preserve-aspect"&&!ZI(R8(e),R8(n),.2)}const Xbe=oZ({attachResizeListener:(t,e)=>ea(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nC={current:void 0},lZ=oZ({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!nC.current){const t=new Xbe({});t.mount(window),t.setOptions({layoutScroll:!0}),nC.current=t}return nC.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Zbe={pan:{Feature:pbe},drag:{Feature:hbe,ProjectionNode:lZ,MeasureLayout:tZ}},Jbe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function eSe(t){const e=Jbe.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function nA(t,e,n=1){const[r,i]=eSe(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return HX(o)?parseFloat(o):o}else return WI(i)?nA(i,e,n+1):i}function tSe(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!WI(s))return;const o=nA(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!WI(s))continue;const o=nA(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const nSe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),cZ=t=>nSe.has(t),rSe=t=>Object.keys(t).some(cZ),z8=t=>t===Zu||t===Ae,H8=(t,e)=>parseFloat(t.split(", ")[e]),W8=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return H8(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?H8(s[1],t):0}},iSe=new Set(["x","y","z"]),sSe=lv.filter(t=>!iSe.has(t));function oSe(t){const e=[];return sSe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const gh={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:W8(4,13),y:W8(5,14)};gh.translateX=gh.x;gh.translateY=gh.y;const aSe=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=gh[c](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(c=>{const u=e.getValue(c);u&&u.jump(a[c]),t[c]=gh[c](l,s)}),t},lSe=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(cZ);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=t.getValue(l);if(!t.hasValue(l))return;let u=n[l],d=Ap(u);const f=e[l];let h;if(eS(f)){const p=f.length,m=f[0]===null?1:0;u=f[m],d=Ap(u);for(let g=m;g<p&&f[g]!==null;g++)h?MD(Ap(f[g])===h):h=Ap(f[g])}else h=Ap(f);if(d!==h)if(z8(d)&&z8(h)){const p=c.get();typeof p=="string"&&c.set(parseFloat(p)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&h===Ae&&(e[l]=f.map(parseFloat))}else d!=null&&d.transform&&(h!=null&&h.transform)&&(u===0||f===0)?u===0?c.set(h.transform(u)):e[l]=d.transform(f):(o||(s=oSe(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=aSe(e,t,a);return s.length&&s.forEach(([u,d])=>{t.getValue(u).set(d)}),t.render(),IE&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function cSe(t,e,n,r){return rSe(e)?lSe(t,e,n,r):{target:e,transitionEnd:r}}const uSe=(t,e,n,r)=>{const i=tSe(t,e,r);return e=i.target,r=i.transitionEnd,cSe(t,e,n,r)},rA={current:null},uZ={current:!1};function dSe(){if(uZ.current=!0,!!IE)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>rA.current=t.matches;t.addListener(e),e()}else rA.current=!1}function fSe(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Kr(s))t.addValue(i,s),iS(r)&&r.add(i);else if(Kr(o))t.addValue(i,mh(s,{owner:t})),iS(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,mh(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const G8=new WeakMap,dZ=Object.keys(qg),hSe=dZ.length,K8=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],pSe=CD.length;class mSe{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Et.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=LE(n),this.isVariantNode=YQ(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(n,{});for(const d in u){const f=u[d];a[d]!==void 0&&Kr(f)&&(f.set(a[d],!1),iS(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,G8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),uZ.current||dSe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){G8.delete(this.current),this.projection&&this.projection.unmount(),ya(this.notifyUpdate),ya(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Xu.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Et.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<hSe;l++){const c=dZ[l],{isEnabled:u,Feature:d,ProjectionNode:f,MeasureLayout:h}=qg[c];f&&(o=f),u(n)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:h}=n;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!u||d&&cf(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:h})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<K8.length;r++){const i=K8[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=fSe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<pSe;r++){const i=CD[r],s=this.props[i];(Kg(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=mh(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=DD(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Kr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new HD),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class fZ extends mSe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=Rxe(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){Axe(this,r,o);const a=uSe(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function gSe(t){return window.getComputedStyle(t)}class vSe extends fZ{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Xu.has(n)){const r=jD(n);return r&&r.default||0}else{const r=gSe(e),i=(JQ(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return JX(e,n)}build(e,n,r,i){ID(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return OD(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Kr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){sX(e,n,r,i)}}class ySe extends fZ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Xu.has(n)){const r=jD(n);return r&&r.default||0}return n=oX.has(n)?n:_D(n),e.getAttribute(n)}measureInstanceViewportBox(){return fn()}scrapeMotionValuesFromProps(e,n){return lX(e,n)}build(e,n,r,i){LD(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){aX(e,n,r,i)}mount(e){this.isSVGTag=RD(e.tagName),super.mount(e)}}const xSe=(t,e)=>PD(t)?new ySe(e,{enableHardwareAcceleration:!1}):new vSe(e,{enableHardwareAcceleration:!0}),bSe={layout:{ProjectionNode:lZ,MeasureLayout:tZ}},SSe={...Kxe,...h1e,...Zbe,...bSe},ue=wye((t,e)=>e1e(t,e,SSe,xSe));function hZ(){const t=v.useRef(!1);return ED(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function wSe(){const t=hZ(),[e,n]=v.useState(0),r=v.useCallback(()=>{t.current&&n(e+1)},[e]);return[v.useCallback(()=>Et.postRender(r),[r]),e]}class ESe extends v.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function _Se({children:t,isPresent:e}){const n=v.useId(),r=v.useRef(null),i=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),v.createElement(ESe,{isPresent:e,childRef:r,sizeRef:i},v.cloneElement(t,{ref:r}))}const rC=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=cX(TSe),l=v.useId(),c=v.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u=>{a.set(u,!0);for(const d of a.values())if(!d)return;r&&r()},register:u=>(a.set(u,!1),()=>a.delete(u))}),s?void 0:[n]);return v.useMemo(()=>{a.forEach((u,d)=>a.set(d,!1))},[n]),v.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=v.createElement(_Se,{isPresent:n},t)),v.createElement(PE.Provider,{value:c},t)};function TSe(){return new Map}function CSe(t){return v.useEffect(()=>()=>t(),[])}const Bc=t=>t.key||"";function kSe(t,e){t.forEach(n=>{const r=Bc(n);e.set(r,n)})}function PSe(t){const e=[];return v.Children.forEach(t,n=>{v.isValidElement(n)&&e.push(n)}),e}const Cr=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=v.useContext(kD).forceRender||wSe()[0],l=hZ(),c=PSe(t);let u=c;const d=v.useRef(new Map).current,f=v.useRef(u),h=v.useRef(new Map).current,p=v.useRef(!0);if(ED(()=>{p.current=!1,kSe(c,h),f.current=u}),CSe(()=>{p.current=!0,h.clear(),d.clear()}),p.current)return v.createElement(v.Fragment,null,u.map(x=>v.createElement(rC,{key:Bc(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},x)));u=[...u];const m=f.current.map(Bc),g=c.map(Bc),y=m.length;for(let x=0;x<y;x++){const S=m[x];g.indexOf(S)===-1&&!d.has(S)&&d.set(S,void 0)}return o==="wait"&&d.size&&(u=[]),d.forEach((x,S)=>{if(g.indexOf(S)!==-1)return;const w=h.get(S);if(!w)return;const E=m.indexOf(S);let T=x;if(!T){const _=()=>{d.delete(S);const I=Array.from(h.keys()).filter(A=>!g.includes(A));if(I.forEach(A=>h.delete(A)),f.current=c.filter(A=>{const L=Bc(A);return L===S||I.includes(L)}),!d.size){if(l.current===!1)return;a(),r&&r()}};T=v.createElement(rC,{key:Bc(w),isPresent:!1,onExitComplete:_,custom:e,presenceAffectsLayout:s,mode:o},w),d.set(S,T)}u.splice(E,0,T)}),u=u.map(x=>{const S=x.key;return d.has(S)?x:v.createElement(rC,{key:Bc(x),isPresent:!0,presenceAffectsLayout:s,mode:o},x)}),v.createElement(v.Fragment,null,d.size?u:u.map(x=>v.cloneElement(x)))},ISe={toTitleCase:t=>t.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim()},ti={toNumber:t=>{try{return t.toNumber()}catch{return typeof t=="number"?t:parseInt(t,10)}},isValidAmount:t=>!isNaN(t)&&t>0},pZ=t=>{var n;const e={};for(const r in t)(n=t[r])!=null&&n._isBigNumber?e[r]=Number(t[r]):e[r]=t[r];return e},WD=t=>"NPRC-"+String(t).padStart(7,"0"),ASe=t=>new Date(t*1e3).toLocaleString(),LSe=t=>{const e=`${window.location.origin}/certificate?id=${t.toNumber()}`;window.open(e,"_blank")};function RSe(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}const OSe=t=>{const e="https://origin.livepeer.com",n="/livepeer/origin";if(!t.startsWith(e))throw new Error("Original endpoint does not start with the base URL.");const r=t.substring(e.length);return`${n}${r}`},vs=(t,e={})=>console.warn("@DEV: ",t,e);U.div`
  height: 40px;
  width: 40px;
  background: ${({theme:t})=>t.colors.ui100};
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
`;U(ue.div)`
  position: absolute;
  left: 0;
  top: 0;
  width: 5px;
  height: 100%;
  background-color: #fff;
  border-radius: 50%;
  transform: translateY(-50%);
`;U(ue.li)`
  list-style: none;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 0px;
  cursor: pointer;
  width: 100%;
  margin: 0px;
  button {
    margin: 0px;
  }
`;U(jt)`
  width: 14px;
  height: 14px;
  border-radius: 50%;
  cursor: pointer;
  background: ${({theme:t})=>t.colors.ui100};
  color: ${({theme:t})=>t.colors.primary500};
`;U.span`
  height: auto;
  font-size: 0.8rem;
  font-style: normal;
  font-weight: 700;
  margin-left: 0.5rem;
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  @media (max-width: 768px) {
    font-size: 0.8rem;
  }
`;const DSe=t=>{switch(t){case"wallet":return Bve;case"money-bill-1":return zve;case"sack-dollar":return Lve;case"hourglass-half":return Rve;case"chart-simple":return Dve;case"leaf":return Fve;default:return Nve}},MSe={hidden:{opacity:0,y:-100},visible:{opacity:1,y:0,transition:{duration:.3}}},$Se=({data:t})=>{if(!t)return;const{title:e,value:n,unit:r,icon:i}=t||{},s=DSe(i);return v.useEffect(()=>{t&&vs("OverviewCard Data",{data:t})},[t]),b.jsxs(NSe,{variants:MSe,initial:"hidden",animate:"visible",children:[b.jsxs("div",{className:"title-wrap",children:[b.jsx(zSe,{icon:s}),b.jsx(FSe,{children:e})]}),b.jsx(jSe,{children:b.jsxs(BSe,{children:[b.jsx(USe,{children:n}),b.jsx(VSe,{children:r})]})})]})},NSe=U(ue.div)`
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  padding: 24px;
  width: 100%;
  border-radius: ${({theme:t})=>t.borderRadius.default};
  height: 150px;
  background: ${({theme:t})=>t.colors.ui50};
  display: flex;
  flex-direction: column;
  justify-content: center;

  * {
    color: ${({theme:t})=>t.colors.ui800};
  }
  .title-wrap {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 16px;
  }
  @media (max-width: 767px) {
    width: 100%;
    min-width: 300px;
  }
`,FSe=U.span`
  font-size: 14px;
  font-weight: 500;
  text-align: left;
`,jSe=U.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
`,BSe=U.div`
  display: flex;
  justify-content: center;
  align-items: flex-end;
`,USe=U.span`
  font-size: 2rem;
  font-weight: 600;
  color: ${({theme:t})=>t.colors.primary500};
  line-height: 1;
  transition: all 0.3s ease;
`,VSe=U.span`
  margin-bottom: 4px;
  margin-left: 4px;
  font-size: 0.85rem;
  font-weight: 500;
  line-height: 1;
  transition: all 0.3s ease;
  text-transform: capitalize;
  color: ${({theme:t})=>t.colors.ui600};
`,zSe=U(jt)`
  color: ${({theme:t})=>t.colors.ui800};
  font-size: 1rem;
`;U(ue.div)`
  width: 250px;
  padding: 10px;
  margin: auto;
  box-sizing: border-box;

  background-color: #74A4BCa1;
  border: 1px solid #000;
  border-radius: 10px;
  box-shadow: 0 0px 5px 2px rgba(0, 0, 0, 0.1);

  overflow: hidden;
  cursor: pointer;
  transition: box-shadow 0.3s ease;

  &:hover {
    box-shadow: 0 0px 10px 4px rgba(0, 0, 0, 0.1);;
  }
`;U.div`
  padding: 10px;
`;U.h2`
  font-size: 1.5rem;
  margin: 0;
  color: #3F292B;
  margin-bottom: 10px;
`;U.p`
  color: #666;
  margin: 5px 0;
`;U.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  color: #134B5F;
  transition: 0.3s ease-in-out;
  
  font-weight: 600;

  &:hover {
    color: #210124;
  }

  svg {
    margin-left: 5px;
  }
`;U(ue.div)`
  width: 250px;  
  padding: 10px;
  margin: auto;
  box-sizing: border-box;

  background-color: #74A4BCa1;
  border: 1px solid #000;
  border-radius: 10px;
  box-shadow: 0 0px 5px 2px rgba(0, 0, 0, 0.1);
  
  overflow: hidden;
  cursor: pointer;
  transition: box-shadow 0.3s ease;

  &:hover {
    box-shadow: 0 0px 10px 4px rgba(0, 0, 0, 0.1);;
  }
`;U.div`
  padding: 10px;
`;U.h2`
  font-size: 1.2rem;
  margin: 0;
  margin-bottom: 8px;
  font-weight: 600;
  color: #3F292B;
  margin-bottom: 10px;
`;U.p`
  margin: 4px 0;
  font-size: 0.9rem;
  line-height: 1.4;
`;U.div`
display: flex;
flex-direction: column;
align-items: center;
padding: 10px;
box-sizing: border-box;
gap: 5px;
`;U.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  color: #134B5F;
  transition: 0.3s ease-in-out;
  
  font-weight: 600;

  &:hover {
    color: #210124;
  }

  svg {
    margin-left: 5px;
  }
`;U.img``;U.h1``;U.input``;const HSe=U.div`
  width: 100%;
`,oS=U(ue.div)``,mZ=U.div``,gZ=U.form`
  display: flex;
  flex-direction: column;
  gap: 16px;

  .register-button {
    margin-top: 24px;
  }
`;U(ue.button)``;U.button`
  font-weight: 500;
  color: ${({theme:t})=>t.colors.ui800};
  font-size: 0.875rem;
`;function vZ(t,e){return function(){return t.apply(e,arguments)}}const{toString:WSe}=Object.prototype,{getPrototypeOf:GD}=Object,{iterator:ME,toStringTag:yZ}=Symbol,$E=(t=>e=>{const n=WSe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$s=t=>(t=t.toLowerCase(),e=>$E(e)===t),NE=t=>e=>typeof e===t,{isArray:Zh}=Array,vh=NE("undefined");function fv(t){return t!==null&&!vh(t)&&t.constructor!==null&&!vh(t.constructor)&&Gr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const xZ=$s("ArrayBuffer");function GSe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&xZ(t.buffer),e}const KSe=NE("string"),Gr=NE("function"),bZ=NE("number"),hv=t=>t!==null&&typeof t=="object",qSe=t=>t===!0||t===!1,Ex=t=>{if($E(t)!=="object")return!1;const e=GD(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(yZ in t)&&!(ME in t)},YSe=t=>{if(!hv(t)||fv(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},QSe=$s("Date"),XSe=$s("File"),ZSe=$s("Blob"),JSe=$s("FileList"),ewe=t=>hv(t)&&Gr(t.pipe),twe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Gr(t.append)&&((e=$E(t))==="formdata"||e==="object"&&Gr(t.toString)&&t.toString()==="[object FormData]"))},nwe=$s("URLSearchParams"),[rwe,iwe,swe,owe]=["ReadableStream","Request","Response","Headers"].map($s),awe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function pv(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Zh(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(fv(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function SZ(t,e){if(fv(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const nu=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),wZ=t=>!vh(t)&&t!==nu;function iA(){const{caseless:t,skipUndefined:e}=wZ(this)&&this||{},n={},r=(i,s)=>{const o=t&&SZ(n,s)||s;Ex(n[o])&&Ex(i)?n[o]=iA(n[o],i):Ex(i)?n[o]=iA({},i):Zh(i)?n[o]=i.slice():(!e||!vh(i))&&(n[o]=i)};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&pv(arguments[i],r);return n}const lwe=(t,e,n,{allOwnKeys:r}={})=>(pv(e,(i,s)=>{n&&Gr(i)?t[s]=vZ(i,n):t[s]=i},{allOwnKeys:r}),t),cwe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),uwe=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},dwe=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&GD(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},fwe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},hwe=t=>{if(!t)return null;if(Zh(t))return t;let e=t.length;if(!bZ(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},pwe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&GD(Uint8Array)),mwe=(t,e)=>{const r=(t&&t[ME]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},gwe=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},vwe=$s("HTMLFormElement"),ywe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),q8=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),xwe=$s("RegExp"),EZ=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};pv(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},bwe=t=>{EZ(t,(e,n)=>{if(Gr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Gr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Swe=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Zh(t)?r(t):r(String(t).split(e)),n},wwe=()=>{},Ewe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function _we(t){return!!(t&&Gr(t.append)&&t[yZ]==="FormData"&&t[ME])}const Twe=t=>{const e=new Array(10),n=(r,i)=>{if(hv(r)){if(e.indexOf(r)>=0)return;if(fv(r))return r;if(!("toJSON"in r)){e[i]=r;const s=Zh(r)?[]:{};return pv(r,(o,a)=>{const l=n(o,i+1);!vh(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},Cwe=$s("AsyncFunction"),kwe=t=>t&&(hv(t)||Gr(t))&&Gr(t.then)&&Gr(t.catch),_Z=((t,e)=>t?setImmediate:e?((n,r)=>(nu.addEventListener("message",({source:i,data:s})=>{i===nu&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),nu.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Gr(nu.postMessage)),Pwe=typeof queueMicrotask<"u"?queueMicrotask.bind(nu):typeof process<"u"&&process.nextTick||_Z,Iwe=t=>t!=null&&Gr(t[ME]),X={isArray:Zh,isArrayBuffer:xZ,isBuffer:fv,isFormData:twe,isArrayBufferView:GSe,isString:KSe,isNumber:bZ,isBoolean:qSe,isObject:hv,isPlainObject:Ex,isEmptyObject:YSe,isReadableStream:rwe,isRequest:iwe,isResponse:swe,isHeaders:owe,isUndefined:vh,isDate:QSe,isFile:XSe,isBlob:ZSe,isRegExp:xwe,isFunction:Gr,isStream:ewe,isURLSearchParams:nwe,isTypedArray:pwe,isFileList:JSe,forEach:pv,merge:iA,extend:lwe,trim:awe,stripBOM:cwe,inherits:uwe,toFlatObject:dwe,kindOf:$E,kindOfTest:$s,endsWith:fwe,toArray:hwe,forEachEntry:mwe,matchAll:gwe,isHTMLForm:vwe,hasOwnProperty:q8,hasOwnProp:q8,reduceDescriptors:EZ,freezeMethods:bwe,toObjectSet:Swe,toCamelCase:ywe,noop:wwe,toFiniteNumber:Ewe,findKey:SZ,global:nu,isContextDefined:wZ,isSpecCompliantForm:_we,toJSONObject:Twe,isAsyncFn:Cwe,isThenable:kwe,setImmediate:_Z,asap:Pwe,isIterable:Iwe};function je(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}X.inherits(je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const TZ=je.prototype,CZ={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{CZ[t]={value:t}});Object.defineProperties(je,CZ);Object.defineProperty(TZ,"isAxiosError",{value:!0});je.from=(t,e,n,r,i,s)=>{const o=Object.create(TZ);X.toFlatObject(t,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return je.call(o,a,l,n,r,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",s&&Object.assign(o,s),o};const Awe=null;function sA(t){return X.isPlainObject(t)||X.isArray(t)}function kZ(t){return X.endsWith(t,"[]")?t.slice(0,-2):t}function Y8(t,e,n){return t?t.concat(e).map(function(i,s){return i=kZ(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function Lwe(t){return X.isArray(t)&&!t.some(sA)}const Rwe=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function FE(t,e,n){if(!X.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=X.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!X.isUndefined(g[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(X.isDate(p))return p.toISOString();if(X.isBoolean(p))return p.toString();if(!l&&X.isBlob(p))throw new je("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(p)||X.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(X.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(X.isArray(p)&&Lwe(p)||(X.isFileList(p)||X.endsWith(m,"[]"))&&(y=X.toArray(p)))return m=kZ(m),y.forEach(function(S,w){!(X.isUndefined(S)||S===null)&&e.append(o===!0?Y8([m],w,s):o===null?m:m+"[]",c(S))}),!1}return sA(p)?!0:(e.append(Y8(g,m,s),c(p)),!1)}const d=[],f=Object.assign(Rwe,{defaultVisitor:u,convertValue:c,isVisitable:sA});function h(p,m){if(!X.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),X.forEach(p,function(y,x){(!(X.isUndefined(y)||y===null)&&i.call(e,y,X.isString(x)?x.trim():x,m,f))===!0&&h(y,m?m.concat(x):[x])}),d.pop()}}if(!X.isObject(t))throw new TypeError("data must be an object");return h(t),e}function Q8(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function KD(t,e){this._pairs=[],t&&FE(t,this,e)}const PZ=KD.prototype;PZ.append=function(e,n){this._pairs.push([e,n])};PZ.toString=function(e){const n=e?function(r){return e.call(this,r,Q8)}:Q8;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Owe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function IZ(t,e,n){if(!e)return t;const r=n&&n.encode||Owe;X.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=X.isURLSearchParams(e)?e.toString():new KD(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Dwe{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(r){r!==null&&e(r)})}}const X8=Dwe,AZ={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mwe=typeof URLSearchParams<"u"?URLSearchParams:KD,$we=typeof FormData<"u"?FormData:null,Nwe=typeof Blob<"u"?Blob:null,Fwe={isBrowser:!0,classes:{URLSearchParams:Mwe,FormData:$we,Blob:Nwe},protocols:["http","https","file","blob","url","data"]},qD=typeof window<"u"&&typeof document<"u",oA=typeof navigator=="object"&&navigator||void 0,jwe=qD&&(!oA||["ReactNative","NativeScript","NS"].indexOf(oA.product)<0),Bwe=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Uwe=qD&&window.location.href||"http://localhost",Vwe=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qD,hasStandardBrowserEnv:jwe,hasStandardBrowserWebWorkerEnv:Bwe,navigator:oA,origin:Uwe},Symbol.toStringTag,{value:"Module"})),ir={...Vwe,...Fwe};function zwe(t,e){return FE(t,new ir.classes.URLSearchParams,{visitor:function(n,r,i,s){return ir.isNode&&X.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Hwe(t){return X.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Wwe(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function LZ(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&X.isArray(i)?i.length:o,l?(X.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!X.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&X.isArray(i[o])&&(i[o]=Wwe(i[o])),!a)}if(X.isFormData(t)&&X.isFunction(t.entries)){const n={};return X.forEachEntry(t,(r,i)=>{e(Hwe(r),i,n,0)}),n}return null}function Gwe(t,e,n){if(X.isString(t))try{return(e||JSON.parse)(t),X.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const YD={transitional:AZ,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=X.isObject(e);if(s&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return i?JSON.stringify(LZ(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e)||X.isReadableStream(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return zwe(e,this.formSerializer).toString();if((a=X.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return FE(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),Gwe(e)):e}],transformResponse:[function(e){const n=this.transitional||YD.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(X.isResponse(e)||X.isReadableStream(e))return e;if(e&&X.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?je.from(a,je.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ir.classes.FormData,Blob:ir.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],t=>{YD.headers[t]={}});const QD=YD,Kwe=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qwe=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&Kwe[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Z8=Symbol("internals");function Rp(t){return t&&String(t).trim().toLowerCase()}function _x(t){return t===!1||t==null?t:X.isArray(t)?t.map(_x):String(t)}function Ywe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Qwe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function iC(t,e,n,r,i){if(X.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!X.isString(e)){if(X.isString(r))return e.indexOf(r)!==-1;if(X.isRegExp(r))return r.test(e)}}function Xwe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function Zwe(t,e){const n=X.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class jE{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=Rp(l);if(!u)throw new Error("header name must be a non-empty string");const d=X.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=_x(a))}const o=(a,l)=>X.forEach(a,(c,u)=>s(c,u,l));if(X.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(X.isString(e)&&(e=e.trim())&&!Qwe(e))o(qwe(e),n);else if(X.isObject(e)&&X.isIterable(e)){let a={},l,c;for(const u of e){if(!X.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?X.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=Rp(e),e){const r=X.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return Ywe(i);if(X.isFunction(n))return n.call(this,i,r);if(X.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Rp(e),e){const r=X.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||iC(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Rp(o),o){const a=X.findKey(r,o);a&&(!n||iC(r,r[a],a,n))&&(delete r[a],i=!0)}}return X.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||iC(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return X.forEach(this,(i,s)=>{const o=X.findKey(r,s);if(o){n[o]=_x(i),delete n[s];return}const a=e?Xwe(s):String(s).trim();a!==s&&delete n[s],n[a]=_x(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return X.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&X.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Z8]=this[Z8]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Rp(o);r[a]||(Zwe(i,o),r[a]=!0)}return X.isArray(e)?e.forEach(s):s(e),this}}jE.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(jE.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});X.freezeMethods(jE);const Cs=jE;function sC(t,e){const n=this||QD,r=e||n,i=Cs.from(r.headers);let s=r.data;return X.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function RZ(t){return!!(t&&t.__CANCEL__)}function Jh(t,e,n){je.call(this,t??"canceled",je.ERR_CANCELED,e,n),this.name="CanceledError"}X.inherits(Jh,je,{__CANCEL__:!0});function OZ(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new je("Request failed with status code "+n.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Jwe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function eEe(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const h=u&&c-u;return h?Math.round(f*1e3/h):void 0}}function tEe(t,e){let n=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t(...c)};return[(...c)=>{const u=Date.now(),d=u-n;d>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const aS=(t,e,n=3)=>{let r=0;const i=eEe(50,250);return tEe(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},J8=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},e6=t=>(...e)=>X.asap(()=>t(...e)),nEe=ir.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ir.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ir.origin),ir.navigator&&/(msie|trident)/i.test(ir.navigator.userAgent)):()=>!0,rEe=ir.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];X.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),X.isString(r)&&o.push("path="+r),X.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iEe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function sEe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function DZ(t,e,n){let r=!iEe(e);return t&&(r||n==!1)?sEe(t,e):e}const t6=t=>t instanceof Cs?{...t}:t;function ku(t,e){e=e||{};const n={};function r(c,u,d,f){return X.isPlainObject(c)&&X.isPlainObject(u)?X.merge.call({caseless:f},c,u):X.isPlainObject(u)?X.merge({},u):X.isArray(u)?u.slice():u}function i(c,u,d,f){if(X.isUndefined(u)){if(!X.isUndefined(c))return r(void 0,c,d,f)}else return r(c,u,d,f)}function s(c,u){if(!X.isUndefined(u))return r(void 0,u)}function o(c,u){if(X.isUndefined(u)){if(!X.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>i(t6(c),t6(u),d,!0)};return X.forEach(Object.keys({...t,...e}),function(u){const d=l[u]||i,f=d(t[u],e[u],u);X.isUndefined(f)&&d!==a||(n[u]=f)}),n}const MZ=t=>{const e=ku({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;if(e.headers=o=Cs.from(o),e.url=IZ(DZ(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),X.isFormData(n)){if(ir.hasStandardBrowserEnv||ir.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(X.isFunction(n.getHeaders)){const l=n.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(ir.hasStandardBrowserEnv&&(r&&X.isFunction(r)&&(r=r(e)),r||r!==!1&&nEe(e.url))){const l=i&&s&&rEe.read(s);l&&o.set(i,l)}return e},oEe=typeof XMLHttpRequest<"u",aEe=oEe&&function(t){return new Promise(function(n,r){const i=MZ(t);let s=i.data;const o=Cs.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,d,f,h,p;function m(){h&&h(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function y(){if(!g)return;const S=Cs.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),E={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:S,config:t,request:g};OZ(function(_){n(_),m()},function(_){r(_),m()},E),g=null}"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(y)},g.onabort=function(){g&&(r(new je("Request aborted",je.ECONNABORTED,t,g)),g=null)},g.onerror=function(w){const E=w&&w.message?w.message:"Network Error",T=new je(E,je.ERR_NETWORK,t,g);T.event=w||null,r(T),g=null},g.ontimeout=function(){let w=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const E=i.transitional||AZ;i.timeoutErrorMessage&&(w=i.timeoutErrorMessage),r(new je(w,E.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,t,g)),g=null},s===void 0&&o.setContentType(null),"setRequestHeader"in g&&X.forEach(o.toJSON(),function(w,E){g.setRequestHeader(E,w)}),X.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),a&&a!=="json"&&(g.responseType=i.responseType),c&&([f,p]=aS(c,!0),g.addEventListener("progress",f)),l&&g.upload&&([d,h]=aS(l),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=S=>{g&&(r(!S||S.type?new Jh(null,t,g):S),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const x=Jwe(i.url);if(x&&ir.protocols.indexOf(x)===-1){r(new je("Unsupported protocol "+x+":",je.ERR_BAD_REQUEST,t));return}g.send(s||null)})},lEe=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof je?u:new Jh(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new je(`timeout ${e} of ms exceeded`,je.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>X.asap(a),l}},cEe=lEe,uEe=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},dEe=async function*(t,e){for await(const n of fEe(t))yield*uEe(n,e)},fEe=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},n6=(t,e,n,r)=>{const i=dEe(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let d=u.byteLength;if(n){let f=s+=d;n(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},r6=64*1024,{isFunction:Ey}=X,hEe=(({Request:t,Response:e})=>({Request:t,Response:e}))(X.global),{ReadableStream:i6,TextEncoder:s6}=X.global,o6=(t,...e)=>{try{return!!t(...e)}catch{return!1}},pEe=t=>{t=X.merge.call({skipUndefined:!0},hEe,t);const{fetch:e,Request:n,Response:r}=t,i=e?Ey(e):typeof fetch=="function",s=Ey(n),o=Ey(r);if(!i)return!1;const a=i&&Ey(i6),l=i&&(typeof s6=="function"?(p=>m=>p.encode(m))(new s6):async p=>new Uint8Array(await new n(p).arrayBuffer())),c=s&&a&&o6(()=>{let p=!1;const m=new n(ir.origin,{body:new i6,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!m}),u=o&&a&&o6(()=>X.isReadableStream(new r("").body)),d={stream:u&&(p=>p.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!d[p]&&(d[p]=(m,g)=>{let y=m&&m[p];if(y)return y.call(m);throw new je(`Response type '${p}' is not supported`,je.ERR_NOT_SUPPORT,g)})});const f=async p=>{if(p==null)return 0;if(X.isBlob(p))return p.size;if(X.isSpecCompliantForm(p))return(await new n(ir.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(X.isArrayBufferView(p)||X.isArrayBuffer(p))return p.byteLength;if(X.isURLSearchParams(p)&&(p=p+""),X.isString(p))return(await l(p)).byteLength},h=async(p,m)=>{const g=X.toFiniteNumber(p.getContentLength());return g??f(m)};return async p=>{let{url:m,method:g,data:y,signal:x,cancelToken:S,timeout:w,onDownloadProgress:E,onUploadProgress:T,responseType:_,headers:I,withCredentials:A="same-origin",fetchOptions:L}=MZ(p),j=e||fetch;_=_?(_+"").toLowerCase():"text";let D=cEe([x,S&&S.toAbortSignal()],w),O=null;const $=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let R;try{if(T&&c&&g!=="get"&&g!=="head"&&(R=await h(I,y))!==0){let N=new n(m,{method:"POST",body:y,duplex:"half"}),V;if(X.isFormData(y)&&(V=N.headers.get("content-type"))&&I.setContentType(V),N.body){const[H,W]=J8(R,aS(e6(T)));y=n6(N.body,r6,H,W)}}X.isString(A)||(A=A?"include":"omit");const C=s&&"credentials"in n.prototype,P={...L,signal:D,method:g.toUpperCase(),headers:I.normalize().toJSON(),body:y,duplex:"half",credentials:C?A:void 0};O=s&&new n(m,P);let k=await(s?j(O,L):j(m,P));const M=u&&(_==="stream"||_==="response");if(u&&(E||M&&$)){const N={};["status","statusText","headers"].forEach(z=>{N[z]=k[z]});const V=X.toFiniteNumber(k.headers.get("content-length")),[H,W]=E&&J8(V,aS(e6(E),!0))||[];k=new r(n6(k.body,r6,H,()=>{W&&W(),$&&$()}),N)}_=_||"text";let B=await d[X.findKey(d,_)||"text"](k,p);return!M&&$&&$(),await new Promise((N,V)=>{OZ(N,V,{data:B,headers:Cs.from(k.headers),status:k.status,statusText:k.statusText,config:p,request:O})})}catch(C){throw $&&$(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new je("Network Error",je.ERR_NETWORK,p,O),{cause:C.cause||C}):je.from(C,C&&C.code,p,O)}}},mEe=new Map,$Z=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:i}=e,s=[r,i,n];let o=s.length,a=o,l,c,u=mEe;for(;a--;)l=s[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:pEe(e)),u=c;return c};$Z();const aA={http:Awe,xhr:aEe,fetch:{get:$Z}};X.forEach(aA,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const a6=t=>`- ${t}`,gEe=t=>X.isFunction(t)||t===null||t===!1,NZ={getAdapter:(t,e)=>{t=X.isArray(t)?t:[t];const{length:n}=t;let r,i;const s={};for(let o=0;o<n;o++){r=t[o];let a;if(i=r,!gEe(r)&&(i=aA[(a=String(r)).toLowerCase()],i===void 0))throw new je(`Unknown adapter '${a}'`);if(i&&(X.isFunction(i)||(i=i.get(e))))break;s[a||"#"+o]=i}if(!i){const o=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=n?o.length>1?`since :
`+o.map(a6).join(`
`):" "+a6(o[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:aA};function oC(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jh(null,t)}function l6(t){return oC(t),t.headers=Cs.from(t.headers),t.data=sC.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),NZ.getAdapter(t.adapter||QD.adapter,t)(t).then(function(r){return oC(t),r.data=sC.call(t,t.transformResponse,r),r.headers=Cs.from(r.headers),r},function(r){return RZ(r)||(oC(t),r&&r.response&&(r.response.data=sC.call(t,t.transformResponse,r.response),r.response.headers=Cs.from(r.response.headers))),Promise.reject(r)})}const FZ="1.12.2",BE={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{BE[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const c6={};BE.transitional=function(e,n,r){function i(s,o){return"[Axios v"+FZ+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new je(i(o," has been removed"+(n?" in "+n:"")),je.ERR_DEPRECATED);return n&&!c6[o]&&(c6[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};BE.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function vEe(t,e,n){if(typeof t!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new je("option "+s+" must be "+l,je.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new je("Unknown option "+s,je.ERR_BAD_OPTION)}}const Tx={assertOptions:vEe,validators:BE},Vs=Tx.validators;class lS{constructor(e){this.defaults=e||{},this.interceptors={request:new X8,response:new X8}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ku(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Tx.assertOptions(r,{silentJSONParsing:Vs.transitional(Vs.boolean),forcedJSONParsing:Vs.transitional(Vs.boolean),clarifyTimeoutError:Vs.transitional(Vs.boolean)},!1),i!=null&&(X.isFunction(i)?n.paramsSerializer={serialize:i}:Tx.assertOptions(i,{encode:Vs.function,serialize:Vs.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Tx.assertOptions(n,{baseUrl:Vs.spelling("baseURL"),withXsrfToken:Vs.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&X.merge(s.common,s[n.method]);s&&X.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Cs.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,f;if(!l){const p=[l6.bind(this),void 0];for(p.unshift(...a),p.push(...c),f=p.length,u=Promise.resolve(n);d<f;)u=u.then(p[d++],p[d++]);return u}f=a.length;let h=n;for(;d<f;){const p=a[d++],m=a[d++];try{h=p(h)}catch(g){m.call(this,g);break}}try{u=l6.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=ku(this.defaults,e);const n=DZ(e.baseURL,e.url,e.allowAbsoluteUrls);return IZ(n,e.params,e.paramsSerializer)}}X.forEach(["delete","get","head","options"],function(e){lS.prototype[e]=function(n,r){return this.request(ku(r||{},{method:e,url:n,data:(r||{}).data}))}});X.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(ku(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}lS.prototype[e]=n(),lS.prototype[e+"Form"]=n(!0)});const Cx=lS;class XD{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Jh(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new XD(function(i){e=i}),cancel:e}}}const yEe=XD;function xEe(t){return function(n){return t.apply(null,n)}}function bEe(t){return X.isObject(t)&&t.isAxiosError===!0}const lA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lA).forEach(([t,e])=>{lA[e]=t});const SEe=lA;function jZ(t){const e=new Cx(t),n=vZ(Cx.prototype.request,e);return X.extend(n,Cx.prototype,e,{allOwnKeys:!0}),X.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return jZ(ku(t,i))},n}const vn=jZ(QD);vn.Axios=Cx;vn.CanceledError=Jh;vn.CancelToken=yEe;vn.isCancel=RZ;vn.VERSION=FZ;vn.toFormData=FE;vn.AxiosError=je;vn.Cancel=vn.CanceledError;vn.all=function(e){return Promise.all(e)};vn.spread=xEe;vn.isAxiosError=bEe;vn.mergeConfig=ku;vn.AxiosHeaders=Cs;vn.formToJSON=t=>LZ(X.isHTMLForm(t)?new FormData(t):t);vn.getAdapter=NZ.getAdapter;vn.HttpStatusCode=SEe;vn.default=vn;const we=vn,ve={server_url:"https://us-central1-app-neptunechain.cloudfunctions.net/app",blockchain:{MODE:"test",NETWORKS:{testnet:{token:"MATIC",chainId:"80002",explorer:"https://amoy.polygonscan.com",rpc:"https://polygon-amoy.g.alchemy.com/v2/xNT0Vs-Kpgg3Lgdlqjd_Qlg9XNQNfl75"},mainnet:{token:"MATIC",chainId:"137",explorer:"https://polygonscan.com",rpc:"https://polygon-mainnet.g.alchemy.com/v2/demo"}}}},wEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/account/create`,t))==null?void 0:e.data},EEe=async(t,e,n)=>{var r;return(r=await we.post(`${ve.server_url}/account/register`,{accountID:t,role:e,txAddress:n}))==null?void 0:r.data},_Ee=async(t,e)=>{var n;return(n=await we.post(`${ve.server_url}/account/verifyRole`,{accountID:t,role:e}))==null?void 0:n.data},TEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/account/isRegistered`,{accountID:t}))==null?void 0:e.data},CEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/account/isNotBlacklisted`,{accountID:t}))==null?void 0:e.data},kEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/account/data`,{accountID:t}))==null?void 0:e.data},PEe={create:wEe,register:EEe,verify:{role:_Ee,isRegistered:TEe,isNotBlacklisted:CEe},data:kEe},IEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/db/user/get/from/uid`,{userUID:t}))==null?void 0:e.data},AEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/db/user/get/from/username`,{username:t}))==null?void 0:e.data},LEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/db/user/get/uid/from/username`,{username:t}))==null?void 0:e.data},REe=async t=>{var e;return(e=await we.post(`${ve.server_url}/db/user/get/media`,{userUID:t}))==null?void 0:e.data},OEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/db/user/get/streams`,{userUID:t}))==null?void 0:e.data},DEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/db/user/get/assets`,{userUID:t}))==null?void 0:e.data},MEe=async t=>{var e;return(e=await we.post(`${ve.server_url}/db/user/get/asset/disputes`,{userUID:t}))==null?void 0:e.data},$Ee=async t=>{var e;return(e=await we.post(`${ve.server_url}/db/user/get/asset/approvals`,{userUID:t}))==null?void 0:e.data},mm={account:{getUserFromUID:IEe,getUserFromUsername:AEe,getUIDFromUsername:LEe},media:{getUserMedia:REe,getUserStreams:OEe},assets:{getUserAssets:DEe,getUserAssetDisputes:MEe,getUserAssetApprovals:$Ee}},NEe=async t=>{try{const e=await we.post(`${ve.server_url}/db/media/get`,{assetID:t});return e==null?void 0:e.data}catch(e){throw console.error("Error fetching media:",e),e}},FEe=async t=>{try{const e=await we.post(`${ve.server_url}/db/media/get/stream`,{streamID:t});return e==null?void 0:e.data}catch(e){throw console.error("Error fetching media stream:",e),e}},jEe=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/db/media/create`,{newAssetPayload:t,userUID:e});return n==null?void 0:n.data}catch(n){throw console.error("Error creating media:",n),n}},BEe=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/db/media/create/stream`,{userUID:t,streamData:e});return n==null?void 0:n.data}catch(n){throw console.error("Error creating media stream:",n),n}},ZD={getMedia:NEe,getStream:FEe,createMedia:jEe,createStream:BEe},UEe=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/db/asset/create/metadata`,{assetID:t,metadata:e});return n==null?void 0:n.data}catch(n){throw console.error("Error adding asset metadata:",n),n}},VEe=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/db/asset/create/submit`,{userUID:t,assetID:e});return n==null?void 0:n.data}catch(n){throw console.error("Error submitting asset:",n),n}},zEe=async(t,e,n)=>{try{const r=await we.post(`${ve.server_url}/db/asset/create/dispute`,{userUID:t,assetID:e,reason:n});return r==null?void 0:r.data}catch(r){throw console.error("Error disputing asset:",r),r}},HEe=async(t,e,n,r)=>{try{const i=await we.post(`${ve.server_url}/db/asset/create/dispute/close`,{userUID:t,disputeID:e,solution:n,status:r});return i==null?void 0:i.data}catch(i){throw console.error("Error closing asset dispute:",i),i}},WEe=async(t,e,n)=>{try{const r=await we.post(`${ve.server_url}/db/asset/create/approve`,{userUID:t,assetID:e,params:n});return r==null?void 0:r.data}catch(r){throw console.error("Error approving asset:",r),r}},gm={addMetadata:UEe,submit:VEe,dispute:zEe,closeDispute:HEe,approve:WEe},GEe=async()=>{try{const t=await we.post(`${ve.server_url}/livepeer/key`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching Livepeer key:",t),t}},KEe=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/livepeer/asset/create`,{newAssetPaylaod:t,userUID:e});return n==null?void 0:n.data}catch(n){throw console.error("Error creating asset:",n),n}},qEe=async()=>{try{const t=await we.post(`${ve.server_url}/livepeer/origin`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching Livepeer origin details:",t),t}},YEe=async t=>{try{const e=await we.post(`${ve.server_url}/livepeer/asset/get`,{assetID:t});return e==null?void 0:e.data}catch(e){throw console.error("Error fetching Livepeer asset:",e),e}},QEe=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/livepeer/asset/update`,{assetID:t,updateData:e});return n==null?void 0:n.data}catch(n){throw console.error("Error updating Livepeer asset:",n),n}},XEe=async t=>{try{const e=await we.post(`${ve.server_url}/livepeer/asset/delete`,{assetID:t});return e==null?void 0:e.data}catch(e){throw console.error("Error deleting Livepeer asset:",e),e}},ZEe=async t=>{try{const e=await we.post(`${ve.server_url}/livepeer/asset/info/playback`,{playbackID:t});return e==null?void 0:e.data}catch(e){throw console.error(`Error fetching Livepeer playback info for ${t}:`,e),e}},cS={getKey:GEe,createAsset:KEe,getOriginDetails:qEe,getAsset:YEe,updateAsset:QEe,deleteAsset:XEe,getPlaybackInfo:ZEe},JEe=async()=>{try{const t=await we.post(`${ve.server_url}/maps/get/key`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching Maps key:",t),t}},e_e=async()=>{try{const t=await we.post(`${ve.server_url}/maps/get/api`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching Maps API:",t),t}},BZ={getKey:JEe,getAPI:e_e},t_e=async t=>{try{const e=await we.post(`${ve.server_url}/alchemy/get/wallet_nfts`,{address:t});return e==null?void 0:e.data}catch(e){throw console.error("Error fetching wallet NFTs:",e),e}},n_e=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/alchemy/get/nft_metadata`,{address:t,tokenId:e});return n==null?void 0:n.data}catch(n){throw console.error("Error fetching NFT metadata:",n),n}},r_e={get:{wallet_nfts:t_e,nft_metadata:n_e}},i_e=async(t,e,n,r,i,s)=>{try{const o=await we.post(`${ve.server_url}/npc_credits/issue`,{senderID:t,nftTokenId:e,producer:n,verifier:r,creditType:i,amount:s});return o==null?void 0:o.data}catch(o){throw console.error("Error issuing credits:",o),o}},s_e=async(t,e,n,r,i,s)=>{try{const o=await we.post(`${ve.server_url}/npc_credits/buy`,{accountID:t,producer:e,verifier:n,creditType:r,amount:i,price:s});return o==null?void 0:o.data}catch(o){throw console.error("Error buying credits:",o),o}},o_e=async(t,e,n,r,i,s,o)=>{try{const a=await we.post(`${ve.server_url}/npc_credits/transfer`,{senderID:t,recipientID:e,producer:n,verifier:r,creditType:i,amount:s,price:o});return a==null?void 0:a.data}catch(a){throw console.error("Error transferring credits:",a),a}},a_e=async(t,e,n,r,i)=>{try{const s=await we.post(`${ve.server_url}/npc_credits/donate`,{senderID:t,producer:e,verifier:n,creditType:r,amount:i});return s==null?void 0:s.data}catch(s){throw console.error("Error donating credits:",s),s}},l_e=async t=>{try{const e=await we.get(`${ve.server_url}/nft/owner/${t}`);return e==null?void 0:e.data}catch(e){throw console.error("Error fetching NFT owner:",e),e}},c_e=async t=>{try{const e=await we.get(`${ve.server_url}/nft/credit-types/${t}`);return e==null?void 0:e.data}catch(e){throw console.error("Error fetching credit types:",e),e}},u_e=async(t,e)=>{try{const n=await we.get(`${ve.server_url}/nft/credit-supply-limit/${t}/${e}`);return n==null?void 0:n.data}catch(n){throw console.error("Error fetching credit supply limit:",n),n}},d_e=async()=>{try{const t=await we.get(`${ve.server_url}/npc_credits/total-certificates`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching total certificates:",t),t}},f_e=async()=>{try{const t=await we.get(`${ve.server_url}/npc_credits/total-sold`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching total sold:",t),t}},h_e=async t=>{try{const e=await we.get(`${ve.server_url}/npc_credits/producer-registered/${t}`);return e==null?void 0:e.data}catch(e){throw console.error("Error checking producer registration:",e),e}},p_e=async(t,e)=>{try{const n=await we.get(`${ve.server_url}/npc_credits/verifier-registered/${t}/${e}`);return n==null?void 0:n.data}catch(n){throw console.error("Error checking verifier registration:",n),n}},m_e=async t=>{try{const e=await we.get(`${ve.server_url}/npc_credits/verifiers/${t}`);return e==null?void 0:e.data}catch(e){throw console.error("Error fetching producer verifiers:",e),e}},g_e=async(t,e,n)=>{try{const r=await we.get(`${ve.server_url}/npc_credits/supply/${t}/${e}/${n}`);return r==null?void 0:r.data}catch(r){throw console.error("Error fetching supply:",r),r}},v_e=async t=>{try{const e=await we.get(`${ve.server_url}/certificates/${t}`);return e==null?void 0:e.data}catch(e){throw console.error("Error fetching certificate:",e),e}},y_e=async t=>{try{const e=await we.get(`${ve.server_url}/npc_credits/account-certificates/${t}`);return e==null?void 0:e.data}catch(e){throw console.error("Error fetching account certificates:",e),e}},x_e=async(t,e,n,r)=>{try{const i=await we.get(`${ve.server_url}/npc_credits/account-balance/${t}/${e}/${n}/${r}`);return i==null?void 0:i.data}catch(i){throw console.error("Error fetching account credit balance:",i),i}},b_e=async()=>{try{const t=await we.get(`${ve.server_url}/npc_credits/all-producers`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching all producers:",t),t}},S_e=async()=>{try{const t=await we.get(`${ve.server_url}/npc_credits/recovery-duration`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching recovery duration:",t),t}},w_e=async()=>{var t;return(t=await we.post(`${ve.server_url}/npc_credits/events`))==null?void 0:t.data},vr={issueCredits:i_e,buyCredits:s_e,transferCredits:o_e,donateCredits:a_e,getNFTOwner:l_e,getCreditTypes:c_e,getCreditSupplyLimit:u_e,getTotalCertificates:d_e,getTotalSold:f_e,isProducerRegistered:h_e,isVerifierRegistered:p_e,getProducerVerifiers:m_e,getSupply:g_e,getCertificateById:v_e,getAccountCertificates:y_e,getAccountCreditBalance:x_e,getAllProducers:b_e,getRecoveryDuration:S_e,getNPCCreditEvents:w_e},E_e=async()=>{try{const t=await we.post(`${ve.server_url}/device/all`);return t==null?void 0:t.data}catch(t){throw console.error("Error fetching devices:",t),t}},__e=async t=>{try{const e=await we.post(`${ve.server_url}/device/add`,{devicePayload:t});return e==null?void 0:e.data}catch(e){throw console.error("Error adding device:",e),e}},T_e=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/device/edit`,{deviceID:t,updateData:e});return n==null?void 0:n.data}catch(n){throw console.error("Error editing device:",n),n}},C_e=async t=>{try{const e=await we.post(`${ve.server_url}/device/remove`,{deviceID:t});return e==null?void 0:e.data}catch(e){throw console.error("Error removing device:",e),e}},k_e=async t=>{try{const e=await we.post(`${ve.server_url}/device/details`,{deviceID:t});return e==null?void 0:e.data}catch(e){throw console.error("Error fetching device details:",e),e}},P_e=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/device/emulate`,{deviceID:t,interval:e});return n==null?void 0:n.data}catch(n){throw console.error("Error emulating device:",n),n}},I_e=async t=>{try{const e=await we.post(`${ve.server_url}/device/data`,{deviceID:t});return e==null?void 0:e.data}catch(e){throw console.error("Error fetching device data:",e),e}},UZ={getDevices:E_e,addDevice:__e,editDevice:T_e,removeDevice:C_e,getDeviceDetails:k_e,emulateDevice:P_e,getDeviceData:I_e},fr=async(t,e)=>{try{const n=await we.post(`${ve.server_url}/marketplace/${t}`,e);return n==null?void 0:n.data}catch(n){throw console.error("Error fetching device data:",n),n}},hs={Seller:{approveAndListNFT:(t,e,n,r)=>fr("seller/list_nft",{tokenAddress:t,tokenId:e,price:n,value:r}),cancelListing:t=>fr("seller/cancel_listing",{listingId:t}),acceptBid:t=>fr("seller/accept_bid",{listingId:t})},Buyer:{buyNFT:(t,e)=>fr("buyer/buy_nft",{listingId:t,value:e}),placeBid:(t,e)=>fr("buyer/place_bid",{listingId:t,value:e})},Getters:{getListingFee:()=>fr("get/listing_fee",{}),getHighestBids:()=>fr("get/highest_bids",{})},Events:{listAvailableNFTs:()=>fr("events/listings",{}),getAllEvents:()=>fr("events/all",{}),filtered:{listed:(t=500,e="latest")=>fr("events/listed",{fromBlock:t,toblock:e}),sale:(t=500,e="latest")=>fr("events/sale",{fromBlock:t,toblock:e}),delisted:(t=500,e="latest")=>fr("events/delisted",{fromBlock:t,toblock:e}),bidded:(t=500,e="latest")=>fr("events/bidded",{fromBlock:t,toblock:e}),bidAccepted:(t=500,e="latest")=>fr("events/bidAccepted",{fromBlock:t,toblock:e}),bidWithdrawn:(t=500,e="latest")=>fr("events/bidWithdrawn",{fromBlock:t,toblock:e})}}},A_e=(t,e={})=>{console.error({message:t,error:e})},yh={primary:"#005A87",secondary:"#003F5E",accent:"#007BB5"},VZ={colors:{primary50:"#EFFBFB",primary500:"#1D7072",primary600:"#196061",primary700:"#0F393A",ui50:"#fafafa",ui100:"#f4f4f5",ui200:"#e4e4e7",ui300:"#d4d4d8",ui400:"#a1a1aa",ui500:"#71717a",ui600:"#52525b",ui700:"#3f3f46",ui800:"#27272a",ui900:"#18181b",ui950:"#09090b",red50:"#fef2f2",red100:"#fee2e2",red200:"#fecaca",red300:"#fca5a5",red400:"#f87171",red500:"#ef4444",red600:"#dc2626",red700:"#b91c1c",red800:"#991b1b",red900:"#7f1d1d"},boxShadow:{light:"rgba(17, 17, 26, 0.1) 0px 0px 16px"},mainBreakpoint:"1200px",borderRadius:{default:"12px"},formHeightMd:"44px"},L_e=async(t,e)=>{try{const{device:n}=await UZ.getDeviceDetails(t)||{};console.log("DATA",n),n?e(n):alert(`Device #${t} Data Unavailable`)}catch(n){A_e(n.message,n)}};function R_e(){return VZ.colors.primary500}U.div`
  flex: 0 0 auto;
  width: 100%;
  height: 50px;
  display: flex;
  align-items: center;
  padding: 0.5rem 0;
  justify-content: space-between;
`;U.span`
  margin: 1rem;
  font-size: 1rem;
  font-style: normal;
  font-family: "Work Sans";
  font-weight: 500;
`;U(jt)`
  fill: #134b5f;
  width: auto;
  height: 80%;
  margin-right: 1rem;
`;U.div`
  flex: 0 0 auto;
  width: 100%;
  height: 80%;
  overflow: auto;
`;U.ul`
  height: auto;
  margin: 0;
  padding: 0;
  list-style: none;

  display: flex;
  align-items: center;
  flex-direction: column;
  gap: 20px;
`;U.li``;const O_e=U(ue.div)`
    flex: 0 0 auto;
    width: ${({width:t})=>t||"90%"};
    height: 400px;
    margin: auto;
    display: flex;
    padding: 0.5rem;
    min-width: 300px;
    position: relative;
    box-shadow: 0px 0px 10px 0px #d4d4d4;
    box-sizing: border-box;
    align-items: flex-start;
    border-radius: 4px;
    flex-direction: column;
    background-color: #ffffff;
  
    @media (max-width: 768px) {
      width: 100%;
    }
  `;U.div`
    flex: 0 0 auto;
    width: 100%;
    height: 15%;
    display: flex;
    align-items: center;
    padding-top: 0.5rem;
    justify-content: space-between;
  `;U.span`
    margin: 1rem;
    font-size: 1.1rem;
    font-style: normal;
    font-family: 'Work Sans';
    font-weight: 500;
  `;U.div`
    flex: 0 0 auto;
    width: 100%;
    height: 85%;
    display: flex;
    align-items: flex-start;
    flex-direction: column;
    justify-content: center;
  `;U.ul`
    height: 100%;
    margin: 0px;
    padding-top: 1rem;
    padding-right: 1rem;
    list-style-position: outside;
  `;U.li`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 1rem;
  margin-bottom: 1rem;
`;U.span`
  position: relative;
  cursor: pointer;

  &:hover > div {
    display: block;
  }
`;U.div`
  display: none;
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background-color: #333;
  color: white;
  padding: 5px;
  border-radius: 4px;
  font-size: 0.8rem;
  white-space: nowrap;
`;const D_e={hidden:{opacity:0,y:50},visible:{opacity:1,y:0},hover:{scale:1.01,boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)"}};O_e.defaultProps={initial:"hidden",animate:"visible",exit:"hidden",variants:D_e,whileHover:"hover",transition:{type:"spring",stiffness:100}};ie.string,ie.arrayOf(ie.shape({date:ie.string,amount:ie.number,status:ie.string}));const M_e=U.div`
  /* Loading animation styles */
`,cA=()=>b.jsx(M_e,{children:"Loading..."}),$_e=U.div`
  color: red;
`,zZ=({error:t})=>b.jsx($_e,{children:t}),N_e=U.div`
  width: ${({width:t})=>t||"100%"};
  height: 2px;
  background-color: #ccc;
  margin: auto;
`,Xm=({width:t})=>b.jsx(N_e,{width:t}),Ju="/assets/icon-f4bcdbb8.png",F_e="5.5.7",j_e={g:"LottieFiles AE 0.1.20",a:"Diana Barkho",k:"Eco Friendly, Environmentally Friendly, Green Energy, Renewable Energy ",d:"A Rotating Eco Friendly, Environmentally Friendly, Green Energy, Renewable Energy Icon",tc:"none"},B_e=29.9700012207031,U_e=0,V_e=240.0000097754,z_e=600,H_e=600,W_e="EcoFriendlyIcon",G_e=0,K_e=[],q_e=[{ddd:0,ind:1,ty:4,nm:"EcoFriendlyIcon Outlines",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:13,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:77,s:[50]},{t:118.000004806239,s:[100]}],ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:21,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:77,s:[180]},{t:118.000004806239,s:[360]}],ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:14,s:[280,1068,0],to:[-3.333,-120,0],ti:[.667,124.667,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:32,s:[260,348,0],to:[-.667,-124.667,0],ti:[0,0,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:80,s:[276,320,0],to:[0,0,0],ti:[0,0,0]},{t:140.000005702317,s:[304,308,0]}],ix:2},a:{a:0,k:[256,256,0],ix:1},s:{a:1,k:[{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:139,s:[100,100,100]},{i:{x:[.833,.833,.833],y:[.833,.833,.833]},o:{x:[.167,.167,.167],y:[.167,.167,.167]},t:169,s:[110,110,100]},{t:199.000008105436,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[10.98,3.009],[8.136,-8.149],[-2.715,-10.679],[16.43,-38.773],[-3.814,-1.614],[-1.616,3.814],[11.134,43.809],[-4.089,4.095],[-5.821,-1.598],[-1.454,-5.708],[14.74,-44.191],[37.727,-29.134],[54.942,1.375],[41.25,34.437],[6.888,-5.293],[0,0],[-.31,3.683],[0,0],[-2.044,-.267],[0,0],[2.748,-2.354],[0,0],[-10.217,-7.149],[-43.687,.778],[-35.67,27.842],[-12.413,19.041],[3.47,2.264],[2.263,-3.471],[16.699,-13.032],[41.917,-.76],[32.959,23.06],[-2.196,1.846],[0,0],[15.828,1.909],[0,0],[1.352,-10.229],[0,0],[-6.555,-3.784],[-6.039,4.635],[0,0],[-1.27,-1.061],[-57.54,-1.441],[-46.216,35.689],[-16.047,48.108],[12.147,47.682]],o:[[-2.802,-11.003],[-11.091,-3.04],[-7.803,7.814],[10.332,40.651],[-1.616,3.813],[3.811,1.617],[17.7,-41.771],[-1.419,-5.584],[4.275,-4.281],[5.71,1.565],[11.437,44.889],[-15.099,45.273],[-43.516,33.595],[-54.172,-1.357],[-6.618,-5.52],[0,0],[-2.995,2.083],[0,0],[.27,-2.043],[0,0],[3.693,.674],[0,0],[-9.85,7.426],[35.531,24.858],[45.192,-.818],[18.007,-14.052],[2.261,-3.469],[-3.473,-2.263],[-11.507,17.65],[-33.088,25.826],[-40.513,.703],[-2.197,-1.537],[0,0],[13.086,-9.878],[0,0],[-10.226,-1.33],[0,0],[-.986,7.509],[6.575,3.795],[0,0],[1.371,-1.054],[43.835,36.593],[58.281,1.46],[40.093,-30.961],[15.649,-46.925],[0,0]],v:[[248.078,-62.645],[226.068,-85.022],[195.358,-76.865],[187.11,-46.881],[177.655,76.284],[181.634,86.115],[191.464,82.136],[201.646,-50.576],[205.972,-66.269],[222.103,-70.557],[233.543,-58.942],[228.493,77.221],[147.745,190.958],[-4.963,240.918],[-152.933,185.414],[-176.242,185.024],[-200.128,203.376],[-206.053,200.012],[-194.303,110.742],[-190.104,107.52],[-100.802,119.164],[-99.071,125.742],[-118.473,140.645],[-117.925,170.72],[4.868,208.042],[128.471,164.232],[174.315,114.359],[172.127,103.98],[161.749,106.169],[119.242,152.409],[4.595,193.048],[-109.332,158.427],[-109.338,152.541],[-89.933,137.636],[-98.861,104.292],[-188.165,92.646],[-209.171,108.782],[-220.922,198.057],[-211.757,216.648],[-190.994,215.273],[-167.103,196.919],[-162.541,196.933],[-5.337,255.913],[156.913,202.831],[242.725,81.967],[248.078,-62.645]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[-10.625,25.738],[-2.153,4.138],[2.965,24.012],[-18.489,-25.412],[4.473,-24.341],[28.181,-21.561],[3.471,20.941],[-2.73,4.455],[-.03,7.523],[4.142,.016],[0,0],[.018,-4.131],[5.552,-8.202],[9.355,18.277],[3.686,-1.887],[-1.887,-3.687],[-4.099,-25.782],[1.348,1.158],[11.47,5.516],[1.796,-3.732],[-3.733,-1.795],[-8.623,-7.406],[-4.948,-6.115],[1.296,-12.417],[9.737,34.418]],o:[[-4.041,-14.28],[2.112,-5.117],[10.247,-19.685],[33.145,11.839],[17.864,24.555],[-2.374,12.928],[1.599,-20.534],[3.857,-3.562],[6.942,-11.324],[.017,-4.141],[0,0],[-4.126,0],[-.023,5.947],[-4.867,-19.547],[-1.888,-3.688],[-3.688,1.887],[12.114,23.667],[-1.307,-1.209],[-9.616,-8.259],[-3.729,-1.794],[-1.793,3.733],[10.292,4.947],[5.948,5.108],[.787,13.834],[-18.669,-5.239],[0,0]],v:[[-62.704,2.726],[-55.441,-63.223],[-48.947,-76.757],[-36.932,-138.798],[43.016,-81.153],[63.784,-5.328],[24.975,52.54],[21.862,-12.104],[31.78,-24.158],[40.247,-54.35],[32.778,-61.879],[32.746,-61.879],[25.248,-54.41],[17.992,-30.441],[-3.349,-87.277],[-13.441,-90.536],[-16.7,-80.444],[7.685,-6.036],[3.71,-9.595],[-28.068,-30.353],[-38.077,-26.843],[-34.567,-16.834],[-6.062,1.783],[10.338,18.688],[9.41,58.117],[-62.704,2.726]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[0,0],[-1.11,0],[-1.303,2.655],[-4.953,32.142],[-7.023,38.23],[20.305,27.911],[37.214,12.668],[3.569,-2.979],[-.686,-4.606],[8.493,-16.311],[2.367,-5.732],[-7.036,-24.868],[-26.675,-13.416],[-7.915,-2.12],[8.648,-17.624],[-3.719,-1.825]],o:[[1.062,.52],[2.771,0],[9.464,-19.286],[18.874,-12.09],[5.222,-28.425],[-20.795,-28.582],[-4.413,-1.504],[-3.567,2.976],[2.918,19.581],[-2.305,4.429],[-8.01,19.403],[6.072,21.461],[13.47,6.774],[-4.832,29.023],[-1.823,3.716],[0,0]],v:[[-11.946,153.926],[-8.649,154.694],[-1.91,150.497],[22.684,72.42],[78.537,-2.616],[55.144,-89.975],[-34.812,-153.941],[-47.56,-151.585],[-52.16,-139.478],[-62.251,-83.683],[-69.306,-68.945],[-77.137,6.81],[-27.079,60.123],[7.377,73.112],[-15.377,143.89],[-11.946,153.926]],c:!0},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ind:3,ty:"sh",ix:4,ks:{a:0,k:{i:[[0,0],[-39.403,40.084],[-41.478,6.253],[-35.723,-18.52],[1.914,-2.114],[0,0],[-16.754,.006],[0,0],[0,0],[.007,10.313],[0,0],[11.211,-11.457],[0,0],[1.404,.887],[62.899,-10.997],[-.714,-4.08],[-4.08,.714],[-50.421,-31.845],[-6.143,6.153],[0,0],[-.169,-3.472],[0,0],[2.059,-.004],[0,0],[0,0],[-2.499,2.74],[0,0],[10.911,5.657],[43.192,-6.511],[31.726,-32.266],[-5.399,-60.765],[3.465,-3.469],[6.199,2.24],[.583,6.433],[-49.98,50.309],[-36.216,11.89],[1.292,3.936],[3.938,-1.291],[28.682,-28.877],[-6.841,-75.484],[-11.535,-4.173],[-3.618,0],[-6.076,6.087],[.838,9.424]],o:[[-5.009,-56.378],[29.429,-29.931],[40.088,-6.044],[2.426,1.258],[0,0],[-11.478,11.501],[0,0],[0,0],[10.317,-.024],[0,0],[.154,-16.52],[0,0],[-1.228,1.231],[-53.578,-33.84],[-4.081,.713],[.713,4.081],[59.229,-10.351],[7.281,4.603],[0,0],[2.828,-2.538],[0,0],[.001,2.055],[0,0],[0,0],[-3.596,-.168],[0,0],[8.782,-8.686],[-38.514,-19.965],[-44.717,6.743],[-42.49,43.225],[.444,4.993],[-4.672,4.678],[-6.092,-2.204],[-6.442,-71.061],[26.997,-27.182],[3.935,-1.292],[-1.292,-3.935],[-38.488,12.636],[-53.112,53.462],[1.106,12.198],[3.565,1.29],[8.192,-.001],[6.607,-6.616],[0,0]],v:[[-192.29,16.195],[-138.17,-135.591],[-29.783,-190.901],[87.78,-171.558],[88.567,-165.735],[71.287,-148.426],[84.474,-116.544],[84.515,-116.544],[174.637,-116.731],[193.338,-135.476],[193.245,-225.461],[161.313,-238.603],[140.028,-217.283],[135.488,-216.691],[-45.139,-252.116],[-51.236,-243.438],[-42.557,-237.341],[127.478,-204.011],[150.645,-206.686],[171.929,-228.006],[178.247,-225.451],[178.34,-135.463],[174.605,-131.73],[84.484,-131.543],[84.474,-131.543],[81.903,-137.829],[99.182,-155.137],[94.684,-184.874],[-32.018,-205.732],[-148.865,-146.105],[-207.229,17.525],[-211.982,30.841],[-229.342,34.73],[-240.001,20.938],[-171.493,-170.04],[-76.226,-228.922],[-71.44,-238.386],[-80.904,-243.173],[-182.134,-180.61],[-254.941,22.29],[-234.446,48.832],[-223.6,50.751],[-201.369,41.435],[-192.29,16.195]],c:!0},ix:2},nm:"Path 4",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.0314,.3412,.6275,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[256,256.008],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:8,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-.634,-4.256],[-.128,-1.078],[8.696,-47.333],[15.444,-11.098],[-1.657,-.336],[-7.371,40.124],[75.915,25.842]],o:[[-4.074,-1.387],[.153,1.024],[61.342,29.849],[-5.969,32.493],[10.947,3.897],[12.032,-7.408],[9.722,-52.924],[0,0]],v:[[-54.983,-106.509],[-62.496,-100.25],[-62.076,-97.092],[23.411,36.362],[-22.373,101.869],[-1.428,107.896],[53.408,36.362],[-54.983,-106.509]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.8667,.702,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[273.753,215.673],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[75.916,25.843],[-.634,-4.257],[2.422,-12.548],[6.453,-15.63],[-6.156,-21.76],[-5.076,-1.034],[-7.37,40.124]],o:[[9.722,-52.923],[-4.074,-1.387],[1.37,9.186],[-3.512,18.193],[-8.286,20.071],[13.314,47.054],[12.034,-7.408],[0,0]],v:[[68.758,36.362],[-39.634,-106.509],[-47.147,-100.249],[-47.714,-67.124],[-64.777,-25.749],[-72.324,45.102],[13.922,107.896],[68.758,36.362]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.6178,.8622,.8174,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[258.402,215.672],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[23.667,92.898],[13.285,-10.659],[-1.356,-5.318],[80.439,-62.118],[47.875,-2.895],[-49.297,38.059]],o:[[-4.336,-17.018],[3.795,3.029],[23.666,92.897],[-40.777,31.481],[57.709,3.465],[80.439,-62.118]],v:[[119.742,-144.514],[81.657,-157.119],[89.745,-144.514],[1.261,113.174],[-134.931,164.313],[31.258,113.174]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.8667,.702,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[377.069,339.728],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:4,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-4.567,-17.922],[80.439,-62.118],[87.115,72.725],[4.142,-3.182],[0,0],[-1.299,9.887],[0,0],[-6.148,-.799],[0,0],[7.916,-6.085],[0,0],[-6.153,-4.297],[-70.92,55.355],[18.951,74.558],[-5.979,5.99]],o:[[13.117,-13.139],[23.667,92.897],[-93.638,72.292],[-3.992,-3.328],[0,0],[-7.922,6.077],[0,0],[.811,-6.144],[0,0],[9.888,1.293],[0,0],[-5.983,4.594],[69.895,48.903],[64.206,-50.11],[-2.077,-8.171],[0,0]],v:[[180.058,-157.21],[220.204,-146.437],[131.72,111.251],[-178.343,105.53],[-192.279,105.328],[-216.171,123.683],[-234.094,113.39],[-222.344,24.117],[-209.74,14.44],[-120.436,26.084],[-115.11,46.045],[-134.512,60.949],[-134.232,78.931],[103.251,72.677],[173.77,-134.371],[180.058,-157.21]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.6178,.8622,.8174,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[276.607,341.651],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:4,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[7.054,-7.065],[0,0],[0,0],[6.196,-.015],[0,0],[-8.241,.018],[0,0],[.003,6.186]],o:[[-.001,-9.967],[0,0],[0,0],[.003,6.187],[0,0],[-2.553,6.845],[0,0],[6.195,-.015],[0,0]],v:[[57.113,-43.262],[37.988,-51.107],[27.136,-40.235],[27.209,31.731],[15.989,42.969],[-54.656,43.115],[-44.134,58.154],[45.985,57.968],[57.206,46.73]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.8667,.702,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[384.633,73.809],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-22.693,37.48],[-91.122,-48.282],[31.165,-100.25],[13.986,-9.631],[3.458,-1.114],[-12.343,13.423],[.807,7.618]],o:[[-3.534,-40.593],[54.955,-91.891],[-131.26,-111.516],[-18.349,52.461],[-2.893,2.898],[4.589,15.26],[3.917,-3.716],[0,0]],v:[[-122.662,120.075],[-94.901,-.936],[169.241,-74.457],[-143.407,24.425],[-159.575,124.355],[-169.241,130.311],[-129.578,139.354],[-122.662,120.075]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.8667,.702,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[178.902,152.792],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:4,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.005,-.001],[.014,.012],[-.009,-.011]],o:[[-.013,-.012],[.009,.011],[.006,.002]],v:[[.021,.018],[-.021,-.018],[.005,.014]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.8667,.702,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[350.599,80.494],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:2,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[4.251,1.774],[-2.181,-1.378],[-2.08,.032]],o:[[-4.166,-2.02],[2.214,1.303],[1.853,1.172],[0,0]],v:[[6.314,2.829],[-6.314,-2.861],[.285,1.146],[6.314,2.829]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.8667,.702,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[357.202,29.511],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 9",np:2,cix:2,bm:0,ix:9,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[1.828,20.16],[-53.494,53.845],[-95.982,-60.62],[-3.688,3.694],[0,0],[-.001,-9.967],[0,0],[6.196,-.015],[0,0],[-7.062,7.073],[0,0],[6.669,3.457],[63.076,-64.149],[-5.006,-56.343],[5.073,-5.082]],o:[[-14.349,14.372],[-6.381,-70.399],[83.359,-83.928],[4.399,2.781],[0,0],[7.054,-7.065],[0,0],[.004,6.186],[0,0],[-9.973,.021],[0,0],[5.321,-5.33],[-75.766,-39.275],[-42.501,43.234],[.634,7.129],[0,0]],v:[[-172.671,138.88],[-213.467,124.355],[-142.81,-72.583],[165.489,-107.61],[179.341,-109.243],[200.625,-130.564],[219.75,-122.718],[219.844,-32.726],[208.623,-21.488],[118.504,-21.302],[110.599,-40.385],[127.879,-57.695],[125.237,-75.477],[-109.512,-38.108],[-165.756,119.601],[-172.671,138.88]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.6178,.8622,.8174,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[221.996,153.266],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 10",np:4,cix:2,bm:0,ix:10,mn:"ADBE Vector Group",hd:!1}],ip:0,op:240.0000097754,st:0,bm:0}],Y_e=[],HZ={v:F_e,meta:j_e,fr:B_e,ip:U_e,op:V_e,w:z_e,h:H_e,nm:W_e,ddd:G_e,assets:K_e,layers:q_e,markers:Y_e},Q_e="5.5.7",X_e={g:"LottieFiles AE 0.1.20",a:"",k:"",d:"",tc:""},Z_e=60,J_e=0,eTe=120,tTe=1300,nTe=1300,rTe="animation",iTe=0,sTe=[],oTe=[{ddd:0,ind:1,ty:4,nm:"Tick",parent:4,sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:3.115,s:[100]},{t:20.796875,s:[100]}],ix:11},r:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:12,s:[-165]},{t:39,s:[0]}],ix:10},p:{a:0,k:[346.916,346.917,0],ix:2},a:{a:0,k:[278.033,227.218,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:19.533,s:[20,20,100]},{t:38,s:[120.056,120.056,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-153.033,.588],[-51.404,102.218],[153.032,-102.218]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:55,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[278.033,227.218],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.33],y:[1]},o:{x:[.67],y:[0]},t:20.164,s:[0]},{t:38.48046875,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:120,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Glow Mask",td:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:3.115,s:[100]},{t:20.796875,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[651.01,647.835,0],ix:2},a:{a:0,k:[346.917,346.917,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:19.533,s:[20,20,100]},{i:{x:[.833,.833,.833],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:38,s:[130.056,130.056,100]},{i:{x:[.833,.833,.833],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:51.109,s:[95,95,100]},{i:{x:[.833,.833,.833],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:58.688,s:[102,102,100]},{i:{x:[.833,.833,.833],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:63.74,s:[98,98,100]},{t:70.0546875,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-191.459],[191.459,0],[0,191.458],[-191.458,0]],o:[[0,191.458],[-191.458,0],[0,-191.459],[191.459,0]],v:[[346.667,0],[0,346.667],[-346.667,0],[0,-346.666]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.118000000598,.442999985639,.929000016755,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[346.916,346.917],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:120,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Glow",tt:1,sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:0,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:3.115,s:[100]},{i:{x:[.833],y:[.643]},o:{x:[.72],y:[0]},t:70.055,s:[100]},{t:89,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.788},o:{x:.72,y:0},t:59.951,s:[-254,130,0],to:[226.667,131.333,0],ti:[-226.667,-131.333,0]},{t:89,s:[1106,918,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[120.056,120.056,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[348.655,1.947],[0,0],[35.647,880.072]],o:[[0,0],[-8.868,-.049],[0,0],[-3.819,-94.283]],v:[[211.999,-440],[-480,280],[-136,648],[483.999,-312]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.76862745098,.823067997951,1,1],ix:4},o:{a:0,k:30,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:120,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Background Circle (Blue)",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:8,s:[100]},{t:20.796875,s:[100]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[650,650,0],ix:2},a:{a:0,k:[346.917,346.917,0],ix:1},s:{a:1,k:[{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:19.533,s:[20,20,100]},{i:{x:[.833,.833,.833],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:39,s:[110,110,100]},{i:{x:[.833,.833,.833],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:51.109,s:[95,95,100]},{i:{x:[.833,.833,.833],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:58.688,s:[102,102,100]},{i:{x:[.833,.833,.833],y:[1,1,1]},o:{x:[.167,.167,.167],y:[0,0,0]},t:63.74,s:[98,98,100]},{t:70.0546875,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-191.459],[191.459,0],[0,191.458],[-191.458,0]],o:[[0,191.458],[-191.458,0],[0,-191.459],[191.459,0]],v:[[346.667,0],[0,346.667],[-346.667,0],[0,-346.666]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.30980392156862746,.611764705882353,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[346.916,346.917],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:120,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"Background(Blue)",parent:4,sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:3.115,s:[20]},{t:20.796875,s:[20]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[346.917,346.917,0],ix:2},a:{a:0,k:[346.917,346.917,0],ix:1},s:{a:1,k:[{i:{x:[.33,.33,.33],y:[1,1,1]},o:{x:[.67,.67,.67],y:[0,0,0]},t:0,s:[100,100,100]},{i:{x:[.33,.33,.33],y:[1,1,1]},o:{x:[.67,.67,.67],y:[0,0,0]},t:38,s:[168.056,168.056,100]},{t:70.0546875,s:[88,88,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-191.459],[191.459,0],[0,191.458],[-191.458,0]],o:[[0,191.458],[-191.458,0],[0,-191.459],[191.459,0]],v:[[346.667,0],[0,346.667],[-346.667,0],[0,-346.666]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.352941185236,.486274510622,.89411765337,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[346.916,346.917],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:120,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"Element 11",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.174,y:0},t:15.99,s:[647.368,647.581,0],to:[-154.333,61,0],ti:[34.333,-69,0]},{t:32.615234375,s:[464.545,1145.048,0]}],ix:2},a:{a:0,k:[88.379,84.132,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-17.539,13.457],[-12.743,-16.607],[0,0]],o:[[-12.743,-16.608],[17.539,-13.458],[0,0],[0,0]],v:[[-25.635,34.132],[-16.894,-20.673],[38.306,-14.931],[38.379,-14.837]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.255000005984,.685999971278,.501999978458,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[88.378,84.131],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:7,ty:4,nm:"Element 10",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.229,y:0},t:15.99,s:[650,650,0],to:[59.019,77.842,0],ti:[-71.667,-48,0]},{t:34.6953125,s:[1004.113,1117.051,0]}],ix:2},a:{a:0,k:[33.514,41.664,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[3.281,-1.895],[0,0],[1.894,3.281],[0,0],[-3.281,1.894],[0,0],[-1.894,-3.282],[0,0]],o:[[0,0],[-3.281,1.894],[0,0],[-1.894,-3.283],[0,0],[3.281,-1.895],[0,0],[1.894,3.281]],v:[[28.859,29.055],[10.732,39.52],[1.361,37.009],[-31.37,-19.681],[-28.859,-29.053],[-10.732,-39.519],[-1.361,-37.008],[31.37,19.683]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.30980392156862746,.611764705882353,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[33.514,41.664],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:8,ty:4,nm:"Element 9",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.189,y:0},t:15.99,s:[651.262,651.213,0],to:[70.333,-5.667,0],ti:[-62.333,-30.333,0]},{t:33.134765625,s:[1110.768,929.936,0]}],ix:2},a:{a:0,k:[60.548,78.82,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[2.886,-21.917],[20.753,2.734],[.039,.005]],o:[[20.754,2.733],[-2.886,21.918],[-.04,-.005],[0,0]],v:[[-12.409,-41.32],[20.162,3.615],[-22.93,38.586],[-23.048,38.571]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.972549019608,.149019607843,.505882352941,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:15,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[60.548,78.82],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:9,ty:4,nm:"Element 8",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.263,y:0},t:15.99,s:[649.692,649.692,0],to:[46.333,-81.667,0],ti:[-98.333,51.667,0]},{t:46.126953125,s:[1087.413,563.271,0]}],ix:2},a:{a:0,k:[47.326,47.325,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-11.644,-3.948],[0,0],[-3.912,2.92],[0,0],[.157,-12.294],[0,0],[-3.985,-2.819],[0,0],[11.74,-3.65],[0,0],[1.449,-4.662],[0,0],[7.098,10.038],[0,0],[4.882,-.063],[0,0],[-7.354,9.853],[0,0],[1.569,4.624],[0,0]],o:[[0,0],[4.623,1.568],[0,0],[9.854,-7.353],[0,0],[-.062,4.882],[0,0],[10.038,7.099],[0,0],[-4.662,1.449],[0,0],[-3.649,11.74],[0,0],[-2.82,-3.986],[0,0],[-12.293,.156],[0,0],[2.92,-3.913],[0,0],[-3.948,-11.644]],v:[[-17.558,-36.37],[-13.481,-34.987],[.154,-37.147],[3.606,-39.722],[27.31,-27.644],[27.255,-23.339],[33.522,-11.038],[37.038,-8.552],[32.877,17.724],[28.763,19.002],[19.003,28.764],[17.724,32.876],[-8.551,37.037],[-11.037,33.522],[-23.338,27.255],[-27.644,27.31],[-39.721,3.606],[-37.146,.155],[-34.987,-13.481],[-36.37,-17.558]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[1,.736999990426,.195999998205,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[47.325,47.325],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:10,ty:4,nm:"Element 7",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.229,y:0},t:15.99,s:[648.09,648.244,0],to:[18.333,-110,0],ti:[-64.333,76,0]},{t:34.6953125,s:[1006.148,335.839,0]}],ix:2},a:{a:0,k:[77.856,74.774,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[-12.731,9.768],[-9.249,-12.055],[-.018,-.022]],o:[[-9.249,-12.055],[12.73,-9.768],[.018,.023],[0,0]],v:[[-18.607,24.774],[-12.262,-15.006],[27.805,-10.838],[27.857,-10.77]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.972549019608,.149019607843,.505882352941,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:20,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[77.856,74.774],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:11,ty:4,nm:"Element 6",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.189,y:0},t:15.99,s:[649.693,649.693,0],to:[-138,24.333,0],ti:[110,-64.333,0]},{t:33.134765625,s:[219.471,1053.811,0]}],ix:2},a:{a:0,k:[47.326,47.325,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-11.644,-3.948],[0,0],[-3.913,2.92],[0,0],[.157,-12.294],[0,0],[-3.986,-2.819],[0,0],[11.74,-3.65],[0,0],[1.449,-4.662],[0,0],[7.099,10.038],[0,0],[4.881,-.062],[0,0],[-7.353,9.853],[0,0],[1.568,4.624],[0,0]],o:[[0,0],[4.623,1.567],[0,0],[9.853,-7.352],[0,0],[-.063,4.882],[0,0],[10.038,7.1],[0,0],[-4.662,1.449],[0,0],[-3.649,11.741],[0,0],[-2.819,-3.987],[0,0],[-12.293,.157],[0,0],[2.92,-3.913],[0,0],[-3.948,-11.644]],v:[[-17.558,-36.37],[-13.481,-34.987],[.154,-37.147],[3.605,-39.723],[27.31,-27.644],[27.255,-23.339],[33.521,-11.038],[37.037,-8.553],[32.875,17.724],[28.763,19.002],[19.003,28.764],[17.724,32.875],[-8.552,37.037],[-11.039,33.522],[-23.339,27.254],[-27.645,27.31],[-39.722,3.606],[-37.146,.154],[-34.987,-13.481],[-36.37,-17.558]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[1,.737254901961,.196078446332,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[47.325,47.325],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:12,ty:4,nm:"Element 5",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.283,y:0},t:15.99,s:[650,650,0],to:[-178.333,3,0],ti:[124.333,-150,0]},{t:47.166015625,s:[207.297,867.159,0]}],ix:2},a:{a:0,k:[30.771,30.771,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-16.856],[16.856,0],[0,16.856],[-16.857,0]],o:[[0,16.856],[-16.857,0],[0,-16.856],[16.856,0]],v:[[30.521,0],[0,30.521],[-30.521,0],[0,-30.521]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.972549019608,.149019607843,.505882352941,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[30.771,30.771],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:13,ty:4,nm:"Element 4",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.273,y:0},t:15.99,s:[650,650,0],to:[-94.667,-86.667,0],ti:[140.667,20.667,0]},{t:46.64453125,s:[136.624,624.727,0]}],ix:2},a:{a:0,k:[42,25.144,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.829,-3.697],[0,0],[3.698,-.828],[0,0],[.83,3.697],[0,0],[-3.697,.828],[0,0]],o:[[0,0],[.829,3.697],[0,0],[-3.697,.828],[0,0],[-.828,-3.697],[0,0],[3.697,-.828]],v:[[36.343,-18.872],[40.921,1.552],[35.727,9.747],[-28.148,24.066],[-36.344,18.872],[-40.922,-1.553],[-35.728,-9.747],[28.148,-24.066]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.313725490196,.81568627451,.360784313725,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[42,25.144],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:14,ty:4,nm:"Element 3",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.174,y:0},t:15.99,s:[649.693,649.692,0],to:[-113.667,-146,0],ti:[119.667,22.5,0]},{t:42.48828125,s:[219.471,426.071,0]}],ix:2},a:{a:0,k:[47.326,47.325,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-11.644,-3.948],[0,0],[-3.913,2.92],[0,0],[.157,-12.294],[0,0],[-3.986,-2.819],[0,0],[11.74,-3.65],[0,0],[1.449,-4.662],[0,0],[7.099,10.038],[0,0],[4.881,-.063],[0,0],[-7.353,9.854],[0,0],[1.568,4.624],[0,0]],o:[[0,0],[4.623,1.568],[0,0],[9.853,-7.353],[0,0],[-.063,4.882],[0,0],[10.038,7.099],[0,0],[-4.662,1.449],[0,0],[-3.649,11.74],[0,0],[-2.819,-3.986],[0,0],[-12.293,.157],[0,0],[2.92,-3.912],[0,0],[-3.948,-11.644]],v:[[-17.558,-36.37],[-13.481,-34.987],[.154,-37.147],[3.605,-39.722],[27.31,-27.644],[27.255,-23.339],[33.521,-11.038],[37.037,-8.552],[32.875,17.724],[28.763,19.002],[19.003,28.764],[17.724,32.876],[-8.552,37.037],[-11.039,33.522],[-23.339,27.255],[-27.645,27.309],[-39.722,3.605],[-37.146,.154],[-34.987,-13.481],[-36.37,-17.558]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,.30980392156862746,.611764705882353,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[47.325,47.325],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:15,ty:4,nm:"Element 2",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:10.793,s:[0]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:12.871,s:[100]},{i:{x:[.833],y:[.601]},o:{x:[.72],y:[0]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.292,y:0},t:15.99,s:[650,650,0],to:[-95.667,-127,0],ti:[3.667,95,0]},{t:47.6875,s:[478.638,237.457,0]}],ix:2},a:{a:0,k:[33.515,41.664,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[3.281,-1.895],[0,0],[1.895,3.281],[0,0],[-3.281,1.894],[0,0],[-1.895,-3.281],[0,0]],o:[[0,0],[-3.282,1.895],[0,0],[-1.895,-3.281],[0,0],[3.281,-1.894],[0,0],[1.895,3.282]],v:[[28.859,29.054],[10.733,39.519],[1.36,37.008],[-31.37,-19.683],[-28.859,-29.054],[-10.732,-39.52],[-1.36,-37.009],[31.37,19.682]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.274509803922,.513725490196,.960784313725,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[33.515,41.664],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0},{ddd:0,ind:16,ty:4,nm:"Element 1",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:10.793,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:12.871,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:27.42,s:[100]},{t:56,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.33,y:1},o:{x:.252,y:0},t:15.99,s:[650,650,0],to:[22,-151.667,0],ti:[40,75.667,0]},{t:45.607421875,s:[717.199,194.507,0]}],ix:2},a:{a:0,k:[30.771,30.771,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-16.856],[16.856,0],[0,16.857],[-16.857,0]],o:[[0,16.857],[-16.857,0],[0,-16.856],[16.856,0]],v:[[30.522,-.001],[0,30.522],[-30.522,-.001],[0,-30.522]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.255000005984,.685999971278,.501999978458,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[30.771,30.772],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:15,op:120,st:15,bm:0}],aTe=[],WZ={v:Q_e,meta:X_e,fr:Z_e,ip:J_e,op:eTe,w:tTe,h:nTe,nm:rTe,ddd:iTe,assets:sTe,layers:oTe,markers:aTe},lTe=U.div`
  box-sizing: border-box;
  flex-direction: column;
  width: 60%;
  padding: 40px;
  background-color: #fff;
  border: 2px solid #000;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  text-align: center;
  background: linear-gradient(145deg, #dee6de, #ffffff);
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  border: 5px solid #0d5b84;
  box-shadow: rgba(0, 0, 0, 0.19) 0px 10px 20px, rgba(0, 0, 0, 0.23) 0px 6px 6px;
  margin: auto;
  margin-bottom: 10px;
  span {
    color: #2b6987;
  }
  border: 5px solid #0d5b84;
  box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);
  -webkit-box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);
  -moz-box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);

  @media (max-width: 768px) {
    width: 90%;
  }
`,cTe=U.img`
  width: 150px;
  margin-bottom: 20px;
`,u6=U.h1`
  font-size: 28px;
  margin-bottom: 10px;
`,Op=U.h4`
  font-size: 18px;
  margin-bottom: 10px;
`,aC=U.h2`
  font-size: 14px;
  margin-bottom: 10px;
`,lC=U.h2`
  font-size: 14px;
  font-style: italic;
  margin-bottom: 10px;
  font-family: "Dancing Script", cursive;
  font-size: 20px;
`,d6=U.h6`
  font-size: 14px;
  margin-bottom: 30px;
`,uTe=U.div`
  display: flex;
  justify-content: space-between;
  margin-bottom: 20px;

  @media (max-width: 700px) {
    flex-direction: column;
  }
`,cC=U.div`
  flex: 1;
  text-align: center;

  @media (max-width: 700px) {
    margin-bottom: 20px;
  }
`,dTe=({data:t})=>{const{id:e,buyer:n,producer:r,verifier:i,balance:s,timestamp:o,type:a,creditType:l,price:c}=t||{},u=ASe(Number(o));return b.jsxs(lTe,{id:"thin-scroll",children:[b.jsx(cTe,{src:Ju,loading:"lazy",sizes:"(max-width: 479px) 75.98958587646484px, (max-width: 767px) 83.99305725097656px, (max-width: 991px) 12vw, 120.00000762939453px",alt:"NeptuneChain AppIcon"}),b.jsx(u6,{children:"Nutrient Trading"}),b.jsx(Op,{children:"Nutrient Pollution Removal Certificate"}),b.jsxs(u6,{children:[b.jsx("span",{children:Number(s)})," NPRCs"]}),a==="transfer"?b.jsxs(d6,{children:["This certifies that the ownership of"," ",b.jsx("span",{children:`${Number(s)} ${l==null?void 0:l.toUpperCase()} `}),"Credits was transferred to ",b.jsx("span",{children:n==null?void 0:n.toUpperCase()})," from ",b.jsx("span",{children:r==null?void 0:r.toUpperCase()})," on"," ",b.jsx("span",{children:u})," at the price of ",b.jsxs("span",{children:["$",Number(c)]}),"/Credit."]}):b.jsxs(d6,{children:["This certifies that the buyer, ",b.jsx("span",{children:n==null?void 0:n.toUpperCase()}),", paid the producer, ",b.jsx("span",{children:r==null?void 0:r.toUpperCase()}),", for the ownership of"," ",b.jsx("span",{children:`${Number(s)} ${l==null?void 0:l.toUpperCase()} `}),"Credits on ",b.jsx("span",{children:u})," at the price of"," ",b.jsxs("span",{children:["$",Number(c)]}),"/Credit."]}),b.jsxs(uTe,{children:[b.jsxs(cC,{children:[b.jsx(Op,{children:"Supplied by:"}),b.jsx(lC,{children:r}),b.jsx(Xm,{width:"80%"}),b.jsx(aC,{children:r==null?void 0:r.toUpperCase()})]}),b.jsxs(cC,{children:[b.jsx(Op,{children:"Verified by:"}),b.jsx(lC,{children:i}),b.jsx(Xm,{width:"80%"}),b.jsx(aC,{children:i==null?void 0:i.toUpperCase()})]}),b.jsxs(cC,{children:[b.jsx(Op,{children:"Issued by:"}),b.jsx(lC,{children:"Jacques De Jean"}),b.jsx(Xm,{width:"80%"}),b.jsx(aC,{children:"NEPTUNECHAIN.IO LLC"})]})]}),b.jsxs(Op,{children:["ID: ",WD(e)]})]})},fTe=U.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: linear-gradient(145deg, #dee6de, #ffffff);
  width: 100%;
  width: 600px;
  border-radius: 8px;
  padding: 16px;
  padding-bottom: 25px;
  cursor: pointer;
  border: 5px solid #0d5b84;
  box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);
  -webkit-box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);
  -moz-box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);
  margin-bottom: 25px;
  box-shadow: rgba(0, 0, 0, 0.09) 0px 2px 1px, rgba(0, 0, 0, 0.09) 0px 4px 2px,
    rgba(0, 0, 0, 0.09) 0px 8px 4px, rgba(0, 0, 0, 0.09) 0px 16px 8px,
    rgba(0, 0, 0, 0.09) 0px 32px 16px;
  transition: transform 0.2s ease-in-out;

  &:hover {
    transform: translateY(-4px);
  }

  @media (max-width: 768px) {
    width: 80%;
    max-width: 250px;
  }

  @media (max-width: 480px) {
    width: 90%;
    max-width: 200px;
  }
`,hTe=U.img`
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 50%;

  @media (max-width: 768px) {
    width: 60px;
    height: 60px;
  }
`,pTe=U.h3`
  font-size: 18px;
  margin-top: 12px;
  margin-bottom: 8px;
  text-align: center;
`,mTe=U.p`
  color: #777777;
  margin-bottom: 8px;
  text-align: center;
`,gTe=U.p`
  font-weight: bold;
  text-align: center;
  color: #2b6987;
`,vTe=U.a`
  text-decoration: none;
  color: black;
`,yTe=t=>"NPRC-"+String(t).padStart(7,"0"),xTe=({certificate:t})=>{const{id:e,producer:n,balance:r}=t||{},i=yTe(e);return b.jsx(vTe,{href:`/certificate?id=${e}`,target:"blank",children:b.jsxs(fTe,{children:[b.jsx(hTe,{src:Ju,alt:"NeptuneChain Icon",loading:"lazy"}),b.jsx(pTe,{children:"NEPTUNECHAIN.IO"}),b.jsx(mTe,{children:"Nutrient Pollution Removal Certificate"}),b.jsx("p",{children:n==null?void 0:n.toUpperCase()}),b.jsxs(gTe,{children:[r," NPCs"]}),b.jsxs("h5",{children:["ID: ",i]})]})})},bTe=Object.freeze(Object.defineProperty({__proto__:null,default:xTe},Symbol.toStringTag,{value:"Module"})),fi={background:"#FFFFFF",accent:"#0C5B84",secondaryAccent:"#90CAF9"};Ms`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`;const STe=Ms`
  from {
    height: 0;
    opacity: 0;
  }
  to {
    height: auto;
    opacity: 1;
  }
`,wTe=Ms`
  from {
    height: auto;
    opacity: 1;
  }
  to {
    height: 0;
    opacity: 0;
  }
`,ETe=U(ue.div)`
  display: flex;
  flex-direction: column;
  width: 80%;
  margin: 10px auto;
  min-height: 50px;
  border-radius: 20px;
  cursor: pointer;
  box-shadow: 0px 0.5px 1.25px 0.5px rgba(0, 0, 0, 0.5);
  overflow: hidden;
  overflow-wrap: break-word;
  margin-bottom: 15px;

  &:hover {
    box-shadow: 0px 1px 2.5px 1px rgba(0, 0, 0, 0.75);
  }
`,GZ=U.div`
  display: flex;
  width: 100%;
  height: 50px;
  align-items: center;
  justify-content: space-between;
  text-align: left;
  font-size: 1em;
  padding-left: 10px;
  padding-right: 10px;
  transition: 0.3s ease-in-out;

  @media (max-width: 768px) {
    font-size: 0.62em;
  }
`,_Te=U(GZ)`
background: ${fi.accent};
  border-radius: 0;
  color: white;
  cursor: pointer;
`,TTe=U.span`
  font-weight: bold;
  margin-right: 10px;
`,f6=U.span`
  flex-grow: 1;
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`;U.div`
  overflow: hidden;
  height: ${({expanded:t})=>t?"auto":"0"};
  animation: ${({expanded:t})=>t?STe:wTe} 0.5s
    ease-in-out;
  opacity: ${({expanded:t})=>t?"1":"0"};
`;const CTe=U.button`
  background-color: #222;
  border: none;
  background: ${fi.accent};
  color: #ffffff80;
  border-bottom: 0px solid ${fi.secondaryAccent};
  //box-shadow: 1.25px 1.25px 2.5px #223844, -2.5px -2.5px 5px #223844;
  padding: 5px 0px;
  margin-right: 50px;
  font-size: 14px;
  cursor: pointer;
  transition: 0.5s ease-in-out;

  &:hover {
    transform: scale(1.1);
    border-bottom: 2px solid ${fi.secondaryAccent};
    padding: 5px 10px;
    color: #fff;
    font-size: 1rem;
  }

  @media (max-width: 700px){
    display: none;
  }
};
`,kTe=U(jt)`
  display: none;
  font-size: 14px;
  margin-right: 25px;

  @media (max-width: 700px) {
    display: block;
  }
`;function PTe({event:t}){const[e,n]=v.useState(!1),{args:r}=t,i=ITe(r),s=()=>{const l=`/certificate?id=${i[0].value}`;window.open(l,"_blank")},o=()=>{n(!e)},a={expanded:{height:"auto",opacity:1},collapsed:{height:"0",opacity:0}};return b.jsxs(ETe,{initial:{opacity:0,scale:1},animate:{opacity:1,scale:[1,1.05,1]},transition:{duration:.5,type:"spring",stiffness:200},children:[b.jsxs(_Te,{onClick:o,children:[b.jsxs(f6,{children:[t.event.replace(/([a-z])([A-Z])/g,"$1 $2")," | ",t.timestamp]}),t.event==="CertificateCreated"&&b.jsxs(b.Fragment,{children:[b.jsx(CTe,{onClick:s,children:"View Certificate"}),b.jsx(kTe,{onClick:s,icon:UQ})]})]}),b.jsx(ue.div,{animate:e?"expanded":"collapsed",variants:a,transition:{duration:.5,ease:"easeInOut"},children:i.map((l,c)=>b.jsxs(GZ,{children:[b.jsxs(TTe,{children:[l.key,": "]}),b.jsx(f6,{children:l.key==="CERTIFICATEID"?WD(l.value):l.value})]},c))})]})}function ITe(t){const e=[];for(let n in t)!t.hasOwnProperty(n)||!isNaN(Number(n))||e.push({key:n.toLocaleUpperCase(),value:ATe(t[n])});return e}function ATe(t){return t.toString().toUpperCase()}const LTe=U(ue.div)`
  display: flex;
  flex-direction: column;
  width: 80%;
  margin: 0 auto;
  min-height: 50px;
  border-radius: 20px;
  overflow: hidden;
  overflow-wrap: break-word;
  margin-bottom: 25px;
  padding: 10px;

  @media (max-width: 768px) {
    width: 95%;
  }
`,KZ=U.div`
  display: flex;
  width: 100%;
  height: 50px;
  align-items: center;
  justify-content: space-between;
  padding: 10px;
  transition: 0.3s ease-in-out;

  @media (max-width: 768px) {
    height: auto;
    flex-direction: column;
    padding: 5px;
  }
`,RTe=U(KZ)`
  width: 95%;
  background: ${fi.accent};
  color: white;
  cursor: pointer;
  justify-content: space-between;
  margin: 10px auto;
  border-radius: 20px;
  padding: 10px;

  @media (max-width: 768px) {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }
`;U.span`
  font-weight: bold;
  margin-right: 10px;
  @media (max-width: 768px) {
    margin-right: 0;
  }
`;const OTe=U.span`
  flex-grow: 1;
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  @media (max-width: 768px) {
    white-space: normal;
  }
`,DTe=U(ue.div)`
  border: 2px solid black;
  padding: 5px;
  border-radius: 20px;

  ${({isOpen:t})=>!t&&"display: none;"}

  @media (max-width: 768px) {
    font-size: 0.7rem;
  }
`,qZ=U(KZ)`
  width: 95%;
  margin: auto;
  border-bottom: 1px solid #22222250;
  text-align: center;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  font-weight: bold;
  background: ${fi.accentLight};
  color: ${fi.primaryDark};

  @media (max-width: 768px){
    font-size: 2.5vw;
  }
`,MTe=U(qZ)`
  font-weight: normal;
  background: none;
  color: ${fi.primaryDark};
`,h6=U.span`
  flex-basis: 30%;
`,p6=U.span`
  flex-basis: 30%;
`,m6=U.span`
  flex-basis: 13%;
  text-align: center;
`,g6=U.span`
  flex-basis: 13%;
  text-align: center;
`,v6=U.span`
  flex-basis: 13%;
  text-align: center;
`,$Te=({producersData:t})=>{const[e,n]=v.useState(null),r=s=>{n(e===s?null:s)},i={expanded:{height:"auto",opacity:1,overflow:"visible"},collapsed:{height:"0",opacity:0,overflow:"hidden"}};return b.jsx(LTe,{initial:{opacity:0,scale:1},animate:{opacity:1,scale:[1,1.05,1]},transition:{duration:.5,type:"spring",stiffness:200},children:t==null?void 0:t.map(s=>b.jsxs("div",{children:[b.jsxs(RTe,{onClick:()=>r(s.producer),children:[b.jsx(OTe,{children:s.producer.toUpperCase()}),b.jsx(jt,{icon:e===s.producer?Yve:Wve})]}),b.jsxs(DTe,{animate:e===s.producer?"expanded":"collapsed",variants:i,transition:{duration:.5,ease:"easeInOut"},children:[b.jsxs(qZ,{children:[b.jsx(h6,{children:"TYPE"}),b.jsx(p6,{children:"VERIFIER"}),b.jsx(m6,{children:"Total Issued"}),b.jsx(g6,{children:"Available"}),b.jsx(v6,{children:"Donated"})]}),s.verifiers.map((o,a)=>{var l;return b.jsx("div",{children:(l=o.Supplies)==null?void 0:l.map((c,u)=>b.jsxs(MTe,{children:[b.jsx(h6,{children:c.creditType}),b.jsx(p6,{children:o.verifier.toUpperCase()}),b.jsx(m6,{children:c.issuedSupply}),b.jsx(g6,{children:c.availableSupply}),b.jsx(v6,{children:c.donatedSupply})]},u))},a)})]})]},s.producer))})},JD=Ms`
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,NTe=U.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: 16px;
  box-sizing: border-box;
`,FTe=U.input`
  padding: 8px;
  margin-right: 8px;
  width: 200px;

  @media (max-width: 768px) {
    margin-right: 0;
    margin-bottom: 8px;
    width: 100%;
  }
`,jTe=U.button`
  padding: 8px 16px;
  background-color: #222;
  color: #fff;
  border: none;
  cursor: pointer;

  @media (max-width: 768px) {
    width: 100%;
  }
`,BTe=U.div`
  margin-top: 16px;
  animation: ${JD} 0.3s ease-in-out;
`,UTe=U.div`
  margin-top: 16px;
  color: red;
  animation: ${JD} 0.3s ease-in-out;
`,VTe=U.div`
  margin-top: 16px;
  text-align: center;
  trasition: 0.5s ease-in-out;
  animation: ${JD} 0.3s ease-in-out;

  p {
    color: white;
    background: #01090d;
    box-shadow: 2.5px 2.5px 5px #223844, -2.5px -2.5px 5px #223844;
    border-radius: 5px;
    padding: 7px 10px;
    margin: auto;
    font-size: 14px;
    cursor: pointer;
    transition: 0.3s ease-in-out;
  }
`,zTe=U.div`
  overflow-y: auto;
  max-height: 200px;
`,HTe=U.div`
  padding: 8px;
  margin: auto;
  margin-top: 10px;
  margin-bottom: 8px;
  background-color: #f1f1f1;
  text-align: center;
  justify-content: center;
  border-radius: 10px;
  width: 75%;
  cursor: pointer;

  display: flex;
  transition: 0.3s ease-in-out;

  background-color: #0d5b84;
  color: white;
  background: #0d5b84;
  box-shadow: 2px 2px 2px #052637, -2px -2px 2px #052637;
  &:hover {
    scale: 1.1;
  }
`,WTe=U(ue.div)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 999;
`,GTe=U(NTe)`
  background: #fff;
  border-radius: 10px;
  width: auto;
  height: auto;
  max-width: 80%;
  max-height: 90%;
  overflow-y: auto;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.25);
`,KTe=U(ue.form)`
  display: flex;
  align-items: center;
  margin-bottom: 16px;
  justify-content: center;

  @media (max-width: 768px) {
    flex-direction: column;
  }
`,qTe=({isOpen:t,setIsOpen:e})=>{const[n,r]=v.useState(""),[i,s]=v.useState(""),[o,a]=v.useState(!1),[l,c]=v.useState(""),[u,d]=v.useState(""),[f,h]=v.useState([]),p=async g=>{g.preventDefault(),a(!0),c(""),s(""),d(""),h([]);try{s(n);const y=await vr.getAccountCreditBalance({accountID:n,producer:"",verifier:"",creditType:""});d(y.toString());const x=await vr.getAccountCertificates(n);h(x)}catch{c("Error retrieving data")}finally{a(!1)}},m=g=>{g.target.id==="backdrop"&&e(!1)};return b.jsx(Cr,{mode:"wait",children:t&&b.jsx(WTe,{id:"backdrop",onClick:m,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:b.jsxs(GTe,{initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.3},children:[b.jsxs(KTe,{layout:!0,onSubmit:p,children:[b.jsx(FTe,{type:"text",placeholder:"Enter Account ID",value:n,onChange:g=>r(g.target.value)}),b.jsx(jTe,{type:"submit",children:"Search"})]}),u&&b.jsxs(VTe,{children:[b.jsx("h3",{children:i.toUpperCase()}),b.jsxs("p",{children:["Balance: ",u+" NPCs"]}),b.jsx("h2",{children:"Owned Certificates"}),b.jsx(zTe,{children:f.map((g,y)=>b.jsx(HTe,{onClick:()=>LSe(g),children:WD(g.toNumber())},y))})]}),o&&b.jsx(BTe,{children:"Loading..."}),l&&b.jsx(UTe,{children:l})]})})})};function Qg(t){"@babel/helpers - typeof";return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(t)}function YTe(t,e){if(Qg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QTe(t){var e=YTe(t,"string");return Qg(e)=="symbol"?e:e+""}function J(t,e,n){return(e=QTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YZ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var uC,y6;function XTe(){if(y6)return uC;y6=1;var t=function(n,r,i,s,o,a,l,c){if(!n){var u;if(r===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[i,s,o,a,l,c],f=0;u=new Error(r.replace(/%s/g,function(){return d[f++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};return uC=t,uC}var ZTe=XTe(),kn=YZ(ZTe),Ve=v.createContext(null);function JTe(){kn(!!v.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=v.useContext(Ve);return kn(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function eCe(t,e,n){return Object.keys(t).reduce(function(i,s){return e(i,t[s],s)},n)}function tCe(t,e){Object.keys(t).forEach(n=>e(t[n],n))}function nCe(t,e,n,r){var i={},s=(o,a)=>{var l=n[a];l!==e[a]&&(i[a]=l,o(r,l))};return tCe(t,s),i}function rCe(t,e,n){var r=eCe(n,function(s,o,a){return typeof t[a]=="function"&&s.push(google.maps.event.addListener(e,o,t[a])),s},[]);return r}function iCe(t){google.maps.event.removeListener(t)}function Ke(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(iCe)}function Ge(t){var{updaterMap:e,eventMap:n,prevProps:r,nextProps:i,instance:s}=t,o=rCe(i,s,n);return nCe(e,r,i,s),o}var x6={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},b6={extraMapTypes(t,e){e.forEach(function(r,i){t.mapTypes.set(String(i),r)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function sCe(t){var{children:e,options:n,id:r,mapContainerStyle:i,mapContainerClassName:s,center:o,onClick:a,onDblClick:l,onDrag:c,onDragEnd:u,onDragStart:d,onMouseMove:f,onMouseOut:h,onMouseOver:p,onMouseDown:m,onMouseUp:g,onRightClick:y,onCenterChanged:x,onLoad:S,onUnmount:w}=t,[E,T]=v.useState(null),_=v.useRef(null),[I,A]=v.useState(null),[L,j]=v.useState(null),[D,O]=v.useState(null),[$,R]=v.useState(null),[C,P]=v.useState(null),[k,M]=v.useState(null),[B,N]=v.useState(null),[V,H]=v.useState(null),[W,z]=v.useState(null),[G,K]=v.useState(null),[Q,ne]=v.useState(null),[Z,re]=v.useState(null);return v.useEffect(()=>{n&&E!==null&&E.setOptions(n)},[E,n]),v.useEffect(()=>{E!==null&&typeof o<"u"&&E.setCenter(o)},[E,o]),v.useEffect(()=>{E&&l&&(L!==null&&google.maps.event.removeListener(L),j(google.maps.event.addListener(E,"dblclick",l)))},[l]),v.useEffect(()=>{E&&u&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(E,"dragend",u)))},[u]),v.useEffect(()=>{E&&d&&($!==null&&google.maps.event.removeListener($),R(google.maps.event.addListener(E,"dragstart",d)))},[d]),v.useEffect(()=>{E&&m&&(C!==null&&google.maps.event.removeListener(C),P(google.maps.event.addListener(E,"mousedown",m)))},[m]),v.useEffect(()=>{E&&f&&(k!==null&&google.maps.event.removeListener(k),M(google.maps.event.addListener(E,"mousemove",f)))},[f]),v.useEffect(()=>{E&&h&&(B!==null&&google.maps.event.removeListener(B),N(google.maps.event.addListener(E,"mouseout",h)))},[h]),v.useEffect(()=>{E&&p&&(V!==null&&google.maps.event.removeListener(V),H(google.maps.event.addListener(E,"mouseover",p)))},[p]),v.useEffect(()=>{E&&g&&(W!==null&&google.maps.event.removeListener(W),z(google.maps.event.addListener(E,"mouseup",g)))},[g]),v.useEffect(()=>{E&&y&&(G!==null&&google.maps.event.removeListener(G),K(google.maps.event.addListener(E,"rightclick",y)))},[y]),v.useEffect(()=>{E&&a&&(Q!==null&&google.maps.event.removeListener(Q),ne(google.maps.event.addListener(E,"click",a)))},[a]),v.useEffect(()=>{E&&c&&(Z!==null&&google.maps.event.removeListener(Z),re(google.maps.event.addListener(E,"drag",c)))},[c]),v.useEffect(()=>{E&&x&&(I!==null&&google.maps.event.removeListener(I),A(google.maps.event.addListener(E,"center_changed",x)))},[a]),v.useEffect(()=>{var de=_.current===null?null:new google.maps.Map(_.current,n);return T(de),de!==null&&S&&S(de),()=>{de!==null&&w&&w(de)}},[]),b.jsx("div",{id:r,ref:_,style:i,className:s,children:b.jsx(Ve.Provider,{value:E,children:E!==null?e:null})})}v.memo(sCe);class oCe extends v.PureComponent{constructor(){super(...arguments),J(this,"state",{map:null}),J(this,"registeredEvents",[]),J(this,"mapRef",null),J(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),J(this,"panTo",e=>{var n=this.getInstance();n&&n.panTo(e)}),J(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),J(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=Ge({updaterMap:b6,eventMap:x6,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:b6,eventMap:x6,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),Ke(this.registeredEvents))}render(){return b.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:b.jsx(Ve.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function S6(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function QZ(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){S6(s,r,i,o,a,"next",l)}function a(l){S6(s,r,i,o,a,"throw",l)}o(void 0)})}}function XZ(t){var{googleMapsApiKey:e,googleMapsClientId:n,version:r="weekly",language:i,region:s,libraries:o,channel:a,mapIds:l,authReferrerPolicy:c,apiUrl:u="https://maps.googleapis.com"}=t,d=[];return kn(e&&n||!(e&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?d.push("key=".concat(e)):n&&d.push("client=".concat(n)),r&&d.push("v=".concat(r)),i&&d.push("language=".concat(i)),s&&d.push("region=".concat(s)),o&&o.length&&d.push("libraries=".concat(o.sort().join(","))),a&&d.push("channel=".concat(a)),l&&l.length&&d.push("map_ids=".concat(l.join(","))),c&&d.push("auth_referrer_policy=".concat(c)),d.push("loading=async"),d.push("callback=initMap"),"".concat(u,"/maps/api/js?").concat(d.join("&"))}var ru=typeof document<"u";function ZZ(t){var{url:e,id:n,nonce:r}=t;return ru?new Promise(function(s,o){var a=document.getElementById(n),l=window;if(a){var c=a.getAttribute("data-state");if(a.src===e&&c!=="error"){if(c==="ready")return s(n);var u=l.initMap,d=a.onerror;l.initMap=function(){u&&u(),s(n)},a.onerror=function(h){d&&d(h),o(h)};return}else a.remove()}var f=document.createElement("script");f.type="text/javascript",f.src=e,f.id=n,f.async=!0,f.nonce=r||"",f.onerror=function(p){f.setAttribute("data-state","error"),o(p)},l.initMap=function(){f.setAttribute("data-state","ready"),s(n)},document.head.appendChild(f)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function w6(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function JZ(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,s){return w6(i)||Reflect.apply(e,t,[i,s]),i};var n=t.appendChild.bind(t);t.appendChild=function(i){return w6(i)||Reflect.apply(n,t,[i]),i}}}var Dp=!1;function eJ(){return b.jsx("div",{children:"Loading..."})}var uA={id:"script-loader",version:"weekly"};class tJ extends v.PureComponent{constructor(){super(...arguments),J(this,"check",null),J(this,"state",{loaded:!1}),J(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),J(this,"isCleaningUp",QZ(function*(){function e(n){if(!Dp)n();else if(ru)var r=window.setInterval(function(){Dp||(window.clearInterval(r),n())},1)}return new Promise(e)})),J(this,"cleanup",()=>{Dp=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})}),J(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&JZ(),kn(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:XZ(this.props)};ZZ(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(n=>{this.props.onError&&this.props.onError(n),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),J(this,"getRef",e=>{this.check=e})}componentDidMount(){if(ru){if(window.google&&window.google.maps&&!Dp){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(n){console.error("Error at injecting script after cleaning up: ",n)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ru&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(ru){this.cleanup();var e=()=>{this.check||(delete window.google,Dp=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return b.jsxs(b.Fragment,{children:[b.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||b.jsx(eJ,{})]})}}J(tJ,"defaultProps",uA);function aCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function e3(t,e){if(t==null)return{};var n,r,i=aCe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var E6;function lCe(t){var{id:e=uA.id,version:n=uA.version,nonce:r,googleMapsApiKey:i,googleMapsClientId:s,language:o,region:a,libraries:l,preventGoogleFontsLoading:c,channel:u,mapIds:d,authReferrerPolicy:f,apiUrl:h="https://maps.googleapis.com"}=t,p=v.useRef(!1),[m,g]=v.useState(!1),[y,x]=v.useState(void 0);v.useEffect(function(){return p.current=!0,()=>{p.current=!1}},[]),v.useEffect(function(){ru&&c&&JZ()},[c]),v.useEffect(function(){m&&kn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[m]);var S=XZ({version:n,googleMapsApiKey:i,googleMapsClientId:s,language:o,region:a,libraries:l,channel:u,mapIds:d,authReferrerPolicy:f,apiUrl:h});v.useEffect(function(){if(!ru)return;function T(){p.current&&(g(!0),E6=S)}if(window.google&&window.google.maps&&E6===S){T();return}ZZ({id:e,url:S,nonce:r}).then(T).catch(function(I){p.current&&x(I),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(s||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(I)})},[e,S,r]);var w=v.useRef(void 0);return v.useEffect(function(){w.current&&l!==w.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),w.current=l},[l]),{isLoaded:m,loadError:y,url:S}}var cCe=["loadingElement","onLoad","onError","onUnmount","children"],uCe=b.jsx(eJ,{});function dCe(t){var{loadingElement:e,onLoad:n,onError:r,onUnmount:i,children:s}=t,o=e3(t,cCe),{isLoaded:a,loadError:l}=lCe(o);return v.useEffect(function(){a&&typeof n=="function"&&n()},[a,n]),v.useEffect(function(){l&&typeof r=="function"&&r(l)},[l,r]),v.useEffect(function(){return()=>{i&&i()}},[i]),a?s:e||uCe}v.memo(dCe);var _6;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(_6||(_6={}));function T6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T6(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var C6={},k6={options(t,e){t.setOptions(e)}};function fCe(t){var{options:e,onLoad:n,onUnmount:r}=t,i=v.useContext(Ve),[s,o]=v.useState(null);return v.useEffect(()=>{s!==null&&s.setMap(i)},[i]),v.useEffect(()=>{e&&s!==null&&s.setOptions(e)},[s,e]),v.useEffect(()=>{var a=new google.maps.TrafficLayer(uS(uS({},e),{},{map:i}));return o(a),n&&n(a),()=>{s!==null&&(r&&r(s),s.setMap(null))}},[]),null}v.memo(fCe);class hCe extends v.PureComponent{constructor(){super(...arguments),J(this,"state",{trafficLayer:null}),J(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),J(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(uS(uS({},this.props.options),{},{map:this.context}));this.registeredEvents=Ge({updaterMap:k6,eventMap:C6,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:k6,eventMap:C6,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Ke(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}J(hCe,"contextType",Ve);function pCe(t){var{onLoad:e,onUnmount:n}=t,r=v.useContext(Ve),[i,s]=v.useState(null);return v.useEffect(()=>{i!==null&&i.setMap(r)},[r]),v.useEffect(()=>{var o=new google.maps.BicyclingLayer;return s(o),o.setMap(r),e&&e(o),()=>{o!==null&&(n&&n(o),o.setMap(null))}},[]),null}v.memo(pCe);class mCe extends v.PureComponent{constructor(){super(...arguments),J(this,"state",{bicyclingLayer:null}),J(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}J(mCe,"contextType",Ve);function gCe(t){var{onLoad:e,onUnmount:n}=t,r=v.useContext(Ve),[i,s]=v.useState(null);return v.useEffect(()=>{i!==null&&i.setMap(r)},[r]),v.useEffect(()=>{var o=new google.maps.TransitLayer;return s(o),o.setMap(r),e&&e(o),()=>{i!==null&&(n&&n(i),i.setMap(null))}},[]),null}v.memo(gCe);class vCe extends v.PureComponent{constructor(){super(...arguments),J(this,"state",{transitLayer:null}),J(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}J(vCe,"contextType",Ve);function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var I6={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},A6={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function yCe(t){var{options:e,drawingMode:n,onCircleComplete:r,onMarkerComplete:i,onOverlayComplete:s,onPolygonComplete:o,onPolylineComplete:a,onRectangleComplete:l,onLoad:c,onUnmount:u}=t,d=v.useContext(Ve),[f,h]=v.useState(null),[p,m]=v.useState(null),[g,y]=v.useState(null),[x,S]=v.useState(null),[w,E]=v.useState(null),[T,_]=v.useState(null),[I,A]=v.useState(null);return v.useEffect(()=>{f!==null&&f.setMap(d)},[d]),v.useEffect(()=>{e&&f!==null&&f.setOptions(e)},[f,e]),v.useEffect(()=>{f!==null&&f.setDrawingMode(n??null)},[f,n]),v.useEffect(()=>{f&&r&&(p!==null&&google.maps.event.removeListener(p),m(google.maps.event.addListener(f,"circlecomplete",r)))},[f,r]),v.useEffect(()=>{f&&i&&(g!==null&&google.maps.event.removeListener(g),y(google.maps.event.addListener(f,"markercomplete",i)))},[f,i]),v.useEffect(()=>{f&&s&&(x!==null&&google.maps.event.removeListener(x),S(google.maps.event.addListener(f,"overlaycomplete",s)))},[f,s]),v.useEffect(()=>{f&&o&&(w!==null&&google.maps.event.removeListener(w),E(google.maps.event.addListener(f,"polygoncomplete",o)))},[f,o]),v.useEffect(()=>{f&&a&&(T!==null&&google.maps.event.removeListener(T),_(google.maps.event.addListener(f,"polylinecomplete",a)))},[f,a]),v.useEffect(()=>{f&&l&&(I!==null&&google.maps.event.removeListener(I),A(google.maps.event.addListener(f,"rectanglecomplete",l)))},[f,l]),v.useEffect(()=>{kn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var L=new google.maps.drawing.DrawingManager(dS(dS({},e),{},{map:d}));return n&&L.setDrawingMode(n),r&&m(google.maps.event.addListener(L,"circlecomplete",r)),i&&y(google.maps.event.addListener(L,"markercomplete",i)),s&&S(google.maps.event.addListener(L,"overlaycomplete",s)),o&&E(google.maps.event.addListener(L,"polygoncomplete",o)),a&&_(google.maps.event.addListener(L,"polylinecomplete",a)),l&&A(google.maps.event.addListener(L,"rectanglecomplete",l)),h(L),c&&c(L),()=>{f!==null&&(p&&google.maps.event.removeListener(p),g&&google.maps.event.removeListener(g),x&&google.maps.event.removeListener(x),w&&google.maps.event.removeListener(w),T&&google.maps.event.removeListener(T),I&&google.maps.event.removeListener(I),u&&u(f),f.setMap(null))}},[]),null}v.memo(yCe);class xCe extends v.PureComponent{constructor(e){super(e),J(this,"registeredEvents",[]),J(this,"state",{drawingManager:null}),J(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),kn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(dS(dS({},this.props.options),{},{map:this.context}));this.registeredEvents=Ge({updaterMap:A6,eventMap:I6,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:A6,eventMap:I6,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Ke(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}J(xCe,"contextType",Ve);function L6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L6(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var R6={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},O6={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},fS={};function bCe(t){var{position:e,options:n,clusterer:r,noClustererRedraw:i,children:s,draggable:o,visible:a,animation:l,clickable:c,cursor:u,icon:d,label:f,opacity:h,shape:p,title:m,zIndex:g,onClick:y,onDblClick:x,onDrag:S,onDragEnd:w,onDragStart:E,onMouseOut:T,onMouseOver:_,onMouseUp:I,onMouseDown:A,onRightClick:L,onClickableChanged:j,onCursorChanged:D,onAnimationChanged:O,onDraggableChanged:$,onFlatChanged:R,onIconChanged:C,onPositionChanged:P,onShapeChanged:k,onTitleChanged:M,onVisibleChanged:B,onZindexChanged:N,onLoad:V,onUnmount:H}=t,W=v.useContext(Ve),[z,G]=v.useState(null),[K,Q]=v.useState(null),[ne,Z]=v.useState(null),[re,de]=v.useState(null),[Ee,ke]=v.useState(null),[_e,Te]=v.useState(null),[Oe,Qe]=v.useState(null),[Ct,ot]=v.useState(null),[Sn,Rr]=v.useState(null),[Ji,se]=v.useState(null),[pe,it]=v.useState(null),[bt,Pn]=v.useState(null),[Zr,Ei]=v.useState(null),[Or,fd]=v.useState(null),[Fa,bc]=v.useState(null),[ja,hd]=v.useState(null),[Ba,pd]=v.useState(null),[md,w5]=v.useState(null),[E5,_5]=v.useState(null),[Kv,T5]=v.useState(null),[qv,C5]=v.useState(null),[Yv,k5]=v.useState(null);v.useEffect(()=>{z!==null&&z.setMap(W)},[W]),v.useEffect(()=>{typeof n<"u"&&z!==null&&z.setOptions(n)},[z,n]),v.useEffect(()=>{typeof o<"u"&&z!==null&&z.setDraggable(o)},[z,o]),v.useEffect(()=>{e&&z!==null&&z.setPosition(e)},[z,e]),v.useEffect(()=>{typeof a<"u"&&z!==null&&z.setVisible(a)},[z,a]),v.useEffect(()=>{z==null||z.setAnimation(l)},[z,l]),v.useEffect(()=>{z&&c!==void 0&&z.setClickable(c)},[z,c]),v.useEffect(()=>{z&&u!==void 0&&z.setCursor(u)},[z,u]),v.useEffect(()=>{z&&d!==void 0&&z.setIcon(d)},[z,d]),v.useEffect(()=>{z&&f!==void 0&&z.setLabel(f)},[z,f]),v.useEffect(()=>{z&&h!==void 0&&z.setOpacity(h)},[z,h]),v.useEffect(()=>{z&&p!==void 0&&z.setShape(p)},[z,p]),v.useEffect(()=>{z&&m!==void 0&&z.setTitle(m)},[z,m]),v.useEffect(()=>{z&&g!==void 0&&z.setZIndex(g)},[z,g]),v.useEffect(()=>{z&&x&&(K!==null&&google.maps.event.removeListener(K),Q(google.maps.event.addListener(z,"dblclick",x)))},[x]),v.useEffect(()=>{z&&w&&(ne!==null&&google.maps.event.removeListener(ne),Z(google.maps.event.addListener(z,"dragend",w)))},[w]),v.useEffect(()=>{z&&E&&(re!==null&&google.maps.event.removeListener(re),de(google.maps.event.addListener(z,"dragstart",E)))},[E]),v.useEffect(()=>{z&&A&&(Ee!==null&&google.maps.event.removeListener(Ee),ke(google.maps.event.addListener(z,"mousedown",A)))},[A]),v.useEffect(()=>{z&&T&&(_e!==null&&google.maps.event.removeListener(_e),Te(google.maps.event.addListener(z,"mouseout",T)))},[T]),v.useEffect(()=>{z&&_&&(Oe!==null&&google.maps.event.removeListener(Oe),Qe(google.maps.event.addListener(z,"mouseover",_)))},[_]),v.useEffect(()=>{z&&I&&(Ct!==null&&google.maps.event.removeListener(Ct),ot(google.maps.event.addListener(z,"mouseup",I)))},[I]),v.useEffect(()=>{z&&L&&(Sn!==null&&google.maps.event.removeListener(Sn),Rr(google.maps.event.addListener(z,"rightclick",L)))},[L]),v.useEffect(()=>{z&&y&&(Ji!==null&&google.maps.event.removeListener(Ji),se(google.maps.event.addListener(z,"click",y)))},[y]),v.useEffect(()=>{z&&S&&(pe!==null&&google.maps.event.removeListener(pe),it(google.maps.event.addListener(z,"drag",S)))},[S]),v.useEffect(()=>{z&&j&&(bt!==null&&google.maps.event.removeListener(bt),Pn(google.maps.event.addListener(z,"clickable_changed",j)))},[j]),v.useEffect(()=>{z&&D&&(Zr!==null&&google.maps.event.removeListener(Zr),Ei(google.maps.event.addListener(z,"cursor_changed",D)))},[D]),v.useEffect(()=>{z&&O&&(Or!==null&&google.maps.event.removeListener(Or),fd(google.maps.event.addListener(z,"animation_changed",O)))},[O]),v.useEffect(()=>{z&&$&&(Fa!==null&&google.maps.event.removeListener(Fa),bc(google.maps.event.addListener(z,"draggable_changed",$)))},[$]),v.useEffect(()=>{z&&R&&(ja!==null&&google.maps.event.removeListener(ja),hd(google.maps.event.addListener(z,"flat_changed",R)))},[R]),v.useEffect(()=>{z&&C&&(Ba!==null&&google.maps.event.removeListener(Ba),pd(google.maps.event.addListener(z,"icon_changed",C)))},[C]),v.useEffect(()=>{z&&P&&(md!==null&&google.maps.event.removeListener(md),w5(google.maps.event.addListener(z,"position_changed",P)))},[P]),v.useEffect(()=>{z&&k&&(E5!==null&&google.maps.event.removeListener(E5),_5(google.maps.event.addListener(z,"shape_changed",k)))},[k]),v.useEffect(()=>{z&&M&&(Kv!==null&&google.maps.event.removeListener(Kv),T5(google.maps.event.addListener(z,"title_changed",M)))},[M]),v.useEffect(()=>{z&&B&&(qv!==null&&google.maps.event.removeListener(qv),C5(google.maps.event.addListener(z,"visible_changed",B)))},[B]),v.useEffect(()=>{z&&N&&(Yv!==null&&google.maps.event.removeListener(Yv),k5(google.maps.event.addListener(z,"zindex_changed",N)))},[N]),v.useEffect(()=>{var Sp=Mf(Mf(Mf({},n||fS),r?fS:{map:W}),{},{position:e}),Fe=new google.maps.Marker(Sp);return r?r.addMarker(Fe,!!i):Fe.setMap(W),e&&Fe.setPosition(e),typeof a<"u"&&Fe.setVisible(a),typeof o<"u"&&Fe.setDraggable(o),typeof c<"u"&&Fe.setClickable(c),typeof u=="string"&&Fe.setCursor(u),d&&Fe.setIcon(d),typeof f<"u"&&Fe.setLabel(f),typeof h<"u"&&Fe.setOpacity(h),p&&Fe.setShape(p),typeof m=="string"&&Fe.setTitle(m),typeof g=="number"&&Fe.setZIndex(g),x&&Q(google.maps.event.addListener(Fe,"dblclick",x)),w&&Z(google.maps.event.addListener(Fe,"dragend",w)),E&&de(google.maps.event.addListener(Fe,"dragstart",E)),A&&ke(google.maps.event.addListener(Fe,"mousedown",A)),T&&Te(google.maps.event.addListener(Fe,"mouseout",T)),_&&Qe(google.maps.event.addListener(Fe,"mouseover",_)),I&&ot(google.maps.event.addListener(Fe,"mouseup",I)),L&&Rr(google.maps.event.addListener(Fe,"rightclick",L)),y&&se(google.maps.event.addListener(Fe,"click",y)),S&&it(google.maps.event.addListener(Fe,"drag",S)),j&&Pn(google.maps.event.addListener(Fe,"clickable_changed",j)),D&&Ei(google.maps.event.addListener(Fe,"cursor_changed",D)),O&&fd(google.maps.event.addListener(Fe,"animation_changed",O)),$&&bc(google.maps.event.addListener(Fe,"draggable_changed",$)),R&&hd(google.maps.event.addListener(Fe,"flat_changed",R)),C&&pd(google.maps.event.addListener(Fe,"icon_changed",C)),P&&w5(google.maps.event.addListener(Fe,"position_changed",P)),k&&_5(google.maps.event.addListener(Fe,"shape_changed",k)),M&&T5(google.maps.event.addListener(Fe,"title_changed",M)),B&&C5(google.maps.event.addListener(Fe,"visible_changed",B)),N&&k5(google.maps.event.addListener(Fe,"zindex_changed",N)),G(Fe),V&&V(Fe),()=>{K!==null&&google.maps.event.removeListener(K),ne!==null&&google.maps.event.removeListener(ne),re!==null&&google.maps.event.removeListener(re),Ee!==null&&google.maps.event.removeListener(Ee),_e!==null&&google.maps.event.removeListener(_e),Oe!==null&&google.maps.event.removeListener(Oe),Ct!==null&&google.maps.event.removeListener(Ct),Sn!==null&&google.maps.event.removeListener(Sn),Ji!==null&&google.maps.event.removeListener(Ji),bt!==null&&google.maps.event.removeListener(bt),Zr!==null&&google.maps.event.removeListener(Zr),Or!==null&&google.maps.event.removeListener(Or),Fa!==null&&google.maps.event.removeListener(Fa),ja!==null&&google.maps.event.removeListener(ja),Ba!==null&&google.maps.event.removeListener(Ba),md!==null&&google.maps.event.removeListener(md),Kv!==null&&google.maps.event.removeListener(Kv),qv!==null&&google.maps.event.removeListener(qv),Yv!==null&&google.maps.event.removeListener(Yv),H&&H(Fe),r?r.removeMarker(Fe,!!i):Fe&&Fe.setMap(null)}},[]);var Yue=v.useMemo(()=>s?v.Children.map(s,Sp=>{if(!v.isValidElement(Sp))return Sp;var Fe=Sp;return v.cloneElement(Fe,{anchor:z})}):null,[s,z]);return b.jsx(b.Fragment,{children:Yue})||null}v.memo(bCe);class SCe extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[])}componentDidMount(){var e=this;return QZ(function*(){var n=Mf(Mf(Mf({},e.props.options||fS),e.props.clusterer?fS:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(n),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Ge({updaterMap:O6,eventMap:R6,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:O6,eventMap:R6,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Ke(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?v.Children.map(this.props.children,n=>{if(!v.isValidElement(n))return n;var r=n;return v.cloneElement(r,{anchor:this.marker})}):null;return e||null}}J(SCe,"contextType",Ve);var wCe=function(){function t(e,n){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var n=this.cluster.getClusterer();if(google.maps.event.trigger(n,"click",this.cluster),google.maps.event.trigger(n,"clusterclick",this.cluster),n.getZoomOnClick()){var r=n.getMaxZoom(),i=this.cluster.getBounds(),s=n.getMap();s!==null&&"fitBounds"in s&&s.fitBounds(i),this.timeOut=window.setTimeout(function(){var o=n.getMap();if(o!==null){"fitBounds"in o&&o.fitBounds(i);var a=o.getZoom()||0;r!==null&&a>r&&o.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var n=this.getMap();n!==null&&(this.boundsChangedListener=google.maps.event.addListener(n,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,n,r,i,s,o;if(this.div&&this.center){var a=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,l=this.backgroundPosition.split(" "),c=parseInt(((e=l[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),u=parseInt(((n=l[1])===null||n===void 0?void 0:n.replace(/^\s+|\s+$/g,""))||"0",10),d=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(d!==null?"".concat(d.y,"px"):"0","; left: ").concat(d!==null?"".concat(d.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var f=document.createElement("img");f.alt=a,f.src=this.url,f.width=this.width,f.height=this.height,f.setAttribute("style","position: absolute; top: ".concat(u,"px; left: ").concat(c,"px")),this.cluster.getClusterer().enableRetinaIcons||(f.style.clip="rect(-".concat(u,"px, -").concat(c+this.width,"px, -").concat(u+this.height,", -").concat(c,")"));var h=document.createElement("div");h.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((r=this.sums)===null||r===void 0)&&r.text&&(h.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((s=this.sums)===null||s===void 0)&&s.html&&(h.innerHTML="".concat((o=this.sums)===null||o===void 0?void 0:o.html)),this.div.innerHTML="",this.div.appendChild(f),this.div.appendChild(h),this.div.title=a,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var n=this.cluster.getClusterer().getStyles(),r=n[Math.min(n.length-1,Math.max(0,e.index-1))];r&&(this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var n=this.getProjection().fromLatLngToDivPixel(e);return n!==null&&(n.x-=this.anchorIcon[1],n.y-=this.anchorIcon[0]),n},t}(),ECe=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new wCe(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),n=this.getMarkers(),r=0,i=n;r<i.length;r++){var s=i[r],o=s.getPosition();o&&e.extend(o)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+r.lat())/i,(this.center.lng()*(i-1)+r.lng())/i),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var s=this.markers.length,o=this.markerClusterer.getMaxZoom(),a=(n=this.map)===null||n===void 0?void 0:n.getZoom();if(o!==null&&typeof a<"u"&&a>o)e.getMap()!==this.map&&e.setMap(this.map);else if(s<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(s===this.minClusterSize)for(var l=0,c=this.markers;l<c.length;l++){var u=c[l];u.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var n=e.getPosition();if(n)return this.bounds.contains(n)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,n=this.markers.length,r=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof i<"u"&&i>r){this.clusterIcon.hide();return}if(n<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var n=0;n<this.markers.length;n++)if(e===this.markers[n])return!0;return!1},t}();function _Ce(t,e){var n=t.length,r=n.toString().length,i=Math.min(r,e);return{text:n.toString(),index:i,title:""}}var TCe=2e3,CCe=500,kCe="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",PCe="png",ICe=[53,56,66,78,90],ACe="cluster",nJ=function(){function t(e,n,r){n===void 0&&(n=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||kCe,this.imageExtension=r.imageExtension||PCe,this.imageSizes=r.imageSizes||ICe,this.calculator=r.calculator||_Ce,this.batchSize=r.batchSize||TCe,this.batchSizeIE=r.batchSizeIE||CCe,this.clusterClass=r.clusterClass||ACe,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,n;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((n=this.getMap())===null||n===void 0?void 0:n.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,n=this.markers;e<n.length;e++){var r=n[e];r.getMap()!==this.activeMap&&r.setMap(this.activeMap)}for(var i=0,s=this.clusters;i<s.length;i++){var o=s[i];o.remove()}this.clusters=[];for(var a=0,l=this.listeners;a<l.length;a++){var c=l[a];google.maps.event.removeListener(c)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),n=new google.maps.LatLngBounds,r=0,i=e;r<i.length;r++){var s=i[r],o=s.getPosition();o&&n.extend(o)}var a=this.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(n)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,n){this.pushMarkerTo(e),n||this.redraw()},t.prototype.addMarkers=function(e,n){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];i&&this.pushMarkerTo(i)}n||this.redraw()},t.prototype.pushMarkerTo=function(e){var n=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){n.ready&&(e.isAdded=!1,n.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var n=-1;if(this.markers.indexOf)n=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){n=r;break}return n===-1?!1:(e.setMap(null),this.markers.splice(n,1),!0)},t.prototype.removeMarker=function(e,n){var r=this.removeMarker_(e);return!n&&r&&this.repaint(),r},t.prototype.removeMarkers=function(e,n){for(var r=!1,i=0,s=e;i<s.length;i++){var o=s[i];r=r||this.removeMarker_(o)}return!n&&r&&this.repaint(),r},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0,i=e;r<i.length;r++){var s=i[r];s.remove()}},0)},t.prototype.getExtendedBounds=function(e){var n=this.getProjection(),r=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var i=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),r!==null){var s=n.fromDivPixelToLatLng(r);s!==null&&e.extend(s)}if(i!==null){var o=n.fromDivPixelToLatLng(i);o!==null&&e.extend(o)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var n=0,r=this.clusters;n<r.length;n++){var i=r[n];i.remove()}this.clusters=[];for(var s=0,o=this.markers;s<o.length;s++){var a=o[s];a.isAdded=!1,e&&a.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,n){var r=6371,i=(n.lat()-e.lat())*Math.PI/180,s=(n.lng()-e.lng())*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(n.lat()*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return r*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},t.prototype.isMarkerInBounds=function(e,n){var r=e.getPosition();return r?n.contains(r):!1},t.prototype.addToClosestCluster=function(e){for(var n,r=4e4,i=null,s=0,o=this.clusters;s<o.length;s++){var a=o[s];n=a;var l=n.getCenter(),c=e.getPosition();if(l&&c){var u=this.distanceBetweenPoints(l,c);u<r&&(r=u,i=n)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(n=new ECe(this),n.addMarker(e),this.clusters.push(n))},t.prototype.createClusters=function(e){var n=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),i=r!==null&&("getBounds"in r)?r.getBounds():null,s=(r==null?void 0:r.getZoom())||0,o=s>3?new google.maps.LatLngBounds(i==null?void 0:i.getSouthWest(),i==null?void 0:i.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),a=this.getExtendedBounds(o),l=Math.min(e+this.batchSize,this.markers.length),c=e;c<l;c++){var u=this.markers[c];u&&!u.isAdded&&this.isMarkerInBounds(u,a)&&(!this.ignoreHidden||this.ignoreHidden&&u.getVisible())&&this.addToClosestCluster(u)}if(l<this.markers.length)this.timerRefStatic=window.setTimeout(function(){n.createClusters(l)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var d=0,f=this.clusters;d<f.length;d++){var h=f[d];h.updateIcon()}}}},t.prototype.extend=function(e,n){return(function(i){for(var s in i.prototype){var o=s;this.prototype[o]=i.prototype[o]}return this}).apply(e,[n])},t}();function D6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D6(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ai={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},rt={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},RCe={};function OCe(t){var{children:e,options:n,averageCenter:r,batchSizeIE:i,calculator:s,clusterClass:o,enableRetinaIcons:a,gridSize:l,ignoreHidden:c,imageExtension:u,imagePath:d,imageSizes:f,maxZoom:h,minimumClusterSize:p,styles:m,title:g,zoomOnClick:y,onClick:x,onClusteringBegin:S,onClusteringEnd:w,onMouseOver:E,onMouseOut:T,onLoad:_,onUnmount:I}=t,[A,L]=v.useState(null),j=v.useContext(Ve),[D,O]=v.useState(null),[$,R]=v.useState(null),[C,P]=v.useState(null),[k,M]=v.useState(null),[B,N]=v.useState(null);return v.useEffect(()=>{A&&T&&(k!==null&&google.maps.event.removeListener(k),M(google.maps.event.addListener(A,Ai.onMouseOut,T)))},[T]),v.useEffect(()=>{A&&E&&(B!==null&&google.maps.event.removeListener(B),N(google.maps.event.addListener(A,Ai.onMouseOver,E)))},[E]),v.useEffect(()=>{A&&x&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(A,Ai.onClick,x)))},[x]),v.useEffect(()=>{A&&S&&($!==null&&google.maps.event.removeListener($),R(google.maps.event.addListener(A,Ai.onClusteringBegin,S)))},[S]),v.useEffect(()=>{A&&w&&(C!==null&&google.maps.event.removeListener(C),R(google.maps.event.addListener(A,Ai.onClusteringEnd,w)))},[w]),v.useEffect(()=>{typeof r<"u"&&A!==null&&rt.averageCenter(A,r)},[A,r]),v.useEffect(()=>{typeof i<"u"&&A!==null&&rt.batchSizeIE(A,i)},[A,i]),v.useEffect(()=>{typeof s<"u"&&A!==null&&rt.calculator(A,s)},[A,s]),v.useEffect(()=>{typeof o<"u"&&A!==null&&rt.clusterClass(A,o)},[A,o]),v.useEffect(()=>{typeof a<"u"&&A!==null&&rt.enableRetinaIcons(A,a)},[A,a]),v.useEffect(()=>{typeof l<"u"&&A!==null&&rt.gridSize(A,l)},[A,l]),v.useEffect(()=>{typeof c<"u"&&A!==null&&rt.ignoreHidden(A,c)},[A,c]),v.useEffect(()=>{typeof u<"u"&&A!==null&&rt.imageExtension(A,u)},[A,u]),v.useEffect(()=>{typeof d<"u"&&A!==null&&rt.imagePath(A,d)},[A,d]),v.useEffect(()=>{typeof f<"u"&&A!==null&&rt.imageSizes(A,f)},[A,f]),v.useEffect(()=>{typeof h<"u"&&A!==null&&rt.maxZoom(A,h)},[A,h]),v.useEffect(()=>{typeof p<"u"&&A!==null&&rt.minimumClusterSize(A,p)},[A,p]),v.useEffect(()=>{typeof m<"u"&&A!==null&&rt.styles(A,m)},[A,m]),v.useEffect(()=>{typeof g<"u"&&A!==null&&rt.title(A,g)},[A,g]),v.useEffect(()=>{typeof y<"u"&&A!==null&&rt.zoomOnClick(A,y)},[A,y]),v.useEffect(()=>{if(j){var V=LCe({},n||RCe),H=new nJ(j,[],V);return r&&rt.averageCenter(H,r),i&&rt.batchSizeIE(H,i),s&&rt.calculator(H,s),o&&rt.clusterClass(H,o),a&&rt.enableRetinaIcons(H,a),l&&rt.gridSize(H,l),c&&rt.ignoreHidden(H,c),u&&rt.imageExtension(H,u),d&&rt.imagePath(H,d),f&&rt.imageSizes(H,f),h&&rt.maxZoom(H,h),p&&rt.minimumClusterSize(H,p),m&&rt.styles(H,m),g&&rt.title(H,g),y&&rt.zoomOnClick(H,y),T&&M(google.maps.event.addListener(H,Ai.onMouseOut,T)),E&&N(google.maps.event.addListener(H,Ai.onMouseOver,E)),x&&O(google.maps.event.addListener(H,Ai.onClick,x)),S&&R(google.maps.event.addListener(H,Ai.onClusteringBegin,S)),w&&P(google.maps.event.addListener(H,Ai.onClusteringEnd,w)),L(H),_&&_(H),()=>{k!==null&&google.maps.event.removeListener(k),B!==null&&google.maps.event.removeListener(B),D!==null&&google.maps.event.removeListener(D),$!==null&&google.maps.event.removeListener($),C!==null&&google.maps.event.removeListener(C),I&&I(H)}}},[]),A!==null&&e(A)||null}v.memo(OCe);class DCe extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{markerClusterer:null}),J(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new nJ(this.context,[],this.props.options);this.registeredEvents=Ge({updaterMap:rt,eventMap:Ai,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:rt,eventMap:Ai,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Ke(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}J(DCe,"contextType",Ve);function M6(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var rJ=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,n=function(u){u.returnValue=!1,u.preventDefault&&u.preventDefault(),e.enableEventPropagation||M6(u)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var s=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],o=0,a=s;o<a.length;o++){var l=a[o];this.eventListeners.push(google.maps.event.addListener(this.div,l,M6))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",n),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var n=this.getMap();if(n instanceof google.maps.Map){var r=0,i=0,s=n.getBounds();s&&!s.contains(this.position)&&n.setCenter(this.position);var o=n.getDiv(),a=o.offsetWidth,l=o.offsetHeight,c=this.pixelOffset.width,u=this.pixelOffset.height,d=this.div.offsetWidth,f=this.div.offsetHeight,h=this.infoBoxClearance.width,p=this.infoBoxClearance.height,m=this.getProjection(),g=m.fromLatLngToContainerPixel(this.position);g!==null&&(g.x<-c+h?r=g.x+c-h:g.x+d+c+h>a&&(r=g.x+d+c+h-a),this.alignBottom?g.y<-u+p+f?i=g.y+u-p-f:g.y+u+p>l&&(i=g.y+u+p-l):g.y<-u+p?i=g.y+u-p:g.y+f+u+p>l&&(i=g.y+f+u+p-l)),r===0&&i===0||n.panBy(r,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.div.style[n]=e[n]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var n=this.div.ownerDocument,r=n&&n.defaultView?n.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),n=e.fromLatLngToDivPixel(this.position);n!==null&&(this.div.style.left=n.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(n.y+this.pixelOffset.height)+"px":this.div.style.top=n.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,n){var r=this;n&&(this.position=n.getPosition(),this.moveListener=google.maps.event.addListener(n,"position_changed",function(){var i=n.getPosition();r.setPosition(i)}),this.mapListener=google.maps.event.addListener(n,"map_changed",function(){r.setMap(n.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,n=this.eventListeners;e<n.length;e++){var r=n[e];google.maps.event.removeListener(r)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,n){return(function(i){for(var s in i.prototype)Object.prototype.hasOwnProperty.call(this,s)||(this.prototype[s]=i.prototype[s]);return this}).apply(e,[n])},t}(),MCe=["position"],$Ce=["position"];function $6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$6(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var N6={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},F6={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},NCe={};function FCe(t){var{children:e,anchor:n,options:r,position:i,zIndex:s,onCloseClick:o,onDomReady:a,onContentChanged:l,onPositionChanged:c,onZindexChanged:u,onLoad:d,onUnmount:f}=t,h=v.useContext(Ve),[p,m]=v.useState(null),[g,y]=v.useState(null),[x,S]=v.useState(null),[w,E]=v.useState(null),[T,_]=v.useState(null),[I,A]=v.useState(null),L=v.useRef(null);return v.useEffect(()=>{h&&p!==null&&(p.close(),n?p.open(h,n):p.getPosition()&&p.open(h))},[h,p,n]),v.useEffect(()=>{r&&p!==null&&p.setOptions(r)},[p,r]),v.useEffect(()=>{if(i&&p!==null){var j=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);p.setPosition(j)}},[i]),v.useEffect(()=>{typeof s=="number"&&p!==null&&p.setZIndex(s)},[s]),v.useEffect(()=>{p&&o&&(g!==null&&google.maps.event.removeListener(g),y(google.maps.event.addListener(p,"closeclick",o)))},[o]),v.useEffect(()=>{p&&a&&(x!==null&&google.maps.event.removeListener(x),S(google.maps.event.addListener(p,"domready",a)))},[a]),v.useEffect(()=>{p&&l&&(w!==null&&google.maps.event.removeListener(w),E(google.maps.event.addListener(p,"content_changed",l)))},[l]),v.useEffect(()=>{p&&c&&(T!==null&&google.maps.event.removeListener(T),_(google.maps.event.addListener(p,"position_changed",c)))},[c]),v.useEffect(()=>{p&&u&&(I!==null&&google.maps.event.removeListener(I),A(google.maps.event.addListener(p,"zindex_changed",u)))},[u]),v.useEffect(()=>{if(h){var j=r||NCe,{position:D}=j,O=e3(j,MCe),$;D&&!(D instanceof google.maps.LatLng)&&($=new google.maps.LatLng(D.lat,D.lng));var R=new rJ(hS(hS({},O),$?{position:$}:{}));L.current=document.createElement("div"),m(R),o&&y(google.maps.event.addListener(R,"closeclick",o)),a&&S(google.maps.event.addListener(R,"domready",a)),l&&E(google.maps.event.addListener(R,"content_changed",l)),c&&_(google.maps.event.addListener(R,"position_changed",c)),u&&A(google.maps.event.addListener(R,"zindex_changed",u)),R.setContent(L.current),n?R.open(h,n):R.getPosition()?R.open(h):kn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),d&&d(R)}return()=>{p!==null&&(g&&google.maps.event.removeListener(g),w&&google.maps.event.removeListener(w),x&&google.maps.event.removeListener(x),T&&google.maps.event.removeListener(T),I&&google.maps.event.removeListener(I),f&&f(p),p.close())}},[]),L.current?Yr.createPortal(v.Children.only(e),L.current):null}v.memo(FCe);class jCe extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"containerElement",null),J(this,"state",{infoBox:null}),J(this,"open",(e,n)=>{n?this.context!==null&&e.open(this.context,n):e.getPosition()?this.context!==null&&e.open(this.context):kn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),J(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:n}=e,r=e3(e,$Ce),i;n&&!(n instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(n.lat,n.lng));var s=new rJ(hS(hS({},r),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Ge({updaterMap:F6,eventMap:N6,prevProps:{},nextProps:this.props,instance:s}),this.setState({infoBox:s},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:n}=this.state;n!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:F6,eventMap:N6,prevProps:e,nextProps:this.props,instance:n}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:n}=this.state;n!==null&&(e&&e(n),Ke(this.registeredEvents),n.close())}render(){return this.containerElement?Yr.createPortal(v.Children.only(this.props.children),this.containerElement):null}}J(jCe,"contextType",Ve);var dC,j6;function BCe(){return j6||(j6=1,dC=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),dC}var UCe=BCe(),B6=YZ(UCe),U6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],fC=1,Mp=8;class t3{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[n,r]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=r>>4;if(i!==fC)throw new Error("Got v".concat(i," data when expected v").concat(fC,"."));var s=U6[r&15];if(!s)throw new Error("Unrecognized array type.");var[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new t3(a,o,s,e)}constructor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var s=U6.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-a%8)%8;if(s<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,Mp,e),this.coords=new this.ArrayType(this.data,Mp+a+l,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Mp+o+a+l),this.ids=new this.IndexArrayType(this.data,Mp,e),this.coords=new this.ArrayType(this.data,Mp+a+l,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(fC<<4)+s]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=n,r}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return dA(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:o,nodeSize:a}=this,l=[0,s.length-1,0],c=[];l.length;){var u=l.pop()||0,d=l.pop()||0,f=l.pop()||0;if(d-f<=a){for(var h=f;h<=d;h++){var p=o[2*h],m=o[2*h+1];p>=e&&p<=r&&m>=n&&m<=i&&c.push(s[h])}continue}var g=f+d>>1,y=o[2*g],x=o[2*g+1];y>=e&&y<=r&&x>=n&&x<=i&&c.push(s[g]),(u===0?e<=y:n<=x)&&(l.push(f),l.push(g-1),l.push(1-u)),(u===0?r>=y:i>=x)&&(l.push(g+1),l.push(d),l.push(1-u))}return c}within(e,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:s,nodeSize:o}=this,a=[0,i.length-1,0],l=[],c=r*r;a.length;){var u=a.pop()||0,d=a.pop()||0,f=a.pop()||0;if(d-f<=o){for(var h=f;h<=d;h++)V6(s[2*h],s[2*h+1],e,n)<=c&&l.push(i[h]);continue}var p=f+d>>1,m=s[2*p],g=s[2*p+1];V6(m,g,e,n)<=c&&l.push(i[p]),(u===0?e-r<=m:n-r<=g)&&(a.push(f),a.push(p-1),a.push(1-u)),(u===0?e+r>=m:n+r>=g)&&(a.push(p+1),a.push(d),a.push(1-u))}return l}}function dA(t,e,n,r,i,s){if(!(i-r<=n)){var o=r+i>>1;iJ(t,e,o,r,i,s),dA(t,e,n,r,o-1,1-s),dA(t,e,n,o+1,i,1-s)}}function iJ(t,e,n,r,i,s){for(;i>r;){if(i-r>600){var o=i-r+1,a=n-r+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(a-o/2<0?-1:1),d=Math.max(r,Math.floor(n-a*c/o+u)),f=Math.min(i,Math.floor(n+(o-a)*c/o+u));iJ(t,e,n,d,f,s)}var h=e[2*n+s],p=r,m=i;for($p(t,e,r,n),e[2*i+s]>h&&$p(t,e,r,i);p<m;){for($p(t,e,p,m),p++,m--;e[2*p+s]<h;)p++;for(;e[2*m+s]>h;)m--}e[2*r+s]===h?$p(t,e,r,m):(m++,$p(t,e,m,i)),m<=n&&(r=m+1),n<=m&&(i=m-1)}}function $p(t,e,n,r){hC(t,n,r),hC(e,2*n,2*r),hC(e,2*n+1,2*r+1)}function hC(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function V6(t,e,n,r){var i=t-n,s=e-r;return i*i+s*s}var VCe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},z6=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),wc=2,ll=3,pC=4,el=5,sJ=6;class zCe{constructor(e){this.options=Object.assign(Object.create(VCe),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:n,minZoom:r,maxZoom:i}=this.options;n&&console.time("total time");var s="prepare ".concat(e.length," points");n&&console.time(s),this.points=e;for(var o=[],a=0;a<e.length;a++){var l=e[a];if(l.geometry){var[c,u]=l.geometry.coordinates,d=z6(_y(c)),f=z6(Ty(u));o.push(d,f,1/0,a,-1,1),this.options.reduce&&o.push(0)}}var h=this.trees[i+1]=this._createTree(o);n&&console.timeEnd(s);for(var p=i;p>=r;p--){var m=+Date.now();h=this.trees[p]=this._createTree(this._cluster(h,p)),n&&console.log("z%d: %d clusters in %dms",p,h.numItems,+Date.now()-m)}return n&&console.timeEnd("total time"),this}getClusters(e,n){var r=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),s=e[2]===180?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,s=180;else if(r>s){var a=this.getClusters([r,i,180,o],n),l=this.getClusters([-180,i,s,o],n);return a.concat(l)}var c=this.trees[this._limitZoom(n)],u=c.range(_y(r),Ty(o),_y(s),Ty(i)),d=c.data,f=[];for(var h of u){var p=this.stride*h;f.push(d[p+el]>1?H6(d,p,this.clusterProps):this.points[d[p+ll]])}return f}getChildren(e){var n=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",s=this.trees[r];if(!s)throw new Error(i);var o=s.data;if(n*this.stride>=o.length)throw new Error(i);var a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),l=o[n*this.stride],c=o[n*this.stride+1],u=s.within(l,c,a),d=[];for(var f of u){var h=f*this.stride;o[h+pC]===e&&d.push(o[h+el]>1?H6(o,h,this.clusterProps):this.points[o[h+ll]])}if(d.length===0)throw new Error(i);return d}getLeaves(e,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,e,n,r,0),i}getTile(e,n,r){var i=this.trees[this._limitZoom(e)],s=Math.pow(2,e),{extent:o,radius:a}=this.options,l=a/o,c=(r-l)/s,u=(r+1+l)/s,d={features:[]};return this._addTileFeatures(i.range((n-l)/s,c,(n+1+l)/s,u),i.data,n,r,s,d),n===0&&this._addTileFeatures(i.range(1-l/s,c,1,u),i.data,s,r,s,d),n===s-1&&this._addTileFeatures(i.range(0,c,l/s,u),i.data,-1,r,s,d),d.features.length?d:null}getClusterExpansionZoom(e){for(var n=this._getOriginZoom(e)-1;n<=this.options.maxZoom;){var r=this.getChildren(e);if(n++,r.length!==1)break;e=r[0].properties.cluster_id}return n}_appendLeaves(e,n,r,i,s){var o=this.getChildren(n);for(var a of o){var l=a.properties;if(l&&l.cluster?s+l.point_count<=i?s+=l.point_count:s=this._appendLeaves(e,l.cluster_id,r,i,s):s<i?s++:e.push(a),e.length===r)break}return s}_createTree(e){for(var n=new t3(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)n.add(e[r],e[r+1]);return n.finish(),n.data=e,n}_addTileFeatures(e,n,r,i,s,o){for(var a of e){var l=a*this.stride,c=n[l+el]>1,u=void 0,d=void 0,f=void 0;if(c)u=oJ(n,l,this.clusterProps),d=n[l],f=n[l+1];else{var h=this.points[n[l+ll]];u=h.properties;var[p,m]=h.geometry.coordinates;d=_y(p),f=Ty(m)}var g={type:1,geometry:[[Math.round(this.options.extent*(d*s-r)),Math.round(this.options.extent*(f*s-i))]],tags:u},y=void 0;c||this.options.generateId?y=n[l+ll]:y=this.points[n[l+ll]].id,y!==void 0&&(g.id=y),o.features.push(g)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,n){for(var{radius:r,extent:i,reduce:s,minPoints:o}=this.options,a=r/(i*Math.pow(2,n)),l=e.data,c=[],u=this.stride,d=0;d<l.length;d+=u)if(!(l[d+wc]<=n)){l[d+wc]=n;var f=l[d],h=l[d+1],p=e.within(l[d],l[d+1],a),m=l[d+el],g=m;for(var y of p){var x=y*u;l[x+wc]>n&&(g+=l[x+el])}if(g>m&&g>=o){var S=f*m,w=h*m,E=void 0,T=-1,_=((d/u|0)<<5)+(n+1)+this.points.length;for(var I of p){var A=I*u;if(!(l[A+wc]<=n)){l[A+wc]=n;var L=l[A+el];S+=l[A]*L,w+=l[A+1]*L,l[A+pC]=_,s&&(E||(E=this._map(l,d,!0),T=this.clusterProps.length,this.clusterProps.push(E)),s(E,this._map(l,A)))}}l[d+pC]=_,c.push(S/g,w/g,1/0,_,-1,g),s&&c.push(T)}else{for(var j=0;j<u;j++)c.push(l[d+j]);if(g>1)for(var D of p){var O=D*u;if(!(l[O+wc]<=n)){l[O+wc]=n;for(var $=0;$<u;$++)c.push(l[O+$])}}}}return c}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,n,r){if(e[n+el]>1){var i=this.clusterProps[e[n+sJ]];return r?Object.assign({},i):i}var s=this.points[e[n+ll]].properties,o=this.options.map(s);return r&&o===s?Object.assign({},o):o}}function H6(t,e,n){return{type:"Feature",id:t[e+ll],properties:oJ(t,e,n),geometry:{type:"Point",coordinates:[HCe(t[e]),WCe(t[e+1])]}}}function oJ(t,e,n){var r=t[e+el],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,s=t[e+sJ],o=s===-1?{}:Object.assign({},n[s]);return Object.assign(o,{cluster:!0,cluster_id:t[e+ll],point_count:r,point_count_abbreviated:i})}function _y(t){return t/360+.5}function Ty(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function HCe(t){return(t-.5)*360}function WCe(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function GCe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}class oi{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,n){this.isAdvancedMarker(e)?e.map=n:e.setMap(n)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class fA{constructor(e){var{markers:n,position:r}=e;this.markers=n,r&&(r instanceof google.maps.LatLng?this._position=r:this._position=new google.maps.LatLng(r))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var n of this.markers)e.extend(oi.getPosition(n));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>oi.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(oi.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class KCe{constructor(e){var{maxZoom:n=16}=e;this.maxZoom=n}noop(e){var{markers:n}=e;return qCe(n)}}var qCe=t=>{var e=t.map(n=>new fA({position:oi.getPosition(n),markers:[n]}));return e};class YCe extends KCe{constructor(e){var{maxZoom:n,radius:r=60}=e,i=GCe(e,["maxZoom","radius"]);super({maxZoom:n}),this.state={zoom:-1},this.superCluster=new zCe(Object.assign({maxZoom:this.maxZoom,radius:r},i))}calculate(e){var n=!1,r={zoom:e.map.getZoom()};if(!B6(e.markers,this.markers)){n=!0,this.markers=[...e.markers];var i=this.markers.map(s=>{var o=oi.getPosition(s),a=[o.lng(),o.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:a},properties:{marker:s}}});this.superCluster.load(i)}return n||(this.state.zoom<=this.maxZoom||r.zoom<=this.maxZoom)&&(n=!B6(this.state,r)),this.state=r,n&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:n}}cluster(e){var{map:n}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(n.getZoom())).map(r=>this.transformCluster(r))}transformCluster(e){var{geometry:{coordinates:[n,r]},properties:i}=e;if(i.cluster)return new fA({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(o=>o.properties.marker),position:{lat:r,lng:n}});var s=i.marker;return new fA({markers:[s],position:oi.getPosition(s)})}}class QCe{constructor(e,n){this.markers={sum:e.length};var r=n.map(s=>s.count),i=r.reduce((s,o)=>s+o,0);this.clusters={count:n.length,markers:{mean:i/n.length,sum:i,min:Math.min(...r),max:Math.max(...r)}}}}class XCe{render(e,n,r){var{count:i,position:s}=e,o=i>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff",a='<svg fill="'.concat(o,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),l="Cluster of ".concat(i," markers"),c=Number(google.maps.Marker.MAX_ZINDEX)+i;if(oi.isAdvancedMarkerAvailable(r)){var u=new DOMParser,d=u.parseFromString(a,"image/svg+xml").documentElement;d.setAttribute("transform","translate(0 25)");var f={map:r,position:s,zIndex:c,title:l,content:d};return new google.maps.marker.AdvancedMarkerElement(f)}var h={position:s,zIndex:c,title:l,icon:{url:"data:image/svg+xml;base64,".concat(btoa(a)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(h)}}function ZCe(t,e){for(var n in e.prototype)t.prototype[n]=e.prototype[n]}class n3{constructor(){ZCe(n3,google.maps.OverlayView)}}var Zm;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(Zm||(Zm={}));var JCe=(t,e,n)=>{n.fitBounds(e.bounds)};class e2e extends n3{constructor(e){var{map:n,markers:r=[],algorithmOptions:i={},algorithm:s=new YCe(i),renderer:o=new XCe,onClusterClick:a=JCe}=e;super(),this.markers=[...r],this.clusters=[],this.algorithm=s,this.renderer=o,this.onClusterClick=a,n&&this.setMap(n)}addMarker(e,n){this.markers.includes(e)||(this.markers.push(e),n||this.render())}addMarkers(e,n){e.forEach(r=>{this.addMarker(r,!0)}),n||this.render()}removeMarker(e,n){var r=this.markers.indexOf(e);return r===-1?!1:(oi.setMap(e,null),this.markers.splice(r,1),n||this.render(),!0)}removeMarkers(e,n){var r=!1;return e.forEach(i=>{r=this.removeMarker(i,!0)||r}),r&&!n&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Zm.CLUSTERING_BEGIN,this);var{clusters:n,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(r||r==null){var i=new Set;for(var s of n)s.markers.length==1&&i.add(s.markers[0]);var o=[];for(var a of this.clusters)a.marker!=null&&(a.markers.length==1?i.has(a.marker)||oi.setMap(a.marker,null):o.push(a.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>o.forEach(l=>oi.setMap(l,null)))}google.maps.event.trigger(this,Zm.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>oi.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new QCe(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e,n),r.markers.forEach(i=>oi.setMap(i,null)),this.onClusterClick&&r.marker.addListener("click",i=>{google.maps.event.trigger(this,Zm.CLUSTER_CLICK,r),this.onClusterClick(i,r,n)})),oi.setMap(r.marker,n)})}}function W6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W6(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t2e(t){var e=JTe(),[n,r]=v.useState(null);return v.useEffect(()=>{if(e&&n===null){var i=new e2e(G6(G6({},t),{},{map:e}));r(i)}},[e]),n}function n2e(t){var{children:e,options:n}=t,r=t2e(n);return r!==null?e(r):null}v.memo(n2e);var K6={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},q6={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function r2e(t){var{children:e,anchor:n,options:r,position:i,zIndex:s,onCloseClick:o,onDomReady:a,onContentChanged:l,onPositionChanged:c,onZindexChanged:u,onLoad:d,onUnmount:f}=t,h=v.useContext(Ve),[p,m]=v.useState(null),[g,y]=v.useState(null),[x,S]=v.useState(null),[w,E]=v.useState(null),[T,_]=v.useState(null),[I,A]=v.useState(null),L=v.useRef(null);return v.useEffect(()=>{p!==null&&(p.close(),n?p.open(h,n):p.getPosition()&&p.open(h))},[h,p,n]),v.useEffect(()=>{r&&p!==null&&p.setOptions(r)},[p,r]),v.useEffect(()=>{i&&p!==null&&p.setPosition(i)},[i]),v.useEffect(()=>{typeof s=="number"&&p!==null&&p.setZIndex(s)},[s]),v.useEffect(()=>{p&&o&&(g!==null&&google.maps.event.removeListener(g),y(google.maps.event.addListener(p,"closeclick",o)))},[o]),v.useEffect(()=>{p&&a&&(x!==null&&google.maps.event.removeListener(x),S(google.maps.event.addListener(p,"domready",a)))},[a]),v.useEffect(()=>{p&&l&&(w!==null&&google.maps.event.removeListener(w),E(google.maps.event.addListener(p,"content_changed",l)))},[l]),v.useEffect(()=>{p&&c&&(T!==null&&google.maps.event.removeListener(T),_(google.maps.event.addListener(p,"position_changed",c)))},[c]),v.useEffect(()=>{p&&u&&(I!==null&&google.maps.event.removeListener(I),A(google.maps.event.addListener(p,"zindex_changed",u)))},[u]),v.useEffect(()=>{var j=new google.maps.InfoWindow(r);return m(j),L.current=document.createElement("div"),o&&y(google.maps.event.addListener(j,"closeclick",o)),a&&S(google.maps.event.addListener(j,"domready",a)),l&&E(google.maps.event.addListener(j,"content_changed",l)),c&&_(google.maps.event.addListener(j,"position_changed",c)),u&&A(google.maps.event.addListener(j,"zindex_changed",u)),j.setContent(L.current),i&&j.setPosition(i),s&&j.setZIndex(s),n?j.open(h,n):j.getPosition()?j.open(h):kn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),d&&d(j),()=>{g&&google.maps.event.removeListener(g),w&&google.maps.event.removeListener(w),x&&google.maps.event.removeListener(x),T&&google.maps.event.removeListener(T),I&&google.maps.event.removeListener(I),f&&f(j),j.close()}},[]),L.current?Yr.createPortal(v.Children.only(e),L.current):null}v.memo(r2e);class i2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"containerElement",null),J(this,"state",{infoWindow:null}),J(this,"open",(e,n)=>{n?e.open(this.context,n):e.getPosition()?e.open(this.context):kn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),J(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Ge({updaterMap:q6,eventMap:K6,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:q6,eventMap:K6,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Ke(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Yr.createPortal(v.Children.only(this.props.children),this.containerElement):null}}J(i2e,"contextType",Ve);function Y6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y6(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Q6={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},X6={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},s2e={};function o2e(t){var{options:e,draggable:n,editable:r,visible:i,path:s,onDblClick:o,onDragEnd:a,onDragStart:l,onMouseDown:c,onMouseMove:u,onMouseOut:d,onMouseOver:f,onMouseUp:h,onRightClick:p,onClick:m,onDrag:g,onLoad:y,onUnmount:x}=t,S=v.useContext(Ve),[w,E]=v.useState(null),[T,_]=v.useState(null),[I,A]=v.useState(null),[L,j]=v.useState(null),[D,O]=v.useState(null),[$,R]=v.useState(null),[C,P]=v.useState(null),[k,M]=v.useState(null),[B,N]=v.useState(null),[V,H]=v.useState(null),[W,z]=v.useState(null),[G,K]=v.useState(null);return v.useEffect(()=>{w!==null&&w.setMap(S)},[S]),v.useEffect(()=>{typeof e<"u"&&w!==null&&w.setOptions(e)},[w,e]),v.useEffect(()=>{typeof n<"u"&&w!==null&&w.setDraggable(n)},[w,n]),v.useEffect(()=>{typeof r<"u"&&w!==null&&w.setEditable(r)},[w,r]),v.useEffect(()=>{typeof i<"u"&&w!==null&&w.setVisible(i)},[w,i]),v.useEffect(()=>{typeof s<"u"&&w!==null&&w.setPath(s)},[w,s]),v.useEffect(()=>{w&&o&&(T!==null&&google.maps.event.removeListener(T),_(google.maps.event.addListener(w,"dblclick",o)))},[o]),v.useEffect(()=>{w&&a&&(I!==null&&google.maps.event.removeListener(I),A(google.maps.event.addListener(w,"dragend",a)))},[a]),v.useEffect(()=>{w&&l&&(L!==null&&google.maps.event.removeListener(L),j(google.maps.event.addListener(w,"dragstart",l)))},[l]),v.useEffect(()=>{w&&c&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(w,"mousedown",c)))},[c]),v.useEffect(()=>{w&&u&&($!==null&&google.maps.event.removeListener($),R(google.maps.event.addListener(w,"mousemove",u)))},[u]),v.useEffect(()=>{w&&d&&(C!==null&&google.maps.event.removeListener(C),P(google.maps.event.addListener(w,"mouseout",d)))},[d]),v.useEffect(()=>{w&&f&&(k!==null&&google.maps.event.removeListener(k),M(google.maps.event.addListener(w,"mouseover",f)))},[f]),v.useEffect(()=>{w&&h&&(B!==null&&google.maps.event.removeListener(B),N(google.maps.event.addListener(w,"mouseup",h)))},[h]),v.useEffect(()=>{w&&p&&(V!==null&&google.maps.event.removeListener(V),H(google.maps.event.addListener(w,"rightclick",p)))},[p]),v.useEffect(()=>{w&&m&&(W!==null&&google.maps.event.removeListener(W),z(google.maps.event.addListener(w,"click",m)))},[m]),v.useEffect(()=>{w&&g&&(G!==null&&google.maps.event.removeListener(G),K(google.maps.event.addListener(w,"drag",g)))},[g]),v.useEffect(()=>{var Q=new google.maps.Polyline(pS(pS({},e||s2e),{},{map:S}));return s&&Q.setPath(s),typeof i<"u"&&Q.setVisible(i),typeof r<"u"&&Q.setEditable(r),typeof n<"u"&&Q.setDraggable(n),o&&_(google.maps.event.addListener(Q,"dblclick",o)),a&&A(google.maps.event.addListener(Q,"dragend",a)),l&&j(google.maps.event.addListener(Q,"dragstart",l)),c&&O(google.maps.event.addListener(Q,"mousedown",c)),u&&R(google.maps.event.addListener(Q,"mousemove",u)),d&&P(google.maps.event.addListener(Q,"mouseout",d)),f&&M(google.maps.event.addListener(Q,"mouseover",f)),h&&N(google.maps.event.addListener(Q,"mouseup",h)),p&&H(google.maps.event.addListener(Q,"rightclick",p)),m&&z(google.maps.event.addListener(Q,"click",m)),g&&K(google.maps.event.addListener(Q,"drag",g)),E(Q),y&&y(Q),()=>{T!==null&&google.maps.event.removeListener(T),I!==null&&google.maps.event.removeListener(I),L!==null&&google.maps.event.removeListener(L),D!==null&&google.maps.event.removeListener(D),$!==null&&google.maps.event.removeListener($),C!==null&&google.maps.event.removeListener(C),k!==null&&google.maps.event.removeListener(k),B!==null&&google.maps.event.removeListener(B),V!==null&&google.maps.event.removeListener(V),W!==null&&google.maps.event.removeListener(W),x&&x(Q),Q.setMap(null)}},[]),null}v.memo(o2e);class a2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{polyline:null}),J(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(pS(pS({},this.props.options),{},{map:this.context}));this.registeredEvents=Ge({updaterMap:X6,eventMap:Q6,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:X6,eventMap:Q6,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Ke(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}J(a2e,"contextType",Ve);function Z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var eF={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},tF={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function l2e(t){var{options:e,draggable:n,editable:r,visible:i,path:s,paths:o,onDblClick:a,onDragEnd:l,onDragStart:c,onMouseDown:u,onMouseMove:d,onMouseOut:f,onMouseOver:h,onMouseUp:p,onRightClick:m,onClick:g,onDrag:y,onLoad:x,onUnmount:S,onEdit:w}=t,E=v.useContext(Ve),[T,_]=v.useState(null),[I,A]=v.useState(null),[L,j]=v.useState(null),[D,O]=v.useState(null),[$,R]=v.useState(null),[C,P]=v.useState(null),[k,M]=v.useState(null),[B,N]=v.useState(null),[V,H]=v.useState(null),[W,z]=v.useState(null),[G,K]=v.useState(null),[Q,ne]=v.useState(null);return v.useEffect(()=>{T!==null&&T.setMap(E)},[E]),v.useEffect(()=>{typeof e<"u"&&T!==null&&T.setOptions(e)},[T,e]),v.useEffect(()=>{typeof n<"u"&&T!==null&&T.setDraggable(n)},[T,n]),v.useEffect(()=>{typeof r<"u"&&T!==null&&T.setEditable(r)},[T,r]),v.useEffect(()=>{typeof i<"u"&&T!==null&&T.setVisible(i)},[T,i]),v.useEffect(()=>{typeof s<"u"&&T!==null&&T.setPath(s)},[T,s]),v.useEffect(()=>{typeof o<"u"&&T!==null&&T.setPaths(o)},[T,o]),v.useEffect(()=>{T&&typeof a=="function"&&(I!==null&&google.maps.event.removeListener(I),A(google.maps.event.addListener(T,"dblclick",a)))},[a]),v.useEffect(()=>{T&&(google.maps.event.addListener(T.getPath(),"insert_at",()=>{w==null||w(T)}),google.maps.event.addListener(T.getPath(),"set_at",()=>{w==null||w(T)}),google.maps.event.addListener(T.getPath(),"remove_at",()=>{w==null||w(T)}))},[T,w]),v.useEffect(()=>{T&&typeof l=="function"&&(L!==null&&google.maps.event.removeListener(L),j(google.maps.event.addListener(T,"dragend",l)))},[l]),v.useEffect(()=>{T&&typeof c=="function"&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(T,"dragstart",c)))},[c]),v.useEffect(()=>{T&&typeof u=="function"&&($!==null&&google.maps.event.removeListener($),R(google.maps.event.addListener(T,"mousedown",u)))},[u]),v.useEffect(()=>{T&&typeof d=="function"&&(C!==null&&google.maps.event.removeListener(C),P(google.maps.event.addListener(T,"mousemove",d)))},[d]),v.useEffect(()=>{T&&typeof f=="function"&&(k!==null&&google.maps.event.removeListener(k),M(google.maps.event.addListener(T,"mouseout",f)))},[f]),v.useEffect(()=>{T&&typeof h=="function"&&(B!==null&&google.maps.event.removeListener(B),N(google.maps.event.addListener(T,"mouseover",h)))},[h]),v.useEffect(()=>{T&&typeof p=="function"&&(V!==null&&google.maps.event.removeListener(V),H(google.maps.event.addListener(T,"mouseup",p)))},[p]),v.useEffect(()=>{T&&typeof m=="function"&&(W!==null&&google.maps.event.removeListener(W),z(google.maps.event.addListener(T,"rightclick",m)))},[m]),v.useEffect(()=>{T&&typeof g=="function"&&(G!==null&&google.maps.event.removeListener(G),K(google.maps.event.addListener(T,"click",g)))},[g]),v.useEffect(()=>{T&&typeof y=="function"&&(Q!==null&&google.maps.event.removeListener(Q),ne(google.maps.event.addListener(T,"drag",y)))},[y]),v.useEffect(()=>{var Z=new google.maps.Polygon(J6(J6({},e),{},{map:E}));return s&&Z.setPath(s),o&&Z.setPaths(o),typeof i<"u"&&Z.setVisible(i),typeof r<"u"&&Z.setEditable(r),typeof n<"u"&&Z.setDraggable(n),a&&A(google.maps.event.addListener(Z,"dblclick",a)),l&&j(google.maps.event.addListener(Z,"dragend",l)),c&&O(google.maps.event.addListener(Z,"dragstart",c)),u&&R(google.maps.event.addListener(Z,"mousedown",u)),d&&P(google.maps.event.addListener(Z,"mousemove",d)),f&&M(google.maps.event.addListener(Z,"mouseout",f)),h&&N(google.maps.event.addListener(Z,"mouseover",h)),p&&H(google.maps.event.addListener(Z,"mouseup",p)),m&&z(google.maps.event.addListener(Z,"rightclick",m)),g&&K(google.maps.event.addListener(Z,"click",g)),y&&ne(google.maps.event.addListener(Z,"drag",y)),_(Z),x&&x(Z),()=>{I!==null&&google.maps.event.removeListener(I),L!==null&&google.maps.event.removeListener(L),D!==null&&google.maps.event.removeListener(D),$!==null&&google.maps.event.removeListener($),C!==null&&google.maps.event.removeListener(C),k!==null&&google.maps.event.removeListener(k),B!==null&&google.maps.event.removeListener(B),V!==null&&google.maps.event.removeListener(V),W!==null&&google.maps.event.removeListener(W),G!==null&&google.maps.event.removeListener(G),S&&S(Z),Z.setMap(null)}},[]),null}v.memo(l2e);class c2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Ge({updaterMap:tF,eventMap:eF,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:tF,eventMap:eF,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Ke(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}J(c2e,"contextType",Ve);function nF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nF(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var rF={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},iF={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function u2e(t){var{options:e,bounds:n,draggable:r,editable:i,visible:s,onDblClick:o,onDragEnd:a,onDragStart:l,onMouseDown:c,onMouseMove:u,onMouseOut:d,onMouseOver:f,onMouseUp:h,onRightClick:p,onClick:m,onDrag:g,onBoundsChanged:y,onLoad:x,onUnmount:S}=t,w=v.useContext(Ve),[E,T]=v.useState(null),[_,I]=v.useState(null),[A,L]=v.useState(null),[j,D]=v.useState(null),[O,$]=v.useState(null),[R,C]=v.useState(null),[P,k]=v.useState(null),[M,B]=v.useState(null),[N,V]=v.useState(null),[H,W]=v.useState(null),[z,G]=v.useState(null),[K,Q]=v.useState(null),[ne,Z]=v.useState(null);return v.useEffect(()=>{E!==null&&E.setMap(w)},[w]),v.useEffect(()=>{typeof e<"u"&&E!==null&&E.setOptions(e)},[E,e]),v.useEffect(()=>{typeof r<"u"&&E!==null&&E.setDraggable(r)},[E,r]),v.useEffect(()=>{typeof i<"u"&&E!==null&&E.setEditable(i)},[E,i]),v.useEffect(()=>{typeof s<"u"&&E!==null&&E.setVisible(s)},[E,s]),v.useEffect(()=>{typeof n<"u"&&E!==null&&E.setBounds(n)},[E,n]),v.useEffect(()=>{E&&o&&(_!==null&&google.maps.event.removeListener(_),I(google.maps.event.addListener(E,"dblclick",o)))},[o]),v.useEffect(()=>{E&&a&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(E,"dragend",a)))},[a]),v.useEffect(()=>{E&&l&&(j!==null&&google.maps.event.removeListener(j),D(google.maps.event.addListener(E,"dragstart",l)))},[l]),v.useEffect(()=>{E&&c&&(O!==null&&google.maps.event.removeListener(O),$(google.maps.event.addListener(E,"mousedown",c)))},[c]),v.useEffect(()=>{E&&u&&(R!==null&&google.maps.event.removeListener(R),C(google.maps.event.addListener(E,"mousemove",u)))},[u]),v.useEffect(()=>{E&&d&&(P!==null&&google.maps.event.removeListener(P),k(google.maps.event.addListener(E,"mouseout",d)))},[d]),v.useEffect(()=>{E&&f&&(M!==null&&google.maps.event.removeListener(M),B(google.maps.event.addListener(E,"mouseover",f)))},[f]),v.useEffect(()=>{E&&h&&(N!==null&&google.maps.event.removeListener(N),V(google.maps.event.addListener(E,"mouseup",h)))},[h]),v.useEffect(()=>{E&&p&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(E,"rightclick",p)))},[p]),v.useEffect(()=>{E&&m&&(z!==null&&google.maps.event.removeListener(z),G(google.maps.event.addListener(E,"click",m)))},[m]),v.useEffect(()=>{E&&g&&(K!==null&&google.maps.event.removeListener(K),Q(google.maps.event.addListener(E,"drag",g)))},[g]),v.useEffect(()=>{E&&y&&(ne!==null&&google.maps.event.removeListener(ne),Z(google.maps.event.addListener(E,"bounds_changed",y)))},[y]),v.useEffect(()=>{var re=new google.maps.Rectangle(mS(mS({},e),{},{map:w}));return typeof s<"u"&&re.setVisible(s),typeof i<"u"&&re.setEditable(i),typeof r<"u"&&re.setDraggable(r),typeof n<"u"&&re.setBounds(n),o&&I(google.maps.event.addListener(re,"dblclick",o)),a&&L(google.maps.event.addListener(re,"dragend",a)),l&&D(google.maps.event.addListener(re,"dragstart",l)),c&&$(google.maps.event.addListener(re,"mousedown",c)),u&&C(google.maps.event.addListener(re,"mousemove",u)),d&&k(google.maps.event.addListener(re,"mouseout",d)),f&&B(google.maps.event.addListener(re,"mouseover",f)),h&&V(google.maps.event.addListener(re,"mouseup",h)),p&&W(google.maps.event.addListener(re,"rightclick",p)),m&&G(google.maps.event.addListener(re,"click",m)),g&&Q(google.maps.event.addListener(re,"drag",g)),y&&Z(google.maps.event.addListener(re,"bounds_changed",y)),T(re),x&&x(re),()=>{_!==null&&google.maps.event.removeListener(_),A!==null&&google.maps.event.removeListener(A),j!==null&&google.maps.event.removeListener(j),O!==null&&google.maps.event.removeListener(O),R!==null&&google.maps.event.removeListener(R),P!==null&&google.maps.event.removeListener(P),M!==null&&google.maps.event.removeListener(M),N!==null&&google.maps.event.removeListener(N),H!==null&&google.maps.event.removeListener(H),z!==null&&google.maps.event.removeListener(z),K!==null&&google.maps.event.removeListener(K),ne!==null&&google.maps.event.removeListener(ne),S&&S(re),re.setMap(null)}},[]),null}v.memo(u2e);class d2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{rectangle:null}),J(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(mS(mS({},this.props.options),{},{map:this.context}));this.registeredEvents=Ge({updaterMap:iF,eventMap:rF,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:iF,eventMap:rF,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Ke(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}J(d2e,"contextType",Ve);function sF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sF(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var oF={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},aF={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},f2e={};function h2e(t){var{options:e,center:n,radius:r,draggable:i,editable:s,visible:o,onDblClick:a,onDragEnd:l,onDragStart:c,onMouseDown:u,onMouseMove:d,onMouseOut:f,onMouseOver:h,onMouseUp:p,onRightClick:m,onClick:g,onDrag:y,onCenterChanged:x,onRadiusChanged:S,onLoad:w,onUnmount:E}=t,T=v.useContext(Ve),[_,I]=v.useState(null),[A,L]=v.useState(null),[j,D]=v.useState(null),[O,$]=v.useState(null),[R,C]=v.useState(null),[P,k]=v.useState(null),[M,B]=v.useState(null),[N,V]=v.useState(null),[H,W]=v.useState(null),[z,G]=v.useState(null),[K,Q]=v.useState(null),[ne,Z]=v.useState(null),[re,de]=v.useState(null),[Ee,ke]=v.useState(null);return v.useEffect(()=>{_!==null&&_.setMap(T)},[T]),v.useEffect(()=>{typeof e<"u"&&_!==null&&_.setOptions(e)},[_,e]),v.useEffect(()=>{typeof i<"u"&&_!==null&&_.setDraggable(i)},[_,i]),v.useEffect(()=>{typeof s<"u"&&_!==null&&_.setEditable(s)},[_,s]),v.useEffect(()=>{typeof o<"u"&&_!==null&&_.setVisible(o)},[_,o]),v.useEffect(()=>{typeof r=="number"&&_!==null&&_.setRadius(r)},[_,r]),v.useEffect(()=>{typeof n<"u"&&_!==null&&_.setCenter(n)},[_,n]),v.useEffect(()=>{_&&a&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(_,"dblclick",a)))},[a]),v.useEffect(()=>{_&&l&&(j!==null&&google.maps.event.removeListener(j),D(google.maps.event.addListener(_,"dragend",l)))},[l]),v.useEffect(()=>{_&&c&&(O!==null&&google.maps.event.removeListener(O),$(google.maps.event.addListener(_,"dragstart",c)))},[c]),v.useEffect(()=>{_&&u&&(R!==null&&google.maps.event.removeListener(R),C(google.maps.event.addListener(_,"mousedown",u)))},[u]),v.useEffect(()=>{_&&d&&(P!==null&&google.maps.event.removeListener(P),k(google.maps.event.addListener(_,"mousemove",d)))},[d]),v.useEffect(()=>{_&&f&&(M!==null&&google.maps.event.removeListener(M),B(google.maps.event.addListener(_,"mouseout",f)))},[f]),v.useEffect(()=>{_&&h&&(N!==null&&google.maps.event.removeListener(N),V(google.maps.event.addListener(_,"mouseover",h)))},[h]),v.useEffect(()=>{_&&p&&(H!==null&&google.maps.event.removeListener(H),W(google.maps.event.addListener(_,"mouseup",p)))},[p]),v.useEffect(()=>{_&&m&&(z!==null&&google.maps.event.removeListener(z),G(google.maps.event.addListener(_,"rightclick",m)))},[m]),v.useEffect(()=>{_&&g&&(K!==null&&google.maps.event.removeListener(K),Q(google.maps.event.addListener(_,"click",g)))},[g]),v.useEffect(()=>{_&&y&&(ne!==null&&google.maps.event.removeListener(ne),Z(google.maps.event.addListener(_,"drag",y)))},[y]),v.useEffect(()=>{_&&x&&(re!==null&&google.maps.event.removeListener(re),de(google.maps.event.addListener(_,"center_changed",x)))},[g]),v.useEffect(()=>{_&&S&&(Ee!==null&&google.maps.event.removeListener(Ee),ke(google.maps.event.addListener(_,"radius_changed",S)))},[S]),v.useEffect(()=>{var _e=new google.maps.Circle(gS(gS({},e||f2e),{},{map:T}));return typeof r=="number"&&_e.setRadius(r),typeof n<"u"&&_e.setCenter(n),typeof r=="number"&&_e.setRadius(r),typeof o<"u"&&_e.setVisible(o),typeof s<"u"&&_e.setEditable(s),typeof i<"u"&&_e.setDraggable(i),a&&L(google.maps.event.addListener(_e,"dblclick",a)),l&&D(google.maps.event.addListener(_e,"dragend",l)),c&&$(google.maps.event.addListener(_e,"dragstart",c)),u&&C(google.maps.event.addListener(_e,"mousedown",u)),d&&k(google.maps.event.addListener(_e,"mousemove",d)),f&&B(google.maps.event.addListener(_e,"mouseout",f)),h&&V(google.maps.event.addListener(_e,"mouseover",h)),p&&W(google.maps.event.addListener(_e,"mouseup",p)),m&&G(google.maps.event.addListener(_e,"rightclick",m)),g&&Q(google.maps.event.addListener(_e,"click",g)),y&&Z(google.maps.event.addListener(_e,"drag",y)),x&&de(google.maps.event.addListener(_e,"center_changed",x)),S&&ke(google.maps.event.addListener(_e,"radius_changed",S)),I(_e),w&&w(_e),()=>{A!==null&&google.maps.event.removeListener(A),j!==null&&google.maps.event.removeListener(j),O!==null&&google.maps.event.removeListener(O),R!==null&&google.maps.event.removeListener(R),P!==null&&google.maps.event.removeListener(P),M!==null&&google.maps.event.removeListener(M),N!==null&&google.maps.event.removeListener(N),H!==null&&google.maps.event.removeListener(H),z!==null&&google.maps.event.removeListener(z),K!==null&&google.maps.event.removeListener(K),re!==null&&google.maps.event.removeListener(re),Ee!==null&&google.maps.event.removeListener(Ee),E&&E(_e),_e.setMap(null)}},[]),null}v.memo(h2e);class p2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{circle:null}),J(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(gS(gS({},this.props.options),{},{map:this.context}));this.registeredEvents=Ge({updaterMap:aF,eventMap:oF,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:aF,eventMap:oF,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Ke(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}J(p2e,"contextType",Ve);function lF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lF(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var cF={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},uF={add(t,e){t.add(e)},addgeojson(t,e,n){t.addGeoJson(e,n)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,n,r){t.loadGeoJson(e,n,r)},overridestyle(t,e,n){t.overrideStyle(e,n)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function m2e(t){var{options:e,onClick:n,onDblClick:r,onMouseDown:i,onMouseMove:s,onMouseOut:o,onMouseOver:a,onMouseUp:l,onRightClick:c,onAddFeature:u,onRemoveFeature:d,onRemoveProperty:f,onSetGeometry:h,onSetProperty:p,onLoad:m,onUnmount:g}=t,y=v.useContext(Ve),[x,S]=v.useState(null),[w,E]=v.useState(null),[T,_]=v.useState(null),[I,A]=v.useState(null),[L,j]=v.useState(null),[D,O]=v.useState(null),[$,R]=v.useState(null),[C,P]=v.useState(null),[k,M]=v.useState(null),[B,N]=v.useState(null),[V,H]=v.useState(null),[W,z]=v.useState(null),[G,K]=v.useState(null),[Q,ne]=v.useState(null);return v.useEffect(()=>{x!==null&&x.setMap(y)},[y]),v.useEffect(()=>{x&&r&&(w!==null&&google.maps.event.removeListener(w),E(google.maps.event.addListener(x,"dblclick",r)))},[r]),v.useEffect(()=>{x&&i&&(T!==null&&google.maps.event.removeListener(T),_(google.maps.event.addListener(x,"mousedown",i)))},[i]),v.useEffect(()=>{x&&s&&(I!==null&&google.maps.event.removeListener(I),A(google.maps.event.addListener(x,"mousemove",s)))},[s]),v.useEffect(()=>{x&&o&&(L!==null&&google.maps.event.removeListener(L),j(google.maps.event.addListener(x,"mouseout",o)))},[o]),v.useEffect(()=>{x&&a&&(D!==null&&google.maps.event.removeListener(D),O(google.maps.event.addListener(x,"mouseover",a)))},[a]),v.useEffect(()=>{x&&l&&($!==null&&google.maps.event.removeListener($),R(google.maps.event.addListener(x,"mouseup",l)))},[l]),v.useEffect(()=>{x&&c&&(C!==null&&google.maps.event.removeListener(C),P(google.maps.event.addListener(x,"rightclick",c)))},[c]),v.useEffect(()=>{x&&n&&(k!==null&&google.maps.event.removeListener(k),M(google.maps.event.addListener(x,"click",n)))},[n]),v.useEffect(()=>{x&&u&&(B!==null&&google.maps.event.removeListener(B),N(google.maps.event.addListener(x,"addfeature",u)))},[u]),v.useEffect(()=>{x&&d&&(V!==null&&google.maps.event.removeListener(V),H(google.maps.event.addListener(x,"removefeature",d)))},[d]),v.useEffect(()=>{x&&f&&(W!==null&&google.maps.event.removeListener(W),z(google.maps.event.addListener(x,"removeproperty",f)))},[f]),v.useEffect(()=>{x&&h&&(G!==null&&google.maps.event.removeListener(G),K(google.maps.event.addListener(x,"setgeometry",h)))},[h]),v.useEffect(()=>{x&&p&&(Q!==null&&google.maps.event.removeListener(Q),ne(google.maps.event.addListener(x,"setproperty",p)))},[p]),v.useEffect(()=>{if(y!==null){var Z=new google.maps.Data(vS(vS({},e),{},{map:y}));r&&E(google.maps.event.addListener(Z,"dblclick",r)),i&&_(google.maps.event.addListener(Z,"mousedown",i)),s&&A(google.maps.event.addListener(Z,"mousemove",s)),o&&j(google.maps.event.addListener(Z,"mouseout",o)),a&&O(google.maps.event.addListener(Z,"mouseover",a)),l&&R(google.maps.event.addListener(Z,"mouseup",l)),c&&P(google.maps.event.addListener(Z,"rightclick",c)),n&&M(google.maps.event.addListener(Z,"click",n)),u&&N(google.maps.event.addListener(Z,"addfeature",u)),d&&H(google.maps.event.addListener(Z,"removefeature",d)),f&&z(google.maps.event.addListener(Z,"removeproperty",f)),h&&K(google.maps.event.addListener(Z,"setgeometry",h)),p&&ne(google.maps.event.addListener(Z,"setproperty",p)),S(Z),m&&m(Z)}return()=>{x&&(w!==null&&google.maps.event.removeListener(w),T!==null&&google.maps.event.removeListener(T),I!==null&&google.maps.event.removeListener(I),L!==null&&google.maps.event.removeListener(L),D!==null&&google.maps.event.removeListener(D),$!==null&&google.maps.event.removeListener($),C!==null&&google.maps.event.removeListener(C),k!==null&&google.maps.event.removeListener(k),B!==null&&google.maps.event.removeListener(B),V!==null&&google.maps.event.removeListener(V),W!==null&&google.maps.event.removeListener(W),G!==null&&google.maps.event.removeListener(G),Q!==null&&google.maps.event.removeListener(Q),g&&g(x),x.setMap(null))}},[]),null}v.memo(m2e);class g2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{data:null}),J(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(vS(vS({},this.props.options),{},{map:this.context}));this.registeredEvents=Ge({updaterMap:uF,eventMap:cF,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:uF,eventMap:cF,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Ke(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}J(g2e,"contextType",Ve);function dF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dF(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var hF={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},pF={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class v2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{kmlLayer:null}),J(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(fF(fF({},this.props.options),{},{map:this.context}));this.registeredEvents=Ge({updaterMap:pF,eventMap:hF,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:pF,eventMap:hF,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Ke(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}J(v2e,"contextType",Ve);function aJ(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function y2e(t,e){return new e(t.lat,t.lng)}function x2e(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function b2e(t,e,n){return t instanceof e?t:n(t,e)}function S2e(t,e,n){return t instanceof e?t:n(t,e)}function w2e(t,e,n){var r=t&&t.fromLatLngToDivPixel(n.getNorthEast()),i=t&&t.fromLatLngToDivPixel(n.getSouthWest());return r&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(r.y+e.y,"px"),width:"".concat(r.x-i.x-e.x,"px"),height:"".concat(i.y-r.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function E2e(t,e,n){var r=t&&t.fromLatLngToDivPixel(n);if(r){var{x:i,y:s}=r;return{left:"".concat(i+e.x,"px"),top:"".concat(s+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function lJ(t,e,n,r){return n!==void 0?w2e(t,e,S2e(n,google.maps.LatLngBounds,x2e)):E2e(t,e,b2e(r,google.maps.LatLng,y2e))}function _2e(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function mF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mF(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C2e(t,e,n,r,i){class s extends google.maps.OverlayView{constructor(a,l,c,u){super(),this.container=a,this.pane=l,this.position=c,this.bounds=u}onAdd(){var a,l=(a=this.getPanes())===null||a===void 0?void 0:a[this.pane];l==null||l.appendChild(this.container)}draw(){var a=this.getProjection(),l=T2e({},this.container?aJ(this.container,i):{x:0,y:0}),c=lJ(a,l,this.bounds,this.position);for(var[u,d]of Object.entries(c))this.container.style[u]=d}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new s(t,e,n,r)}function gF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gF(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vF(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function yF(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function P2e(t){var{position:e,bounds:n,mapPaneName:r,zIndex:i,onLoad:s,onUnmount:o,getPixelPositionOffset:a,children:l}=t,c=v.useContext(Ve),u=v.useMemo(()=>{var f=document.createElement("div");return f.style.position="absolute",f},[]),d=v.useMemo(()=>C2e(u,r,e,n,a),[u,r,e,n]);return v.useEffect(()=>(s==null||s(d),d==null||d.setMap(c),()=>{o==null||o(d),d==null||d.setMap(null)}),[c,d]),v.useEffect(()=>{u.style.zIndex="".concat(i)},[i,u]),Yr.createPortal(l,u)}v.memo(P2e);class ep extends v.PureComponent{constructor(e){super(e),J(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),J(this,"updatePane",()=>{var r=this.props.mapPaneName,i=this.overlayView.getPanes();kn(!!r,"OverlayView requires props.mapPaneName but got %s",r),i?this.setState({paneEl:i[r]}):this.setState({paneEl:null})}),J(this,"onAdd",()=>{var r,i;this.updatePane(),(r=(i=this.props).onLoad)===null||r===void 0||r.call(i,this.overlayView)}),J(this,"onPositionElement",()=>{var r=this.overlayView.getProjection(),i=k2e({x:0,y:0},this.containerRef.current?aJ(this.containerRef.current,this.props.getPixelPositionOffset):{}),s=lJ(r,i,this.props.bounds,this.props.position);if(!_2e(s,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var o,a,l,c;this.setState({containerStyle:{top:(o=s.top)!==null&&o!==void 0?o:0,left:(a=s.left)!==null&&a!==void 0?a:0,width:(l=s.width)!==null&&l!==void 0?l:0,height:(c=s.height)!==null&&c!==void 0?c:0,position:"absolute"}})}}),J(this,"draw",()=>{this.onPositionElement()}),J(this,"onRemove",()=>{var r,i;this.setState(()=>({paneEl:null})),(r=(i=this.props).onUnmount)===null||r===void 0||r.call(i,this.overlayView)}),this.containerRef=v.createRef();var n=new google.maps.OverlayView;n.onAdd=this.onAdd,n.draw=this.draw,n.onRemove=this.onRemove,this.overlayView=n}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var n=vF(e.position),r=vF(this.props.position),i=yF(e.bounds),s=yF(this.props.bounds);(n!==r||i!==s)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?Yr.createPortal(b.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:v.Children.only(this.props.children)}),e):null}}J(ep,"FLOAT_PANE","floatPane");J(ep,"MAP_PANE","mapPane");J(ep,"MARKER_LAYER","markerLayer");J(ep,"OVERLAY_LAYER","overlayLayer");J(ep,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");J(ep,"contextType",Ve);function I2e(){}function xF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xF(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var SF={onDblClick:"dblclick",onClick:"click"},wF={opacity(t,e){t.setOpacity(e)}};function A2e(t){var{url:e,bounds:n,options:r,visible:i}=t,s=v.useContext(Ve),o=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),a=v.useMemo(()=>new google.maps.GroundOverlay(e,o,r),[]);return v.useEffect(()=>{a!==null&&a.setMap(s)},[s]),v.useEffect(()=>{typeof e<"u"&&a!==null&&(a.set("url",e),a.setMap(s))},[a,e]),v.useEffect(()=>{typeof i<"u"&&a!==null&&a.setOpacity(i?1:0)},[a,i]),v.useEffect(()=>{var l=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));typeof n<"u"&&a!==null&&(a.set("bounds",l),a.setMap(s))},[a,n]),null}v.memo(A2e);class cJ extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{groundOverlay:null}),J(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){kn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,bF(bF({},this.props.options),{},{map:this.context}));this.registeredEvents=Ge({updaterMap:wF,eventMap:SF,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:wF,eventMap:SF,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}J(cJ,"defaultProps",{onLoad:I2e});J(cJ,"contextType",Ve);function EF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EF(Object(n),!0).forEach(function(r){J(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EF(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var _F={},TF={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function L2e(t){var{data:e,onLoad:n,onUnmount:r,options:i}=t,s=v.useContext(Ve),[o,a]=v.useState(null);return v.useEffect(()=>{google.maps.visualization||kn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),v.useEffect(()=>{kn(!!e,"data property is required in HeatmapLayer %s",e)},[e]),v.useEffect(()=>{o!==null&&o.setMap(s)},[s]),v.useEffect(()=>{i&&o!==null&&o.setOptions(i)},[o,i]),v.useEffect(()=>{var l=new google.maps.visualization.HeatmapLayer(yS(yS({},i),{},{data:e,map:s}));return a(l),n&&n(l),()=>{o!==null&&(r&&r(o),o.setMap(null))}},[]),null}v.memo(L2e);class R2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{heatmapLayer:null}),J(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){kn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),kn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(yS(yS({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Ge({updaterMap:TF,eventMap:_F,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:TF,eventMap:_F,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Ke(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}J(R2e,"contextType",Ve);var CF={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},kF={register(t,e,n){t.registerPanoProvider(e,n)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class O2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{streetViewPanorama:null}),J(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,n,r=(e=(n=this.context)===null||n===void 0?void 0:n.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=Ge({updaterMap:kF,eventMap:CF,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({streetViewPanorama:r}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:kF,eventMap:CF,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Ke(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}J(O2e,"contextType",Ve);class D2e extends v.PureComponent{constructor(){super(...arguments),J(this,"state",{streetViewService:null}),J(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}J(D2e,"contextType",Ve);var PF={onDirectionsChanged:"directions_changed"},IF={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class M2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"state",{directionsRenderer:null}),J(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Ge({updaterMap:IF,eventMap:PF,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:IF,eventMap:PF,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Ke(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}J(M2e,"contextType",Ve);var AF={onPlacesChanged:"places_changed"},LF={bounds(t,e){t.setBounds(e)}};class $2e extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"containerElement",v.createRef()),J(this,"state",{searchBox:null}),J(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(kn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var n=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Ge({updaterMap:LF,eventMap:AF,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{searchBox:n}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:LF,eventMap:AF,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Ke(this.registeredEvents))}render(){return b.jsx("div",{ref:this.containerElement,children:v.Children.only(this.props.children)})}}J($2e,"contextType",Ve);var RF={onPlaceChanged:"place_changed"},OF={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class uJ extends v.PureComponent{constructor(){super(...arguments),J(this,"registeredEvents",[]),J(this,"containerElement",v.createRef()),J(this,"state",{autocomplete:null}),J(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;kn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var n=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(n){var r=new google.maps.places.Autocomplete(n,this.props.options);this.registeredEvents=Ge({updaterMap:OF,eventMap:RF,prevProps:{},nextProps:this.props,instance:r}),this.setState(()=>({autocomplete:r}),this.setAutocompleteCallback)}}componentDidUpdate(e){Ke(this.registeredEvents),this.registeredEvents=Ge({updaterMap:OF,eventMap:RF,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Ke(this.registeredEvents)}render(){return b.jsx("div",{ref:this.containerElement,className:this.props.className,children:v.Children.only(this.props.children)})}}J(uJ,"defaultProps",{className:""});J(uJ,"contextType",Ve);const Hl={background:"#FFFFFF",accent:"#0C5B84",secondaryAccent:"#90CAF9"},N2e={width:"100%",height:"100%"},F2e=U.div`
  width: ${t=>t.open?"25%":"0"};
  overflow-x: hidden;
  padding: ${t=>t.open?"15px":"0"};
  border-right: 1px solid ${Hl.secondaryAccent};
  display: flex;
  flex-direction: column;
  align-items: center;
  box-sizing: border-box;
  transition: 0.3s;

  @media (max-width: 768px) {
    width: ${t=>t.open?"70%":"0"};
  }
`,j2e=U.ul`
  width: 70%;
  height: 100vh;
  overflow-y: scroll;
  padding: 15px;
  list-style: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-sizing: border-box;
  overflow-x: hidden;
`,B2e=U.li`
  cursor: pointer;
  width: 90%;
  padding: 10px;
  margin: 0 auto;
  margin-bottom: 10px;
  border: 1px solid ${Hl.secondaryAccent};
  border-radius: 5px;
  // text-align: left;
  display: flex;
  flex-direction: column;
  // flex-wrap: wrap;
  // justify-content: space-between;
  align-items: flex-start;
  font-size: 0.8rem;

  @media (max-width: 768px) {
    width: 100%;
  }
`,U2e=U.div`
display: flex;
flex-direction: column;
word-wrap: break-word;
oveflow: hidden;
max-width: 100%;

& > p {
  margin: 5px 0;
}

span {
  display: block;
  margin-bottom: 5px;
  font-size: 0.9rem;
  color: ${Hl.accent};
}
`,V2e=U.div`
  flex: 2;
`;U.div`
  border-radius: 5px;
  padding: 10px;
  max-width: 200px;
  overflow: hidden;
  color: ${Hl.accent};

  h4 {
    margin: 0;
    padding: 5px 0;
    font-size: 1rem;
    color: ${Hl.accent};
  }

  p {
    color: black;
    margin: 5px 0;
    font-size: 0.8rem;
  }

  a {
    text-decoration: none;
    &:hover {
      text-decoration: underline;
    }
  }
`;function z2e({storesData:t}){const[e,n]=v.useState(null),[r,i]=v.useState(""),[s,o]=v.useState([]),[a,l]=v.useState(!0),[c,u]=v.useState(null),[d,f]=v.useState(!1),h=()=>{f(window.innerWidth<=768)};v.useEffect(()=>(g(),h(),window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}),[]),v.useEffect(()=>{d&&l(!1)},[d]);const p=t.Database.map(x=>{var S,w;return{name:x.CompanyName,location:{lat:(S=x.geometry)==null?void 0:S.coordinates[1],lng:(w=x.geometry)==null?void 0:w.coordinates[0]},website:x.Website,email:x.Email,address:x.Address,city:x.City,states:x.States,zipCode:x["Zip Code"]}}),m={lat:27.6648,lng:-81.5158};v.useEffect(()=>{if(r.trim()==="")o(p);else{const x=p.filter(S=>S.name.toLowerCase().includes(r.toLowerCase().trim()));o(x)}},[r]);const g=async()=>u(await BZ.getAPI()||null),y={styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]};return b.jsxs("div",{style:{display:"flex",width:"100vw",height:"100vh",boxSizing:"border-box",background:Hl.background},children:[b.jsx("button",{onClick:()=>l(!a),style:{backgroundColor:Hl.accent,color:"white",border:"none",borderRadius:"5px",padding:"10px",position:"fixed",bottom:"15px",left:"15px",transform:"translateY(-50%)",zIndex:"100"},children:a?b.jsx(jt,{icon:zQ}):b.jsx(jt,{icon:wD})}),b.jsxs(F2e,{open:a,children:[b.jsx("input",{type:"text",placeholder:"Search stores...",onChange:x=>i(x.target.value),style:{width:"80%",padding:"10px",borderRadius:"5px",border:`2px solid ${Hl.accent}`,outline:"none",marginBottom:"20px"}}),b.jsx(j2e,{children:s.length>0?s.map((x,S)=>b.jsx(B2e,{onClick:()=>n(x),children:b.jsxs(U2e,{children:[b.jsx("h4",{children:x.name}),x.website&&b.jsxs("p",{children:[b.jsx("span",{children:"Website:"})," ",x.website]}),x.address&&b.jsxs("p",{children:[b.jsx("span",{children:"Address:"})," ",x.address,", ",x.city,", ",x.states," ",x.zipCode]}),x.email&&b.jsxs("p",{children:[b.jsx("span",{children:"Email:"})," ",x.email]})]})},S)):b.jsx("p",{children:"No Matches Found"})})]}),c?b.jsx(V2e,{children:b.jsx(tJ,{googleMapsApiKey:c,children:b.jsx(oCe,{mapContainerStyle:N2e,center:m,zoom:7,options:y})})}):b.jsx("div",{children:"KEY INVALID"})]})}const mv=U.button`
  height: ${({theme:t})=>t.formHeightMd};
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 0px 24px;
  border-radius: ${({theme:t})=>t.borderRadius.default};
  font-size: 14px;
  font-weight: 600;
  width: ${t=>t.fullWidth?"100%":"auto"};
`,on=U(mv)`
  background: ${({theme:t})=>t.colors.primary500};
  transition: 0.1s linear all; 
  color: white;
  &:hover {
    background: ${({theme:t})=>t.colors.primary600};
  }
  &:disabled {
    background: ${({theme:t})=>t.colors.ui200};
    color: ${({theme:t})=>t.colors.ui500};
  }
`,Hi=U(mv)`
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  color: ${({theme:t})=>t.colors.primary500};
  background: white;
  height: ${({theme:t})=>t.formHeightMd};
  &:hover {
    background: ${({theme:t})=>t.colors.ui100};
  }
`,hA=U(mv)`
  text-decoration: underline;
  color: ${({theme:t})=>t.colors.primary500};
  padding: 0px;
  background: white;
  svg {
    color: ${({theme:t})=>t.colors.ui600};
    font-size: 12px;
  }
`,H2e=U(mv)`
  height: 40px;
  width: 40px;
  font-size: 16px;
  border-radius: ${({theme:t})=>t.borderRadius.default};
  background: ${({theme:t})=>t.colors.ui50};
  color: ${({theme:t})=>t.colors.ui800};
  border: 1px solid ${({theme:t})=>t.colors.ui200};

  padding: 0px;
`,pA=U(mv)`
  background: ${({theme:t})=>t.colors.red500};
`,W2e=U.div`
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-top: 4px solid ${({theme:t})=>t.colors.primary500};
  border-radius: 50%;
  width: 40px;
  height: 40px;
  margin: auto;
  animation: spin 0.8s linear infinite;

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
`,G2e=U.div`
display: flex;
flex-direction: column;
align-items: center;
gap:4px;
`,K2e=U.div`
color: ${({theme:t})=>t.colors.ui600};
font-weight: 600; 
font-size: 12px;

`;function dJ({text:t="Loading..."}){return b.jsxs(G2e,{children:[b.jsx(W2e,{}),b.jsx(K2e,{children:t})]})}const q2e={hidden:{opacity:0,y:-50},visible:{opacity:1,y:0,transition:{duration:.5}}},Y2e=async t=>{try{const{device:e}=await UZ.getDeviceDetails(t);return console.log("DEVICE DETTTAAAAAAAAAls",e),e}catch(e){return e}},Q2e=({deviceID:t,setRefFocus:e})=>{const{data:n,status:r}=Jhe({queryFn:()=>Y2e(t),queryKey:[t]}),i=()=>e({deviceID:t});if(t>0)return b.jsxs(X2e,{statusColor:"green",variants:q2e,children:[r==="error"&&b.jsxs("div",{className:"error",children:["Couldn't fetch data for device #",t]}),r==="loading"?b.jsxs("div",{className:"loading-spinner",children:["Loading.. ",b.jsx(dJ,{})]}):n?b.jsxs(b.Fragment,{children:[b.jsx("h5",{children:n.name}),b.jsxs("div",{className:"number-box",children:["#",t]}),b.jsx(Hi,{onClick:i,children:"View details"})]}):b.jsxs("div",{className:"error",children:["Couldn't fetch data for device #",t]})]})},X2e=U(ue.div)`
  position: relative;
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  border-radius: ${({theme:t})=>t.borderRadius.default};
  padding: 24px 24px;
  width: 100%;
  text-align: left;
  background: ${({theme:t})=>t.colors.ui50};
  height: 100%;
  h5 {
    font-size: 1rem;
    font-weight: 800;
    margin-bottom: 8px;
    color: ${({theme:t})=>t.colors.ui800};
  }
  h6 {
    font-size: 1rem;
    font-weight: 400;
    margin-bottom: 0;
  }

  i {
    font-size: 35px;
    margin-bottom: 15px;
    color: ${({statusColor:t})=>t};
  }

  .number-box {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 16px;
    color: ${({theme:t})=>t.colors.ui700};
  }

  .error {
    color: ${({theme:t})=>t.colors.red500};
  }

  .loading-spinner {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  @media screen and (max-width: 991px) {
  }
  @media screen and (max-width: 769px) {
    // width: 100%;
  }
`;/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function gv(t){return t+.5|0}const wl=(t,e,n)=>Math.max(Math.min(t,n),e);function vm(t){return wl(gv(t*2.55),0,255)}function Wl(t){return wl(gv(t*255),0,255)}function Yo(t){return wl(gv(t/2.55)/100,0,1)}function DF(t){return wl(gv(t*100),0,100)}const Ti={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},mA=[..."0123456789ABCDEF"],Z2e=t=>mA[t&15],J2e=t=>mA[(t&240)>>4]+mA[t&15],Cy=t=>(t&240)>>4===(t&15),eke=t=>Cy(t.r)&&Cy(t.g)&&Cy(t.b)&&Cy(t.a);function tke(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ti[t[1]]*17,g:255&Ti[t[2]]*17,b:255&Ti[t[3]]*17,a:e===5?Ti[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ti[t[1]]<<4|Ti[t[2]],g:Ti[t[3]]<<4|Ti[t[4]],b:Ti[t[5]]<<4|Ti[t[6]],a:e===9?Ti[t[7]]<<4|Ti[t[8]]:255})),n}const nke=(t,e)=>t<255?e(t):"";function rke(t){var e=eke(t)?Z2e:J2e;return t?"#"+e(t.r)+e(t.g)+e(t.b)+nke(t.a,e):void 0}const ike=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function fJ(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function ske(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function oke(t,e,n){const r=fJ(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function ake(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function r3(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=ake(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function i3(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Wl)}function s3(t,e,n){return i3(fJ,t,e,n)}function lke(t,e,n){return i3(oke,t,e,n)}function cke(t,e,n){return i3(ske,t,e,n)}function hJ(t){return(t%360+360)%360}function uke(t){const e=ike.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?vm(+e[5]):Wl(+e[5]));const i=hJ(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=lke(i,s,o):e[1]==="hsv"?r=cke(i,s,o):r=s3(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function dke(t,e){var n=r3(t);n[0]=hJ(n[0]+e),n=s3(n),t.r=n[0],t.g=n[1],t.b=n[2]}function fke(t){if(!t)return;const e=r3(t),n=e[0],r=DF(e[1]),i=DF(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Yo(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const MF={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$F={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function hke(){const t={},e=Object.keys($F),n=Object.keys(MF);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,MF[s]);s=parseInt($F[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let ky;function pke(t){ky||(ky=hke(),ky.transparent=[0,0,0,0]);const e=ky[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const mke=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function gke(t){const e=mke.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?vm(o):wl(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?vm(r):wl(r,0,255)),i=255&(e[4]?vm(i):wl(i,0,255)),s=255&(e[6]?vm(s):wl(s,0,255)),{r,g:i,b:s,a:n}}}function vke(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Yo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const mC=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,yd=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function yke(t,e,n){const r=yd(Yo(t.r)),i=yd(Yo(t.g)),s=yd(Yo(t.b));return{r:Wl(mC(r+n*(yd(Yo(e.r))-r))),g:Wl(mC(i+n*(yd(Yo(e.g))-i))),b:Wl(mC(s+n*(yd(Yo(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Py(t,e,n){if(t){let r=r3(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=s3(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function pJ(t,e){return t&&Object.assign(e||{},t)}function NF(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Wl(t[3]))):(e=pJ(t,{r:0,g:0,b:0,a:1}),e.a=Wl(e.a)),e}function xke(t){return t.charAt(0)==="r"?gke(t):uke(t)}class Xg{constructor(e){if(e instanceof Xg)return e;const n=typeof e;let r;n==="object"?r=NF(e):n==="string"&&(r=tke(e)||pke(e)||xke(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=pJ(this._rgb);return e&&(e.a=Yo(e.a)),e}set rgb(e){this._rgb=NF(e)}rgbString(){return this._valid?vke(this._rgb):void 0}hexString(){return this._valid?rke(this._rgb):void 0}hslString(){return this._valid?fke(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=yke(this._rgb,e._rgb,n)),this}clone(){return new Xg(this.rgb)}alpha(e){return this._rgb.a=Wl(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=gv(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Py(this._rgb,2,e),this}darken(e){return Py(this._rgb,2,-e),this}saturate(e){return Py(this._rgb,1,e),this}desaturate(e){return Py(this._rgb,1,-e),this}rotate(e){return dke(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Do(){}const bke=(()=>{let t=0;return()=>t++})();function nt(t){return t==null}function Rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ye(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function rn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ni(t,e){return rn(t)?t:e}function Ue(t,e){return typeof t>"u"?e:t}const Ske=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,mJ=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function St(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ut(t,e,n,r){let i,s,o;if(Rt(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(Ye(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function xS(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function bS(t){if(Rt(t))return t.map(bS);if(Ye(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=bS(t[n[i]]);return e}return t}function gJ(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function wke(t,e,n,r){if(!gJ(t))return;const i=e[t],s=n[t];Ye(i)&&Ye(s)?Zg(i,s,r):e[t]=bS(s)}function Zg(t,e,n){const r=Rt(e)?e:[e],i=r.length;if(!Ye(t))return t;n=n||{};const s=n.merger||wke;let o;for(let a=0;a<i;++a){if(o=r[a],!Ye(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Jm(t,e){return Zg(t,e,{merger:Eke})}function Eke(t,e,n){if(!gJ(t))return;const r=e[t],i=n[t];Ye(r)&&Ye(i)?Jm(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=bS(i))}const FF={"":t=>t,x:t=>t.x,y:t=>t.y};function _ke(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Tke(t){const e=_ke(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Pu(t,e){return(FF[e]||(FF[e]=Tke(e)))(t)}function o3(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Jg=t=>typeof t<"u",sc=t=>typeof t=="function",jF=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Cke(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const st=Math.PI,Mt=2*st,kke=Mt+st,SS=Number.POSITIVE_INFINITY,Pke=st/180,cn=st/2,Ec=st/4,BF=st*2/3,El=Math.log10,yo=Math.sign;function eg(t,e,n){return Math.abs(t-e)<n}function UF(t){const e=Math.round(t);t=eg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(El(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Ike(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Ake(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function e0(t){return!Ake(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Lke(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function vJ(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ao(t){return t*(st/180)}function a3(t){return t*(180/st)}function VF(t){if(!rn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function yJ(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*st&&(s+=Mt),{angle:s,distance:i}}function gA(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Rke(t,e){return(t-e+kke)%Mt-st}function Jn(t){return(t%Mt+Mt)%Mt}function t0(t,e,n,r){const i=Jn(t),s=Jn(e),o=Jn(n),a=Jn(s-i),l=Jn(o-i),c=Jn(i-s),u=Jn(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function or(t,e,n){return Math.max(e,Math.min(n,t))}function Oke(t){return or(t,-32768,32767)}function ta(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function l3(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const iu=(t,e,n,r)=>l3(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),Dke=(t,e,n)=>l3(t,n,r=>t[r][e]>=n);function Mke(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const xJ=["push","pop","shift","splice","unshift"];function $ke(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),xJ.forEach(n=>{const r="_onData"+o3(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function zF(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(xJ.forEach(s=>{delete t[s]}),delete t._chartjs)}function bJ(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const SJ=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function wJ(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,SJ.call(window,()=>{r=!1,t.apply(e,n)}))}}function Nke(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const c3=t=>t==="start"?"left":t==="end"?"right":"center",Xn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Fke=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function jke(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:f,minDefined:h,maxDefined:p}=o.getUserBounds();if(h){if(i=Math.min(iu(l,u,d).lo,n?r:iu(e,u,o.getPixelForValue(d)).lo),c){const m=l.slice(0,i+1).reverse().findIndex(g=>!nt(g[a.axis]));i-=Math.max(0,m)}i=or(i,0,r-1)}if(p){let m=Math.max(iu(l,o.axis,f,!0).hi+1,n?0:iu(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const g=l.slice(m-1).findIndex(y=>!nt(y[a.axis]));m+=Math.max(0,g)}s=or(m,i,r)-i}else s=r-i}return{start:i,count:s}}function Bke(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Iy=t=>t===0||t===1,HF=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Mt/n)),WF=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Mt/n)+1,tg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*cn)+1,easeOutSine:t=>Math.sin(t*cn),easeInOutSine:t=>-.5*(Math.cos(st*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Iy(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Iy(t)?t:HF(t,.075,.3),easeOutElastic:t=>Iy(t)?t:WF(t,.075,.3),easeInOutElastic(t){return Iy(t)?t:t<.5?.5*HF(t*2,.1125,.45):.5+.5*WF(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?tg.easeInBounce(t*2)*.5:tg.easeOutBounce(t*2-1)*.5+.5};function u3(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function GF(t){return u3(t)?t:new Xg(t)}function gC(t){return u3(t)?t:new Xg(t).saturate(.5).darken(.1).hexString()}const Uke=["x","y","borderWidth","radius","tension"],Vke=["color","borderColor","backgroundColor"];function zke(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Vke},numbers:{type:"number",properties:Uke}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Hke(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const KF=new Map;function Wke(t,e){e=e||{};const n=t+JSON.stringify(e);let r=KF.get(n);return r||(r=new Intl.NumberFormat(t,e),KF.set(n,r)),r}function UE(t,e,n){return Wke(e,n).format(t)}const EJ={values(t){return Rt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=Gke(t,n)}const o=El(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),UE(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(El(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?EJ.numeric.call(this,t,e,n):""}};function Gke(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var VE={formatters:EJ};function Kke(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:VE.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Iu=Object.create(null),vA=Object.create(null);function ng(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function vC(t,e,n){return typeof e=="string"?Zg(ng(t,e),n):Zg(ng(t,""),e)}class qke{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>gC(i.backgroundColor),this.hoverBorderColor=(r,i)=>gC(i.borderColor),this.hoverColor=(r,i)=>gC(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return vC(this,e,n)}get(e){return ng(this,e)}describe(e,n){return vC(vA,e,n)}override(e,n){return vC(Iu,e,n)}route(e,n,r,i){const s=ng(this,e),o=ng(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ye(l)?Object.assign({},c,l):Ue(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var sn=new qke({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[zke,Hke,Kke]);function Yke(t){return!t||nt(t.size)||nt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function wS(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Qke(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&!Rt(d))o=wS(t,i,s,o,d);else if(Rt(d))for(c=0,u=d.length;c<u;c++)f=d[c],f!=null&&!Rt(f)&&(o=wS(t,i,s,o,f));t.restore();const h=s.length/2;if(h>n.length){for(l=0;l<h;l++)delete i[s[l]];s.splice(0,h)}return o}function _c(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function qF(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function yA(t,e,n,r){_J(t,e,n,r,null)}function _J(t,e,n,r,i){let s,o,a,l,c,u,d,f;const h=e.pointStyle,p=e.rotation,m=e.radius;let g=(p||0)*Pke;if(h&&typeof h=="object"&&(s=h.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(g),t.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),h){default:i?t.ellipse(n,r,i/2,m,0,0,Mt):t.arc(n,r,m,0,Mt),t.closePath();break;case"triangle":u=i?i/2:m,t.moveTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=BF,t.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),g+=BF,t.lineTo(n+Math.sin(g)*u,r-Math.cos(g)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(g+Ec)*l,d=Math.cos(g+Ec)*(i?i/2-c:l),a=Math.sin(g+Ec)*l,f=Math.sin(g+Ec)*(i?i/2-c:l),t.arc(n-d,r-a,c,g-st,g-cn),t.arc(n+f,r-o,c,g-cn,g),t.arc(n+d,r+a,c,g,g+cn),t.arc(n-f,r+o,c,g+cn,g+st),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}g+=Ec;case"rectRot":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,f=Math.sin(g)*(i?i/2:m),t.moveTo(n-d,r-a),t.lineTo(n+f,r-o),t.lineTo(n+d,r+a),t.lineTo(n-f,r+o),t.closePath();break;case"crossRot":g+=Ec;case"cross":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,f=Math.sin(g)*(i?i/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"star":d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,f=Math.sin(g)*(i?i/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o),g+=Ec,d=Math.cos(g)*(i?i/2:m),o=Math.cos(g)*m,a=Math.sin(g)*m,f=Math.sin(g)*(i?i/2:m),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+f,r-o),t.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(g)*m,a=Math.sin(g)*m,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(g)*(i?i/2:m),r+Math.sin(g)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function na(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function zE(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function HE(t){t.restore()}function Xke(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Zke(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Jke(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),nt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function ePe(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function tPe(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Au(t,e,n,r,i,s={}){const o=Rt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,Jke(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&tPe(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),nt(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),ePe(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function n0(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*st,st,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,st,cn,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,cn,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-cn,!0),t.lineTo(n+o.topLeft,r)}const nPe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,rPe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function iPe(t,e){const n=(""+t).match(nPe);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const sPe=t=>+t||0;function d3(t,e){const n={},r=Ye(e),i=r?Object.keys(e):e,s=Ye(t)?r?o=>Ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=sPe(s(o));return n}function TJ(t){return d3(t,{top:"y",right:"x",bottom:"y",left:"x"})}function du(t){return d3(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ur(t){const e=TJ(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Cn(t,e){t=t||{},e=e||sn.font;let n=Ue(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Ue(t.style,e.style);r&&!(""+r).match(rPe)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ue(t.family,e.family),lineHeight:iPe(Ue(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Ue(t.weight,e.weight),string:""};return i.string=Yke(i),i}function Ay(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&Rt(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function oPe(t,e,n){const{min:r,max:i}=t,s=mJ(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function vc(t,e){return Object.assign(Object.create(t),e)}function f3(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=IJ("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>f3([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return kJ(a,l,()=>pPe(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return QF(a).includes(l)},ownKeys(a){return QF(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function xh(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:CJ(t,r),setContext:s=>xh(t,s,n,r),override:s=>xh(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return kJ(s,o,()=>lPe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function CJ(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:sc(n)?n:()=>n,isIndexable:sc(r)?r:()=>r}}const aPe=(t,e)=>t?t+o3(e):e,h3=(t,e)=>Ye(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function kJ(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function lPe(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return sc(a)&&o.isScriptable(e)&&(a=cPe(e,a,t,n)),Rt(a)&&a.length&&(a=uPe(e,a,t,o.isIndexable)),h3(e,a)&&(a=xh(a,i,s&&s[e],o)),a}function cPe(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),h3(t,l)&&(l=p3(i._scopes,i,t,l)),l}function uPe(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ye(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=p3(c,i,t,u);e.push(xh(d,s,o&&o[t],a))}}return e}function PJ(t,e,n){return sc(t)?t(e,n):t}const dPe=(t,e)=>t===!0?e:typeof t=="string"?Pu(e,t):void 0;function fPe(t,e,n,r,i){for(const s of e){const o=dPe(n,s);if(o){t.add(o);const a=PJ(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function p3(t,e,n,r){const i=e._rootScopes,s=PJ(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=YF(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=YF(a,o,s,l,r),l===null)?!1:f3(Array.from(a),[""],i,s,()=>hPe(e,n,r))}function YF(t,e,n,r,i){for(;n;)n=fPe(t,e,n,r,i);return n}function hPe(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Rt(i)&&Ye(n)?n:i||{}}function pPe(t,e,n,r){let i;for(const s of e)if(i=IJ(aPe(s,t),n),typeof i<"u")return h3(t,i)?p3(n,r,t,i):i}function IJ(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function QF(t){let e=t._keys;return e||(e=t._keys=mPe(t._scopes)),e}function mPe(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const gPe=Number.EPSILON||1e-14,bh=(t,e)=>e<t.length&&!t[e].skip&&t[e],AJ=t=>t==="x"?"y":"x";function vPe(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=gA(s,i),l=gA(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,f=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+f*(o.x-i.x),y:s.y+f*(o.y-i.y)}}}function yPe(t,e,n){const r=t.length;let i,s,o,a,l,c=bh(t,0);for(let u=0;u<r-1;++u)if(l=c,c=bh(t,u+1),!(!l||!c)){if(eg(e[u],0,gPe)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function xPe(t,e,n="x"){const r=AJ(n),i=t.length;let s,o,a,l=bh(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=bh(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function bPe(t,e="x"){const n=AJ(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=bh(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=bh(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?yo(i[o-1])!==yo(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}yPe(t,i,s),xPe(t,s,e)}function Ly(t,e,n){return Math.max(Math.min(t,n),e)}function SPe(t,e){let n,r,i,s,o,a=na(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&na(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Ly(i.cp1x,e.left,e.right),i.cp1y=Ly(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Ly(i.cp2x,e.left,e.right),i.cp2y=Ly(i.cp2y,e.top,e.bottom)))}function wPe(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")bPe(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=vPe(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&SPe(t,n)}function m3(){return typeof window<"u"&&typeof document<"u"}function g3(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ES(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const WE=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function EPe(t,e){return WE(t).getPropertyValue(e)}const _Pe=["top","right","bottom","left"];function fu(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=_Pe[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const TPe=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function CPe(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(TPe(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Uc(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=WE(n),s=i.boxSizing==="border-box",o=fu(i,"padding"),a=fu(i,"border","width"),{x:l,y:c,box:u}=CPe(t,n),d=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:h,height:p}=e;return s&&(h-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/h*n.width/r),y:Math.round((c-f)/p*n.height/r)}}function kPe(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&g3(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=WE(s),l=fu(a,"border","width"),c=fu(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=ES(a.maxWidth,s,"clientWidth"),i=ES(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||SS,maxHeight:i||SS}}const _l=t=>Math.round(t*10)/10;function PPe(t,e,n,r){const i=WE(t),s=fu(i,"margin"),o=ES(i.maxWidth,t,"clientWidth")||SS,a=ES(i.maxHeight,t,"clientHeight")||SS,l=kPe(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const f=fu(i,"border","width"),h=fu(i,"padding");c-=h.width+f.width,u-=h.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=_l(Math.min(c,o,l.maxWidth)),u=_l(Math.min(u,a,l.maxHeight)),c&&!u&&(u=_l(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=_l(Math.floor(u*r))),{width:c,height:u}}function XF(t,e,n){const r=e||1,i=_l(t.height*r),s=_l(t.width*r);t.height=_l(t.height),t.width=_l(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const IPe=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};m3()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ZF(t,e){const n=EPe(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Vc(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function APe(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function LPe(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Vc(t,i,n),a=Vc(i,s,n),l=Vc(s,e,n),c=Vc(o,a,n),u=Vc(a,l,n);return Vc(c,u,n)}const RPe=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},OPe=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function $f(t,e,n){return t?RPe(e,n):OPe()}function LJ(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function RJ(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function OJ(t){return t==="angle"?{between:t0,compare:Rke,normalize:Jn}:{between:ta,compare:(e,n)=>e-n,normalize:e=>e}}function JF({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function DPe(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=OJ(r),l=e.length;let{start:c,end:u,loop:d}=t,f,h;if(d){for(c+=l,u+=l,f=0,h=l;f<h&&o(a(e[c%l][r]),i,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function DJ(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=OJ(r),{start:u,end:d,loop:f,style:h}=DPe(t,e,n),p=[];let m=!1,g=null,y,x,S;const w=()=>l(i,S,y)&&a(i,S)!==0,E=()=>a(s,y)===0||l(s,S,y),T=()=>m||w(),_=()=>!m||E();for(let I=u,A=u;I<=d;++I)x=e[I%o],!x.skip&&(y=c(x[r]),y!==S&&(m=l(y,i,s),g===null&&T()&&(g=a(y,i)===0?I:A),g!==null&&_()&&(p.push(JF({start:g,end:I,loop:f,count:o,style:h})),g=null),A=I,S=y));return g!==null&&p.push(JF({start:g,end:d,loop:f,count:o,style:h})),p}function MJ(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=DJ(r[i],t.points,e);s.length&&n.push(...s)}return n}function MPe(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function $Pe(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function NPe(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=MPe(n,i,s,r);if(r===!0)return ej(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return ej(t,$Pe(n,o,l,c),n,e)}function ej(t,e,n,r){return!r||!r.setContext||!n?e:FPe(t,e,n,r)}function FPe(t,e,n,r){const i=t._chart.getContext(),s=tj(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,f=d;function h(p,m,g,y){const x=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=x;for(;n[m%l].skip;)m+=x;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:g,style:y}),u=y,d=m%l)}}for(const p of e){d=a?d:p.start;let m=n[d%l],g;for(f=d+1;f<=p.end;f++){const y=n[f%l];g=tj(r.setContext(vc(i,{type:"segment",p0:m,p1:y,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),jPe(g,u)&&h(d,f-1,p.loop,u),m=y,u=g}d<f-1&&h(d,f-1,p.loop,u)}return c}function tj(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function jPe(t,e){if(!e)return!1;const n=[],r=function(i,s){return u3(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ry(t,e,n){return t.options.clip?t[n]:e[n]}function BPe(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ry(n,e,"left"),right:Ry(n,e,"right"),top:Ry(r,e,"top"),bottom:Ry(r,e,"bottom")}:e}function $J(t,e){const n=e._clip;if(n.disabled)return!1;const r=BPe(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class UPe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=SJ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Fo=new UPe;const nj="transparent",VPe={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=GF(t||nj),i=r.valid&&GF(e||nj);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};let zPe=class{constructor(e,n,r,i){const s=n[r];i=Ay([e.to,i,s,e.from]);const o=Ay([e.from,s,i]);this._active=!0,this._fn=e.fn||VPe[e.type||typeof o],this._easing=tg[e.easing]||tg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Ay([e.to,n,i,e.from]),this._from=Ay([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}};class NJ{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ye(e))return;const n=Object.keys(sn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ye(s))return;const o={};for(const a of n)o[a]=s[a];(Rt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=WPe(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&HPe(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const f=r.get(c);if(d)if(f&&d.active()){d.update(f,u,a);continue}else d.cancel();if(!f||!f.duration){e[c]=u;continue}s[c]=d=new zPe(f,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Fo.add(this._chart,r),!0}}function HPe(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function WPe(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function rj(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function GPe(t,e,n){if(n===!1)return!1;const r=rj(t,n),i=rj(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function KPe(t){let e,n,r,i;return Ye(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function FJ(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function ij(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],rn(c)&&(s||e===0||yo(e)===yo(c))&&(e+=c)}return!u&&!r.all?0:e}function qPe(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function yC(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function YPe(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function QPe(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function XPe(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function sj(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function oj(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=YPe(s,o,r),d=e.length;let f;for(let h=0;h<d;++h){const p=e[h],{[l]:m,[c]:g}=p,y=p._stacks||(p._stacks={});f=y[c]=XPe(i,u,m),f[a]=g,f._top=sj(f,o,!0,r.type),f._bottom=sj(f,o,!1,r.type);const x=f._visualValues||(f._visualValues={});x[a]=g}}function xC(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function ZPe(t,e){return vc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function JPe(t,e,n){return vc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Np(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const bC=t=>t==="reset"||t==="none",aj=(t,e)=>e?t:Object.assign({},t),eIe=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:FJ(n,!0),values:null};class hu{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=yC(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Np(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,f,h,p)=>d==="x"?f:d==="r"?p:h,s=n.xAxisID=Ue(r.xAxisID,xC(e,"x")),o=n.yAxisID=Ue(r.yAxisID,xC(e,"y")),a=n.rAxisID=Ue(r.rAxisID,xC(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&zF(this._data,this),e._stacked&&Np(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ye(n)){const i=this._cachedMeta;this._data=qPe(n,i)}else if(r!==n){if(r){zF(r,this);const i=this._cachedMeta;Np(i),i._parsed=[]}n&&Object.isExtensible(n)&&$ke(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=yC(n.vScale,n),n.stack!==r.stack&&(i=!0,Np(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(oj(this,n._parsed),n._stacked=yC(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,f;if(this._parsing===!1)r._parsed=i,r._sorted=!0,f=i;else{Rt(i[e])?f=this.parseArrayData(r,i,e,n):Ye(i[e])?f=this.parseObjectData(r,i,e,n):f=this.parsePrimitiveData(r,i,e,n);const h=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=f[u],l&&(h()&&(l=!1),c=d);r._sorted=l}o&&oj(this,f)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let f,h,p;for(f=0,h=i;f<h;++f)p=f+r,d[f]={[a]:u||s.parse(c[p],p),[l]:o.parse(n[p],p)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,f,h;for(u=0,d=i;u<d;++u)f=u+r,h=n[f],c[u]={x:s.parse(Pu(h,a),f),y:o.parse(Pu(h,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:FJ(i,!0),values:n._stacks[e.axis]._visualValues};return ij(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=ij(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=eIe(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=QPe(a);let f,h;function p(){h=i[f];const m=h[a.axis];return!rn(h[e.axis])||u>m||d<m}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(c,e,h,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(c,e,h,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],rn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=KPe(Ue(this.options.clip,GPe(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=JPe(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=ZPe(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Jg(r);if(a)return aj(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),h=Object.keys(sn.elements[e]),p=()=>this.getContext(r,i,n),m=c.resolveNamedOptions(f,h,p,d);return m.$shared&&(m.$shared=l,s[o]=Object.freeze(aj(m,l))),m}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(f,this.getContext(e,r,n))}const c=new NJ(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||bC(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){bC(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!bC(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Np(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ce(hu,"defaults",{}),ce(hu,"datasetElementType",null),ce(hu,"dataElementType",null);function tIe(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=bJ(r.sort((i,s)=>i-s))}return t._cache.$bar}function nIe(t){const e=t.iScale,n=tIe(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Jg(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function rIe(t,e,n,r){const i=n.barThickness;let s,o;return nt(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function iIe(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function sIe(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function jJ(t,e,n,r){return Rt(t)?sIe(t,e,n,r):e[n.axis]=n.parse(t,r),e}function lj(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,f;for(c=n,u=n+r;c<u;++c)f=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(jJ(f,d,s,c));return l}function SC(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function oIe(t,e,n){return t!==0?yo(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function aIe(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function lIe(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=aIe(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[cj(u,o,a,l)]=!0,i=c)),s[cj(i,o,a,l)]=!0,t.borderSkipped=s}function cj(t,e,n,r){return r?(t=cIe(t,e,n),t=uj(t,n,e)):t=uj(t,e,n),t}function cIe(t,e,n){return t===e?n:t===n?e:t}function uj(t,e,n){return t==="start"?e:t==="end"?n:t}function uIe(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class kx extends hu{parsePrimitiveData(e,n,r,i){return lj(e,n,r,i)}parseArrayData(e,n,r,i){return lj(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let f,h,p,m;for(f=r,h=r+i;f<h;++f)m=n[f],p={},p[s.axis]=s.parse(Pu(m,c),f),d.push(jJ(Pu(m,u),p,o,f));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=SC(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(n,i);for(let h=n;h<n+r;h++){const p=this.getParsed(h),m=s||nt(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),g=this._calculateBarIndexPixels(h,u),y=(p._stacks||{})[a.axis],x={horizontal:c,base:m.base,enableBorderRadius:!y||SC(p._custom)||o===y._top||o===y._bottom,x:c?m.head:g.center,y:c?g.center:m.head,height:c?g.size:Math.abs(m.size),width:c?Math.abs(m.size):g.size};f&&(x.options=d||this.resolveDataElementOptions(h,e[h].active?"active":i));const S=x.options||e[h].options;lIe(x,S,y,o),uIe(x,S,u.ratio),this.updateElement(e[h],h,x,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(h=>h[r.axis]===l),f=d&&d[u.vScale.axis];if(nt(f)||isNaN(f))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[Ue(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||nIe(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=SC(c);let d=l[n.axis],f=0,h=r?this.applyStack(n,l,r):d,p,m;h!==d&&(f=h-d,h=d),u&&(d=c.barStart,h=c.barEnd-c.barStart,d!==0&&yo(d)!==yo(c.barEnd)&&(f=0),f+=d);const g=!nt(s)&&!u?s:f;let y=n.getPixelForValue(g);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(f+h):p=y,m=p-y,Math.abs(m)<o){m=oIe(m,n,a)*o,d===a&&(y-=m/2);const x=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),w=Math.min(x,S),E=Math.max(x,S);y=Math.max(Math.min(y,E),w),p=y+m,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(p)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const x=yo(m)*n.getLineWidthForValue(a)/2;y+=x,m-=x}return{size:m,base:y,head:p,center:p+m/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Ue(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?iIe(e,n,i,u*c):rIe(e,n,i,u*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(Ue(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+h;a=d.start+d.chunk*p+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}ce(kx,"id","bar"),ce(kx,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ce(kx,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function dIe(t,e,n){let r=1,i=1,s=0,o=0;if(e<Mt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),f=Math.sin(l),h=(S,w,E)=>t0(S,a,l,!0)?1:Math.max(w,w*n,E,E*n),p=(S,w,E)=>t0(S,a,l,!0)?-1:Math.min(w,w*n,E,E*n),m=h(0,c,d),g=h(cn,u,f),y=p(st,c,d),x=p(st+cn,u,f);r=(m-y)/2,i=(g-x)/2,s=-(m+y)/2,o=-(g+x)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class ym extends hu{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Ye(r[e])){const{key:l="value"}=this._parsing;s=c=>+Pu(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return ao(this.options.rotation-90)}_getCircumference(){return ao(this.options.circumference)}_getRotationExtents(){let e=Mt,n=-Mt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(Ske(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:p,offsetY:m}=dIe(d,u,l),g=(r.width-o)/f,y=(r.height-o)/h,x=Math.max(Math.min(g,y)/2,0),S=mJ(this.options.radius,x),w=Math.max(S*l,0),E=(S-w)/this._getVisibleDatasetWeightTotal();this.offsetX=p*S,this.offsetY=m*S,i.total=this.calculateTotal(),this.outerRadius=S-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Mt)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=s&&c.animateScale,h=f?0:this.innerRadius,p=f?0:this.outerRadius,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(n,i);let y=this._getRotation(),x;for(x=0;x<n;++x)y+=this._circumference(x,s);for(x=n;x<n+r;++x){const S=this._circumference(x,s),w=e[x],E={x:u+this.offsetX,y:d+this.offsetY,startAngle:y,endAngle:y+S,circumference:S,outerRadius:p,innerRadius:h};g&&(E.options=m||this.resolveDataElementOptions(x,w.active?"active":i)),y+=S,this.updateElement(w,x,E,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Mt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=UE(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Ue(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ce(ym,"id","doughnut"),ce(ym,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ce(ym,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ce(ym,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:i,pointStyle:r,borderRadius:o&&(a||d.borderRadius),index:c}}):[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class Px extends hu{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=jke(n,i,o);this._drawStart=a,this._drawCount=l,Bke(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),f=o.axis,h=a.axis,{spanGaps:p,segment:m}=this.options,g=e0(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||s||i==="none",x=n+r,S=e.length;let w=n>0&&this.getParsed(n-1);for(let E=0;E<S;++E){const T=e[E],_=y?T:{};if(E<n||E>=x){_.skip=!0;continue}const I=this.getParsed(E),A=nt(I[h]),L=_[f]=o.getPixelForValue(I[f],E),j=_[h]=s||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[h],E);_.skip=isNaN(L)||isNaN(j)||A,_.stop=E>0&&Math.abs(I[f]-w[f])>g,m&&(_.parsed=I,_.raw=c.data[E]),d&&(_.options=u||this.resolveDataElementOptions(E,T.active?"active":i)),y||this.updateElement(T,E,_,i),w=I}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ce(Px,"id","line"),ce(Px,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ce(Px,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Tc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class v3{constructor(e){ce(this,"options");this.options=e||{}}static override(e){Object.assign(v3.prototype,e)}init(){}formats(){return Tc()}parse(){return Tc()}format(){return Tc()}add(){return Tc()}diff(){return Tc()}startOf(){return Tc()}endOf(){return Tc()}}var fIe={_date:v3};function hIe(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?Dke:iu;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const f=c(s,e,n-d),h=c(s,e,n+d);return{lo:f.lo,hi:h.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:f}=t,h=f.slice(0,u.lo+1).reverse().findIndex(m=>!nt(m[d.axis]));u.lo-=Math.max(0,h);const p=f.slice(u.hi).findIndex(m=>!nt(m[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:s.length-1}}function vv(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:f}=hIe(s[a],e,o,i);for(let h=d;h<=f;++h){const p=u[h];p.skip||r(p,c,h)}}}function pIe(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function wC(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||vv(t,n,e,function(a,l,c){!i&&!na(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function mIe(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=yJ(o,{x:e.x,y:e.y});t0(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return vv(t,n,e,s),i}function gIe(t,e,n,r,i,s){let o=[];const a=pIe(n);let l=Number.POSITIVE_INFINITY;function c(u,d,f){const h=u.inRange(e.x,e.y,i);if(r&&!h)return;const p=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(p))&&!h)return;const g=a(e,p);g<l?(o=[{element:u,datasetIndex:d,index:f}],l=g):g===l&&o.push({element:u,datasetIndex:d,index:f})}return vv(t,n,e,c),o}function EC(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?mIe(t,e,n,i):gIe(t,e,n,r,i,s)}function dj(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return vv(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var vIe={evaluateInteractionItems:vv,modes:{index(t,e,n,r){const i=Uc(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?wC(t,i,s,r,o):EC(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=Uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?wC(t,i,s,r,o):EC(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=Uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return wC(t,i,s,r,o)},nearest(t,e,n,r){const i=Uc(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return EC(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=Uc(e,t);return dj(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=Uc(e,t);return dj(t,i,"y",n.intersect,r)}}};const BJ=["left","top","right","bottom"];function Fp(t,e){return t.filter(n=>n.pos===e)}function fj(t,e){return t.filter(n=>BJ.indexOf(n.pos)===-1&&n.box.axis===e)}function jp(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function yIe(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function xIe(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!BJ.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function bIe(t,e){const n=xIe(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function SIe(t){const e=yIe(t),n=jp(e.filter(c=>c.box.fullSize),!0),r=jp(Fp(e,"left"),!0),i=jp(Fp(e,"right")),s=jp(Fp(e,"top"),!0),o=jp(Fp(e,"bottom")),a=fj(e,"x"),l=fj(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:Fp(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function hj(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function UJ(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function wIe(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ye(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&UJ(o,s.getPadding());const a=Math.max(0,e.outerWidth-hj(o,t,"left","right")),l=Math.max(0,e.outerHeight-hj(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function EIe(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function _Ie(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function xm(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,_Ie(a.horizontal,e));const{same:d,other:f}=wIe(e,n,a,r);c|=d&&i.length,u=u||f,l.fullSize||i.push(a)}return c&&xm(i,e,n,r)||u}function Oy(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function pj(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,f=c.size||l.height;Jg(c.start)&&(o=c.start),l.fullSize?Oy(l,i.left,o,n.outerWidth-i.right-i.left,f):Oy(l,e.left+c.placed,o,d,f),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,f=c.size||l.width;Jg(c.start)&&(s=c.start),l.fullSize?Oy(l,s,i.top,f,n.outerHeight-i.bottom-i.top):Oy(l,s,e.top+c.placed,f,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Bi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=ur(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=SIe(t.boxes),l=a.vertical,c=a.horizontal;ut(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},i);UJ(f,ur(r));const h=Object.assign({maxPadding:f,w:s,h:o,x:i.left,y:i.top},i),p=bIe(l.concat(c),d);xm(a.fullSize,h,d,p),xm(l,h,d,p),xm(c,h,d,p)&&xm(l,h,d,p),EIe(h),pj(a.leftAndTop,h,d,p),h.x+=h.w,h.y+=h.h,pj(a.rightAndBottom,h,d,p),t.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},ut(a.chartArea,m=>{const g=m.box;Object.assign(g,t.chartArea),g.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class VJ{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class TIe extends VJ{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ix="$chartjs",CIe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},mj=t=>t===null||t==="";function kIe(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ix]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",mj(i)){const s=ZF(t,"width");s!==void 0&&(t.width=s)}if(mj(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=ZF(t,"height");s!==void 0&&(t.height=s)}return t}const zJ=IPe?{passive:!0}:!1;function PIe(t,e,n){t&&t.addEventListener(e,n,zJ)}function IIe(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,zJ)}function AIe(t,e){const n=CIe[t.type]||t.type,{x:r,y:i}=Uc(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function _S(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function LIe(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||_S(a.addedNodes,r),o=o&&!_S(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function RIe(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||_S(a.removedNodes,r),o=o&&!_S(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const r0=new Map;let gj=0;function HJ(){const t=window.devicePixelRatio;t!==gj&&(gj=t,r0.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function OIe(t,e){r0.size||window.addEventListener("resize",HJ),r0.set(t,e)}function DIe(t){r0.delete(t),r0.size||window.removeEventListener("resize",HJ)}function MIe(t,e,n){const r=t.canvas,i=r&&g3(r);if(!i)return;const s=wJ((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),OIe(t,s),o}function _C(t,e,n){n&&n.disconnect(),e==="resize"&&DIe(t)}function $Ie(t,e,n){const r=t.canvas,i=wJ(s=>{t.ctx!==null&&n(AIe(s,t))},t);return PIe(r,e,i),i}class NIe extends VJ{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(kIe(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Ix])return!1;const r=n[Ix].initial;["height","width"].forEach(s=>{const o=r[s];nt(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Ix],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:LIe,detach:RIe,resize:MIe}[n]||$Ie;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:_C,detach:_C,resize:_C}[n]||IIe)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return PPe(e,n,r,i)}isAttached(e){const n=e&&g3(e);return!!(n&&n.isConnected)}}function FIe(t){return!m3()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?TIe:NIe}var Z1;let Ia=(Z1=class{constructor(){ce(this,"x");ce(this,"y");ce(this,"active",!1);ce(this,"options");ce(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return e0(this.x)&&e0(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},ce(Z1,"defaults",{}),ce(Z1,"defaultRoutes"),Z1);function jIe(t,e){const n=t.options.ticks,r=BIe(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?VIe(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return zIe(e,c,s,o/i),c;const u=UIe(s,e,i);if(o>0){let d,f;const h=o>1?Math.round((l-a)/(o-1)):null;for(Dy(e,c,u,nt(h)?0:a-h,a),d=0,f=o-1;d<f;d++)Dy(e,c,u,s[d],s[d+1]);return Dy(e,c,u,l,nt(h)?e.length:l+h),c}return Dy(e,c,u),c}function BIe(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function UIe(t,e,n){const r=HIe(t),i=e.length/n;if(!r)return Math.max(i,1);const s=Ike(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function VIe(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function zIe(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Dy(t,e,n,r,i){const s=Ue(r,0),o=Math.min(Ue(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function HIe(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const WIe=t=>t==="left"?"right":t==="right"?"left":t,vj=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,yj=(t,e)=>Math.min(e||t,t);function xj(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function GIe(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function KIe(t,e){ut(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Bp(t){return t.drawTicks?t.tickLength:0}function bj(t,e){if(!t.display)return 0;const n=Cn(t.font,e),r=ur(t.padding);return(Rt(t.text)?t.text.length:1)*n.lineHeight+r.height}function qIe(t,e){return vc(t,{scale:e,type:"scale"})}function YIe(t,e,n){return vc(t,{tick:n,index:e,type:"tick"})}function QIe(t,e,n){let r=c3(t);return(n&&e!=="right"||!n&&e==="right")&&(r=WIe(r)),r}function XIe(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,f,h,p;const m=o-i,g=a-s;if(t.isHorizontal()){if(h=Xn(r,s,a),Ye(n)){const y=Object.keys(n)[0],x=n[y];p=u[y].getPixelForValue(x)+m-e}else n==="center"?p=(c.bottom+c.top)/2+m-e:p=vj(t,n,e);f=a-s}else{if(Ye(n)){const y=Object.keys(n)[0],x=n[y];h=u[y].getPixelForValue(x)-g+e}else n==="center"?h=(c.left+c.right)/2-g+e:h=vj(t,n,e);p=Xn(r,o,i),d=n==="left"?-cn:cn}return{titleX:h,titleY:p,maxWidth:f,rotation:d}}class ed extends Ia{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=ni(e,Number.POSITIVE_INFINITY),n=ni(n,Number.NEGATIVE_INFINITY),r=ni(r,Number.POSITIVE_INFINITY),i=ni(i,Number.NEGATIVE_INFINITY),{min:ni(e,r),max:ni(n,i),minDefined:rn(e),maxDefined:rn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:ni(n,ni(r,n)),max:ni(r,ni(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){St(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=oPe(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?xj(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=jIe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){St(this.options.afterUpdate,[this])}beforeSetDimensions(){St(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){St(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),St(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){St(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=St(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){St(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){St(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=yj(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,f=u.highest.height,h=or(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:h/(r-1),d+6>a&&(a=h/(r-(e.offset?.5:1)),l=this.maxHeight-Bp(e.grid)-n.padding-bj(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),o=a3(Math.min(Math.asin(or((u.highest.height+6)/a,-1,1)),Math.asin(or(l/c,-1,1))-Math.asin(or(f/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){St(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){St(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=bj(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Bp(s)+l):(e.height=this.maxHeight,e.width=Bp(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:f}=this._getLabelSizes(),h=r.padding*2,p=ao(this.labelRotation),m=Math.cos(p),g=Math.sin(p);if(a){const y=r.mirror?0:g*d.width+m*f.height;e.height=Math.min(this.maxHeight,e.height+y+h)}else{const y=r.mirror?0:m*d.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+y+h)}this._calculatePadding(c,u,g,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?c?(f=i*e.width,h=r*n.height):(f=r*e.height,h=i*n.width):s==="start"?h=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,h=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((h-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){St(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)nt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=xj(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/yj(n,r));let c=0,u=0,d,f,h,p,m,g,y,x,S,w,E;for(d=0;d<n;d+=l){if(p=e[d].label,m=this._resolveTickFontOptions(d),i.font=g=m.string,y=s[g]=s[g]||{data:{},gc:[]},x=m.lineHeight,S=w=0,!nt(p)&&!Rt(p))S=wS(i,y.data,y.gc,S,p),w=x;else if(Rt(p))for(f=0,h=p.length;f<h;++f)E=p[f],!nt(E)&&!Rt(E)&&(S=wS(i,y.data,y.gc,S,E),w+=x);o.push(S),a.push(w),c=Math.max(S,c),u=Math.max(w,u)}KIe(s,n);const T=o.indexOf(c),_=a.indexOf(u),I=A=>({width:o[A]||0,height:a[A]||0});return{first:I(0),last:I(n-1),widest:I(T),highest:I(_),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Oke(this._alignToPixels?_c(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=YIe(this.getContext(),e,r))}return this.$context||(this.$context=qIe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ao(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Bp(s),h=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,g=m/2,y=function(C){return _c(r,C,m)};let x,S,w,E,T,_,I,A,L,j,D,O;if(o==="top")x=y(this.bottom),_=this.bottom-f,A=x-g,j=y(e.top)+g,O=e.bottom;else if(o==="bottom")x=y(this.top),j=e.top,O=y(e.bottom)-g,_=x+g,A=this.top+f;else if(o==="left")x=y(this.right),T=this.right-f,I=x-g,L=y(e.left)+g,D=e.right;else if(o==="right")x=y(this.left),L=e.left,D=y(e.right)-g,T=x+g,I=this.left+f;else if(n==="x"){if(o==="center")x=y((e.top+e.bottom)/2+.5);else if(Ye(o)){const C=Object.keys(o)[0],P=o[C];x=y(this.chart.scales[C].getPixelForValue(P))}j=e.top,O=e.bottom,_=x+g,A=_+f}else if(n==="y"){if(o==="center")x=y((e.left+e.right)/2);else if(Ye(o)){const C=Object.keys(o)[0],P=o[C];x=y(this.chart.scales[C].getPixelForValue(P))}T=x-g,I=T-f,L=e.left,D=e.right}const $=Ue(i.ticks.maxTicksLimit,d),R=Math.max(1,Math.ceil(d/$));for(S=0;S<d;S+=R){const C=this.getContext(S),P=s.setContext(C),k=a.setContext(C),M=P.lineWidth,B=P.color,N=k.dash||[],V=k.dashOffset,H=P.tickWidth,W=P.tickColor,z=P.tickBorderDash||[],G=P.tickBorderDashOffset;w=GIe(this,S,l),w!==void 0&&(E=_c(r,w,M),c?T=I=L=D=E:_=A=j=O=E,h.push({tx1:T,ty1:_,tx2:I,ty2:A,x1:L,y1:j,x2:D,y2:O,width:M,color:B,borderDash:N,borderDashOffset:V,tickWidth:H,tickColor:W,tickBorderDash:z,tickBorderDashOffset:G}))}return this._ticksLength=d,this._borderValue=x,h}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,f=Bp(r.grid),h=f+u,p=d?-u:h,m=-ao(this.labelRotation),g=[];let y,x,S,w,E,T,_,I,A,L,j,D,O="middle";if(i==="top")T=this.bottom-p,_=this._getXAxisLabelAlignment();else if(i==="bottom")T=this.top+p,_=this._getXAxisLabelAlignment();else if(i==="left"){const R=this._getYAxisLabelAlignment(f);_=R.textAlign,E=R.x}else if(i==="right"){const R=this._getYAxisLabelAlignment(f);_=R.textAlign,E=R.x}else if(n==="x"){if(i==="center")T=(e.top+e.bottom)/2+h;else if(Ye(i)){const R=Object.keys(i)[0],C=i[R];T=this.chart.scales[R].getPixelForValue(C)+h}_=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")E=(e.left+e.right)/2-h;else if(Ye(i)){const R=Object.keys(i)[0],C=i[R];E=this.chart.scales[R].getPixelForValue(C)}_=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?O="top":l==="end"&&(O="bottom"));const $=this._getLabelSizes();for(y=0,x=a.length;y<x;++y){S=a[y],w=S.label;const R=s.setContext(this.getContext(y));I=this.getPixelForTick(y)+s.labelOffset,A=this._resolveTickFontOptions(y),L=A.lineHeight,j=Rt(w)?w.length:1;const C=j/2,P=R.color,k=R.textStrokeColor,M=R.textStrokeWidth;let B=_;o?(E=I,_==="inner"&&(y===x-1?B=this.options.reverse?"left":"right":y===0?B=this.options.reverse?"right":"left":B="center"),i==="top"?c==="near"||m!==0?D=-j*L+L/2:c==="center"?D=-$.highest.height/2-C*L+L:D=-$.highest.height+L/2:c==="near"||m!==0?D=L/2:c==="center"?D=$.highest.height/2-C*L:D=$.highest.height-j*L,d&&(D*=-1),m!==0&&!R.showLabelBackdrop&&(E+=L/2*Math.sin(m))):(T=I,D=(1-j)*L/2);let N;if(R.showLabelBackdrop){const V=ur(R.backdropPadding),H=$.heights[y],W=$.widths[y];let z=D-V.top,G=0-V.left;switch(O){case"middle":z-=H/2;break;case"bottom":z-=H;break}switch(_){case"center":G-=W/2;break;case"right":G-=W;break;case"inner":y===x-1?G-=W:y>0&&(G-=W/2);break}N={left:G,top:z,width:W+V.width,height:H+V.height,color:R.backdropColor}}g.push({label:w,font:A,textOffset:D,options:{rotation:m,color:P,strokeColor:k,strokeWidth:M,textAlign:B,textBaseline:O,translation:[E,T],backdrop:N}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ao(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,f;this.isHorizontal()?(c=_c(e,this.left,o)-o/2,u=_c(e,this.right,a)+a/2,d=f=l):(d=_c(e,this.top,o)-o/2,f=_c(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&zE(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Au(r,c,0,u,l,a)}i&&HE(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Cn(r.font),o=ur(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ye(n)?(l+=o.bottom,Rt(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:f}=XIe(this,l,n,a);Au(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:f,textAlign:QIe(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Ue(e.grid&&e.grid.z,-1),i=Ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==ed.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Cn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class My{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;eAe(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,ZIe(e,o,r),this.override&&sn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in sn[i]&&(delete sn[i][r],this.override&&delete Iu[r])}}function ZIe(t,e,n){const r=Zg(Object.create(null),[n?sn.get(n):{},sn.get(e),t.defaults]);sn.set(e,r),t.defaultRoutes&&JIe(e,t.defaultRoutes),t.descriptors&&sn.describe(e,t.descriptors)}function JIe(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");sn.route(s,i,l,a)})}function eAe(t){return"id"in t&&"defaults"in t}class tAe{constructor(){this.controllers=new My(hu,"datasets",!0),this.elements=new My(Ia,"elements"),this.plugins=new My(Object,"plugins"),this.scales=new My(ed,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ut(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=o3(e);St(r["before"+i],[],r),n[e](r),St(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Qs=new tAe;class nAe{constructor(){this._init=void 0}notify(e,n,r,i){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(St(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){nt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Ue(r.options&&r.options.plugins,{}),s=rAe(r);return i===!1&&!n?[]:sAe(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function rAe(t){const e={},n=[],r=Object.keys(Qs.plugins.items);for(let s=0;s<r.length;s++)n.push(Qs.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function iAe(t,e){return!e&&t===!1?null:t===!0?{}:t}function sAe(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=iAe(r[l],i);c!==null&&s.push({plugin:a,options:oAe(t.config,{plugin:a,local:n[l]},c,o)})}return s}function oAe(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xA(t,e){const n=sn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function aAe(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function lAe(t,e){return t===e?"_index_":"_value_"}function Sj(t){if(t==="x"||t==="y"||t==="r")return t}function cAe(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function bA(t,...e){if(Sj(t))return t;for(const n of e){const r=n.axis||cAe(n.position)||t.length>1&&Sj(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function wj(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function uAe(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return wj(t,"x",n[0])||wj(t,"y",n[0])}return{}}function dAe(t,e){const n=Iu[t.type]||{scales:{}},r=e.scales||{},i=xA(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ye(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=bA(o,a,uAe(o,t),sn.scales[a.type]),c=lAe(l,i),u=n.scales||{};s[o]=Jm(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||xA(a,e),u=(Iu[a]||{}).scales||{};Object.keys(u).forEach(d=>{const f=aAe(d,l),h=o[f+"AxisID"]||f;s[h]=s[h]||Object.create(null),Jm(s[h],[{axis:f},r[h],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Jm(a,[sn.scales[a.type],sn.scale])}),s}function WJ(t){const e=t.options||(t.options={});e.plugins=Ue(e.plugins,{}),e.scales=dAe(t,e)}function GJ(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function fAe(t){return t=t||{},t.data=GJ(t.data),WJ(t),t}const Ej=new Map,KJ=new Set;function $y(t,e){let n=Ej.get(t);return n||(n=e(),Ej.set(t,n),KJ.add(n)),n}const Up=(t,e,n)=>{const r=Pu(e,n);r!==void 0&&t.add(r)};class hAe{constructor(e){this._config=fAe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=GJ(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),WJ(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $y(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return $y(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return $y(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return $y(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Up(l,e,d))),u.forEach(d=>Up(l,i,d)),u.forEach(d=>Up(l,Iu[s]||{},d)),u.forEach(d=>Up(l,sn,d)),u.forEach(d=>Up(l,vA,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),KJ.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Iu[n]||{},sn.datasets[n]||{},{type:n},sn,vA]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=_j(this._resolverCache,e,i);let l=o;if(mAe(o,n)){s.$shared=!1,r=sc(r)?r():r;const c=this.createResolver(e,r,a);l=xh(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=_j(this._resolverCache,e,r);return Ye(n)?xh(s,n,void 0,i):s}}function _j(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:f3(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const pAe=t=>Ye(t)&&Object.getOwnPropertyNames(t).some(e=>sc(t[e]));function mAe(t,e){const{isScriptable:n,isIndexable:r}=CJ(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(sc(a)||pAe(a))||o&&Rt(a))return!0}return!1}var gAe="4.5.1";const vAe=["top","bottom","left","right","chartArea"];function Tj(t,e){return t==="top"||t==="bottom"||vAe.indexOf(t)===-1&&e==="x"}function Cj(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function kj(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),St(n&&n.onComplete,[t],e)}function yAe(t){const e=t.chart,n=e.options.animation;St(n&&n.onProgress,[t],e)}function qJ(t){return m3()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ax={},Pj=t=>{const e=qJ(t);return Object.values(Ax).filter(n=>n.canvas===e).pop()};function xAe(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function bAe(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}class ps{static register(...e){Qs.add(...e),Ij()}static unregister(...e){Qs.remove(...e),Ij()}constructor(e,n){const r=this.config=new hAe(n),i=qJ(e),s=Pj(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||FIe(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=bke(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new nAe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Nke(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Ax[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Fo.listen(this,"complete",kj),Fo.listen(this,"progress",yAe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return nt(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Qs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():XF(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qF(this.canvas,this.ctx),this}stop(){return Fo.stop(this),this}resize(e,n){Fo.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,XF(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),St(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ut(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=bA(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ut(s,o=>{const a=o.options,l=a.id,c=bA(l,a),u=Ue(a.type,o.dtype);(a.position===void 0||Tj(a.position,c)!==Tj(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const f=Qs.getScale(u);d=new f({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),ut(i,(o,a)=>{o||delete r[a]}),ut(r,o=>{Bi.configure(this,o,o.options),Bi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Cj("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||xA(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Qs.getController(a),{datasetElementType:c,dataElementType:u}=sn.datasets[a];Object.assign(l,{dataElementType:Qs.getElement(u),datasetElementType:c&&Qs.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ut(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),f=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ut(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Cj("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ut(this.scales,e=>{Bi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!jF(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;xAe(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!jF(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bi.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ut(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,sc(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Fo.has(this)?this.attached&&!Fo.running(this)&&Fo.start(this):(this.draw(),kj({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=$J(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&zE(n,i),e.controller.draw(),i&&HE(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return na(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=vIe.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=vc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Jg(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Fo.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),qF(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ax[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ut(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ut(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ut(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!xS(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=Cke(e),c=bAe(e,this._lastEvent,r,l);r&&(this._lastEvent=null,St(s.onHover,[e,a,this],this),l&&St(s.onClick,[e,a,this],this));const u=!xS(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}ce(ps,"defaults",sn),ce(ps,"instances",Ax),ce(ps,"overrides",Iu),ce(ps,"registry",Qs),ce(ps,"version",gAe),ce(ps,"getChart",Pj);function Ij(){return ut(ps.instances,t=>t._plugins.invalidate())}function SAe(t,e,n){const{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,Jn(r-n));if(t.beginPath(),t.arc(i,s,o-c/2,r+d/2,n-d/2),a>0){const f=Math.min(c/a,Jn(r-n));t.arc(i,s,a+c/2,n-f/2,r+f/2,!0)}else{const f=Math.min(c/2,o*Jn(r-n));if(u==="round")t.arc(i,s,f,n-st/2,r+st/2,!0);else if(u==="bevel"){const h=2*f*f,p=-h*Math.cos(n+st/2)+i,m=-h*Math.sin(n+st/2)+s,g=h*Math.cos(r+st/2)+i,y=h*Math.sin(r+st/2)+s;t.lineTo(p,m),t.lineTo(g,y)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function wAe(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+cn,r-cn),t.closePath(),t.clip()}function EAe(t){return d3(t,["outerStart","outerEnd","innerStart","innerEnd"])}function _Ae(t,e,n,r){const i=EAe(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return or(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:or(i.innerStart,0,o),innerEnd:or(i.innerEnd,0,o)}}function xd(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function TS(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+r+n-c,0),f=u>0?u+r+n+c:0;let h=0;const p=i-l;if(r){const R=u>0?u-r:0,C=d>0?d-r:0,P=(R+C)/2,k=P!==0?p*P/(P+r):p;h=(p-k)/2}const m=Math.max(.001,p*d-n/st)/d,g=(p-m)/2,y=l+g+h,x=i-g-h,{outerStart:S,outerEnd:w,innerStart:E,innerEnd:T}=_Ae(e,f,d,x-y),_=d-S,I=d-w,A=y+S/_,L=x-w/I,j=f+E,D=f+T,O=y+E/j,$=x-T/D;if(t.beginPath(),s){const R=(A+L)/2;if(t.arc(o,a,d,A,R),t.arc(o,a,d,R,L),w>0){const M=xd(I,L,o,a);t.arc(M.x,M.y,w,L,x+cn)}const C=xd(D,x,o,a);if(t.lineTo(C.x,C.y),T>0){const M=xd(D,$,o,a);t.arc(M.x,M.y,T,x+cn,$+Math.PI)}const P=(x-T/f+(y+E/f))/2;if(t.arc(o,a,f,x-T/f,P,!0),t.arc(o,a,f,P,y+E/f,!0),E>0){const M=xd(j,O,o,a);t.arc(M.x,M.y,E,O+Math.PI,y-cn)}const k=xd(_,y,o,a);if(t.lineTo(k.x,k.y),S>0){const M=xd(_,A,o,a);t.arc(M.x,M.y,S,y-cn,A)}}else{t.moveTo(o,a);const R=Math.cos(A)*d+o,C=Math.sin(A)*d+a;t.lineTo(R,C);const P=Math.cos(L)*d+o,k=Math.sin(L)*d+a;t.lineTo(P,k)}t.closePath()}function TAe(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){TS(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Mt||Mt))}return TS(t,e,n,r,l,i),t.fill(),l}function CAe(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:f,borderRadius:h}=l,p=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,p?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let m=e.endAngle;if(s){TS(t,e,n,r,m,i);for(let g=0;g<s;++g)t.stroke();isNaN(a)||(m=o+(a%Mt||Mt))}p&&wAe(t,e,m),l.selfJoin&&m-o>=st&&h===0&&u!=="miter"&&SAe(t,e,m),s||(TS(t,e,n,r,m,i),t.stroke())}class bm extends Ia{constructor(n){super();ce(this,"circumference");ce(this,"endAngle");ce(this,"fullCircles");ce(this,"innerRadius");ce(this,"outerRadius");ce(this,"pixelMargin");ce(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=yJ(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=Ue(f,c-l),m=t0(o,l,c)&&l!==c,g=p>=Mt||m,y=ta(a,u+h,d+h);return g&&y}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,d=(s+o)/2,f=(a+l+u+c)/2;return{x:r+Math.cos(d)*f,y:i+Math.sin(d)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Mt?Math.floor(i/Mt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(st,i||0)),u=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,TAe(n,this,u,o,a),CAe(n,this,u,o,a),n.restore()}}ce(bm,"id","arc"),ce(bm,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ce(bm,"defaultRoutes",{backgroundColor:"backgroundColor"}),ce(bm,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function YJ(t,e,n=e){t.lineCap=Ue(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ue(n.borderDash,e.borderDash)),t.lineDashOffset=Ue(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ue(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ue(n.borderWidth,e.borderWidth),t.strokeStyle=Ue(n.borderColor,e.borderColor)}function kAe(t,e,n){t.lineTo(n.x,n.y)}function PAe(t){return t.stepped?Xke:t.tension||t.cubicInterpolationMode==="monotone"?Zke:kAe}function QJ(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function IAe(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=QJ(i,n,r),u=PAe(s);let{move:d=!0,reverse:f}=r||{},h,p,m;for(h=0;h<=c;++h)p=i[(a+(f?c-h:h))%o],!p.skip&&(d?(t.moveTo(p.x,p.y),d=!1):u(t,m,p,f,s.stepped),m=p);return l&&(p=i[(a+(f?c:0))%o],u(t,m,p,f,s.stepped)),!!l}function AAe(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=QJ(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,f,h,p,m,g,y;const x=w=>(o+(c?a-w:w))%s,S=()=>{m!==g&&(t.lineTo(u,g),t.lineTo(u,m),t.lineTo(u,y))};for(l&&(h=i[x(0)],t.moveTo(h.x,h.y)),f=0;f<=a;++f){if(h=i[x(f)],h.skip)continue;const w=h.x,E=h.y,T=w|0;T===p?(E<m?m=E:E>g&&(g=E),u=(d*u+w)/++d):(S(),t.lineTo(w,E),p=T,d=0,m=g=E),y=E}S()}function SA(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?AAe:IAe}function LAe(t){return t.stepped?APe:t.tension||t.cubicInterpolationMode==="monotone"?LPe:Vc}function RAe(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),YJ(t,e.options),t.stroke(i)}function OAe(t,e,n,r){const{segments:i,options:s}=e,o=SA(e);for(const a of i)YJ(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const DAe=typeof Path2D=="function";function MAe(t,e,n,r){DAe&&!e.options.segment?RAe(t,e,n,r):OAe(t,e,n,r)}class Tl extends Ia{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;wPe(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=NPe(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=MJ(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=LAe(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:f}=o[c],h=s[d],p=s[f];if(h===p){a.push(h);continue}const m=Math.abs((i-h[n])/(p[n]-h[n])),g=l(h,p,m,r.stepped);g[n]=e[n],a.push(g)}return a.length===1?a[0]:a}pathSegment(e,n,r){return SA(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=SA(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),MAe(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ce(Tl,"id","line"),ce(Tl,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ce(Tl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ce(Tl,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Aj(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Lx extends Ia{constructor(n){super();ce(this,"parsed");ce(this,"skip");ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Aj(this,n,"x",r)}inYRange(n,r){return Aj(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!na(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,yA(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ce(Lx,"id","point"),ce(Lx,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ce(Lx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function XJ(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function Cl(t,e,n,r){return t?0:or(e,n,r)}function $Ae(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=TJ(r);return{t:Cl(i.top,s.top,0,n),r:Cl(i.right,s.right,0,e),b:Cl(i.bottom,s.bottom,0,n),l:Cl(i.left,s.left,0,e)}}function NAe(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=du(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ye(i);return{topLeft:Cl(!l||a.top||a.left,s.topLeft,0,o),topRight:Cl(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Cl(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Cl(!l||a.bottom||a.right,s.bottomRight,0,o)}}function FAe(t){const e=XJ(t),n=e.right-e.left,r=e.bottom-e.top,i=$Ae(t,n/2,r/2),s=NAe(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function TC(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&XJ(t,r);return a&&(i||ta(e,a.left,a.right))&&(s||ta(n,a.top,a.bottom))}function jAe(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function BAe(t,e){t.rect(e.x,e.y,e.w,e.h)}function CC(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class rg extends Ia{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=FAe(this),a=jAe(o.radius)?n0:BAe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,CC(o,n,s)),e.clip(),a(e,CC(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,CC(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return TC(this,e,n,r)}inXRange(e,n){return TC(this,e,null,n)}inYRange(e,n){return TC(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ce(rg,"id","bar"),ce(rg,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ce(rg,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function UAe(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=GE(l,c,i);const u=wA(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=MJ(e,u);for(const f of d){const h=wA(n,s[f.start],s[f.end],f.loop),p=DJ(a,i,h);for(const m of p)o.push({source:m,target:f,start:{[n]:Lj(u,h,"start",Math.max)},end:{[n]:Lj(u,h,"end",Math.min)}})}}return o}function wA(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=Jn(i),s=Jn(s)),{property:t,start:i,end:s}}function VAe(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=GE(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function GE(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Lj(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function ZJ(t,e){let n=[],r=!1;return Rt(t)?(r=!0,n=t):n=VAe(t,e),n.length?new Tl({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Rj(t){return t&&t.fill!==!1}function zAe(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!rn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function HAe(t,e,n){const r=qAe(t);if(Ye(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return rn(i)&&Math.floor(i)===i?WAe(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function WAe(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function GAe(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ye(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function KAe(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ye(t)?r=t.value:r=e.getBaseValue(),r}function qAe(t){const e=t.options,n=e.fill;let r=Ue(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function YAe(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=QAe(e,n);a.push(ZJ({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)XAe(i,o[u],a)}return new Tl({points:i,options:{}})}function QAe(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function XAe(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=ZAe(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function ZAe(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=o[u.start][n],f=o[u.end][n];if(ta(i,d,f)){a=i===d,l=i===f;break}}return{first:a,last:l,point:r}}class JJ{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Mt},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function JAe(t){const{chart:e,fill:n,line:r}=t;if(rn(n))return eLe(e,n);if(n==="stack")return YAe(t);if(n==="shape")return!0;const i=tLe(t);return i instanceof JJ?i:ZJ(i,r)}function eLe(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function tLe(t){return(t.scale||{}).getPointPositionForValue?rLe(t):nLe(t)}function nLe(t){const{scale:e={},fill:n}=t,r=GAe(n,e);if(rn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function rLe(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=KAe(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new JJ({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function kC(t,e,n){const r=JAe(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,d=c.backgroundColor,{above:f=d,below:h=d}=u||{},p=i.getDatasetMeta(s),m=$J(i,p);r&&o.points.length&&(zE(t,n),iLe(t,{line:o,target:r,above:f,below:h,area:n,scale:a,axis:l,clip:m}),HE(t))}function iLe(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&(c==="x"?(Oj(t,r,o.top),PC(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Oj(t,r,o.bottom)):c==="y"&&(Dj(t,r,o.left),PC(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),Dj(t,r,o.right),u=i)),PC(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function Oj(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[GE(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Dj(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[GE(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,d.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function PC(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=UAe(n,r,i);for(const{source:c,target:u,start:d,end:f}of l){const{style:{backgroundColor:h=s}={}}=c,p=r!==!0;t.save(),t.fillStyle=h,sLe(t,o,a,p&&wA(i,d,f)),t.beginPath();const m=!!n.pathSegment(t,c);let g;if(p){m?t.closePath():Mj(t,r,f,i);const y=!!r.pathSegment(t,u,{move:m,reverse:!0});g=m&&y,g||Mj(t,r,d,i)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function sLe(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),d=Math.min(d,n.bottom)),t.rect(l,c,u-l,d-c),t.clip()}}function Mj(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var oLe={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Tl&&(l={visible:t.isDatasetVisible(o),index:o,fill:HAe(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=zAe(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&kC(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;Rj(s)&&kC(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Rj(r)||n.drawTime!=="beforeDatasetDraw"||kC(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const $j=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},aLe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Nj extends Ia{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=St(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Cn(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=$j(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,h=-u;return this.legendItems.forEach((p,m)=>{const g=r+n/2+s.measureText(p.text).width;(m===0||c[c.length-1]+g+2*a>o)&&(d+=u,c[c.length-(m>0?0:1)]=0,h+=u,f++),l[m]={left:0,top:h,row:f,width:g,height:i},c[c.length-1]+=g+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,f=0,h=0,p=0,m=0;return this.legendItems.forEach((g,y)=>{const{itemWidth:x,itemHeight:S}=lLe(r,n,s,g,i);y>0&&h+S+2*a>u&&(d+=f+a,c.push({width:f,height:h}),p+=f+a,m++,f=h=0),l[y]={left:p,top:h,col:m,width:x,height:S},f=Math.max(f,x),h+=S+a}),d+=f,c.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=$f(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Xn(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Xn(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Xn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Xn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;zE(e,this),this._draw(),HE(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=sn.color,l=$f(e.rtl,this.left,this.width),c=Cn(o.font),{padding:u}=o,d=c.size,f=d/2;let h;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:g}=$j(o,d),y=function(T,_,I){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;i.save();const A=Ue(I.lineWidth,1);if(i.fillStyle=Ue(I.fillStyle,a),i.lineCap=Ue(I.lineCap,"butt"),i.lineDashOffset=Ue(I.lineDashOffset,0),i.lineJoin=Ue(I.lineJoin,"miter"),i.lineWidth=A,i.strokeStyle=Ue(I.strokeStyle,a),i.setLineDash(Ue(I.lineDash,[])),o.usePointStyle){const L={radius:m*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:A},j=l.xPlus(T,p/2),D=_+f;_J(i,L,j,D,o.pointStyleWidth&&p)}else{const L=_+Math.max((d-m)/2,0),j=l.leftForLtr(T,p),D=du(I.borderRadius);i.beginPath(),Object.values(D).some(O=>O!==0)?n0(i,{x:j,y:L,w:p,h:m,radius:D}):i.rect(j,L,p,m),i.fill(),A!==0&&i.stroke()}i.restore()},x=function(T,_,I){Au(i,I.text,T,_+g/2,c,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},S=this.isHorizontal(),w=this._computeTitleHeight();S?h={x:Xn(s,this.left+u,this.right-r[0]),y:this.top+u+w,line:0}:h={x:this.left+u,y:Xn(s,this.top+w+u,this.bottom-n[0].height),line:0},LJ(this.ctx,e.textDirection);const E=g+u;this.legendItems.forEach((T,_)=>{i.strokeStyle=T.fontColor,i.fillStyle=T.fontColor;const I=i.measureText(T.text).width,A=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),L=p+f+I;let j=h.x,D=h.y;l.setWidth(this.width),S?_>0&&j+L+u>this.right&&(D=h.y+=E,h.line++,j=h.x=Xn(s,this.left+u,this.right-r[h.line])):_>0&&D+E>this.bottom&&(j=h.x=j+n[h.line].width+u,h.line++,D=h.y=Xn(s,this.top+w+u,this.bottom-n[h.line].height));const O=l.x(j);if(y(O,D,T),j=Fke(A,j+p+f,S?j+L:this.right,e.rtl),x(l.x(j),D,T),S)h.x+=L+u;else if(typeof T.text!="string"){const $=c.lineHeight;h.y+=eee(T,$)+u}else h.y+=E}),RJ(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Cn(n.font),i=ur(n.padding);if(!n.display)return;const s=$f(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,d=Xn(e.align,d,this.right-f);else{const p=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);u=c+Xn(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const h=Xn(a,d,d+f);o.textAlign=s.textAlign(c3(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Au(o,n.text,h,u,r)}_computeTitleHeight(){const e=this.options.title,n=Cn(e.font),r=ur(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(ta(e,this.left,this.right)&&ta(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],ta(e,i.left,i.left+i.width)&&ta(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!dLe(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=aLe(i,r);i&&!s&&St(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&St(n.onHover,[e,r,this],this)}else r&&St(n.onClick,[e,r,this],this)}}function lLe(t,e,n,r,i){const s=cLe(r,t,e,n),o=uLe(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function cLe(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function uLe(t,e,n){let r=t;return typeof e.text!="string"&&(r=eee(e,n)),r}function eee(t,e){const n=t.text?t.text.length:0;return e*n}function dLe(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var tee={id:"legend",_element:Nj,start(t,e,n){const r=t.legend=new Nj({ctx:t.ctx,options:n,chart:t});Bi.configure(t,r,n),Bi.addBox(t,r)},stop(t){Bi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Bi.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=ur(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};let nee=class extends Ia{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Rt(r.text)?r.text.length:1;this._padding=ur(r.padding);const s=i*Cn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Xn(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Xn(a,i,n),l=st*-.5):(u=s-e,d=Xn(a,n,i),l=st*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Cn(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Au(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:c3(n.align),textBaseline:"middle",translation:[o,a]})}};function fLe(t,e){const n=new nee({ctx:t.ctx,options:e,chart:t});Bi.configure(t,n,e),Bi.addBox(t,n),t.titleBlock=n}var ree={id:"title",_element:nee,start(t,e,n){fLe(t,n)},stop(t){const e=t.titleBlock;Bi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Bi.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Sm={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=gA(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function qs(t,e){return e&&(Rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function jo(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function hLe(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Fj(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Cn(e.bodyFont),c=Cn(e.titleFont),u=Cn(e.footerFont),d=s.length,f=i.length,h=r.length,p=ur(e.padding);let m=p.height,g=0,y=r.reduce((w,E)=>w+E.before.length+E.lines.length+E.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){const w=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=h*w+(y-h)*l.lineHeight+(y-1)*e.bodySpacing}f&&(m+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let x=0;const S=function(w){g=Math.max(g,n.measureText(w).width+x)};return n.save(),n.font=c.string,ut(t.title,S),n.font=l.string,ut(t.beforeBody.concat(t.afterBody),S),x=e.displayColors?o+2+e.boxPadding:0,ut(r,w=>{ut(w.before,S),ut(w.lines,S),ut(w.after,S)}),x=0,n.font=u.string,ut(t.footer,S),n.restore(),g+=p.width,{width:g,height:m}}function pLe(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function mLe(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function gLe(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),mLe(c,t,e,n)&&(c="center"),c}function jj(t,e,n){const r=n.yAlign||e.yAlign||pLe(t,n);return{xAlign:n.xAlign||e.xAlign||gLe(t,e,n,r),yAlign:r}}function vLe(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function yLe(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function Bj(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:h}=du(o);let p=vLe(e,a);const m=yLe(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,f)+i:a==="right"&&(p+=Math.max(d,h)+i),{x:or(p,0,r.width-e.width),y:or(m,0,r.height-e.height)}}function Ny(t,e,n){const r=ur(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Uj(t){return qs([],jo(t))}function xLe(t,e,n){return vc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Vj(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const iee={beforeTitle:Do,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Do,beforeBody:Do,beforeLabel:Do,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return nt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Do,afterBody:Do,beforeFooter:Do,footer:Do,afterFooter:Do};function Dr(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?iee[e].call(n,r):i}class EA extends Ia{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new NJ(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=xLe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Dr(r,"beforeTitle",this,e),s=Dr(r,"title",this,e),o=Dr(r,"afterTitle",this,e);let a=[];return a=qs(a,jo(i)),a=qs(a,jo(s)),a=qs(a,jo(o)),a}getBeforeBody(e,n){return Uj(Dr(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ut(e,s=>{const o={before:[],lines:[],after:[]},a=Vj(r,s);qs(o.before,jo(Dr(a,"beforeLabel",this,s))),qs(o.lines,Dr(a,"label",this,s)),qs(o.after,jo(Dr(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Uj(Dr(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Dr(r,"beforeFooter",this,e),s=Dr(r,"footer",this,e),o=Dr(r,"afterFooter",this,e);let a=[];return a=qs(a,jo(i)),a=qs(a,jo(s)),a=qs(a,jo(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(hLe(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,f)=>e.filter(u,d,f,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),ut(a,u=>{const d=Vj(e.callbacks,u);i.push(Dr(d,"labelColor",this,u)),s.push(Dr(d,"labelPointStyle",this,u)),o.push(Dr(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Sm[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Fj(this,r),c=Object.assign({},a,l),u=jj(this.chart,r,c),d=Bj(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=du(a),{x:f,y:h}=e,{width:p,height:m}=n;let g,y,x,S,w,E;return s==="center"?(w=h+m/2,i==="left"?(g=f,y=g-o,S=w+o,E=w-o):(g=f+p,y=g+o,S=w-o,E=w+o),x=g):(i==="left"?y=f+Math.max(l,u)+o:i==="right"?y=f+p-Math.max(c,d)-o:y=this.caretX,s==="top"?(S=h,w=S-o,g=y-o,x=y+o):(S=h+m,w=S+o,g=y+o,x=y-o),E=S),{x1:g,x2:y,x3:x,y1:S,y2:w,y3:E}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=$f(r.rtl,this.x,this.width);for(e.x=Ny(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Cn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=Cn(s.bodyFont),d=Ny(this,"left",s),f=i.x(d),h=l<u.lineHeight?(u.lineHeight-l)/2:0,p=n.y+h;if(s.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},g=i.leftForLtr(f,c)+c/2,y=p+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,yA(e,m,g,y),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,yA(e,m,g,y)}else{e.lineWidth=Ye(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=i.leftForLtr(f,c),g=i.leftForLtr(i.xPlus(f,1),c-2),y=du(o.borderRadius);Object.values(y).some(x=>x!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,n0(e,{x:m,y:p,w:c,h:l,radius:y}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),n0(e,{x:g,y:p+1,w:c-2,h:l-2,radius:y}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(m,p,c,l),e.strokeRect(m,p,c,l),e.fillStyle=o.backgroundColor,e.fillRect(g,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=Cn(r.bodyFont);let f=d.lineHeight,h=0;const p=$f(r.rtl,this.x,this.width),m=function(I){n.fillText(I,p.x(e.x+h),e.y+f/2),e.y+=f+s},g=p.textAlign(o);let y,x,S,w,E,T,_;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Ny(this,g,r),n.fillStyle=r.bodyColor,ut(this.beforeBody,m),h=a&&g!=="right"?o==="center"?c/2+u:c+2+u:0,w=0,T=i.length;w<T;++w){for(y=i[w],x=this.labelTextColors[w],n.fillStyle=x,ut(y.before,m),S=y.lines,a&&S.length&&(this._drawColorBox(n,e,w,p,r),f=Math.max(d.lineHeight,l)),E=0,_=S.length;E<_;++E)m(S[E]),f=d.lineHeight;ut(y.after,m)}h=0,f=d.lineHeight,ut(this.afterBody,m),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=$f(r.rtl,this.x,this.width);for(e.x=Ny(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Cn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=du(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+h,l+u),n.quadraticCurveTo(a,l+u,a,l+u-h),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Sm[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Fj(this,e),l=Object.assign({},o,this._size),c=jj(n,e,l),u=Bj(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=ur(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),LJ(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),RJ(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!xS(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!xS(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Sm[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}ce(EA,"positioners",Sm);var see={id:"tooltip",_element:EA,positioners:Sm,afterInit(t,e,n){n&&(t.tooltip=new EA({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:iee},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const bLe=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function SLe(t,e,n,r){const i=t.indexOf(e);if(i===-1)return bLe(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const wLe=(t,e)=>t===null?null:or(Math.round(t),0,e);function zj(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class CS extends ed{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(nt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:SLe(r,e,Ue(n,e),this._addedLabels),wLe(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return zj.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ce(CS,"id","category"),ce(CS,"defaults",{ticks:{callback:zj}});function ELe(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:f}=t,h=s||1,p=u-1,{min:m,max:g}=e,y=!nt(o),x=!nt(a),S=!nt(c),w=(g-m)/(d+1);let E=UF((g-m)/p/h)*h,T,_,I,A;if(E<1e-14&&!y&&!x)return[{value:m},{value:g}];A=Math.ceil(g/E)-Math.floor(m/E),A>p&&(E=UF(A*E/p/h)*h),nt(l)||(T=Math.pow(10,l),E=Math.ceil(E*T)/T),i==="ticks"?(_=Math.floor(m/E)*E,I=Math.ceil(g/E)*E):(_=m,I=g),y&&x&&s&&Lke((a-o)/s,E/1e3)?(A=Math.round(Math.min((a-o)/E,u)),E=(a-o)/A,_=o,I=a):S?(_=y?o:_,I=x?a:I,A=c-1,E=(I-_)/A):(A=(I-_)/E,eg(A,Math.round(A),E/1e3)?A=Math.round(A):A=Math.ceil(A));const L=Math.max(VF(E),VF(_));T=Math.pow(10,nt(l)?L:l),_=Math.round(_*T)/T,I=Math.round(I*T)/T;let j=0;for(y&&(f&&_!==o?(n.push({value:o}),_<o&&j++,eg(Math.round((_+j*E)*T)/T,o,Hj(o,w,t))&&j++):_<o&&j++);j<A;++j){const D=Math.round((_+j*E)*T)/T;if(x&&D>a)break;n.push({value:D})}return x&&f&&I!==a?n.length&&eg(n[n.length-1].value,a,Hj(a,w,t))?n[n.length-1].value=a:n.push({value:a}):(!x||I===a)&&n.push({value:I}),n}function Hj(t,e,{horizontal:n,minRotation:r}){const i=ao(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class kS extends ed{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return nt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=yo(i),c=yo(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=ELe(i,s);return e.bounds==="ticks"&&vJ(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return UE(e,this.chart.options.locale,this.options.ticks.format)}}class PS extends kS{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=rn(e)?e:0,this.max=rn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ao(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ce(PS,"id","linear"),ce(PS,"defaults",{ticks:{callback:VE.formatters.numeric}});const i0=t=>Math.floor(El(t)),Cc=(t,e)=>Math.pow(10,i0(t)+e);function Wj(t){return t/Math.pow(10,i0(t))===1}function Gj(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function _Le(t,e){const n=e-t;let r=i0(n);for(;Gj(t,e,r)>10;)r++;for(;Gj(t,e,r)<10;)r--;return Math.min(r,i0(t))}function TLe(t,{min:e,max:n}){e=ni(t.min,e);const r=[],i=i0(e);let s=_Le(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-u)/Math.pow(10,s)),f=ni(t.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;f<n;)r.push({value:f,major:Wj(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),f=Math.round((l+u+d*Math.pow(10,s))*o)/o;const h=ni(t.max,f);return r.push({value:h,major:Wj(h),significand:d}),r}class Kj extends ed{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=kS.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return rn(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=rn(e)?Math.max(0,e):null,this.max=rn(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!rn(this._userMin)&&(this.min=e===Cc(this.min,0)?Cc(this.min,-1):Cc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Cc(r,-1)),o(Cc(i,1)))),r<=0&&s(Cc(i,-1)),i<=0&&o(Cc(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=TLe(n,this);return e.bounds==="ticks"&&vJ(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":UE(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=El(e),this._valueRange=El(this.max)-El(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(El(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}ce(Kj,"id","logarithmic"),ce(Kj,"defaults",{ticks:{callback:VE.formatters.logarithmic,major:{enabled:!0}}});function _A(t){const e=t.ticks;if(e.display&&t.display){const n=ur(e.backdropPadding);return Ue(e.font&&e.font.size,sn.font.size)+n.height}return 0}function CLe(t,e,n){return n=Rt(n)?n:[n],{w:Qke(t,e.string,n),h:n.length*e.lineHeight}}function qj(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function kLe(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?st/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+i[l],a),d=Cn(c.font),f=CLe(t.ctx,d,t._pointLabels[l]);r[l]=f;const h=Jn(t.getIndexAngle(l)+a),p=Math.round(a3(h)),m=qj(p,u.x,f.w,0,180),g=qj(p,u.y,f.h,90,270);PLe(n,e,h,m,g)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=LLe(t,r,i)}function PLe(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function ILe(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(a3(Jn(l.angle+cn))),u=DLe(l.y,a.h,c),d=RLe(c),f=OLe(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:f,top:u,right:f+a.w,bottom:u+a.h}}function ALe(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(na({x:n,y:r},e)||na({x:n,y:s},e)||na({x:i,y:r},e)||na({x:i,y:s},e))}function LLe(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:_A(s)/2,additionalAngle:o?st/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=e[u];const d=ILe(t,u,l);r.push(d),a==="auto"&&(d.visible=ALe(d,c),d.visible&&(c=d))}return r}function RLe(t){return t===0||t===180?"center":t<180?"left":"right"}function OLe(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function DLe(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function MLe(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!nt(a)){const l=du(e.borderRadius),c=ur(e.backdropPadding);t.fillStyle=a;const u=r-c.left,d=i-c.top,f=s-r+c.width,h=o-i+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),n0(t,{x:u,y:d,w:f,h,radius:l}),t.fill()):t.fillRect(u,d,f,h)}}function $Le(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));MLe(n,o,s);const a=Cn(o.font),{x:l,y:c,textAlign:u}=s;Au(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function oee(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Mt);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function NLe(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),oee(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function FLe(t,e,n){return vc(t,{label:n,index:e,type:"pointLabel"})}class Fy extends kS{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ur(_A(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=rn(e)&&!isNaN(e)?e:0,this.max=rn(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/_A(this.options))}generateTickLabels(e){kS.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=St(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?kLe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Mt/(this._pointLabels.length||1),r=this.options.startAngle||0;return Jn(e*n+ao(r))}getDistanceFromCenterForValue(e){if(nt(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(nt(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return FLe(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-cn+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),oee(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&$Le(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(d),h=i.setContext(f),p=s.setContext(f);NLe(this,h,l,o,p)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=u;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),u=Cn(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=ur(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Au(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}ce(Fy,"id","radialLinear"),ce(Fy,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:VE.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ce(Fy,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ce(Fy,"descriptors",{angleLines:{_fallback:"grid"}});const KE={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jr=Object.keys(KE);function Yj(t,e){return t-e}function Qj(t,e){if(nt(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),rn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(e0(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function Xj(t,e,n,r){const i=jr.length;for(let s=jr.indexOf(t);s<i-1;++s){const o=KE[jr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return jr[s]}return jr[i-1]}function jLe(t,e,n,r,i){for(let s=jr.length-1;s>=jr.indexOf(n);s--){const o=jr[s];if(KE[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return jr[n?jr.indexOf(n):0]}function BLe(t){for(let e=jr.indexOf(t)+1,n=jr.length;e<n;++e)if(KE[jr[e]].common)return jr[e]}function Zj(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=l3(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function ULe(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Jj(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:ULe(t,r,i,n)}class IS extends ed{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new fIe._date(e.adapters.date);i.init(n),Jm(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Qj(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=rn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=rn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=Mke(i,s,o);return this._unit=n.unit||(r.autoSkip?Xj(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):jLe(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:BLe(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),Jj(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=or(n,0,o),r=or(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||Xj(s.minUnit,n,r,this._getLabelCapacity(n)),a=Ue(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=e0(l)||l===!0,u={};let d=n,f,h;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const p=i.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<r;f=+e.add(f,a,o),h++)Zj(u,f,p);return(f===r||i.bounds==="ticks"||h===1)&&Zj(u,f,p),Object.keys(u).sort(Yj).map(m=>+m)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return St(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],f=r[n],h=c&&d&&f&&f.major;return this._adapter.format(e,i||(h?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=ao(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,Jj(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(Qj(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return bJ(e.sort(Yj))}}ce(IS,"id","time"),ce(IS,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function jy(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=iu(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=iu(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class e7 extends IS{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=jy(n,this.min),this._tableRange=jy(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(jy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return jy(this._table,r*this._tableRange+this._minPos,!0)}}ce(e7,"id","timeseries"),ce(e7,"defaults",IS.defaults);const AS=U.button`
  height: 32px;
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  font-size: 14px;
  padding: 0 8px;
  border-radius: ${({theme:t})=>t.borderRadius.default};
  background: ${({theme:t})=>t.colors.ui50};
  color: ${({theme:t})=>t.colors.ui800};
  text-transform: capitalize;
`,VLe={BarController:kx,CategoryScale:CS,LinearScale:PS,BarElement:rg,Title:ree,Tooltip:see,Legend:tee},zLe={LineController:Px,LineElement:Tl,PointElement:Lx},HLe={DoughnutController:ym,ArcElement:bm},WLe={Filler:oLe},GLe=(...t)=>{const e=Object.values(t).flat().reduce((n,r)=>[...n,...Object.values(r)],[]);ps.register(...e)};GLe(VLe,zLe,HLe,WLe);const KLe=(t=[])=>(t.forEach(e=>{var n;(n=Object.keys(e))==null||n.forEach(r=>{})}),t.map(e=>{const n=(e==null?void 0:e.Timestamp)||"*",r={...e};return r==null||delete r.Timestamp,{label:n,data:Object.values(r),backgroundColor:R_e()}})),qLe=t=>{const e=[];return t.forEach(n=>{var r;(r=Object.keys(n))==null||r.forEach(i=>{i!=="Timestamp"&&e.push(i)})}),e},YLe=t=>{let e=document.getElementById("chartjs-tooltip");if(e||(e=document.createElement("div"),e.id="chartjs-tooltip",e.innerHTML="<table></table>",document.body.appendChild(e)),t.opacity===0){e.style.opacity=0;return}if(e.classList.remove("above","below","no-transform"),t.yAlign?e.classList.add(t.yAlign):e.classList.add("no-transform"),t.body){const r=t.title||[],i=t.body.map(a=>a.lines);let s="<thead>";r.forEach(a=>{s+="<tr><th>"+a+"</th></tr>"}),s+="</thead><tbody>",i.forEach((a,l)=>{const c=t.labelColors[l];let u="background:"+c.backgroundColor;u+="; border-color:"+c.borderColor,u+="; border-width: 2px";const d='<span style="'+u+'"></span>';s+="<tr><td>"+d+a+"</td></tr>"}),s+="</tbody>";const o=e.querySelector("table");o.innerHTML=s}const n=(void 0)._chart.canvas.getBoundingClientRect();e.style.opacity=1,e.style.position="absolute",e.style.left=n.left+window.pageXOffset+t.caretX+"px",e.style.top=n.top+window.pageYOffset+t.caretY+"px",e.style.fontFamily=t._bodyFontFamily,e.style.fontSize=t.bodyFontSize+"px",e.style.fontStyle=t._bodyFontStyle,e.style.padding=t.padding+"px "+t.padding+"px"},QLe=({deviceID:t,options:e={},backgroundColor:n=["#2E8BC0","#B1D4E0","#496F5E","#1F2E2E","#16262E"]})=>{if(!(t>0))return;const r=v.useRef(null),i=v.useRef(null),s=v.useRef(null),[o,a]=v.useState({width:300,height:0}),[l,c]=v.useState("bar"),[u,d]=v.useState(null),[f,h]=v.useState(null),[p,m]=v.useState([]),[g,y]=v.useState([]),[x,S]=v.useState(null),w=["line","bar","doughnut"];return v.useEffect(()=>{if(i.current){const{width:E,height:T}=i.current.getBoundingClientRect();a({width:E,height:T})}},[i]),v.useEffect(()=>{t&&(vs("ChartCard: deviceID",t),L_e(t,S))},[t]),v.useEffect(()=>{const{name:E,records:T}=x||{};console.log(x,T),T?(vs(`ChartCard #${t} device data`,{deviceData:x}),h(E),d(Object.values(T))):u&&alert(`Device #${t} Data Unavailable`)},[x]),v.useEffect(()=>{u&&(vs(`Chart #${t} Data`,{data:u}),m(KLe(u)),y(qLe(u)))},[u]),v.useEffect(()=>{g.length>0&&vs(`Chart #${t} Labels`,{labels:g})},[g]),v.useEffect(()=>{p.length>0&&vs(`Chart #${t} Datasets`,{datasets:p})},[p]),v.useEffect(()=>{if(!u)return;s.current&&s.current.destroy();const E=r.current.getContext("2d"),T=window.devicePixelRatio;return r.current.width=o.width*T,r.current.height=o.height*T,E.scale(T,T),s.current=new ps(E,{type:l,data:{labels:g,datasets:p},options:{responsive:!0,scales:{y:{beginAtZero:!0},...e.scales},plugins:{tooltip:{enabled:!0,custom:YLe},legend:{display:!0,position:"top"}},layout:{padding:{right:10}},maintainAspectRatio:!1,legend:{display:!1},scales:{display:!1,xAxes:[{gridLines:{display:!1,drawBorder:!1},ticks:{display:!1}}],yAxes:[{ticks:{display:!1,beginAtZero:!1},gridLines:{display:!1,drawBorder:!1}}]},...e}}),()=>{var _;(_=s.current)==null||_.destroy()}},[u,f,l,e,n,o]),u?b.jsxs(XLe,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},children:[b.jsxs(ZLe,{children:[b.jsxs("div",{children:[b.jsx("i",{className:"fa fa-bar-chart","aria-hidden":"true"}),f]}),b.jsx(JLe,{children:w.map((E,T)=>b.jsx(AS,{onClick:()=>c(E),children:RSe(E)},T))})]}),b.jsx(eRe,{children:b.jsx(tRe,{ref:r})})]}):b.jsxs("p",{children:["No Data for Device #",t]})},XLe=U(ue.div)`
  justify-content: flex-start;
  align-items: center;
  // min-height: 400px;
  padding: 5px;
  width: 100%;

  &:hover {
    transform: scale(1);
  }
`,ZLe=U.div`
  font-weight: 600;
  box-sizing: border-box;
  text-align: center;
  width: 100%;
  color: ${({theme:t})=>t.colors.ui800};
  font-size: 1rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  i {
    margin-right: 10px;
    color: ${({theme:t})=>t.colors.ui800};
  }
`,JLe=U(ue.div)`
  display: flex;
  gap: 0.5rem;
  padding: 0.5rem;

  button {
    font-size: 0.8rem;
  }
`,eRe=U(ue.div)`
  flex-grow: 1;
  display: flex;
  width: 100%;
  height: 500px;
  justify-content: center;
  align-items: center;
`,tRe=U.canvas``,nRe=te.memo(QLe),rRe=U.div`
  color: ${({theme:t})=>t.colors.ui800};
  width: 100%;
  margin-bottom: 16px;
  box-sizing: border-box;

  color: white;
  display: flex;
  justify-content: space-between;
`,iRe=U.h3`
  font-size: 1rem;
  color: ${({theme:t})=>t.colors.ui800};
`,sRe=U.div`
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  padding: 32px;
  width: 100%;
  background: ${({theme:t})=>t.colors.ui50};
  border-radius: ${({theme:t})=>t.borderRadius.default};
`,oRe=U.table`
  width: 100%;
  border-collapse: collapse;
  overflow-x: auto;
  border-radius: ${({theme:t})=>t.borderRadius.default};
  width: 100%;
`,By=U.th`
  padding: 12px 15px;
  text-align: left;
  background-color: #f7f7f7;
  font-size: 14px;
  font-weight: 500;
  color: ${({theme:t})=>t.colors.ui600};
`,t7=U(ue.tr)`
  width: 100%;
  color: ${({theme:t})=>t.colors.ui900};
  font-weight: 500;
  font-size: 14px;
`,Uy=U.td`
  border-top: 1px solid #eee;
  padding: 12px 15px;
  text-align: left;

  &.income {
    color: green;
  }

  &.expense {
    color: red;
  }

  @media (max-width: 768px) {
    padding: 0px;
    text-align: center;
  }
`;U.i`
  margin-right: 8px;
`;const aRe=v.memo(({data:t})=>{const{title:e,transactions:n}=t||{};return vs("TransactionHistoryCard Data:",t),b.jsxs(HSe,{children:[b.jsx(rRe,{children:b.jsx(iRe,{children:e})}),b.jsx(sRe,{children:b.jsxs(oRe,{children:[b.jsx("thead",{children:b.jsxs(t7,{children:[b.jsx(By,{children:"ID"}),b.jsx(By,{children:"Type"}),b.jsx(By,{children:"Amount"}),b.jsx(By,{children:"Date"})]})}),b.jsx("tbody",{children:n==null?void 0:n.map(r=>b.jsxs(t7,{children:[b.jsx(Uy,{children:r.id}),b.jsx(Uy,{children:r.type}),b.jsx(Uy,{className:r.type,children:r.amount}),b.jsx(Uy,{children:r.date})]},r.id))})]})})]})});U.div`
flex: 0 0 auto;
width: ${({width:t})=>t||"300px"};
height: 400px;
margin: auto;
display: flex;
padding: 0.5rem;
min-width: 300px;
position: relative;
box-shadow: 0px 0px 10px 0px #d4d4d4;
box-sizing: border-box;
align-items:center;
border-radius: 4px;
flex-direction: column;
background-color: #ffffff;

@media (max-width: 768px) {
  width: 300px;
}
`;U.h3`
  margin-bottom: 15px;
  font-size: 1.5rem;
`;U.div`
  font-size: 1.2rem;
  margin-bottom: 15px;
`;U.button`
  padding: 10px;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  &:hover {
    background-color: #0056b3;
  }
`;U.div`
  display: flex;
  justify-content: space-between;
  width: 80%;
  margin: 10px;
  border: 1px solid black;
`;U.div`
  width: ${t=>t.width||"10%"}%;
  background-color: ${t=>t.color||"#007bff"};
  height: 30px;
`;U.div`
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: conic-gradient(
    #007bff ${t=>t.blue||"50%"},
    #28a745 ${t=>t.green||"50%"}
  );
`;const lRe=(t,e={})=>{vs("Rendering Card",{card:t});const{type:n,data:r}=t||{},{id:i}=r||{},{refFocus:s,setRefFocus:o}=e||{},{deviceID:a}=s||{};switch(n){case"overview":if(r)return b.jsx($Se,{data:r});case"device_details":if(i)return b.jsx(Q2e,{deviceID:i,setRefFocus:o});case"device_data":return a?b.jsx(nRe,{deviceID:a}):b.jsx("p",{children:"No Device Selected"});case"tx-history":if(r)return b.jsx(aRe,{data:r})}return b.jsx("p",{children:"Data Not Available"})};var aee={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n7=te.createContext&&te.createContext(aee),Gl=globalThis&&globalThis.__assign||function(){return Gl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gl.apply(this,arguments)},cRe=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function lee(t){return t&&t.map(function(e,n){return te.createElement(e.tag,Gl({key:n},e.attr),lee(e.child))})}function Ns(t){return function(e){return te.createElement(uRe,Gl({attr:Gl({},t.attr)},e),lee(t.child))}}function uRe(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=cRe(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),te.createElement("svg",Gl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Gl(Gl({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&te.createElement("title",null,s),t.children)};return n7!==void 0?te.createElement(n7.Consumer,null,function(n){return e(n)}):e(aee)}function dRe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M211 7.3C205 1 196-1.4 187.6 .8s-14.9 8.9-17.1 17.3L154.7 80.6l-62-17.5c-8.4-2.4-17.4 0-23.5 6.1s-8.5 15.1-6.1 23.5l17.5 62L18.1 170.6c-8.4 2.1-15 8.7-17.3 17.1S1 205 7.3 211l46.2 45L7.3 301C1 307-1.4 316 .8 324.4s8.9 14.9 17.3 17.1l62.5 15.8-17.5 62c-2.4 8.4 0 17.4 6.1 23.5s15.1 8.5 23.5 6.1l62-17.5 15.8 62.5c2.1 8.4 8.7 15 17.1 17.3s17.3-.2 23.4-6.4l45-46.2 45 46.2c6.1 6.2 15 8.7 23.4 6.4s14.9-8.9 17.1-17.3l15.8-62.5 62 17.5c8.4 2.4 17.4 0 23.5-6.1s8.5-15.1 6.1-23.5l-17.5-62 62.5-15.8c8.4-2.1 15-8.7 17.3-17.1s-.2-17.3-6.4-23.4l-46.2-45 46.2-45c6.2-6.1 8.7-15 6.4-23.4s-8.9-14.9-17.3-17.1l-62.5-15.8 17.5-62c2.4-8.4 0-17.4-6.1-23.5s-15.1-8.5-23.5-6.1l-62 17.5L341.4 18.1c-2.1-8.4-8.7-15-17.1-17.3S307 1 301 7.3L256 53.5 211 7.3z"}}]})(t)}function fRe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"}}]})(t)}function hRe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"}}]})(t)}function pRe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M272 96c-78.6 0-145.1 51.5-167.7 122.5c33.6-17 71.5-26.5 111.7-26.5h88c8.8 0 16 7.2 16 16s-7.2 16-16 16H288 216s0 0 0 0c-16.6 0-32.7 1.9-48.2 5.4c-25.9 5.9-50 16.4-71.4 30.7c0 0 0 0 0 0C38.3 298.8 0 364.9 0 440v16c0 13.3 10.7 24 24 24s24-10.7 24-24V440c0-48.7 20.7-92.5 53.8-123.2C121.6 392.3 190.3 448 272 448l1 0c132.1-.7 239-130.9 239-291.4c0-42.6-7.5-83.1-21.1-119.6c-2.6-6.9-12.7-6.6-16.2-.1C455.9 72.1 418.7 96 376 96L272 96z"}}]})(t)}function mRe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"}}]})(t)}function gRe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"}}]})(t)}function vRe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"}}]})(t)}const yRe=U.main`
  width: 100%;
  height: 100%;
`,xRe=U.div`
  font-size: 20px;
  font-weight: 500;
  color: ${({theme:t})=>t.colors.ui800};
  letter-spacing: -0.2px;
`,bRe=U.div`
  font-size: 14px;
  color: ${({theme:t})=>t.colors.ui600};
  font-weight: 500;
`,SRe=U.div`
  display: flex;
  align-items: center;
  margin-bottom: 24px;
  padding-bottom: 8px;
  padding: 1rem;

  gap: 8px;
  border-bottom: 1px solid ${({theme:t})=>t.colors.ui200};
`,yv=({children:t,title:e,backHref:n,description:r})=>b.jsxs(yRe,{children:[b.jsxs(SRe,{children:[typeof n<"u"&&b.jsx(H2e,{href:n,as:"a",children:b.jsx(hRe,{})}),b.jsxs("div",{children:[b.jsx(xRe,{children:e}),b.jsx(bRe,{children:r})]})]}),t]}),wRe=U.div`
  width: 100%;
  background: ${({theme:t})=>t.colors.primary50};
  height: 100%;
  border: 1px solid ${({theme:t})=>t.colors.primary500};
  border-radius: ${({theme:t})=>t.borderRadius.default};
  height: 150px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding: 24px;

  img {
    width: 32px;
    height: 32px;
    padding: 4px;
    border: 1px solid ${({theme:t})=>t.colors.primary500};
    border-radius: 50%;
  }
  .wrap {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .title {
    font-size: 16px;
    font-weight: 500;
    color: ${({theme:t})=>t.colors.ui800};
  }

  .unit {
    text-transform: capitalize;
    font-weight: 600;
    font-size: 16px;
    color: ${({theme:t})=>t.colors.primary700};
  }

  .amount {
    text-transform: capitalize;
    font-weight: 600;
    font-size: 32px;
    color: ${({theme:t})=>t.colors.primary700};
  }
`,ERe=U.div`
  .card-wrap {
    display: flex;
    justify-content: space-between;
    gap: 24px;
    flex-direction: column;

    @media (min-width: 768px) {
      flex-direction: row;
    }
  }
`,r7=U.div`
  padding: 24px 40px;
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  border-radius: ${({theme:t})=>t.borderRadius.default};
  width: 100%;
  background: ${({theme:t})=>t.colors.ui50};
  .card-half-section-title {
    font-size: 24px;
    font-weight: 700;
    color: ${({theme:t})=>t.colors.primary700};
  }

  .card-half-section-paragraph {
    font-size: 16px;
    color: ${({theme:t})=>t.colors.ui600};
    margin-bottom: 16px;
    font-weight: 500;
  }
`,_Re=({dashData:t})=>{const[e,n]=v.useState(null),{sections:r}=t||{};if(!r)return b.jsx("p",{children:"Invalid Dashboard"});const i={refFocus:e,setRefFocus:n},s=b.jsxs("div",{className:"card-wrap",children:[b.jsxs(r7,{className:"card-half-section",children:[b.jsx("div",{className:"card-half-section-title",children:"Deposit Neptune and earn 7.00%"}),b.jsx("div",{className:"card-half-section-paragraph",children:"Earn the Neptune Savings Rate (NPT)"}),b.jsx(on,{children:"Earn"})]}),b.jsxs(r7,{className:"card-half-section",children:[b.jsx("div",{className:"card-half-section-title",children:"Borrow Neptune at 8.00%"}),b.jsx("div",{className:"card-half-section-paragraph",children:"Against ETH, stETH, rETH and other assets"}),b.jsx(on,{children:"Borrow"})]})]}),o=window.location.pathname.includes("financial"),a=o?r.toSpliced(1,0,s):r;return b.jsx(ERe,{children:b.jsx(yv,{title:o?"Financial Dashboard":"Envrionmental Dashboard",children:b.jsx(TRe,{children:a==null?void 0:a.map((l,c)=>{var u;return v.isValidElement(l)?l:b.jsx(CRe,{alignment:"center",children:(u=l.cards)==null?void 0:u.map(d=>{var f;return((f=d==null?void 0:d.data)==null?void 0:f.title)==="Credit Balance"?b.jsxs(wRe,{children:[b.jsx("img",{src:Ju}),b.jsx("div",{className:"title",children:d.data.title}),b.jsxs("div",{className:"wrap",children:[b.jsx("div",{className:"amount",children:d.data.value}),b.jsx("div",{className:"unit",children:d.data.unit})]})]},d.data.title):lRe(d,i)})},c)})})})})},TRe=U(ue.div)`
  width: 100%;
  height: 100%;
  margin: auto;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  box-sizing: border-box;
  gap: 50px;
  overflow-y: auto;
`,CRe=U(ue.div)`
  width: 100%;
  display: flex;
  gap: 24px;
  align-items: center;
  justify-content: space-between;
  border-radius: 10px;
  box-sizing: border-box;
  @media (max-width: 768px) {
    flex-direction: column;
    justify-content: center;
  }
`,kRe=()=>b.jsx(_Re,{}),cee=v.createContext(),PRe=({children:t})=>{const[e,n]=v.useState(!1),[r,i]=v.useState(null),[s,o]=v.useState(!1),[a,l]=v.useState(null),[c,u]=v.useState(""),[d,f]=v.useState(!1),[h,p]=v.useState(!1),[m,g]=v.useState(!1),[y,x]=v.useState(!1),[S,w]=v.useState({}),[E,T]=v.useState(!1),[_,I]=v.useState("Profile Settings"),[A,L]=v.useState(null),[j,D]=v.useState(null),[O,$]=v.useState(""),[R,C]=v.useState(!1),[P,k]=v.useState(!0);v.useEffect(()=>{const Ee=()=>window.innerWidth<=768;return n(Ee()),window.addEventListener("resize",()=>n(Ee())),()=>window.removeEventListener("resize",()=>n(Ee()))},[]),v.useEffect(()=>{const Ee=JSON.parse(sessionStorage.getItem("user")),{uid:ke}=Ee||{};ke?M(ke):k(!1)},[]);const M=async(Ee,ke={})=>{var Te;try{var _e;if(ke!=null&&ke.uid?_e=ke:_e=(Te=await mm.account.getUserFromUID(Ee))==null?void 0:Te.userdata,_e!=null&&_e.uid)return sessionStorage.setItem("user",JSON.stringify(_e)),i(_e),console.log("Set User",_e),!0}catch(Oe){Q("error",Oe.message)}finally{k(!1)}return null},B=()=>o(!s),N=()=>p(!h),V=()=>x(!y),H=()=>g(!m),W=Ee=>{I(Ee),g(!0)},z=()=>T(!E),G=(Ee,ke)=>L({msg:Ee,action:ke}),K=Ee=>{L(null),Ee||Q("error","Action Denied")},Q=(Ee,ke)=>$({[Ee]:ke}),de={STATES:{isLoading:P,isMobile:e,user:r,searchResults:a,routePath:c,sidebarOpen:s,notificationBarOpen:h,verificationUIOpen:y,verificationData:S,settingsMenuOpen:m,calculatorOpen:E,settingsTab:_,confirmation:A,notification:O,txPopupVisible:R,result:j,showSubItems:d},ACTIONS:{setIsLoading:k,updateUser:M,setSearchResults:l,setRoutePath:u,handleSidebar:B,handleNotificationsBar:N,handleVerificationUI:V,setVerificationUIOpen:x,setVerificationData:w,handleSettingsMenu:H,handleSettingsTab:W,toggleCalculator:z,logConfirmation:G,clearNotification:()=>$({}),setResult:D,setTxPopupVisible:C,cancelConfirmation:K,logNotification:Q,handleLogOut:()=>{G("Are you sure you want to log out?",()=>{i(null),sessionStorage.removeItem("user"),window.location.href="/"})},toggleEnvironmentSubItems:()=>f(!d)}};return b.jsx(cee.Provider,{value:de,children:t})},jn=()=>v.useContext(cee),IRe=U.footer`
  max-width: 1000px;
  margin: 0 auto;
  text-align: center;

  @media (min-width: 648px) {
    display: flex;
    justify-content: space-between;
    text-align: left;
    gap: 80px; /* large horizontal gap between left + right */
  }

  .rights-reserved {
    color: ${({theme:t})=>t.colors.ui600};
    font-size: 12px;
    font-weight: 500;
  }

  .button-wrap {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
  }

  .footer-spacer {
    flex: 1;
  }

  a {
    color: ${({theme:t})=>t.colors.primary500};
    font-size: 12px;
    font-weight: 500;
  }
`;function uee(){return b.jsxs(IRe,{children:[b.jsx("span",{className:"rights-reserved",children:" 2024 WaterQuality.Trading  powered by BlueSignal LTD"}),b.jsx("div",{className:"footer-spacer"}),b.jsxs("div",{className:"button-wrap",children:[b.jsx("a",{rel:"noreferrer",target:"_blank",href:"https://waterquality.trading/terms",children:"Terms & Conditions"}),b.jsx("a",{rel:"noreferrer",target:"_blank",href:"https://waterquality.trading/privacy",children:"Privacy Policy"})]})]})}const ARe="6.15.0";function LRe(t,e,n){const r=e.split("|").map(s=>s.trim());for(let s=0;s<r.length;s++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${n}`,i.value=t,i}function TA(t,e,n){for(let r in e){let i=e[r];const s=n?n[r]:null;s&&LRe(i,s,r),Object.defineProperty(t,r,{enumerable:!0,value:i,writable:!1})}}function hf(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>hf(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let i=0;i<t.length;i++)r+=n[t[i]>>4],r+=n[t[i]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return hf(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${hf(r,e)}: ${hf(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function RRe(t,e,n){let r=t;{const s=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${hf(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];s.push(o+"="+hf(a))}}s.push(`code=${e}`),s.push(`version=${ARe}`),s.length&&(t+=" ("+s.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(t);break;default:i=new Error(t)}return TA(i,{code:e}),n&&Object.assign(i,n),i.shortMessage==null&&TA(i,{shortMessage:r}),i}function Mi(t,e,n,r){if(!t)throw RRe(e,n,r)}function Mn(t,e,n,r){Mi(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"){const n=String.fromCharCode(233).normalize("NFD"),r=String.fromCharCode(101,769);if(n!==r)throw new Error("broken")}t.push(e)}catch{}return t},[]);function ORe(t,e,n){if(n==null&&(n=""),t!==e){let r=n,i="new";n&&(r+=".",i+=" "+n),Mi(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function DRe(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let i=2;for(let s=0;s<r.length;s++)r[s]=parseInt(t.substring(i,i+2),16),i+=2;return r}Mn(!1,"invalid BytesLike value",e||"value",t)}function MRe(t,e){return DRe(t,e,!1)}const dee=BigInt(0),pf=BigInt(1),mf=9007199254740991;function CA(t,e){const n=fee(t,"value"),r=BigInt(xv(e,"width"));if(Mi(n>>r===dee,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-pf){const i=(pf<<r)-pf;return-((~n&i)+pf)}return n}function i7(t,e){const n=fee(t,"value"),r=BigInt(xv(e,"bits"));return n&(pf<<r)-pf}function y3(t,e){switch(typeof t){case"bigint":return t;case"number":return Mn(Number.isInteger(t),"underflow",e||"value",t),Mn(t>=-mf&&t<=mf,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Mn(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Mn(!1,"invalid BigNumberish value",e||"value",t)}function fee(t,e){const n=y3(t,e);return Mi(n>=dee,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const s7="0123456789abcdef";function $Re(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=s7[n>>4],e+=s7[n&15];return BigInt(e)}return y3(t)}function xv(t,e){switch(typeof t){case"bigint":return Mn(t>=-mf&&t<=mf,"overflow",e||"value",t),Number(t);case"number":return Mn(Number.isInteger(t),"underflow",e||"value",t),Mn(t>=-mf&&t<=mf,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return xv(BigInt(t),e)}catch(n){Mn(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Mn(!1,"invalid numeric value",e||"value",t)}const NRe=BigInt(-1),is=BigInt(0),gf=BigInt(1),FRe=BigInt(5),bd={};let Nf="0000";for(;Nf.length<80;)Nf+=Nf;function kc(t){let e=Nf;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function Vp(t,e,n){const r=BigInt(e.width);if(e.signed){const i=gf<<r-gf;Mi(n==null||t>=-i&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>is?t=CA(i7(t,r),r):t=-CA(i7(-t,r),r)}else{const i=gf<<r;Mi(n==null||t>=0&&t<i,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%i+i)%i&i-gf}return t}function IC(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Mn(s,"invalid fixed format","format",t),e=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=t,o=(a,l,c)=>s[a]==null?c:(Mn(typeof s[a]===l,"invalid fixed format ("+a+" not "+l+")","format."+a,s[a]),s[a]);e=o("signed","boolean",e),n=o("width","number",n),r=o("decimals","number",r)}Mn(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),Mn(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const i=(e?"":"u")+"fixed"+String(n)+"x"+String(r);return{signed:e,width:n,decimals:r,name:i}}function jRe(t,e){let n="";t<is&&(n="-",t*=NRe);let r=t.toString();if(e===0)return n+r;for(;r.length<=e;)r=Nf+r;const i=r.length-e;for(r=r.substring(0,i)+"."+r.substring(i);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return n+r}var cs,pt,mr,Qo,zc,us,Bo,Y0,PA,Q0,IA,X0,AA,Z0,LA;const hl=class hl{constructor(e,n,r){Bs(this,Qo);Bs(this,us);Bs(this,Y0);Bs(this,Q0);Bs(this,X0);Bs(this,Z0);ce(this,"format");Bs(this,cs,void 0);Bs(this,pt,void 0);Bs(this,mr,void 0);ce(this,"_value");ORe(e,bd,"FixedNumber"),Qv(this,pt,n),Qv(this,cs,r);const i=jRe(n,r.decimals);TA(this,{format:r.name,_value:i}),Qv(this,mr,kc(r.decimals))}get signed(){return Me(this,cs).signed}get width(){return Me(this,cs).width}get decimals(){return Me(this,cs).decimals}get value(){return Me(this,pt)}addUnsafe(e){return Ut(this,Y0,PA).call(this,e)}add(e){return Ut(this,Y0,PA).call(this,e,"add")}subUnsafe(e){return Ut(this,Q0,IA).call(this,e)}sub(e){return Ut(this,Q0,IA).call(this,e,"sub")}mulUnsafe(e){return Ut(this,X0,AA).call(this,e)}mul(e){return Ut(this,X0,AA).call(this,e,"mul")}mulSignal(e){Ut(this,Qo,zc).call(this,e);const n=Me(this,pt)*Me(e,pt);return Mi(n%Me(this,mr)===is,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Ut(this,us,Bo).call(this,n/Me(this,mr),"mulSignal")}divUnsafe(e){return Ut(this,Z0,LA).call(this,e)}div(e){return Ut(this,Z0,LA).call(this,e,"div")}divSignal(e){Mi(Me(e,pt)!==is,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ut(this,Qo,zc).call(this,e);const n=Me(this,pt)*Me(this,mr);return Mi(n%Me(e,pt)===is,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Ut(this,us,Bo).call(this,n/Me(e,pt),"divSignal")}cmp(e){let n=this.value,r=e.value;const i=this.decimals-e.decimals;return i>0?r*=kc(i):i<0&&(n*=kc(-i)),n<r?-1:n>r?1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=Me(this,pt);return Me(this,pt)<is&&(e-=Me(this,mr)-gf),e=Me(this,pt)/Me(this,mr)*Me(this,mr),Ut(this,us,Bo).call(this,e,"floor")}ceiling(){let e=Me(this,pt);return Me(this,pt)>is&&(e+=Me(this,mr)-gf),e=Me(this,pt)/Me(this,mr)*Me(this,mr),Ut(this,us,Bo).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,r=FRe*kc(n-1);let i=this.value+r;const s=kc(n);return i=i/s*s,Vp(i,Me(this,cs),"round"),new hl(bd,i,Me(this,cs))}isZero(){return Me(this,pt)===is}isNegative(){return Me(this,pt)<is}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return hl.fromString(this.toString(),e)}static fromValue(e,n,r){const i=n==null?0:xv(n),s=IC(r);let o=y3(e,"value");const a=i-s.decimals;if(a>0){const l=kc(a);Mi(o%l===is,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=l}else a<0&&(o*=kc(-a));return Vp(o,s,"fromValue"),new hl(bd,o,s)}static fromString(e,n){const r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Mn(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);const i=IC(n);let s=r[2]||"0",o=r[3]||"";for(;o.length<i.decimals;)o+=Nf;Mi(o.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),o=o.substring(0,i.decimals);const a=BigInt(r[1]+s+o);return Vp(a,i,"fromString"),new hl(bd,a,i)}static fromBytes(e,n){let r=$Re(MRe(e,"value"));const i=IC(n);return i.signed&&(r=CA(r,i.width)),Vp(r,i,"fromBytes"),new hl(bd,r,i)}};cs=new WeakMap,pt=new WeakMap,mr=new WeakMap,Qo=new WeakSet,zc=function(e){Mn(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},us=new WeakSet,Bo=function(e,n){return e=Vp(e,Me(this,cs),n),new hl(bd,e,Me(this,cs))},Y0=new WeakSet,PA=function(e,n){return Ut(this,Qo,zc).call(this,e),Ut(this,us,Bo).call(this,Me(this,pt)+Me(e,pt),n)},Q0=new WeakSet,IA=function(e,n){return Ut(this,Qo,zc).call(this,e),Ut(this,us,Bo).call(this,Me(this,pt)-Me(e,pt),n)},X0=new WeakSet,AA=function(e,n){return Ut(this,Qo,zc).call(this,e),Ut(this,us,Bo).call(this,Me(this,pt)*Me(e,pt)/Me(this,mr),n)},Z0=new WeakSet,LA=function(e,n){return Mi(Me(e,pt)!==is,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ut(this,Qo,zc).call(this,e),Ut(this,us,Bo).call(this,Me(this,pt)*Me(this,mr)/Me(e,pt),n)};let kA=hl;const BRe=["wei","kwei","mwei","gwei","szabo","finney","ether"];function RA(t,e){Mn(typeof t=="string","value must be a string","value",t);let n=18;if(typeof e=="string"){const r=BRe.indexOf(e);Mn(r>=0,"invalid unit","unit",e),n=3*r}else e!=null&&(n=xv(e,"unit"));return kA.fromString(t,{decimals:n,width:512}).value}function URe(t){return RA(t,18)}const Ui=U.label`
font-size: 14px;
font-weight: 500;
`,VRe=U.div`
  position: relative;
  width: 100%;

  ${Ui} {
    margin-bottom: 4px;
  }
`,zRe=U.div`
  color: ${({theme:t})=>t.colors.red500};
  font-size: 12px;
  font-weight: 500;
  top: calc(100% + 4px);
  font-weight: 500;
`;function _t({label:t,children:e,error:n,className:r}){return b.jsxs(VRe,{className:r??"",children:[b.jsx(Ui,{children:t}),e,b.jsx(zRe,{children:n})]})}const qt=U.input`
  background: ${({theme:t,error:e})=>e?t.colors.red50:t.colors.ui50};
  height: ${({theme:t})=>t.formHeightMd};
  padding: 0px 8px;

  border-radius: ${({theme:t})=>t.borderRadius.default};
  color: ${({theme:t})=>t.colors.ui800};
  margin: 0px;
  width: 100%;
  font-weight: 500;
  border: 1px solid
    ${({theme:t,error:e})=>e?t.colors.red300:t.colors.ui300};
`,lo={primary:"#005A87",secondary:"#003F5E",accent:"#007BB5",white:"#FFFFFF",lightGrey:"#F2F2F2",darkGrey:"#333333"},HRe=U(ue.div)`
 display: flex;
 flex-direction: column;
 align-items: center;
 justify-content: center;
 width: 100%;
 max-width: 400px;
 background-color: white;
 padding: 2rem;
 border-radius: 10px;
 box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
 z-index: 100;
 margin: 0 auto;
 position: relative;
 .close-button { 
  position: absolute;
  top: 8px; 
  background-color: white;
  right: 8px;
  width: 16px;
  height: 16px;
  border: none;
  padding: 0px; 
  svg {
    color: ${({theme:t})=>t.colors.ui600}; 
    font-size: 16px;
    height: 16px; 
    width: 16px;
    margin: 0px;
  }
 }
  
 h3 { 
  text-align: left;
  color: ${({theme:t})=>t.colors.ui800};
 }

 @media (min-width: 768px) {
   max-height: 80vh;
 }
`,WRe=U.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  gap: 1rem;
`;U.button`
  padding: 0.8rem;
  border-radius: 4px;
  background-color: ${lo.accent};
  color: ${lo.white};
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: background-color 0.3s;

  &:hover {
    background-color: ${lo.primary};
  }

  &:disabled {
    background-color: ${lo.darkGrey};
    cursor: not-allowed;
  }
`;const GRe=U.div`
  margin-top: 1.5rem;
  padding: 1rem;
  background-color: ${lo.lightGrey};
  border: 1px solid ${lo.secondary};
  border-radius: 8px;
  width: 100%;
  text-align: center;
`;U.button`
  margin-top: 1rem;
  padding: 0.5rem 1rem;
  background-color: transparent;
  color: ${lo.primary};
  border: 1px solid ${lo.primary};
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s;

  &:hover {
    background-color: ${lo.primary};
    color: ${lo.white};
  }
`;const KRe=(t,e=6,n=4)=>{if(!t)return"";const r=t.slice(0,e),i=t.slice(-n);return`${r}...${i}`},qRe=({closePopup:t,actionType:e,listingId:n,buyNFT:r,placeBid:i,listingPrice:s})=>{const[o,a]=v.useState(e==="buy"?s:0),[l,c]=v.useState(!1),[u,d]=v.useState(null),f=async h=>{h.preventDefault(),c(!0);try{const p=e==="buy"?await r(n,String(o)):await i(n,String(o));console.log({txReceipt:p}),d(p)}catch(p){console.error("Transaction error:",p)}c(!1)};return b.jsxs(HRe,{initial:{scale:0},animate:{scale:1},exit:{scale:0},children:[b.jsx("button",{onClick:t,className:"close-button",children:b.jsx(vRe,{})}),b.jsx("h3",{className:"",children:e==="buy"?"Buy NFT":"Place a Bid"}),b.jsxs(WRe,{onSubmit:f,children:[b.jsx(_t,{label:"Price",children:b.jsx(qt,{type:"number",value:o,onChange:h=>a(h.target.value),placeholder:"Enter amount",disabled:e==="buy",required:!0})}),b.jsx(on,{type:"submit",disabled:l,children:l?"Processing...":"Submit"})]}),u&&b.jsxs(GRe,{children:[b.jsx("p",{children:b.jsx("strong",{children:"Transaction Receipt:"})}),b.jsxs("button",{children:["View ",b.jsx(jt,{icon:UQ})]}),b.jsxs("p",{children:["Transaction Hash: ",KRe(u.hash)]})]})]})};function YRe(t){const e="0x0000000000000000000000000000000000000000";return t.toLowerCase()!==e.toLowerCase()}const QRe={primary:"#005A87",secondary:"#003F5E",accent:"#007BB5"},hee=Ms`
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
`,XRe=Ms`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`,ZRe=U.div`
  border: 4px solid ${({theme:t})=>t.colors.ui200};
  border-top: 4px solid ${({theme:t})=>t.colors.ui800};
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: ${XRe} 0.8s linear infinite;
  margin: 20px auto;
`,JRe=U.div`
  display: flex;
  justify-content: space-between;
  padding: 24px 0px;
  width: 100%;
  box-sizing: border-box;
  animation: ${hee} 0.6s ease-out;
`,eOe=U(ue.div)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  z-index: 10;
`,tOe=U.div`
  width: 80%;
  height: auto;
  margin-right: 20px;
  animation: ${hee} 0.8s ease-out;

  border-radius: 4px;
  overflow: auto;

  @media (max-width: 768px) {
    width: 100%;
    height: 100vh;
  }
`,nOe=U.div`
  display: flex;
  align-items: center;
  gap: 8px;
`,rOe=U.button`
  display: none;

  @media (max-width: 768px) {
    display: block;
    position: fixed;
    top: 55px;
    right: 10px;
    z-index: 100;
    background: ${QRe.primary};
    color: #fff;
  }
`,wm=U.div`
  height: auto;
  margin-bottom: 30px;
  padding: 20px;
  border-radius: 8px;

  transition: all 0.3s ease;
`,iOe=U(wm)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: ${({theme:t})=>t.colors.ui200};
  .hero-section-info {
    display: flex;
    gap: 8px;
    align-items: center;
  }
`,sOe=U(ue.img)`
  max-width: 80px;

  border: 1px solid ${({theme:t})=>t.colors.ui200};
  background: ${({theme:t})=>t.colors.ui50};
  border-radius: ${({theme:t})=>t.borderRadius.default};
  padding: 24px;
  height: auto;
`,Vy=U.h2`
  margin-bottom: 4px;
  font-size: 16px;
  color: ${({theme:t})=>t.colors.ui800};
`,zy=U.div``,Pc=U.span`
  font-weight: bold;
`,za=U.span`
  font-weight: 400;
  color: ${({theme:t})=>t.colors.ui600};
  font-size: 16px;
  font-weight: 500;
`,oOe=()=>{const{id:t}=cD(),{STATES:e}=jn(),{user:n}=e||{};Po();const[r,i]=v.useState({}),[s,o]=v.useState([]),[a,l]=v.useState([]),[c,u]=v.useState(""),[d,f]=v.useState(!1),[h,p]=v.useState([]),[m,g]=v.useState(!1),[y,x]=v.useState(!1),S=hs.Events,w=()=>{x(!y)};v.useEffect(()=>{(async()=>{var j;g(!0);try{const D=(j=await S.getAllEvents())==null?void 0:j.events;if(!D)return;console.log({allEvents:D});const O=D.filter($=>{var R;return((R=$.listingId)==null?void 0:R.toString())===t});i(O.find($=>$.type==="Listing")||{}),o(O.filter($=>$.type==="Bid Placed"||$.type==="Bid Accepted")),l(O.filter($=>$.type==="Sale"))}catch(D){console.error("Error fetching listing data:",D)}finally{g(!1)}})()},[t]),v.useEffect(()=>{n&&E()},[n]);const E=async()=>{var j;const L=(j=await S.filtered.bidded())==null?void 0:j.events;L&&p(L.filter(D=>D.listingId===Number(t)))},T=L=>{u(L),f(!0)},_=()=>{f(!1)},I=async(L,j)=>{try{return await hs.Buyer.buyNFT(L,RA(j,"ether"))}catch(D){throw console.error("Error buying NFT:",D),D}},A=async(L,j)=>{try{return await hs.Buyer.placeBid(L,RA(j,"ether"))}catch(D){throw console.error("Error placing bid:",D),D}};return r?b.jsx(yv,{backHref:"/marketplace",title:"Listing",children:b.jsxs(JRe,{children:[m?b.jsx(ZRe,{}):b.jsxs(tOe,{children:[b.jsxs(iOe,{children:[b.jsxs("div",{className:"hero-section-info",children:[b.jsx(sOe,{src:Ju}),b.jsxs("div",{children:[b.jsxs(Vy,{children:["Listing #",t]}),b.jsx(zy,{children:b.jsxs(za,{children:["$",r.price]})})]})]}),b.jsxs(nOe,{children:[b.jsx(on,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T("buy"),disabled:m,children:"Buy Now"}),b.jsx(Hi,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>T("bid"),disabled:m,children:"Make a Bid"})]})]}),b.jsxs(wm,{children:[b.jsx(Vy,{children:"Bid History"}),s.map((L,j)=>b.jsxs(zy,{children:[b.jsxs(Pc,{children:["Action: ",b.jsx(za,{children:L.type})]}),b.jsxs(Pc,{children:["Bidder: ",b.jsx(za,{children:L.bidder})]}),b.jsxs(Pc,{children:["Amount: ",b.jsxs(za,{children:[L.amount," Matic"]})]})]},j))]}),b.jsxs(wm,{children:[b.jsx(Vy,{children:"Sale History"}),a.map((L,j)=>b.jsxs(zy,{children:[b.jsxs(Pc,{children:["Buyer: ",b.jsx(za,{children:L.buyer})]}),b.jsxs(Pc,{children:["Sale Price: ",b.jsxs(za,{children:[L.price," Matic"]})]})]},j))]}),b.jsxs(wm,{children:[b.jsx(Vy,{children:"Your Bid History"}),n?b.jsx(b.Fragment,{children:h.length>0?h.map(L=>b.jsxs(zy,{children:[b.jsxs(Pc,{children:["Block: ",b.jsx(za,{children:L.blockNumber})]}),b.jsxs(Pc,{children:["Amount: ",b.jsxs(za,{children:[L.amount," Matic"]})]})]},L.blockNumber)):b.jsx("p",{children:"No Bids"})}):b.jsx("p",{children:"User Not Connected"})]})]}),b.jsx(rOe,{onClick:w,children:b.jsx(jt,{icon:y?Vve:jve})}),b.jsx(wm,{}),d&&b.jsx(eOe,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:b.jsx(qRe,{closePopup:_,actionType:c,listingId:t,listingPrice:r.price,buyNFT:I,placeBid:A})})]})}):b.jsx("p",{children:"Loading listing details..."})},aOe=U.div`
    background-color: white;
    border: none;
    padding: 20px;
    border-radius: ${({theme:t})=>t.borderRadius.default};
    transition: transform 0.3s, box-shadow 0.3s;
    max-height: 400px;
    overflow: auto;
    box-sizing: border-box;
/*     border: 1px solid ${({theme:t})=>t.colors.ui200}; */
background: ${({theme:t})=>t.colors.ui50};
border: 1px solid ${({theme:t})=>t.colors.ui200};

    .upper-section { 
        display: flex;
        align-items: center;
        gap: 8px;
    }   
    @media (max-width: 768px) {
        width: 100%
    }

`,pee=U.img`
    width: 64px;
    height: 64px; 
    padding: 8px;
    background: white; 
    border: 1px solid ${({theme:t})=>t.colors.ui200};
    border-radius: 10px;
    object-fit: cover;
    margin-bottom: 10px;
`,lOe=U.div`
    padding: 10px 0;
`,cOe=U.h3`
    font-size: 1rem;
    margin: 0;
    color: ${({theme:t})=>t.colors.ui800};
    font-weight: 500;
`,o7=U.p`
    color: ${({theme:t})=>t.colors.ui600};
    font-size: 14px;
    margin: 5px 0;
    font-weight: 500; 
`,uOe=U.p`
    color: ${({theme:t})=>t.colors.primary500};
    font-size: 1rem;
    font-weight: 600; 
`,dOe=({nft:t,navigate:e})=>b.jsxs(aOe,{children:[b.jsxs("div",{className:"upper-section",children:[b.jsx(pee,{src:t.image||Ju,alt:t.name}),b.jsxs("div",{children:[b.jsxs(cOe,{children:[t.name," #",Number(t.tokenId)]}),b.jsxs(uOe,{children:["$",Math.round(t.price*Math.random()*100)]})]})]}),b.jsxs(lOe,{children:[b.jsx(o7,{children:"Seller: NeptuneChain*"}),b.jsxs(o7,{children:["Available: ",Math.round(Math.random()*100)]})]}),b.jsx(on,{className:!0,onClick:()=>e(`listing/${t.listingId}`),children:"Buy Now"})]}),Rx=U.div`
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  grid-gap: 20px;
  width: 100%;
  max-width: 1200px;

  @media (max-width: 768px) {
    display:flex;
    flex-direction: column;
  }
`,fOe=U.div`
    border: 5px solid ${({theme:t})=>t.colors.ui200};
    border-top: 5px solid ${({theme:t})=>t.colors.ui800};
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 0.8s linear infinite;
    margin: auto;

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
`,hOe=U.p`
    color: red;
`,pOe=U.div`
    .loading-text {
        font-weight: 500; 
        color: ${({theme:t})=>t.colors.ui800};
        text-align: center; 
        margin-top: 8px; 
        font-size: 14px;
    }
`,mOe=()=>{const t=Po(),[e,n]=v.useState([]),[r,i]=v.useState(!1),[s,o]=v.useState(null),a=hs.Events;v.useEffect(()=>{l()},[]);const l=async()=>{i(!0);try{const{nfts:c}=await(a==null?void 0:a.listAvailableNFTs())||[];n(c)}catch(c){console.error(c),o(c.message)}finally{i(!1)}};return r?b.jsxs(pOe,{children:[b.jsx(fOe,{}),b.jsx("div",{className:"loading-text",children:"Loading Items"})]}):s?b.jsxs(hOe,{children:["Error: ",s]}):b.jsx(Rx,{children:(e==null?void 0:e.length)>0?e.map((c,u)=>b.jsx(dOe,{nft:c,navigate:t},u)):b.jsx("p",{children:"No Assets Available"})})};function gOe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(t)}function vOe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"}}]})(t)}function yOe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function xOe(t){return Ns({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 336c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 112c-13.23 0-24-10.77-24-24s10.77-24 24-24 24 10.77 24 24-10.77 24-24 24zm80-288h-64v-40.2c0-14.12 4.7-27.76 13.15-38.84 4.42-5.8 3.55-14.06-1.32-19.49L534.2 37.3c-6.66-7.45-18.32-6.92-24.7.78C490.58 60.9 480 89.81 480 119.8V160H377.67L321.58 29.14A47.914 47.914 0 0 0 277.45 0H144c-26.47 0-48 21.53-48 48v146.52c-8.63-6.73-20.96-6.46-28.89 1.47L36 227.1c-8.59 8.59-8.59 22.52 0 31.11l5.06 5.06c-4.99 9.26-8.96 18.82-11.91 28.72H22c-12.15 0-22 9.85-22 22v44c0 12.15 9.85 22 22 22h7.14c2.96 9.91 6.92 19.46 11.91 28.73l-5.06 5.06c-8.59 8.59-8.59 22.52 0 31.11L67.1 476c8.59 8.59 22.52 8.59 31.11 0l5.06-5.06c9.26 4.99 18.82 8.96 28.72 11.91V490c0 12.15 9.85 22 22 22h44c12.15 0 22-9.85 22-22v-7.14c9.9-2.95 19.46-6.92 28.72-11.91l5.06 5.06c8.59 8.59 22.52 8.59 31.11 0l31.11-31.11c8.59-8.59 8.59-22.52 0-31.11l-5.06-5.06c4.99-9.26 8.96-18.82 11.91-28.72H330c12.15 0 22-9.85 22-22v-6h80.54c21.91-28.99 56.32-48 95.46-48 18.64 0 36.07 4.61 51.8 12.2l50.82-50.82c6-6 9.37-14.14 9.37-22.63V192c.01-17.67-14.32-32-31.99-32zM176 416c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm22-256h-38V64h106.89l41.15 96H198z"}}]})(t)}var mee={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(mee);var bOe=mee.exports;const SOe=Ku(bOe),wOe=["xxl","xl","lg","md","sm","xs"],EOe="xs",_Oe=v.createContext({prefixes:{},breakpoints:wOe,minBreakpoint:EOe});function TOe(t,e){const{prefixes:n}=v.useContext(_Oe);return t||n[e]||e}const gee=v.forwardRef(({bsPrefix:t,variant:e,animation:n="border",size:r,as:i="div",className:s,...o},a)=>{t=TOe(t,"spinner");const l=`${t}-${n}`;return b.jsx(i,{ref:a,...o,className:SOe(s,l,r&&`${l}-${r}`,e&&`text-${e}`)})});gee.displayName="Spinner";const COe=gee,kOe=U.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(5px);
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  z-index: 100;
`,POe=U.div`
  position: fixed;
  top: 10vh;
  left: 50%;
  transform: translateX(-50%);
  width: 700px;
  max-width: 1000px;
  height: 80vh;
  background-color: white;
  padding: 30px;
  border-radius: 15px;
  box-sizing: border-box;
  box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
  z-index: 101;
  overflow-y: auto;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;

  @media (max-width: 768px) {
    width: 95%;
    padding: 20px;
  }
`,IOe=U.button`
  position: absolute;
  top: 0px;
  right: 0px;
  cursor: pointer;
  border: none;
  background: none;
  font-size: 24px;
  color: ${({theme:t})=>t.colors.ui400};
  transition: color 0.2s, transform 0.2s;
  font-size: 16px;
  &:hover {
    color: ${({theme:t})=>t.colors.ui800};
    transform: translateY(-2px);
  }
`,AOe=U.div`
  border-top: 1px solid ${({theme:t})=>t.colors.ui100};
  border-bottom: 1px solid ${({theme:t})=>t.colors.ui100};
  padding: 16px 0px;
`,LOe=U(ue.div)`
  font-size: 16px;
  font-weight: 500;
  color: ${({theme:t})=>t.colors.ui800};
`,ROe=U(ue.table)`
  width: 100%;
  border-collapse: collapse;
  text-align: left;
  margin-top: 12px;
  text-transform: capitalize;

  th {
    background-color: #f4f4f4;
    color: #333;
  }

  tr:nth-child(even) {
    background-color: #f9f9f9;
  }
`,a7=U.p`
  color: #826251;
  font-style: italic;
`,OOe=U.div`
  display: flex;
  align-items: center;
  gap: 4px;
  flex-wrap: wrap;
  text-transform: capitalize;
  width: 100%;
  justify-content: flex-start;
`,DOe=U.div`
  width: 100%;
  overflow-y: auto;
  margin-top: 40px;
  padding-bottom: 10px;
`,MOe=U.div`
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  svg {
    color: ${({theme:t})=>t.colors.ui600};
    font-size: 12px;
  }
`,$Oe={open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},NOe=({event:t,filterType:e})=>{const[n,r]=v.useState(!1),i=()=>r(!n),s=e==="all"?{"":t.type||"unnamed"}:{"Listing #":t.listingId||"Not Available"};return b.jsxs(AOe,{children:[b.jsx(LOe,{onClick:i,initial:"initial",animate:n?"open":"collapsed",children:Object.entries(s).map(([o,a],l)=>b.jsxs(MOe,{children:[b.jsx("p",{children:a},l),b.jsx(gOe,{})]},l))}),b.jsx(Cr,{children:n&&b.jsx(ROe,{variants:$Oe,initial:"initial",animate:"open",exit:"collapsed",children:b.jsx("tbody",{children:Object.entries(t).map(([o,a],l)=>b.jsxs("tr",{children:[b.jsx("td",{children:o}),b.jsxs("td",{children:[typeof a=="string"?a:JSON.stringify(a)," ",(o==="price"||o==="amount")&&"$"]})]},l))})})})]})},FOe=({onClose:t})=>{const[e,n]=v.useState([]),[r,i]=v.useState("all"),[s,o]=v.useState(!0),[a,l]=v.useState(null),c=hs.Events;v.useEffect(()=>{f()},[r]);const u=h=>{i(h)},d=async(h,p=500,m="latest")=>{var y,x;let g;h in c.filtered?(g=(y=await c.filtered[h](p,m))==null?void 0:y.events,console.log("filtered",{filterType:h,_events:g})):(g=(x=await c.getAllEvents(p,m))==null?void 0:x.events,console.log("all events",{_events:g})),Array.isArray(g)&&n(g)},f=async()=>{o(!0);try{await d(r)}catch(h){l(h==null?void 0:h.message)}finally{o(!1)}};return b.jsx(kOe,{children:b.jsxs(POe,{children:[b.jsx(IOe,{onClick:t,children:" "}),b.jsxs(OOe,{children:[b.jsx(AS,{onClick:()=>u("all"),children:"All Events"}),Object.keys((c==null?void 0:c.filtered)??{}).map((h,p)=>b.jsxs(AS,{onClick:()=>u(h),children:[h.replace(/([A-Z])/g," $1").trim()," Events"]},p))]}),b.jsxs(DOe,{children:[a&&b.jsx(b.Fragment,{children:b.jsxs(a7,{style:{color:"red",display:"flex",gap:"0.5rem",alignItems:"center"},children:[b.jsx(gRe,{onClick:()=>l(null)}),a]})}),s?b.jsx(dJ,{text:"Loading Events..."}):(e==null?void 0:e.length)===0?b.jsx(a7,{children:"No events to display"}):b.jsx(Cr,{children:e==null?void 0:e.map((h,p)=>b.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:b.jsx(NOe,{event:h,filterType:r})},p))})]})]})})};function x3(t){return e=>!!e.type&&e.type.tabsRole===t}const bv=x3("Tab"),qE=x3("TabList"),YE=x3("TabPanel");function jOe(t){return bv(t)||qE(t)||YE(t)}function OA(t,e){return v.Children.map(t,n=>n===null?null:jOe(n)?e(n):n.props&&n.props.children&&typeof n.props.children=="object"?v.cloneElement(n,Object.assign({},n.props,{children:OA(n.props.children,e)})):n)}function LS(t,e){return v.Children.forEach(t,n=>{n!==null&&(bv(n)||YE(n)?e(n):n.props&&n.props.children&&typeof n.props.children=="object"&&(qE(n)&&e(n),LS(n.props.children,e)))})}function vee(t,e,n){let r,i=0,s=0,o=!1;const a=[],l=t[e];return LS(l,c=>{qE(c)&&(c.props&&c.props.children&&typeof c.props.children=="object"&&LS(c.props.children,u=>a.push(u)),o&&(r=new Error("Found multiple 'TabList' components inside 'Tabs'. Only one is allowed.")),o=!0),bv(c)?((!o||a.indexOf(c)===-1)&&(r=new Error("Found a 'Tab' component outside of the 'TabList' component. 'Tab' components have to be inside the 'TabList' component.")),i++):YE(c)&&s++}),!r&&i!==s&&(r=new Error(`There should be an equal number of 'Tab' and 'TabPanel' in \`${n}\`. Received ${i} 'Tab' and ${s} 'TabPanel'.`)),r}function BOe(t,e,n,r,i){const s=t[e],o=i||e;let a=null;return s&&typeof s!="function"?a=new Error(`Invalid ${r} \`${o}\` of type \`${typeof s}\` supplied to \`${n}\`, expected \`function\`.`):t.selectedIndex!=null&&s==null&&(a=new Error(`The ${r} \`${o}\` is marked as required in \`${n}\`, but its value is \`undefined\` or \`null\`.
\`onSelect\` is required when \`selectedIndex\` is also set. Not doing so will make the tabs not do anything, as \`selectedIndex\` indicates that you want to handle the selected tab yourself.
If you only want to set the inital tab replace \`selectedIndex\` with \`defaultIndex\`.`)),a}function UOe(t,e,n,r,i){const s=t[e],o=i||e;let a=null;if(s!=null&&typeof s!="number")a=new Error(`Invalid ${r} \`${o}\` of type \`${typeof s}\` supplied to \`${n}\`, expected \`number\`.`);else if(t.defaultIndex!=null&&s!=null)return new Error(`The ${r} \`${o}\` cannot be used together with \`defaultIndex\` in \`${n}\`.
Either remove \`${o}\` to let \`${n}\` handle the selected tab internally or remove \`defaultIndex\` to handle it yourself.`);return a}function yee(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=yee(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function QE(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=yee(t))&&(r&&(r+=" "),r+=e);return r}function xee(t){let e=0;return LS(t,n=>{bv(n)&&e++}),e}const VOe=["children","className","disabledTabClassName","domRef","focus","forceRenderTabPanel","onSelect","selectedIndex","selectedTabClassName","selectedTabPanelClassName","environment","disableUpDownKeys","disableLeftRightKeys"];function zOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function bee(t){return t&&"getAttribute"in t}function l7(t){return bee(t)&&t.getAttribute("data-rttab")}function Ic(t){return bee(t)&&t.getAttribute("aria-disabled")==="true"}let RS;function HOe(t){const e=t||(typeof window<"u"?window:void 0);try{RS=!!(typeof e<"u"&&e.document&&e.document.activeElement)}catch{RS=!1}}const WOe={className:"react-tabs",focus:!1},GOe={children:vee},KOe=t=>{SD.checkPropTypes(GOe,t,"prop","UncontrolledTabs");let e=v.useRef([]),n=v.useRef([]);const r=v.useRef();function i(S,w){if(S<0||S>=c())return;const{onSelect:E,selectedIndex:T}=t;E(S,T,w)}function s(S){const w=c();for(let E=S+1;E<w;E++)if(!Ic(u(E)))return E;for(let E=0;E<S;E++)if(!Ic(u(E)))return E;return S}function o(S){let w=S;for(;w--;)if(!Ic(u(w)))return w;for(w=c();w-- >S;)if(!Ic(u(w)))return w;return S}function a(){const S=c();for(let w=0;w<S;w++)if(!Ic(u(w)))return w;return null}function l(){let S=c();for(;S--;)if(!Ic(u(S)))return S;return null}function c(){const{children:S}=t;return xee(S)}function u(S){return e.current[`tabs-${S}`]}function d(){let S=0;const{children:w,disabledTabClassName:E,focus:T,forceRenderTabPanel:_,selectedIndex:I,selectedTabClassName:A,selectedTabPanelClassName:L,environment:j}=t;n.current=n.current||[];let D=n.current.length-c();const O=v.useId();for(;D++<0;)n.current.push(`${O}${n.current.length}`);return OA(w,$=>{let R=$;if(qE($)){let C=0,P=!1;RS==null&&HOe(j);const k=j||(typeof window<"u"?window:void 0);RS&&k&&(P=te.Children.toArray($.props.children).filter(bv).some((M,B)=>k.document.activeElement===u(B))),R=v.cloneElement($,{children:OA($.props.children,M=>{const B=`tabs-${C}`,N=I===C,V={tabRef:H=>{e.current[B]=H},id:n.current[C],selected:N,focus:N&&(T||P)};return A&&(V.selectedClassName=A),E&&(V.disabledClassName=E),C++,v.cloneElement(M,V)})})}else if(YE($)){const C={id:n.current[S],selected:I===S};_&&(C.forceRender=_),L&&(C.selectedClassName=L),S++,R=v.cloneElement($,C)}return R})}function f(S){const{direction:w,disableUpDownKeys:E,disableLeftRightKeys:T}=t;if(p(S.target)){let{selectedIndex:_}=t,I=!1,A=!1;(S.code==="Space"||S.keyCode===32||S.code==="Enter"||S.keyCode===13)&&(I=!0,A=!1,h(S)),!T&&(S.keyCode===37||S.code==="ArrowLeft")||!E&&(S.keyCode===38||S.code==="ArrowUp")?(w==="rtl"?_=s(_):_=o(_),I=!0,A=!0):!T&&(S.keyCode===39||S.code==="ArrowRight")||!E&&(S.keyCode===40||S.code==="ArrowDown")?(w==="rtl"?_=o(_):_=s(_),I=!0,A=!0):S.keyCode===35||S.code==="End"?(_=l(),I=!0,A=!0):(S.keyCode===36||S.code==="Home")&&(_=a(),I=!0,A=!0),I&&S.preventDefault(),A&&i(_,S)}}function h(S){let w=S.target;do if(p(w)){if(Ic(w))return;const E=[].slice.call(w.parentNode.children).filter(l7).indexOf(w);i(E,S);return}while((w=w.parentNode)!=null)}function p(S){if(!l7(S))return!1;let w=S.parentElement;do{if(w===r.current)return!0;if(w.getAttribute("data-rttabs"))break;w=w.parentElement}while(w);return!1}const m=Object.assign({},WOe,t),{className:g,domRef:y}=m,x=zOe(m,VOe);return te.createElement("div",Object.assign({},x,{className:QE(g),onClick:h,onKeyDown:f,ref:S=>{r.current=S,y&&y(S)},"data-rttabs":!0}),d())},qOe=["children","defaultFocus","defaultIndex","focusTabOnClick","onSelect"];function YOe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}const QOe=0,Ox=1,XOe={children:vee,onSelect:BOe,selectedIndex:UOe},ZOe={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1,disableLeftRightKeys:!1},JOe=t=>t.selectedIndex===null?Ox:QOe,See=t=>{SD.checkPropTypes(XOe,t,"prop","Tabs");const e=Object.assign({},ZOe,t),{children:n,defaultFocus:r,defaultIndex:i,focusTabOnClick:s,onSelect:o}=e,a=YOe(e,qOe),[l,c]=v.useState(r),[u]=v.useState(JOe(a)),[d,f]=v.useState(u===Ox?i||0:null);if(v.useEffect(()=>{c(!1)},[]),u===Ox){const m=xee(n);v.useEffect(()=>{if(d!=null){const g=Math.max(0,m-1);f(Math.min(d,g))}},[m])}const h=(m,g,y)=>{typeof o=="function"&&o(m,g,y)===!1||(s&&c(!0),u===Ox&&f(m))};let p=Object.assign({},t,a);return p.focus=l,p.onSelect=h,d!=null&&(p.selectedIndex=d),delete p.defaultFocus,delete p.defaultIndex,delete p.focusTabOnClick,te.createElement(KOe,p,n)};See.tabsRole="Tabs";const eDe=["children","className"];function tDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}const nDe={className:"react-tabs__tab-list"},wee=t=>{const e=Object.assign({},nDe,t),{children:n,className:r}=e,i=tDe(e,eDe);return te.createElement("ul",Object.assign({},i,{className:QE(r),role:"tablist"}),n)};wee.tabsRole="TabList";const rDe=["children","className","disabled","disabledClassName","focus","id","selected","selectedClassName","tabIndex","tabRef"];function iDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}const AC="react-tabs__tab",sDe={className:AC,disabledClassName:`${AC}--disabled`,focus:!1,id:null,selected:!1,selectedClassName:`${AC}--selected`},Eee=t=>{let e=v.useRef();const n=Object.assign({},sDe,t),{children:r,className:i,disabled:s,disabledClassName:o,focus:a,id:l,selected:c,selectedClassName:u,tabIndex:d,tabRef:f}=n,h=iDe(n,rDe);return v.useEffect(()=>{c&&a&&e.current.focus()},[c,a]),te.createElement("li",Object.assign({},h,{className:QE(i,{[u]:c,[o]:s}),ref:p=>{e.current=p,f&&f(p)},role:"tab",id:`tab${l}`,"aria-selected":c?"true":"false","aria-disabled":s?"true":"false","aria-controls":`panel${l}`,tabIndex:d||(c?"0":null),"data-rttab":!0}),r)};Eee.tabsRole="Tab";const oDe=["children","className","forceRender","id","selected","selectedClassName"];function aDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}const c7="react-tabs__tab-panel",lDe={className:c7,forceRender:!1,selectedClassName:`${c7}--selected`},_ee=t=>{const e=Object.assign({},lDe,t),{children:n,className:r,forceRender:i,id:s,selected:o,selectedClassName:a}=e,l=aDe(e,oDe);return te.createElement("div",Object.assign({},l,{className:QE(r,{[a]:o}),role:"tabpanel",id:`panel${s}`,"aria-labelledby":`tab${s}`}),i||o?n:null)};_ee.tabsRole="TabPanel";const co={deepBlue:"#0A2E36",lightBlue:"#4FBDBA",accentBlue:"#88CDDA",white:"#FFF"},cDe=U.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  background: ${co.white};
  border-radius: 10px;
  margin-top: 20px;
  width: 80%;
  height: 60vh;
  overflow: auto;
  transition: all 0.3s ease;

  @media (max-width: 768px) {
    width: 95%;
  }
`,uDe=U(wee)`
  list-style-type: none;
  padding: 0;
  display: flex;
  justify-content: center;
  gap: 8px;
`,Tee=U(Eee)`
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
  background: ${co.accentBlue};
  color: ${co.deepBlue};
  user-select: none;
  transition: all 0.3s ease;

  &.react-tabs__tab--selected {
    background: ${co.deepBlue};
    color: ${co.white};
  }

  &:focus {
    outline: none;
  }
`,LC=U(Tee)`
  height: 32px;
  border: 1px solid black;
  font-size: 14px;
  padding: 1rem;
  border-radius: 1rem;
  background: #000;
  color: #fff;
  text-transform: capitalize;
  display: flex;
  align-items: center;
`;Tee.tabsRole="Tab";const Dx=U(_ee)`
  display: none;
  width: 100%;
  padding-top: 20px;

  &.react-tabs__tab-panel--selected {
    display: flex;
    flex-direction: column;
    align-items: center;
    transition: all 0.3s ease;
  }
`;Dx.tabsRole="TabPanel";const RC=U.h2`
  margin-bottom: 15px;
`,dDe=U.input`
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
`,zp=U.button`
  padding: 10px 15px;
  background-color: ${co.deepBlue};
  color: ${co.white};
  border: none;
  border-radius: 4px;
  cursor: pointer;

  &:hover {
    background-color: #45a049;
  }

  &:disabled {
    background-color: #ccc;
    cursor: default;
  }
`,OC=U(ue.div)`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  margin: 10px;
  background-color: ${co.white};
  border: none;
  padding: 20px 30px;
  border-radius: 8px;
  transition: 0.3s ease-in-out;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  overflow: auto;
  overflow-x: hidden;
  box-sizing: border-box;

  @media (max-width: 768px) {
    width: 100%;
  }

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.15);
  }

  p {
    margin: 2px;

    span {
      color: ${co.deepBlue};
      font-weight: bold;
    }
  }
`,u7=U.div`
  display: flex;
  justify-content: center;
  gap: 10px;
`,DC=U.div`
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-top: 4px solid ${co.lightBlue};
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 2s linear infinite;
  margin: 20px auto;

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
`,MC={scale:1.05,boxShadow:"0px 10px 20px rgba(0, 0, 0, 0.2)"},d7="0x94439f811328BAD743F68C26b5bF5B0A67b3b1df",fDe=()=>{const{STATES:t,ACTIONS:e}=jn(),n=Po(),[r,i]=v.useState(""),[s,o]=v.useState([]),[a,l]=v.useState([]),[c,u]=v.useState([]),[d,f]=v.useState(!1),[h,p]=v.useState(""),{setResult:m}=e||{};v.useEffect(()=>{g(),y()},[]),v.useEffect(()=>{a.length>0&&x()},[a]);const g=async()=>{f(!0);try{const{wallet_nfts:T}=await r_e.get.wallet_nfts(d7);return T?(console.log("DEV: wallet_nfts",T),o(T),!0):null}catch(T){console.log(T),p(T.message)}finally{f(!1)}},y=async()=>{f(!0);try{const _=(await hs.Events.listAvailableNFTs()).filter(I=>I.seller===d7);return l(_),_}catch(T){p(T.message)}finally{f(!1)}},x=async()=>{f(!0);try{const T=a.map(async A=>{const L=await hs.Getters.getHighestBids(A.listingId);return YRe(L.bidder)?{listingId:A.listingId,...L}:null}),I=(await Promise.all(T)).filter(A=>A!==null);return u(I),I}catch(T){console.error("Error fetching highest bids:",T),p("Error fetching highest bids:")}finally{f(!1)}},S=async(T,_)=>{f(!0);try{const I=await hs.Getters.getListingFee(),A=await hs.Seller.approveAndListNFT(T,_,URe(r),I);console.log("@DEV Handle Result",A),A!=null&&A.hash?m({title:"Confirm",message:"Transaction Successful",txHash:A==null?void 0:A.hash}):m({title:"Failed",message:"Cound not transact"})}catch(I){m({title:"Error",message:I==null?void 0:I.message}),console.error("Error listing NFT:",I),p("Error listing NFT")}finally{f(!1)}},w=async T=>{f(!0);try{const _=await hs.Seller.cancelListing(T);console.log("@DEV Handle Result",_),_!=null&&_.hash?m({title:"Confirm",message:"Transaction Successful",txHash:_==null?void 0:_.hash}):m({title:"Failed",message:"Cound not transact"})}catch(_){m({title:"Error",message:_==null?void 0:_.message}),console.error("Error delisting NFT:",_),p("Error delisting NFT")}finally{f(!1)}},E=async T=>{f(!0);try{const _=await hs.Seller.acceptBid(T);console.log("@DEV Handle Result",_),_!=null&&_.hash?m({title:"Confirm",message:"Transaction Successful",txHash:_==null?void 0:_.hash}):m({title:"Failed",message:"Cound not transact"})}catch(_){m({title:"Error",message:_==null?void 0:_.message}),console.error("Error accepting bid:",_),p("Error accepting bid")}finally{f(!1)}};return b.jsx(yv,{children:b.jsxs(See,{children:[b.jsxs(uDe,{children:[b.jsx(LC,{children:"Owned"}),b.jsx(LC,{children:"Listed"}),b.jsx(LC,{children:"Proposals"})]})," ",b.jsxs(cDe,{children:[b.jsxs(Dx,{children:[b.jsx(RC,{children:"Your Assets"}),d?b.jsx(DC,{}):s.length>0?b.jsx(Rx,{children:s.map(T=>{var _,I,A;return b.jsxs(OC,{initial:{scale:1},whileHover:MC,transition:{type:"spring",stiffness:300},children:[b.jsxs("p",{children:[(_=T==null?void 0:T.contract)==null?void 0:_.name," #",T==null?void 0:T.tokenId]}),b.jsx(pee,{src:((I=T==null?void 0:T.image)==null?void 0:I.pngUrl)||Ju,alt:(A=T==null?void 0:T.contract)==null?void 0:A.name}),b.jsx(dDe,{type:"text",value:r,onChange:L=>i(L.target.value),placeholder:"Price (MATIC)",required:!0}),b.jsx(zp,{onClick:()=>{var L;return S((L=T==null?void 0:T.contract)==null?void 0:L.address,T==null?void 0:T.tokenId)},children:"List NFT"})]},T.listingId)})}):b.jsx("p",{children:"No Owned Assets"})]}),b.jsxs(Dx,{children:[b.jsx(RC,{children:"Your Listings"}),d?b.jsx(DC,{}):a.length>0?b.jsx(Rx,{children:a.map(T=>b.jsxs(OC,{initial:{scale:1},whileHover:MC,transition:{type:"spring",stiffness:300},children:[b.jsxs("p",{children:[T==null?void 0:T.name," #",T==null?void 0:T.tokenId]}),b.jsx("p",{children:b.jsxs("span",{children:["Listing #",T.listingId]})}),b.jsxs("p",{children:["$",T.price]}),b.jsxs(u7,{children:[b.jsx(zp,{onClick:()=>n(`/marketplace/listing/${T.listingId}`),children:"View Listing"}),b.jsx(zp,{onClick:()=>w(T.listingId),children:"Delist"})]})]},T.listingId))}):b.jsx("p",{children:"No Listed Assets"})]}),b.jsxs(Dx,{children:[b.jsx(RC,{children:"Highest Bid Proposals"}),d?b.jsx(DC,{}):c.length>0?b.jsx(Rx,{children:c.map(T=>b.jsxs(OC,{initial:{scale:1},whileHover:MC,transition:{type:"spring",stiffness:300},children:[b.jsxs("p",{children:["Listing #",T.listingId]}),b.jsxs("p",{children:["Bidder: ",T.bidder]}),b.jsxs("p",{children:["Value: ",T.bidAmount," Matic"]}),b.jsxs(u7,{children:[b.jsx(zp,{onClick:()=>n(`/marketplace/listing/${T.listingId}`),children:"View Listing"}),b.jsx(zp,{onClick:()=>E(T.listingId),children:"Accept Bid"})]})]},T.listingId))}):b.jsx("p",{children:"No Bids"})]})]})]})})},hDe=U.div`
  min-height: 100vh;
  display: flex;
  flex-direction: column;
`,pDe=U.main`
  flex: 1;
  width: 100%;
  max-width: 1120px;
  margin: 0 auto;
  padding: 24px 16px 48px;

  @media (min-width: 1024px) {
    padding: 40px 0 64px;
  }

  .signed-in {
    font-size: 13px;
    margin-bottom: 12px;
    color: ${({theme:t})=>t.colors.ui600};
  }
`,mDe=U.header`
  margin-bottom: 24px;

  h1 {
    margin: 0;
    font-size: 22px;
    font-weight: 700;
    color: ${({theme:t})=>t.colors.ui900};
  }

  p {
    margin: 6px 0 0;
    font-size: 14px;
    line-height: 1.5;
    color: ${({theme:t})=>t.colors.ui600};
    max-width: 640px;
  }

  @media (min-width: 1024px) {
    margin-bottom: 28px;

    h1 {
      font-size: 24px;
    }
  }
`,gDe=U.div`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  margin-bottom: 20px;

  ${qt} {
    max-width: 420px;
    width: 100%;
  }

  .button-wrapper {
    display: flex;
    gap: 8px;
  }

  /* Desktop */
  @media (min-width: 901px) {
    .button-wrapper {
      width: auto;
    }
  }

  /* Tablet */
  @media (max-width: 900px) and (min-width: 601px) {
    flex-direction: column;
    align-items: stretch;

    .button-wrapper {
      width: 100%;
      justify-content: flex-start;
      flex-wrap: wrap;
    }
  }

  /* Mobile */
  @media (max-width: 600px) {
    flex-direction: column;
    align-items: stretch;

    .button-wrapper {
      width: 100%;
      flex-direction: column;
    }

    ${Hi} {
      width: 100%;
    }
  }
`,vDe=U.section`
  padding-top: 20px;
  margin-top: 20px;
  border-top: 1px solid ${({theme:t})=>t.colors.ui200};
`,yDe=U(jt)`
  margin-left: 8px;
  font-size: 0.85rem;
`,xDe=U(jt)`
  margin-right: 6px;
  font-size: 0.9rem;
`,bDe=()=>{const{STATES:t}=jn(),{user:e}=t||{},[n,r]=v.useState(!1),i=()=>r(s=>!s);return b.jsxs(hDe,{children:[b.jsxs(pDe,{children:[(e==null?void 0:e.email)&&b.jsxs("div",{className:"signed-in",children:["Signed in as ",b.jsx("strong",{children:e.email})]}),b.jsxs(mDe,{children:[b.jsx("h1",{children:"WaterQuality.Trading Marketplace"}),b.jsx("p",{children:"Discover, review, and verify nutrient pollution certificates. Search live listings, explore recent removals, and track how clean-water projects are performing over time."})]}),b.jsxs(gDe,{children:[b.jsx(qt,{placeholder:"Search for NPCs, projects, or locations..."}),b.jsxs("div",{className:"button-wrapper",children:[b.jsxs(Hi,{children:["Search",b.jsx(yDe,{icon:Kve})]}),b.jsxs(Hi,{onClick:i,children:[b.jsx(xDe,{icon:Xve}),"View all Events"]})]})]}),b.jsx(vDe,{children:b.jsx(mOe,{})}),n&&b.jsx(FOe,{onClose:i})]}),b.jsx(uee,{})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cee={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe=function(t,e){if(!t)throw tp(e)},tp=function(t){return new Error("Firebase Database ("+Cee.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kee=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},SDe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},b3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,h=c&63;l||(h=64,o||(f=64)),r.push(n[u],n[d],n[f],n[h])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kee(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SDe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new wDe;const f=s<<2|a>>4;if(r.push(f),c!==64){const h=a<<4&240|c>>2;if(r.push(h),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wDe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pee=function(t){const e=kee(t);return b3.encodeByteArray(e,!0)},OS=function(t){return Pee(t).replace(/\./g,"")},DS=function(t){try{return b3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EDe(t){return Iee(void 0,t)}function Iee(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!_De(n)||(t[n]=Iee(t[n],e[n]));return t}function _De(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TDe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CDe=()=>TDe().__FIREBASE_DEFAULTS__,kDe=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PDe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DS(t[1]);return e&&JSON.parse(e)},S3=()=>{try{return CDe()||kDe()||PDe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Aee=t=>{var e,n;return(n=(e=S3())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},IDe=t=>{const e=Aee(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Lee=()=>{var t;return(t=S3())===null||t===void 0?void 0:t.config},Ree=t=>{var e;return(e=S3())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ADe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[OS(JSON.stringify(n)),OS(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kr())}function LDe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RDe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Oee(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ODe(){const t=kr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Dee(){return Cee.NODE_ADMIN===!0}function DDe(){try{return typeof indexedDB=="object"}catch{return!1}}function MDe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $De="FirebaseError";class yc extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$De,Object.setPrototypeOf(this,yc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sv.prototype.create)}}class Sv{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?NDe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new yc(i,a,r)}}function NDe(t,e){return t.replace(FDe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const FDe=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(t){return JSON.parse(t)}function Wn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mee=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=s0(DS(s[0])||""),n=s0(DS(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},jDe=function(t){const e=Mee(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},BDe=function(t){const e=Mee(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sh(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function DA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function MS(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function $S(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(f7(s)&&f7(o)){if(!$S(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function f7(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Em(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function _m(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UDe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const f=(i<<5|i>>>27)+c+l+u+r[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function VDe(t,e){const n=new zDe(t,e);return n.subscribe.bind(n)}class zDe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HDe(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$C),i.error===void 0&&(i.error=$C),i.complete===void 0&&(i.complete=$C);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HDe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $C(){}function WDe(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GDe=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,fe(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},XE=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(t){return t&&t._delegate?t._delegate:t}class Lu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KDe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new w3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YDe(e))try{this.getOrInitializeService({instanceIdentifier:Hc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Hc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hc){return this.instances.has(e)}getOptions(e=Hc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qDe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hc){return this.component?this.component.multipleInstances?e:Hc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qDe(t){return t===Hc?void 0:t}function YDe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QDe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new KDe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(mt||(mt={}));const XDe={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},ZDe=mt.INFO,JDe={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},e3e=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=JDe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let _3=class{constructor(e){this.name=e,this._logLevel=ZDe,this._logHandler=e3e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XDe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}};const t3e=(t,e)=>e.some(n=>t instanceof n);let h7,p7;function n3e(){return h7||(h7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r3e(){return p7||(p7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $ee=new WeakMap,MA=new WeakMap,Nee=new WeakMap,NC=new WeakMap,T3=new WeakMap;function i3e(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$ee.set(n,t)}).catch(()=>{}),T3.set(e,t),e}function s3e(t){if(MA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});MA.set(t,e)}let $A={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return MA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Nee.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function o3e(t){$A=t($A)}function a3e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(FC(this),e,...n);return Nee.set(r,e.sort?e.sort():[e]),Kl(r)}:r3e().includes(t)?function(...e){return t.apply(FC(this),e),Kl($ee.get(this))}:function(...e){return Kl(t.apply(FC(this),e))}}function l3e(t){return typeof t=="function"?a3e(t):(t instanceof IDBTransaction&&s3e(t),t3e(t,n3e())?new Proxy(t,$A):t)}function Kl(t){if(t instanceof IDBRequest)return i3e(t);if(NC.has(t))return NC.get(t);const e=l3e(t);return e!==t&&(NC.set(t,e),T3.set(e,t)),e}const FC=t=>T3.get(t);function c3e(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Kl(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Kl(o.result),l.oldVersion,l.newVersion,Kl(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const u3e=["get","getKey","getAll","getAllKeys","count"],d3e=["put","add","delete","clear"],jC=new Map;function m7(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jC.get(e))return jC.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=d3e.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||u3e.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return jC.set(e,s),s}o3e(t=>({...t,get:(e,n,r)=>m7(e,n)||t.get(e,n,r),has:(e,n)=>!!m7(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(h3e(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function h3e(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const NA="@firebase/app",g7="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=new _3("@firebase/app"),p3e="@firebase/app-compat",m3e="@firebase/analytics-compat",g3e="@firebase/analytics",v3e="@firebase/app-check-compat",y3e="@firebase/app-check",x3e="@firebase/auth",b3e="@firebase/auth-compat",S3e="@firebase/database",w3e="@firebase/data-connect",E3e="@firebase/database-compat",_3e="@firebase/functions",T3e="@firebase/functions-compat",C3e="@firebase/installations",k3e="@firebase/installations-compat",P3e="@firebase/messaging",I3e="@firebase/messaging-compat",A3e="@firebase/performance",L3e="@firebase/performance-compat",R3e="@firebase/remote-config",O3e="@firebase/remote-config-compat",D3e="@firebase/storage",M3e="@firebase/storage-compat",$3e="@firebase/firestore",N3e="@firebase/vertexai-preview",F3e="@firebase/firestore-compat",j3e="firebase",B3e="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="[DEFAULT]",U3e={[NA]:"fire-core",[p3e]:"fire-core-compat",[g3e]:"fire-analytics",[m3e]:"fire-analytics-compat",[y3e]:"fire-app-check",[v3e]:"fire-app-check-compat",[x3e]:"fire-auth",[b3e]:"fire-auth-compat",[S3e]:"fire-rtdb",[w3e]:"fire-data-connect",[E3e]:"fire-rtdb-compat",[_3e]:"fire-fn",[T3e]:"fire-fn-compat",[C3e]:"fire-iid",[k3e]:"fire-iid-compat",[P3e]:"fire-fcm",[I3e]:"fire-fcm-compat",[A3e]:"fire-perf",[L3e]:"fire-perf-compat",[R3e]:"fire-rc",[O3e]:"fire-rc-compat",[D3e]:"fire-gcs",[M3e]:"fire-gcs-compat",[$3e]:"fire-fst",[F3e]:"fire-fst-compat",[N3e]:"fire-vertex","fire-js":"fire-js",[j3e]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=new Map,V3e=new Map,jA=new Map;function v7(t,e){try{t.container.addComponent(e)}catch(n){xa.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function wh(t){const e=t.name;if(jA.has(e))return xa.debug(`There were multiple attempts to register component ${e}.`),!1;jA.set(e,t);for(const n of NS.values())v7(n,t);for(const n of V3e.values())v7(n,t);return!0}function C3(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ql=new Sv("app","Firebase",z3e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3e{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ql.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=B3e;function Fee(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:FA,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ql.create("bad-app-name",{appName:String(i)});if(n||(n=Lee()),!n)throw ql.create("no-options");const s=NS.get(i);if(s){if($S(n,s.options)&&$S(r,s.config))return s;throw ql.create("duplicate-app",{appName:i})}const o=new QDe(i);for(const l of jA.values())o.addComponent(l);const a=new H3e(n,r,o);return NS.set(i,a),a}function jee(t=FA){const e=NS.get(t);if(!e&&t===FA&&Lee())return Fee();if(!e)throw ql.create("no-app",{appName:t});return e}function Yl(t,e,n){var r;let i=(r=U3e[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xa.warn(a.join(" "));return}wh(new Lu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3e="firebase-heartbeat-database",G3e=1,o0="firebase-heartbeat-store";let BC=null;function Bee(){return BC||(BC=c3e(W3e,G3e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(o0)}catch(n){console.warn(n)}}}}).catch(t=>{throw ql.create("idb-open",{originalErrorMessage:t.message})})),BC}async function K3e(t){try{const n=(await Bee()).transaction(o0),r=await n.objectStore(o0).get(Uee(t));return await n.done,r}catch(e){if(e instanceof yc)xa.warn(e.message);else{const n=ql.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xa.warn(n.message)}}}async function y7(t,e){try{const r=(await Bee()).transaction(o0,"readwrite");await r.objectStore(o0).put(e,Uee(t)),await r.done}catch(n){if(n instanceof yc)xa.warn(n.message);else{const r=ql.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xa.warn(r.message)}}}function Uee(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3e=1024,Y3e=30*24*60*60*1e3;class Q3e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Z3e(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=x7();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Y3e}),this._storage.overwrite(this._heartbeatsCache))}catch(r){xa.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=x7(),{heartbeatsToSend:r,unsentEntries:i}=X3e(this._heartbeatsCache.heartbeats),s=OS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return xa.warn(n),""}}}function x7(){return new Date().toISOString().substring(0,10)}function X3e(t,e=q3e){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),b7(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),b7(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Z3e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DDe()?MDe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await K3e(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return y7(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return y7(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function b7(t){return OS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3e(t){wh(new Lu("platform-logger",e=>new f3e(e),"PRIVATE")),wh(new Lu("heartbeat",e=>new Q3e(e),"PRIVATE")),Yl(NA,g7,t),Yl(NA,g7,"esm2017"),Yl("fire-js","")}J3e("");var sr=function(){return sr=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sr.apply(this,arguments)};function ip(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function td(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Vee(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function zee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eMe=zee,Hee=new Sv("auth","Firebase",zee());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=new _3("@firebase/auth");function tMe(t,...e){FS.logLevel<=mt.WARN&&FS.warn(`Auth (${rp}): ${t}`,...e)}function Mx(t,...e){FS.logLevel<=mt.ERROR&&FS.error(`Auth (${rp}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t,...e){throw P3(t,...e)}function ks(t,...e){return P3(t,...e)}function k3(t,e,n){const r=Object.assign(Object.assign({},eMe()),{[e]:n});return new Sv("auth","Firebase",r).create(e,{appName:t.name})}function ua(t){return k3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nMe(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&qi(t,"argument-error"),k3(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function P3(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Hee.create(t,...e)}function Pe(t,e,...n){if(!t)throw P3(e,...n)}function ra(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mx(e),new Error(e)}function ba(t,e){t||ra(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function rMe(){return S7()==="http:"||S7()==="https:"}function S7(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iMe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rMe()||RDe()||"connection"in navigator)?navigator.onLine:!0}function sMe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n){this.shortDelay=e,this.longDelay=n,ba(n>e,"Short delay should be less than long delay!"),this.isMobile=E3()||Oee()}get(){return iMe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t,e){ba(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wee{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oMe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aMe=new wv(3e4,6e4);function La(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ao(t,e,n,r,i={}){return Gee(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=np(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return LDe()||(c.referrerPolicy="no-referrer"),Wee.fetch()(Kee(t,t.config.apiHost,n,a),c)})}async function Gee(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},oMe),e);try{const i=new cMe(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Hy(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hy(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Hy(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Hy(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw k3(t,u,c);qi(t,u)}}catch(i){if(i instanceof yc)throw i;qi(t,"network-request-failed",{message:String(i)})}}async function Ev(t,e,n,r,i={}){const s=await Ao(t,e,n,r,i);return"mfaPendingCredential"in s&&qi(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Kee(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?I3(t.config,i):`${t.config.apiScheme}://${i}`}function lMe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cMe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),aMe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hy(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ks(t,e,r);return i.customData._tokenResponse=n,i}function w7(t){return t!==void 0&&t.enterprise!==void 0}class uMe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return lMe(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function dMe(t,e){return Ao(t,"GET","/v2/recaptchaConfig",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fMe(t,e){return Ao(t,"POST","/v1/accounts:delete",e)}async function qee(t,e){return Ao(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hMe(t,e=!1){const n=Io(t),r=await n.getIdToken(e),i=A3(r);Pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ig(UC(i.auth_time)),issuedAtTime:ig(UC(i.iat)),expirationTime:ig(UC(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function UC(t){return Number(t)*1e3}function A3(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mx("JWT malformed, contained fewer than 3 sections"),null;try{const i=DS(n);return i?JSON.parse(i):(Mx("Failed to decode base64 JWT payload"),null)}catch(i){return Mx("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function E7(t){const e=A3(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yc&&pMe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function pMe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mMe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ig(this.lastLoginAt),this.creationTime=ig(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Eh(t,qee(n,{idToken:r}));Pe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Yee(s.providerUserInfo):[],a=vMe(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new UA(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function gMe(t){const e=Io(t);await jS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vMe(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Yee(t){return t.map(e=>{var{providerId:n}=e,r=ip(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yMe(t,e){const n=await Gee(t,{},async()=>{const r=np({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Kee(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Wee.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xMe(t,e){return Ao(t,"POST","/v2/accounts:revokeToken",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E7(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=E7(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await yMe(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ff;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Pe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ff,this.toJSON())}_performRefresh(){return ra("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ia{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ip(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mMe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new UA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Eh(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hMe(this,e)}reload(){return gMe(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ia(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jS(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bs(this.auth.app))return Promise.reject(ua(this.auth));const e=await this.getIdToken();return await Eh(this,fMe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,x=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:w,isAnonymous:E,providerData:T,stsTokenManager:_}=n;Pe(S&&_,e,"internal-error");const I=Ff.fromJSON(this.name,_);Pe(typeof S=="string",e,"internal-error"),Ha(d,e.name),Ha(f,e.name),Pe(typeof w=="boolean",e,"internal-error"),Pe(typeof E=="boolean",e,"internal-error"),Ha(h,e.name),Ha(p,e.name),Ha(m,e.name),Ha(g,e.name),Ha(y,e.name),Ha(x,e.name);const A=new ia({uid:S,auth:e,email:f,emailVerified:w,displayName:d,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:I,createdAt:y,lastLoginAt:x});return T&&Array.isArray(T)&&(A.providerData=T.map(L=>Object.assign({},L))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ff;i.updateFromServerResponse(n);const s=new ia({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await jS(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Pe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Yee(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ff;a.updateFromIdToken(r);const l=new ia({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new UA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7=new Map;function sa(t){ba(t instanceof Function,"Expected a class definition");let e=_7.get(t);return e?(ba(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_7.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qee.type="NONE";const T7=Qee;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e,n){return`firebase:${t}:${e}:${n}`}class jf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$x(this.userKey,i.apiKey,s),this.fullPersistenceKey=$x("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ia._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jf(sa(T7),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||sa(T7);const o=$x(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=ia._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new jf(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new jf(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ete(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Xee(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nte(e))return"Blackberry";if(rte(e))return"Webos";if(Zee(e))return"Safari";if((e.includes("chrome/")||Jee(e))&&!e.includes("edge/"))return"Chrome";if(tte(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Xee(t=kr()){return/firefox\//i.test(t)}function Zee(t=kr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jee(t=kr()){return/crios\//i.test(t)}function ete(t=kr()){return/iemobile/i.test(t)}function tte(t=kr()){return/android/i.test(t)}function nte(t=kr()){return/blackberry/i.test(t)}function rte(t=kr()){return/webos/i.test(t)}function L3(t=kr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bMe(t=kr()){var e;return L3(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SMe(){return ODe()&&document.documentMode===10}function ite(t=kr()){return L3(t)||tte(t)||rte(t)||nte(t)||/windows phone/i.test(t)||ete(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ste(t,e=[]){let n;switch(t){case"Browser":n=C7(kr());break;case"Worker":n=`${C7(kr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rp}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wMe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EMe(t,e={}){return Ao(t,"GET","/v2/passwordPolicy",La(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Me=6;class TMe{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_Me,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CMe{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k7(this),this.idTokenSubscription=new k7(this),this.beforeStateQueue=new wMe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Hee,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sa(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await jf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await qee(this,{idToken:e}),r=await ia._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jS(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sMe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bs(this.app))return Promise.reject(ua(this));const n=e?Io(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bs(this.app)?Promise.reject(ua(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bs(this.app)?Promise.reject(ua(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EMe(this),n=new TMe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sv("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xMe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sa(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await jf.create(this,[sa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ste(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&tMe(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ra(t){return Io(t)}class k7{constructor(e){this.auth=e,this.observer=null,this.addObserver=VDe(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kMe(t){ZE=t}function ote(t){return ZE.loadJS(t)}function PMe(){return ZE.recaptchaEnterpriseScript}function IMe(){return ZE.gapiScript}function AMe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const LMe="recaptcha-enterprise",RMe="NO_RECAPTCHA";class OMe{constructor(e){this.type=LMe,this.auth=Ra(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{dMe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new uMe(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;w7(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(RMe)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&w7(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=PMe();l.length!==0&&(l+=a),ote(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function P7(t,e,n,r=!1){const i=new OMe(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function BS(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await P7(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await P7(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DMe(t,e){const n=C3(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if($S(s,e??{}))return i;qi(i,"already-initialized")}return n.initialize({options:e})}function MMe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $Me(t,e,n){const r=Ra(t);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=ate(e),{host:o,port:a}=NMe(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||FMe()}function ate(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NMe(t){const e=ate(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:I7(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:I7(o)}}}function I7(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FMe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ra("not implemented")}_getIdTokenResponse(e){return ra("not implemented")}_linkToIdToken(e,n){return ra("not implemented")}_getReauthenticationResolver(e){return ra("not implemented")}}async function jMe(t,e){return Ao(t,"POST","/v1/accounts:update",e)}async function BMe(t,e){return Ao(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UMe(t,e){return Ev(t,"POST","/v1/accounts:signInWithPassword",La(t,e))}async function VMe(t,e){return Ao(t,"POST","/v1/accounts:sendOobCode",La(t,e))}async function zMe(t,e){return VMe(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HMe(t,e){return Ev(t,"POST","/v1/accounts:signInWithEmailLink",La(t,e))}async function WMe(t,e){return Ev(t,"POST","/v1/accounts:signInWithEmailLink",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends R3{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new a0(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new a0(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return BS(e,n,"signInWithPassword",UMe);case"emailLink":return HMe(e,{email:this._email,oobCode:this._password});default:qi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return BS(e,r,"signUpPassword",BMe);case"emailLink":return WMe(e,{idToken:n,email:this._email,oobCode:this._password});default:qi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(t,e){return Ev(t,"POST","/v1/accounts:signInWithIdp",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GMe="http://localhost";class Ru extends R3{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ru(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ip(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ru(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bf(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bf(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bf(e,n)}buildRequest(){const e={requestUri:GMe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=np(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KMe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qMe(t){const e=Em(_m(t)).link,n=e?Em(_m(e)).deep_link_id:null,r=Em(_m(t)).deep_link_id;return(r?Em(_m(r)).link:null)||r||n||e||t}class O3{constructor(e){var n,r,i,s,o,a;const l=Em(_m(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=KMe((i=l.mode)!==null&&i!==void 0?i:null);Pe(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=qMe(e);try{return new O3(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.providerId=sp.PROVIDER_ID}static credential(e,n){return a0._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=O3.parseLink(n);return Pe(r,"argument-error"),a0._fromEmailAndCode(e,r.code,r.tenantId)}}sp.PROVIDER_ID="password";sp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends D3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends _v{constructor(){super("facebook.com")}static credential(e){return Ru._fromParams({providerId:gl.PROVIDER_ID,signInMethod:gl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gl.credentialFromTaggedObject(e)}static credentialFromError(e){return gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gl.credential(e.oauthAccessToken)}catch{return null}}}gl.FACEBOOK_SIGN_IN_METHOD="facebook.com";gl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends _v{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ru._fromParams({providerId:Xo.PROVIDER_ID,signInMethod:Xo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xo.credentialFromTaggedObject(e)}static credentialFromError(e){return Xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xo.credential(n,r)}catch{return null}}}Xo.GOOGLE_SIGN_IN_METHOD="google.com";Xo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends _v{constructor(){super("github.com")}static credential(e){return Ru._fromParams({providerId:vl.PROVIDER_ID,signInMethod:vl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vl.credentialFromTaggedObject(e)}static credentialFromError(e){return vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vl.credential(e.oauthAccessToken)}catch{return null}}}vl.GITHUB_SIGN_IN_METHOD="github.com";vl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl extends _v{constructor(){super("twitter.com")}static credential(e,n){return Ru._fromParams({providerId:yl.PROVIDER_ID,signInMethod:yl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yl.credentialFromTaggedObject(e)}static credentialFromError(e){return yl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yl.credential(n,r)}catch{return null}}}yl.TWITTER_SIGN_IN_METHOD="twitter.com";yl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YMe(t,e){return Ev(t,"POST","/v1/accounts:signUp",La(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ia._fromIdTokenResponse(e,r,i),o=A7(r);return new Ou({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=A7(r);return new Ou({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function A7(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends yc{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,US.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new US(e,n,r,i)}}function lte(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?US._fromErrorAndOperation(t,s,e,r):s})}async function QMe(t,e,n=!1){const r=await Eh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ou._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XMe(t,e,n=!1){const{auth:r}=t;if(bs(r.app))return Promise.reject(ua(r));const i="reauthenticate";try{const s=await Eh(t,lte(r,i,e,t),n);Pe(s.idToken,r,"internal-error");const o=A3(s.idToken);Pe(o,r,"internal-error");const{sub:a}=o;return Pe(t.uid===a,r,"user-mismatch"),Ou._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&qi(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cte(t,e,n=!1){if(bs(t.app))return Promise.reject(ua(t));const r="signIn",i=await lte(t,r,e),s=await Ou._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function ZMe(t,e){return cte(Ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JMe(t,e,n){var r;Pe(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Pe(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pe(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Pe(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ute(t){const e=Ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function e4e(t,e,n){const r=Ra(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&JMe(r,i,n),await BS(r,i,"getOobCode",zMe)}async function t4e(t,e,n){if(bs(t.app))return Promise.reject(ua(t));const r=Ra(t),o=await BS(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YMe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&ute(t),l}),a=await Ou._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function dte(t,e,n){return bs(t.app)?Promise.reject(ua(t)):ZMe(Io(t),sp.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ute(t),r})}function n4e(t,e){return r4e(Io(t),null,e)}async function r4e(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Eh(t,jMe(r,s));await t._updateTokensIfNecessary(o,!0)}function i4e(t,e,n,r){return Io(t).onIdTokenChanged(e,n,r)}function s4e(t,e,n){return Io(t).beforeAuthStateChanged(e,n)}const VS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fte{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(VS,"1"),this.storage.removeItem(VS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4e=1e3,a4e=10;class hte extends fte{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ite(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);SMe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,a4e):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},o4e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hte.type="LOCAL";const l4e=hte;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pte extends fte{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pte.type="SESSION";const mte=pte;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4e(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new JE(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await c4e(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}JE.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=M3("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(){return window}function d4e(t){xo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gte(){return typeof xo().WorkerGlobalScope<"u"&&typeof xo().importScripts=="function"}async function f4e(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h4e(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function p4e(){return gte()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vte="firebaseLocalStorageDb",m4e=1,zS="firebaseLocalStorage",yte="fbase_key";class Tv{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function e_(t,e){return t.transaction([zS],e?"readwrite":"readonly").objectStore(zS)}function g4e(){const t=indexedDB.deleteDatabase(vte);return new Tv(t).toPromise()}function VA(){const t=indexedDB.open(vte,m4e);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zS,{keyPath:yte})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zS)?e(r):(r.close(),await g4e(),e(await VA()))})})}async function L7(t,e,n){const r=e_(t,!0).put({[yte]:e,value:n});return new Tv(r).toPromise()}async function v4e(t,e){const n=e_(t,!1).get(e),r=await new Tv(n).toPromise();return r===void 0?null:r.value}function R7(t,e){const n=e_(t,!0).delete(e);return new Tv(n).toPromise()}const y4e=800,x4e=3;class xte{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await VA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>x4e)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gte()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=JE._getInstance(p4e()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await f4e(),!this.activeServiceWorker)return;this.sender=new u4e(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h4e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await VA();return await L7(e,VS,"1"),await R7(e,VS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>L7(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>v4e(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R7(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=e_(i,!1).getAll();return new Tv(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y4e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xte.type="LOCAL";const b4e=xte;new wv(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bte(t,e){return e?sa(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3 extends R3{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bf(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bf(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bf(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function S4e(t){return cte(t.auth,new $3(t),t.bypassAuthState)}function w4e(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),XMe(n,new $3(t),t.bypassAuthState)}async function E4e(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),QMe(n,new $3(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ste{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return S4e;case"linkViaPopup":case"linkViaRedirect":return E4e;case"reauthViaPopup":case"reauthViaRedirect":return w4e;default:qi(this.auth,"internal-error")}}resolve(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ba(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4e=new wv(2e3,1e4);async function T4e(t,e,n){if(bs(t.app))return Promise.reject(ks(t,"operation-not-supported-in-this-environment"));const r=Ra(t);nMe(t,e,D3);const i=bte(r,n);return new su(r,"signInViaPopup",e,i).executeNotNull()}class su extends Ste{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,su.currentPopupAction&&su.currentPopupAction.cancel(),su.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){ba(this.filter.length===1,"Popup operations only handle one event");const e=M3();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,su.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_4e.get())};e()}}su.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4e="pendingRedirect",Nx=new Map;class k4e extends Ste{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nx.get(this.auth._key());if(!e){try{const r=await P4e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nx.set(this.auth._key(),e)}return this.bypassAuthState||Nx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P4e(t,e){const n=L4e(e),r=A4e(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function I4e(t,e){Nx.set(t._key(),e)}function A4e(t){return sa(t._redirectPersistence)}function L4e(t){return $x(C4e,t.config.apiKey,t.name)}async function R4e(t,e,n=!1){if(bs(t.app))return Promise.reject(ua(t));const r=Ra(t),i=bte(r,e),o=await new k4e(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4e=10*60*1e3;class D4e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!M4e(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wte(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ks(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O4e&&this.cachedEventUids.clear(),this.cachedEventUids.has(O7(e))}saveEventToCache(e){this.cachedEventUids.add(O7(e)),this.lastProcessedEventTime=Date.now()}}function O7(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wte({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function M4e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wte(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4e(t,e={}){return Ao(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F4e=/^https?/;async function j4e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $4e(t);for(const n of e)try{if(B4e(n))return}catch{}qi(t,"unauthorized-domain")}function B4e(t){const e=BA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!F4e.test(n))return!1;if(N4e.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4e=new wv(3e4,6e4);function D7(){const t=xo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function V4e(t){return new Promise((e,n)=>{var r,i,s;function o(){D7(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D7(),n(ks(t,"network-request-failed"))},timeout:U4e.get()})}if(!((i=(r=xo().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=xo().gapi)===null||s===void 0)&&s.load)o();else{const a=AMe("iframefcb");return xo()[a]=()=>{gapi.load?o():n(ks(t,"network-request-failed"))},ote(`${IMe()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fx=null,e})}let Fx=null;function z4e(t){return Fx=Fx||V4e(t),Fx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4e=new wv(5e3,15e3),W4e="__/auth/iframe",G4e="emulator/auth/iframe",K4e={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q4e=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Y4e(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?I3(e,G4e):`https://${t.config.authDomain}/${W4e}`,r={apiKey:e.apiKey,appName:t.name,v:rp},i=q4e.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${np(r).slice(1)}`}async function Q4e(t){const e=await z4e(t),n=xo().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:Y4e(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K4e,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ks(t,"network-request-failed"),a=xo().setTimeout(()=>{s(o)},H4e.get());function l(){xo().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4e={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z4e=500,J4e=600,e5e="_blank",t5e="http://localhost";class M7{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function n5e(t,e,n,r=Z4e,i=J4e){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},X4e),{width:r.toString(),height:i.toString(),top:s,left:o}),c=kr().toLowerCase();n&&(a=Jee(c)?e5e:n),Xee(c)&&(e=e||t5e,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(bMe(c)&&a!=="_self")return r5e(e||"",a),new M7(null);const d=window.open(e||"",a,u);Pe(d,t,"popup-blocked");try{d.focus()}catch{}return new M7(d)}function r5e(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5e="__/auth/handler",s5e="emulator/auth/handler",o5e=encodeURIComponent("fac");async function $7(t,e,n,r,i,s){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rp,eventId:i};if(e instanceof D3){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof _v){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${o5e}=${encodeURIComponent(l)}`:"";return`${a5e(t)}?${np(a).slice(1)}${c}`}function a5e({config:t}){return t.emulator?I3(t,s5e):`https://${t.authDomain}/${i5e}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="webStorageSupport";class l5e{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mte,this._completeRedirectFn=R4e,this._overrideRedirectResult=I4e}async _openPopup(e,n,r,i){var s;ba((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await $7(e,n,r,BA(),i);return n5e(e,o,M3())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $7(e,n,r,BA(),i);return d4e(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ba(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Q4e(e),r=new D4e(e);return n.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(VC,{type:VC},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[VC];o!==void 0&&n(!!o),qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=j4e(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ite()||Zee()||L3()}}const c5e=l5e;var N7="@firebase/auth",F7="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5e{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d5e(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f5e(t){wh(new Lu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ste(t)},c=new CMe(r,i,s,l);return MMe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),wh(new Lu("auth-internal",e=>{const n=Ra(e.getProvider("auth").getImmediate());return(r=>new u5e(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yl(N7,F7,d5e(t)),Yl(N7,F7,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5e=5*60,p5e=Ree("authIdTokenMaxAge")||h5e;let j7=null;const m5e=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>p5e)return;const i=n==null?void 0:n.token;j7!==i&&(j7=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function zA(t=jee()){const e=C3(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DMe(t,{popupRedirectResolver:c5e,persistence:[b4e,l4e,mte]}),r=Ree("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=m5e(s.toString());s4e(n,o,()=>o(n.currentUser)),i4e(n,a=>o(a))}}const i=Aee("auth");return i&&$Me(n,`http://${i}`),n}function g5e(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kMe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ks("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",g5e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f5e("Browser");var v5e="firebase",y5e="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yl(v5e,y5e,"app");const B7="@firebase/database",U7="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ete="";function x5e(t){Ete=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5e{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Wn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:s0(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Aa(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _te=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new b5e(e)}}catch{}return new S5e},ou=_te("localStorage"),HA=_te("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=new _3("@firebase/database"),w5e=function(){let t=1;return function(){return t++}}(),Tte=function(t){const e=GDe(t),n=new UDe;n.update(e);const r=n.digest();return b3.encodeByteArray(r)},Cv=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Cv.apply(null,r):typeof r=="object"?e+=Wn(r):e+=r,e+=" "}return e};let pu=null,V7=!0;const E5e=function(t,e){fe(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Uf.logLevel=mt.VERBOSE,pu=Uf.log.bind(Uf),e&&HA.set("logging_enabled",!0)):typeof t=="function"?pu=t:(pu=null,HA.remove("logging_enabled"))},nr=function(...t){if(V7===!0&&(V7=!1,pu===null&&HA.get("logging_enabled")===!0&&E5e(!0)),pu){const e=Cv.apply(null,t);pu(e)}},kv=function(t){return function(...e){nr(t,...e)}},WA=function(...t){const e="FIREBASE INTERNAL ERROR: "+Cv(...t);Uf.error(e)},Sa=function(...t){const e=`FIREBASE FATAL ERROR: ${Cv(...t)}`;throw Uf.error(e),new Error(e)},hi=function(...t){const e="FIREBASE WARNING: "+Cv(...t);Uf.warn(e)},_5e=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&hi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Cte=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T5e=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},_h="[MIN_NAME]",Du="[MAX_NAME]",op=function(t,e){if(t===e)return 0;if(t===_h||e===Du)return-1;if(e===_h||t===Du)return 1;{const n=z7(t),r=z7(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},C5e=function(t,e){return t===e?0:t<e?-1:1},Hp=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Wn(e))},N3=function(t){if(typeof t!="object"||t===null)return Wn(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Wn(e[r]),n+=":",n+=N3(t[e[r]]);return n+="}",n},kte=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Yi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Pte=function(t){fe(!Cte(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},k5e=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},P5e=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},I5e=new RegExp("^-?(0*)\\d{1,10}$"),A5e=-2147483648,L5e=2147483647,z7=function(t){if(I5e.test(t)){const e=Number(t);if(e>=A5e&&e<=L5e)return e}return null},Pv=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw hi("Exception was thrown by user callback.",n),e},Math.floor(0))}},R5e=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},sg=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5e{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){hi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5e{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(nr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',hi(e)}}class Vf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Vf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="5",Ite="v",Ate="s",Lte="r",Rte="f",Ote=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dte="ls",Mte="p",GA="ac",$te="websocket",Nte="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fte{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ou.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ou.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function M5e(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function jte(t,e,n){fe(typeof e=="string","typeof type must == string"),fe(typeof n=="object","typeof params must == object");let r;if(e===$te)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Nte)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);M5e(t)&&(n.ns=t.namespace);const i=[];return Yi(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5e{constructor(){this.counters_={}}incrementCounter(e,n=1){Aa(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return EDe(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC={},HC={};function j3(t){const e=t.toString();return zC[e]||(zC[e]=new $5e),zC[e]}function N5e(t,e){const n=t.toString();return HC[n]||(HC[n]=e()),HC[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5e{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Pv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7="start",j5e="close",B5e="pLPCommand",U5e="pRTLPCB",Bte="id",Ute="pw",Vte="ser",V5e="cb",z5e="seg",H5e="ts",W5e="d",G5e="dframe",zte=1870,Hte=30,K5e=zte-Hte,q5e=25e3,Y5e=3e4;class vf{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kv(e),this.stats_=j3(n),this.urlFn=l=>(this.appCheckToken&&(l[GA]=this.appCheckToken),jte(n,Nte,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new F5e(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Y5e)),T5e(()=>{if(this.isClosed_)return;this.scriptTagHolder=new B3((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===H7)this.id=a,this.password=l;else if(o===j5e)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[H7]="t",r[Vte]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[V5e]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Ite]=F3,this.transportSessionId&&(r[Ate]=this.transportSessionId),this.lastSessionId&&(r[Dte]=this.lastSessionId),this.applicationId&&(r[Mte]=this.applicationId),this.appCheckToken&&(r[GA]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ote.test(location.hostname)&&(r[Lte]=Rte);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vf.forceAllow_=!0}static forceDisallow(){vf.forceDisallow_=!0}static isAvailable(){return vf.forceAllow_?!0:!vf.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!k5e()&&!P5e()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Pee(n),i=kte(r,K5e);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[G5e]="t",r[Bte]=e,r[Ute]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Wn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class B3{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=w5e(),window[B5e+this.uniqueCallbackIdentifier]=e,window[U5e+this.uniqueCallbackIdentifier]=n,this.myIFrame=B3.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){nr("frame writing exception"),a.stack&&nr(a.stack),nr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Bte]=this.myID,e[Ute]=this.myPW,e[Vte]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Hte+r.length<=zte;){const o=this.pendingSegs.shift();r=r+"&"+z5e+i+"="+o.seg+"&"+H5e+i+"="+o.ts+"&"+W5e+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(q5e)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{nr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5e=16384,X5e=45e3;let HS=null;typeof MozWebSocket<"u"?HS=MozWebSocket:typeof WebSocket<"u"&&(HS=WebSocket);class ys{constructor(e,n,r,i,s,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kv(this.connId),this.stats_=j3(n),this.connURL=ys.connectionURL_(n,o,a,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[Ite]=F3,typeof location<"u"&&location.hostname&&Ote.test(location.hostname)&&(o[Lte]=Rte),n&&(o[Ate]=n),r&&(o[Dte]=r),i&&(o[GA]=i),s&&(o[Mte]=s),jte(e,$te,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ou.set("previous_websocket_failure",!0);try{let r;Dee(),this.mySock=new HS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ys.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&HS!==null&&!ys.forceDisallow_}static previouslyFailed(){return ou.isInMemoryStorage||ou.get("previous_websocket_failure")===!0}markConnectionHealthy(){ou.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=s0(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(fe(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Wn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=kte(n,Q5e);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(X5e))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ys.responsesRequiredToBeHealthy=2;ys.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[vf,ys]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ys&&ys.isAvailable();let r=n&&!ys.previouslyFailed();if(e.webSocketOnly&&(n||hi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ys];else{const i=this.transports_=[];for(const s of l0.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);l0.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}l0.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5e=6e4,J5e=5e3,e$e=10*1024,t$e=100*1024,WC="t",W7="d",n$e="s",G7="r",r$e="e",K7="o",q7="a",Y7="n",Q7="p",i$e="h";class s$e{constructor(e,n,r,i,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kv("c:"+this.id+":"),this.transportManager_=new l0(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=sg(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>t$e?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>e$e?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(WC in e){const n=e[WC];n===q7?this.upgradeIfSecondaryHealthy_():n===G7?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===K7&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Hp("t",e),r=Hp("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Q7,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:q7,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Y7,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Hp("t",e),r=Hp("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Hp(WC,e);if(W7 in e){const r=e[W7];if(n===i$e){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Y7){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===n$e?this.onConnectionShutdown_(r):n===G7?this.onReset_(r):n===r$e?WA("Server Error: "+r):n===K7?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WA("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),F3!==r&&hi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),sg(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Z5e))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sg(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(J5e))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Q7,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ou.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gte=class{constructor(e){this.allowedEvents_=e,this.listeners_={},fe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){fe(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS extends Gte{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!E3()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new WS}getInitialEvent(e){return fe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=32,Z7=768;class $t{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function gt(){return new $t("")}function Ze(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function oc(t){return t.pieces_.length-t.pieceNum_}function At(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new $t(t.pieces_,e)}function Kte(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function o$e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function qte(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Yte(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $t(e,0)}function $n(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof $t)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new $t(n,0)}function Xe(t){return t.pieceNum_>=t.pieces_.length}function Vi(t,e){const n=Ze(t),r=Ze(e);if(n===null)return e;if(n===r)return Vi(At(t),At(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Qte(t,e){if(oc(t)!==oc(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ss(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(oc(t)>oc(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class a$e{constructor(e,n){this.errorPrefix_=n,this.parts_=qte(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=XE(this.parts_[r]);Xte(this)}}function l$e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=XE(e),Xte(t)}function c$e(t){const e=t.parts_.pop();t.byteLength_-=XE(e),t.parts_.length>0&&(t.byteLength_-=1)}function Xte(t){if(t.byteLength_>Z7)throw new Error(t.errorPrefix_+"has a key path longer than "+Z7+" bytes ("+t.byteLength_+").");if(t.parts_.length>X7)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+X7+") or object contains a cycle "+Wc(t))}function Wc(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3 extends Gte{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new U3}getInitialEvent(e){return fe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=1e3,u$e=60*5*1e3,J7=30*1e3,d$e=1.3,f$e=3e4,h$e="server_kill",e9=3;class da extends Wte{constructor(e,n,r,i,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=da.nextPersistentConnectionId_++,this.log_=kv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Wp,this.maxReconnectDelay_=u$e,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Dee())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");U3.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&WS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(Wn(s)),fe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new w3,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),fe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),fe(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;da.warnOnListenWarnings_(l,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Aa(e,"w")){const r=Sh(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();hi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||BDe(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=J7)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=jDe(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),fe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Wn(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):WA("Unrecognized action received from server: "+Wn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){fe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Wp,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Wp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>f$e&&(this.reconnectDelay_=Wp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*d$e)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+da.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,r())},c=function(d){fe(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?nr("getToken() completed but was canceled"):(nr("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,a=new s$e(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,h=>{hi(h+" ("+this.repoInfo_.toString()+")"),this.interrupt(h$e)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&hi(d),l())}}}interrupt(e){nr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){nr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],DA(this.interruptReasons_)&&(this.reconnectDelay_=Wp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>N3(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new $t(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){nr("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=e9&&(this.reconnectDelay_=J7,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){nr("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=e9&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Ete.replace(/\./g,"-")]=1,E3()?e["framework.cordova"]=1:Oee()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=WS.getInstance().currentlyOnline();return DA(this.interruptReasons_)&&e}}da.nextPersistentConnectionId_=0;da.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Je(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Je(_h,e),i=new Je(_h,n);return this.compare(r,i)!==0}minPost(){return Je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wy;class Zte extends t_{static get __EMPTY_NODE(){return Wy}static set __EMPTY_NODE(e){Wy=e}compare(e,n){return op(e.name,n.name)}isDefinedOn(e){throw tp("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Je.MIN}maxPost(){return new Je(Du,Wy)}makePost(e,n){return fe(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,Wy)}toString(){return".key"}}const zf=new Zte;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Dn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Dn.RED,this.left=i??Ur.EMPTY_NODE,this.right=s??Ur.EMPTY_NODE}copy(e,n,r,i,s){return new Dn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ur.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Ur.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Dn.RED=!0;Dn.BLACK=!1;class p$e{copy(e,n,r,i,s){return this}insert(e,n,r){return new Dn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ur{constructor(e,n=Ur.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ur(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Ur(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Dn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Gy(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Gy(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Gy(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Gy(this.root_,null,this.comparator_,!0,e)}}Ur.EMPTY_NODE=new p$e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$e(t,e){return op(t.name,e.name)}function V3(t,e){return op(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KA;function g$e(t){KA=t}const Jte=function(t){return typeof t=="number"?"number:"+Pte(t):"string:"+t},ene=function(t){if(t.isLeafNode()){const e=t.val();fe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Aa(e,".sv"),"Priority must be a string or number.")}else fe(t===KA||t.isEmpty(),"priority of unexpected type.");fe(t===KA||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t9;class Ln{constructor(e,n=Ln.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,fe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ene(this.priorityNode_)}static set __childrenNodeConstructor(e){t9=e}static get __childrenNodeConstructor(){return t9}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ln(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ln.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Xe(e)?this:Ze(e)===".priority"?this.priorityNode_:Ln.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ln.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Ze(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(fe(r!==".priority"||oc(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Ln.__childrenNodeConstructor.EMPTY_NODE.updateChild(At(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Jte(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Pte(this.value_):e+=this.value_,this.lazyHash_=Tte(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ln.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ln.__childrenNodeConstructor?-1:(fe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=Ln.VALUE_TYPE_ORDER.indexOf(n),s=Ln.VALUE_TYPE_ORDER.indexOf(r);return fe(i>=0,"Unknown leaf type: "+n),fe(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ln.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tne,nne;function v$e(t){tne=t}function y$e(t){nne=t}class x$e extends t_{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?op(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(Du,new Ln("[PRIORITY-POST]",nne))}makePost(e,n){const r=tne(e);return new Je(n,new Ln("[PRIORITY-POST]",r))}toString(){return".priority"}}const ar=new x$e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$e=Math.log(2);class S$e{constructor(e){const n=s=>parseInt(Math.log(s)/b$e,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const GS=function(t,e,n,r){t.sort(e);const i=function(l,c){const u=c-l;let d,f;if(u===0)return null;if(u===1)return d=t[l],f=n?n(d):d,new Dn(f,d.node,Dn.BLACK,null,null);{const h=parseInt(u/2,10)+l,p=i(l,h),m=i(h+1,c);return d=t[h],f=n?n(d):d,new Dn(f,d.node,Dn.BLACK,p,m)}},s=function(l){let c=null,u=null,d=t.length;const f=function(p,m){const g=d-p,y=d;d-=p;const x=i(g+1,y),S=t[g],w=n?n(S):S;h(new Dn(w,S.node,m,null,x))},h=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?f(g,Dn.BLACK):(f(g,Dn.BLACK),f(g,Dn.RED))}return u},o=new S$e(t.length),a=s(o);return new Ur(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GC;const Sd={};class oa{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return fe(Sd&&ar,"ChildrenNode.ts has not been loaded"),GC=GC||new oa({".priority":Sd},{".priority":ar}),GC}get(e){const n=Sh(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ur?n:null}hasIndex(e){return Aa(this.indexSet_,e.toString())}addIndex(e,n){fe(e!==zf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Je.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=GS(r,e.getCompare()):a=Sd;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new oa(u,c)}addToIndexes(e,n){const r=MS(this.indexes_,(i,s)=>{const o=Sh(this.indexSet_,s);if(fe(o,"Missing index implementation for "+s),i===Sd)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(Je.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),GS(a,o.getCompare())}else return Sd;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new Je(e.name,a))),l.insert(e,e.node)}});return new oa(r,this.indexSet_)}removeFromIndexes(e,n){const r=MS(this.indexes_,i=>{if(i===Sd)return i;{const s=n.get(e.name);return s?i.remove(new Je(e.name,s)):i}});return new oa(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gp;class lt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&ene(this.priorityNode_),this.children_.isEmpty()&&fe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gp||(Gp=new lt(new Ur(V3),null,oa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gp}updatePriority(e){return this.children_.isEmpty()?this:new lt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Gp:n}}getChild(e){const n=Ze(e);return n===null?this:this.getImmediateChild(n).getChild(At(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(fe(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Je(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Gp:this.priorityNode_;return new lt(i,o,s)}}updateChild(e,n){const r=Ze(e);if(r===null)return n;{fe(Ze(e)!==".priority"||oc(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(At(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ar,(o,a)=>{n[o]=a.val(e),r++,s&&lt.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Jte(this.getPriority().val())+":"),this.forEachChild(ar,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Tte(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Je(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Je(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Je.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Iv?-1:0}withIndex(e){if(e===zf||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new lt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===zf||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ar),i=n.getIterator(ar);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===zf?null:this.indexMap_.get(e.toString())}}lt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class w$e extends lt{constructor(){super(new Ur(V3),lt.EMPTY_NODE,oa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lt.EMPTY_NODE}isEmpty(){return!1}}const Iv=new w$e;Object.defineProperties(Je,{MIN:{value:new Je(_h,lt.EMPTY_NODE)},MAX:{value:new Je(Du,Iv)}});Zte.__EMPTY_NODE=lt.EMPTY_NODE;Ln.__childrenNodeConstructor=lt;g$e(Iv);y$e(Iv);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$e=!0;function rr(t,e=null){if(t===null)return lt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),fe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ln(n,rr(e))}if(!(t instanceof Array)&&E$e){const n=[];let r=!1;if(Yi(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=rr(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new Je(o,l)))}}),n.length===0)return lt.EMPTY_NODE;const s=GS(n,m$e,o=>o.name,V3);if(r){const o=GS(n,ar.getCompare());return new lt(s,rr(e),new oa({".priority":o},{".priority":ar}))}else return new lt(s,rr(e),oa.Default)}else{let n=lt.EMPTY_NODE;return Yi(t,(r,i)=>{if(Aa(t,r)&&r.substring(0,1)!=="."){const s=rr(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(rr(e))}}v$e(rr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _$e extends t_{constructor(e){super(),this.indexPath_=e,fe(!Xe(e)&&Ze(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?op(e.name,n.name):s}makePost(e,n){const r=rr(e),i=lt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Je(n,i)}maxPost(){const e=lt.EMPTY_NODE.updateChild(this.indexPath_,Iv);return new Je(Du,e)}toString(){return qte(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T$e extends t_{compare(e,n){const r=e.node.compareTo(n.node);return r===0?op(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,n){const r=rr(e);return new Je(n,r)}toString(){return".value"}}const C$e=new T$e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$e(t){return{type:"value",snapshotNode:t}}function P$e(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function I$e(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function n9(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function A$e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ar}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return fe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return fe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_h}hasEnd(){return this.endSet_}getIndexEndValue(){return fe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return fe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Du}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return fe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ar}copy(){const e=new z3;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function r9(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ar?n="$priority":t.index_===C$e?n="$value":t.index_===zf?n="$key":(fe(t.index_ instanceof _$e,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Wn(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Wn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Wn(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Wn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Wn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function i9(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ar&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS extends Wte{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=kv("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(fe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=KS.getListenId_(e,r),a={};this.listens_[o]=a;const l=r9(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,r),Sh(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",i(f,null)}})}unlisten(e,n){const r=KS.getListenId_(e,n);delete this.listens_[r]}get(e){const n=r9(e._queryParams),r=e._path.toString(),i=new w3;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+np(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=s0(a.responseText)}catch{hi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&hi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L$e{constructor(){this.rootNode_=lt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){return{value:null,children:new Map}}function rne(t,e,n){if(Xe(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Ze(e);t.children.has(r)||t.children.set(r,qS());const i=t.children.get(r);e=At(e),rne(i,e,n)}}function qA(t,e,n){t.value!==null?n(e,t.value):R$e(t,(r,i)=>{const s=new $t(e.toString()+"/"+r);qA(i,s,n)})}function R$e(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O$e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Yi(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9=10*1e3,D$e=30*1e3,M$e=5*60*1e3;class $$e{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new O$e(e);const r=s9+(D$e-s9)*Math.random();sg(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Yi(e,(i,s)=>{s>0&&Aa(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),sg(this.reportStats_.bind(this),Math.floor(Math.random()*2*M$e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(uo||(uo={}));function ine(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function sne(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function one(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=uo.ACK_USER_WRITE,this.source=ine()}operationForChild(e){if(Xe(this.path)){if(this.affectedTree.value!=null)return fe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new $t(e));return new YS(gt(),n,this.revert)}}else return fe(Ze(this.path)===e,"operationForChild called for unrelated child."),new YS(At(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=uo.OVERWRITE}operationForChild(e){return Xe(this.path)?new Mu(this.source,gt(),this.snap.getImmediateChild(e)):new Mu(this.source,At(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=uo.MERGE}operationForChild(e){if(Xe(this.path)){const n=this.children.subtree(new $t(e));return n.isEmpty()?null:n.value?new Mu(this.source,gt(),n.value):new c0(this.source,gt(),n)}else return fe(Ze(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new c0(this.source,At(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xe(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ze(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function N$e(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(A$e(o.childName,o.snapshotNode))}),Kp(t,i,"child_removed",e,r,n),Kp(t,i,"child_added",e,r,n),Kp(t,i,"child_moved",s,r,n),Kp(t,i,"child_changed",e,r,n),Kp(t,i,"value",e,r,n),i}function Kp(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,l)=>j$e(t,a,l)),o.forEach(a=>{const l=F$e(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function F$e(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function j$e(t,e,n){if(e.childName==null||n.childName==null)throw tp("Should only compare child_ events.");const r=new Je(e.childName,e.snapshotNode),i=new Je(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ane(t,e){return{eventCache:t,serverCache:e}}function og(t,e,n,r){return ane(new H3(e,n,r),t.serverCache)}function lne(t,e,n,r){return ane(t.eventCache,new H3(e,n,r))}function YA(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function $u(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KC;const B$e=()=>(KC||(KC=new Ur(C5e)),KC);class It{constructor(e,n=B$e()){this.value=e,this.children=n}static fromObject(e){let n=new It(null);return Yi(e,(r,i)=>{n=n.set(new $t(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:gt(),value:this.value};if(Xe(e))return null;{const r=Ze(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(At(e),n);return s!=null?{path:$n(new $t(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xe(e))return this;{const n=Ze(e),r=this.children.get(n);return r!==null?r.subtree(At(e)):new It(null)}}set(e,n){if(Xe(e))return new It(n,this.children);{const r=Ze(e),s=(this.children.get(r)||new It(null)).set(At(e),n),o=this.children.insert(r,s);return new It(this.value,o)}}remove(e){if(Xe(e))return this.children.isEmpty()?new It(null):new It(null,this.children);{const n=Ze(e),r=this.children.get(n);if(r){const i=r.remove(At(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new It(null):new It(this.value,s)}else return this}}get(e){if(Xe(e))return this.value;{const n=Ze(e),r=this.children.get(n);return r?r.get(At(e)):null}}setTree(e,n){if(Xe(e))return n;{const r=Ze(e),s=(this.children.get(r)||new It(null)).setTree(At(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new It(this.value,o)}}fold(e){return this.fold_(gt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_($n(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,gt(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(Xe(e))return null;{const s=Ze(e),o=this.children.get(s);return o?o.findOnPath_(At(e),$n(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,gt(),n)}foreachOnPath_(e,n,r){if(Xe(e))return this;{this.value&&r(n,this.value);const i=Ze(e),s=this.children.get(i);return s?s.foreachOnPath_(At(e),$n(n,i),r):new It(null)}}foreach(e){this.foreach_(gt(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_($n(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.writeTree_=e}static empty(){return new Ps(new It(null))}}function ag(t,e,n){if(Xe(e))return new Ps(new It(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Vi(i,e);return s=s.updateChild(o,n),new Ps(t.writeTree_.set(i,s))}else{const i=new It(n),s=t.writeTree_.setTree(e,i);return new Ps(s)}}}function o9(t,e,n){let r=t;return Yi(n,(i,s)=>{r=ag(r,$n(e,i),s)}),r}function a9(t,e){if(Xe(e))return Ps.empty();{const n=t.writeTree_.setTree(e,new It(null));return new Ps(n)}}function QA(t,e){return nd(t,e)!=null}function nd(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Vi(n.path,e)):null}function l9(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ar,(r,i)=>{e.push(new Je(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Je(r,i.value))}),e}function Ql(t,e){if(Xe(e))return t;{const n=nd(t,e);return n!=null?new Ps(new It(n)):new Ps(t.writeTree_.subtree(e))}}function XA(t){return t.writeTree_.isEmpty()}function Th(t,e){return cne(gt(),t.writeTree_,e)}function cne(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(fe(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=cne($n(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild($n(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function une(t,e){return mne(e,t)}function U$e(t,e,n,r,i){fe(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ag(t.visibleWrites,e,n)),t.lastWriteId=r}function V$e(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function z$e(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);fe(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&H$e(a,r.path)?i=!1:Ss(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return W$e(t),!0;if(r.snap)t.visibleWrites=a9(t.visibleWrites,r.path);else{const a=r.children;Yi(a,l=>{t.visibleWrites=a9(t.visibleWrites,$n(r.path,l))})}return!0}else return!1}function H$e(t,e){if(t.snap)return Ss(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ss($n(t.path,n),e))return!0;return!1}function W$e(t){t.visibleWrites=dne(t.allWrites,G$e,gt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function G$e(t){return t.visible}function dne(t,e,n){let r=Ps.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)Ss(n,o)?(a=Vi(n,o),r=ag(r,a,s.snap)):Ss(o,n)&&(a=Vi(o,n),r=ag(r,gt(),s.snap.getChild(a)));else if(s.children){if(Ss(n,o))a=Vi(n,o),r=o9(r,a,s.children);else if(Ss(o,n))if(a=Vi(o,n),Xe(a))r=o9(r,gt(),s.children);else{const l=Sh(s.children,Ze(a));if(l){const c=l.getChild(At(a));r=ag(r,gt(),c)}}}else throw tp("WriteRecord should have .snap or .children")}}return r}function fne(t,e,n,r,i){if(!r&&!i){const s=nd(t.visibleWrites,e);if(s!=null)return s;{const o=Ql(t.visibleWrites,e);if(XA(o))return n;if(n==null&&!QA(o,gt()))return null;{const a=n||lt.EMPTY_NODE;return Th(o,a)}}}else{const s=Ql(t.visibleWrites,e);if(!i&&XA(s))return n;if(!i&&n==null&&!QA(s,gt()))return null;{const o=function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(Ss(c.path,e)||Ss(e,c.path))},a=dne(t.allWrites,o,e),l=n||lt.EMPTY_NODE;return Th(a,l)}}}function K$e(t,e,n){let r=lt.EMPTY_NODE;const i=nd(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ar,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=Ql(t.visibleWrites,e);return n.forEachChild(ar,(o,a)=>{const l=Th(Ql(s,new $t(o)),a);r=r.updateImmediateChild(o,l)}),l9(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=Ql(t.visibleWrites,e);return l9(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function q$e(t,e,n,r,i){fe(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=$n(e,n);if(QA(t.visibleWrites,s))return null;{const o=Ql(t.visibleWrites,s);return XA(o)?i.getChild(n):Th(o,i.getChild(n))}}function Y$e(t,e,n,r){const i=$n(e,n),s=nd(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=Ql(t.visibleWrites,i);return Th(o,r.getNode().getImmediateChild(n))}else return null}function Q$e(t,e){return nd(t.visibleWrites,e)}function X$e(t,e,n,r,i,s,o){let a;const l=Ql(t.visibleWrites,e),c=nd(l,gt());if(c!=null)a=c;else if(n!=null)a=Th(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),f=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let h=f.getNext();for(;h&&u.length<i;)d(h,r)!==0&&u.push(h),h=f.getNext();return u}else return[]}function Z$e(){return{visibleWrites:Ps.empty(),allWrites:[],lastWriteId:-1}}function ZA(t,e,n,r){return fne(t.writeTree,t.treePath,e,n,r)}function hne(t,e){return K$e(t.writeTree,t.treePath,e)}function c9(t,e,n,r){return q$e(t.writeTree,t.treePath,e,n,r)}function QS(t,e){return Q$e(t.writeTree,$n(t.treePath,e))}function J$e(t,e,n,r,i,s){return X$e(t.writeTree,t.treePath,e,n,r,i,s)}function W3(t,e,n){return Y$e(t.writeTree,t.treePath,e,n)}function pne(t,e){return mne($n(t.treePath,e),t.writeTree)}function mne(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eNe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;fe(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),fe(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,n9(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,I$e(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,P$e(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,n9(r,e.snapshotNode,i.oldSnap));else throw tp("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tNe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const gne=new tNe;class G3{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new H3(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return W3(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$u(this.viewCache_),s=J$e(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}function nNe(t,e){fe(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),fe(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function rNe(t,e,n,r,i){const s=new eNe;let o,a;if(n.type===uo.OVERWRITE){const c=n;c.source.fromUser?o=JA(t,e,c.path,c.snap,r,i,s):(fe(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Xe(c.path),o=XS(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===uo.MERGE){const c=n;c.source.fromUser?o=sNe(t,e,c.path,c.children,r,i,s):(fe(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=eL(t,e,c.path,c.children,r,i,a,s))}else if(n.type===uo.ACK_USER_WRITE){const c=n;c.revert?o=lNe(t,e,c.path,r,i,s):o=oNe(t,e,c.path,c.affectedTree,r,i,s)}else if(n.type===uo.LISTEN_COMPLETE)o=aNe(t,e,n.path,r,s);else throw tp("Unknown operation type: "+n.type);const l=s.getChanges();return iNe(e,o,l),{viewCache:o,changes:l}}function iNe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=YA(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(k$e(YA(e)))}}function vne(t,e,n,r,i,s){const o=e.eventCache;if(QS(r,n)!=null)return e;{let a,l;if(Xe(n))if(fe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=$u(e),u=c instanceof lt?c:lt.EMPTY_NODE,d=hne(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=ZA(r,$u(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ze(n);if(c===".priority"){fe(oc(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const d=c9(r,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=At(n);let d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const f=c9(r,n,o.getNode(),l);f!=null?d=o.getNode().getImmediateChild(c).updateChild(u,f):d=o.getNode().getImmediateChild(c)}else d=W3(r,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,i,s):a=o.getNode()}}return og(e,a,o.isFullyInitialized()||Xe(n),t.filter.filtersNodes())}}function XS(t,e,n,r,i,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Xe(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const h=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),h,null)}else{const h=Ze(n);if(!l.isCompleteForPath(n)&&oc(n)>1)return e;const p=At(n),g=l.getNode().getImmediateChild(h).updateChild(p,r);h===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),h,g,p,gne,null)}const d=lne(e,c,l.isFullyInitialized()||Xe(n),u.filtersNodes()),f=new G3(i,d,s);return vne(t,d,n,i,f,a)}function JA(t,e,n,r,i,s,o){const a=e.eventCache;let l,c;const u=new G3(i,e,s);if(Xe(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=og(e,c,!0,t.filter.filtersNodes());else{const d=Ze(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),r),l=og(e,c,a.isFullyInitialized(),a.isFiltered());else{const f=At(n),h=a.getNode().getImmediateChild(d);let p;if(Xe(f))p=r;else{const m=u.getCompleteChild(d);m!=null?Kte(f)===".priority"&&m.getChild(Yte(f)).isEmpty()?p=m:p=m.updateChild(f,r):p=lt.EMPTY_NODE}if(h.equals(p))l=e;else{const m=t.filter.updateChild(a.getNode(),d,p,f,u,o);l=og(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function u9(t,e){return t.eventCache.isCompleteForChild(e)}function sNe(t,e,n,r,i,s,o){let a=e;return r.foreach((l,c)=>{const u=$n(n,l);u9(e,Ze(u))&&(a=JA(t,a,u,c,i,s,o))}),r.foreach((l,c)=>{const u=$n(n,l);u9(e,Ze(u))||(a=JA(t,a,u,c,i,s,o))}),a}function d9(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function eL(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Xe(n)?c=r:c=new It(null).setTree(n,r);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,f)=>{if(u.hasChild(d)){const h=e.serverCache.getNode().getImmediateChild(d),p=d9(t,h,f);l=XS(t,l,new $t(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,f)=>{const h=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!u.hasChild(d)&&!h){const p=e.serverCache.getNode().getImmediateChild(d),m=d9(t,p,f);l=XS(t,l,new $t(d),m,i,s,o,a)}}),l}function oNe(t,e,n,r,i,s,o){if(QS(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(Xe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return XS(t,e,n,l.getNode().getChild(n),i,s,a,o);if(Xe(n)){let c=new It(null);return l.getNode().forEachChild(zf,(u,d)=>{c=c.set(new $t(u),d)}),eL(t,e,n,c,i,s,a,o)}else return e}else{let c=new It(null);return r.foreach((u,d)=>{const f=$n(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),eL(t,e,n,c,i,s,a,o)}}function aNe(t,e,n,r,i){const s=e.serverCache,o=lne(e,s.getNode(),s.isFullyInitialized()||Xe(n),s.isFiltered());return vne(t,o,n,r,gne,i)}function lNe(t,e,n,r,i,s){let o;if(QS(r,n)!=null)return e;{const a=new G3(r,e,i),l=e.eventCache.getNode();let c;if(Xe(n)||Ze(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=ZA(r,$u(e));else{const d=e.serverCache.getNode();fe(d instanceof lt,"serverChildren would be complete if leaf node"),u=hne(r,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=Ze(n);let d=W3(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,At(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,lt.EMPTY_NODE,At(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ZA(r,$u(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||QS(r,gt())!=null,og(e,c,o,t.filter.filtersNodes())}}function cNe(t,e){const n=$u(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Xe(e)&&!n.getImmediateChild(Ze(e)).isEmpty())?n.getChild(e):null}function f9(t,e,n,r){e.type===uo.MERGE&&e.source.queryId!==null&&(fe($u(t.viewCache_),"We should always have a full cache before handling merges"),fe(YA(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=rNe(t.processor_,i,e,n,r);return nNe(t.processor_,s.viewCache),fe(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,uNe(t,s.changes,s.viewCache.eventCache.getNode(),null)}function uNe(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return N$e(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h9;function dNe(t){fe(!h9,"__referenceConstructor has already been defined"),h9=t}function K3(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return fe(s!=null,"SyncTree gave us an op for an invalid query."),f9(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(f9(o,e,n,r));return s}}function q3(t,e){let n=null;for(const r of t.views.values())n=n||cNe(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p9;function fNe(t){fe(!p9,"__referenceConstructor has already been defined"),p9=t}class m9{constructor(e){this.listenProvider_=e,this.syncPointTree_=new It(null),this.pendingWriteTree_=Z$e(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function hNe(t,e,n,r,i){return U$e(t.pendingWriteTree_,e,n,r,i),i?r_(t,new Mu(ine(),e,n)):[]}function yf(t,e,n=!1){const r=V$e(t.pendingWriteTree_,e);if(z$e(t.pendingWriteTree_,e)){let s=new It(null);return r.snap!=null?s=s.set(gt(),!0):Yi(r.children,o=>{s=s.set(new $t(o),!0)}),r_(t,new YS(r.path,s,n))}else return[]}function n_(t,e,n){return r_(t,new Mu(sne(),e,n))}function pNe(t,e,n){const r=It.fromObject(n);return r_(t,new c0(sne(),e,r))}function mNe(t,e,n,r){const i=Sne(t,r);if(i!=null){const s=wne(i),o=s.path,a=s.queryId,l=Vi(o,e),c=new Mu(one(a),l,n);return Ene(t,o,c)}else return[]}function gNe(t,e,n,r){const i=Sne(t,r);if(i){const s=wne(i),o=s.path,a=s.queryId,l=Vi(o,e),c=It.fromObject(n),u=new c0(one(a),l,c);return Ene(t,o,u)}else return[]}function yne(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=Vi(o,e),c=q3(a,l);if(c)return c});return fne(i,e,s,n,!0)}function r_(t,e){return xne(e,t.syncPointTree_,null,une(t.pendingWriteTree_,gt()))}function xne(t,e,n,r){if(Xe(t.path))return bne(t,e,n,r);{const i=e.get(gt());n==null&&i!=null&&(n=q3(i,gt()));let s=[];const o=Ze(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=pne(r,o);s=s.concat(xne(a,l,c,u))}return i&&(s=s.concat(K3(i,t,r,n))),s}}function bne(t,e,n,r){const i=e.get(gt());n==null&&i!=null&&(n=q3(i,gt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=pne(r,o),u=t.operationForChild(o);u&&(s=s.concat(bne(u,a,l,c)))}),i&&(s=s.concat(K3(i,t,r,n))),s}function Sne(t,e){return t.tagToQueryMap.get(e)}function wne(t){const e=t.indexOf("$");return fe(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $t(t.substr(0,e))}}function Ene(t,e,n){const r=t.syncPointTree_.get(e);fe(r,"Missing sync point for query tag that we're tracking");const i=une(t.pendingWriteTree_,e);return K3(r,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Y3(n)}node(){return this.node_}}class Q3{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$n(this.path_,e);return new Q3(this.syncTree_,n)}node(){return yne(this.syncTree_,this.path_)}}const vNe=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},g9=function(t,e,n){if(!t||typeof t!="object")return t;if(fe(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return yNe(t[".sv"],e,n);if(typeof t[".sv"]=="object")return xNe(t[".sv"],e);fe(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},yNe=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:fe(!1,"Unexpected server value: "+t)}},xNe=function(t,e,n){t.hasOwnProperty("increment")||fe(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&fe(!1,"Unexpected increment value: "+r);const i=e.node();if(fe(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},bNe=function(t,e,n,r){return X3(e,new Q3(n,t),r)},SNe=function(t,e,n){return X3(t,new Y3(e),n)};function X3(t,e,n){const r=t.getPriority().val(),i=g9(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=g9(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ln(a,rr(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ln(i))),o.forEachChild(ar,(a,l)=>{const c=X3(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function J3(t,e){let n=e instanceof $t?e:new $t(e),r=t,i=Ze(n);for(;i!==null;){const s=Sh(r.node.children,i)||{children:{},childCount:0};r=new Z3(i,r,s),n=At(n),i=Ze(n)}return r}function ap(t){return t.node.value}function _ne(t,e){t.node.value=e,tL(t)}function Tne(t){return t.node.childCount>0}function wNe(t){return ap(t)===void 0&&!Tne(t)}function i_(t,e){Yi(t.node.children,(n,r)=>{e(new Z3(n,t,r))})}function Cne(t,e,n,r){n&&!r&&e(t),i_(t,i=>{Cne(i,e,!0,r)}),n&&r&&e(t)}function ENe(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Av(t){return new $t(t.parent===null?t.name:Av(t.parent)+"/"+t.name)}function tL(t){t.parent!==null&&_Ne(t.parent,t.name,t)}function _Ne(t,e,n){const r=wNe(n),i=Aa(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,tL(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,tL(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TNe=/[\[\].#$\/\u0000-\u001F\u007F]/,CNe=/[\[\].#$\u0000-\u001F\u007F]/,qC=10*1024*1024,kne=function(t){return typeof t=="string"&&t.length!==0&&!TNe.test(t)},kNe=function(t){return typeof t=="string"&&t.length!==0&&!CNe.test(t)},PNe=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kNe(t)},Pne=function(t,e,n){const r=n instanceof $t?new a$e(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Wc(r));if(typeof e=="function")throw new Error(t+"contains a function "+Wc(r)+" with contents = "+e.toString());if(Cte(e))throw new Error(t+"contains "+e.toString()+" "+Wc(r));if(typeof e=="string"&&e.length>qC/3&&XE(e)>qC)throw new Error(t+"contains a string greater than "+qC+" utf8 bytes "+Wc(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Yi(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!kne(o)))throw new Error(t+" contains an invalid key ("+o+") "+Wc(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);l$e(r,o),Pne(t,a,r),c$e(r)}),i&&s)throw new Error(t+' contains ".value" child '+Wc(r)+" in addition to actual children.")}},INe=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kne(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!PNe(n))throw new Error(WDe(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ANe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function LNe(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Qte(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function rd(t,e,n){LNe(t,n),RNe(t,r=>Ss(r,e)||Ss(e,r))}function RNe(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(ONe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function ONe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();pu&&nr("event: "+n.toString()),Pv(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DNe="repo_interrupt",MNe=25;class $Ne{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ANe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qS(),this.transactionQueueTree_=new Z3,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function NNe(t,e,n){if(t.stats_=j3(t.repoInfo_),t.forceRestClient_||R5e())t.server_=new KS(t.repoInfo_,(r,i,s,o)=>{v9(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>y9(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Wn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new da(t.repoInfo_,e,(r,i,s,o)=>{v9(t,r,i,s,o)},r=>{y9(t,r)},r=>{jNe(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=N5e(t.repoInfo_,()=>new $$e(t.stats_,t.server_)),t.infoData_=new L$e,t.infoSyncTree_=new m9({startListening:(r,i,s,o)=>{let a=[];const l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=n_(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),eM(t,"connected",!1),t.serverSyncTree_=new m9({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);rd(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function FNe(t){const n=t.infoData_.getNode(new $t(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ine(t){return vNe({timestamp:FNe(t)})}function v9(t,e,n,r,i){t.dataUpdateCount++;const s=new $t(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const l=MS(n,c=>rr(c));o=gNe(t.serverSyncTree_,s,l,i)}else{const l=rr(n);o=mNe(t.serverSyncTree_,s,l,i)}else if(r){const l=MS(n,c=>rr(c));o=pNe(t.serverSyncTree_,s,l)}else{const l=rr(n);o=n_(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=nM(t,s)),rd(t.eventQueue_,a,o)}function y9(t,e){eM(t,"connected",e),e===!1&&UNe(t)}function jNe(t,e){Yi(e,(n,r)=>{eM(t,n,r)})}function eM(t,e,n){const r=new $t("/.info/"+e),i=rr(n);t.infoData_.updateSnapshot(r,i);const s=n_(t.infoSyncTree_,r,i);rd(t.eventQueue_,r,s)}function BNe(t){return t.nextWriteId_++}function UNe(t){Ane(t,"onDisconnectEvents");const e=Ine(t),n=qS();qA(t.onDisconnect_,gt(),(i,s)=>{const o=bNe(i,s,t.serverSyncTree_,e);rne(n,i,o)});let r=[];qA(n,gt(),(i,s)=>{r=r.concat(n_(t.serverSyncTree_,i,s));const o=WNe(t,i);nM(t,o)}),t.onDisconnect_=qS(),rd(t.eventQueue_,gt(),r)}function VNe(t){t.persistentConnection_&&t.persistentConnection_.interrupt(DNe)}function Ane(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),nr(n,...e)}function Lne(t,e,n){return yne(t.serverSyncTree_,e,n)||lt.EMPTY_NODE}function tM(t,e=t.transactionQueueTree_){if(e||s_(t,e),ap(e)){const n=One(t,e);fe(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&zNe(t,Av(e),n)}else Tne(e)&&i_(e,n=>{tM(t,n)})}function zNe(t,e,n){const r=n.map(c=>c.currentWriteId),i=Lne(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];fe(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Vi(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Ane(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(yf(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();s_(t,J3(t.transactionQueueTree_,e)),tM(t,t.transactionQueueTree_),rd(t.eventQueue_,e,u);for(let f=0;f<d.length;f++)Pv(d[f])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{hi("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}nM(t,e)}},o)}function nM(t,e){const n=Rne(t,e),r=Av(n),i=One(t,n);return HNe(t,i,r),r}function HNe(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Vi(n,l.path);let u=!1,d;if(fe(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,i=i.concat(yf(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=MNe)u=!0,d="maxretry",i=i.concat(yf(t.serverSyncTree_,l.currentWriteId,!0));else{const f=Lne(t,l.path,o);l.currentInputSnapshot=f;const h=e[a].update(f.val());if(h!==void 0){Pne("transaction failed: Data returned ",h,l.path);let p=rr(h);typeof h=="object"&&h!=null&&Aa(h,".priority")||(p=p.updatePriority(f.getPriority()));const g=l.currentWriteId,y=Ine(t),x=SNe(p,f,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=x,l.currentWriteId=BNe(t),o.splice(o.indexOf(g),1),i=i.concat(hNe(t.serverSyncTree_,l.path,x,l.currentWriteId,l.applyLocally)),i=i.concat(yf(t.serverSyncTree_,g,!0))}else u=!0,d="nodata",i=i.concat(yf(t.serverSyncTree_,l.currentWriteId,!0))}rd(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}s_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Pv(r[a]);tM(t,t.transactionQueueTree_)}function Rne(t,e){let n,r=t.transactionQueueTree_;for(n=Ze(e);n!==null&&ap(r)===void 0;)r=J3(r,n),e=At(e),n=Ze(e);return r}function One(t,e){const n=[];return Dne(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Dne(t,e,n){const r=ap(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);i_(e,i=>{Dne(t,i,n)})}function s_(t,e){const n=ap(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,_ne(e,n.length>0?n:void 0)}i_(e,r=>{s_(t,r)})}function WNe(t,e){const n=Av(Rne(t,e)),r=J3(t.transactionQueueTree_,e);return ENe(r,i=>{YC(t,i)}),YC(t,r),Cne(r,i=>{YC(t,i)}),n}function YC(t,e){const n=ap(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(fe(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(fe(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(yf(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?_ne(e,void 0):n.length=s+1,rd(t.eventQueue_,Av(e),i);for(let o=0;o<r.length;o++)Pv(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GNe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function KNe(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):hi(`Invalid query segment '${n}' in query '${t}'`)}return e}const x9=function(t,e){const n=qNe(t),r=n.namespace;n.domain==="firebase.com"&&Sa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Sa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||_5e();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Fte(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new $t(n.pathString)}},qNe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=GNe(t.substring(u,d)));const f=KNe(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const h=e.slice(0,c);if(h.toLowerCase()==="localhost")n="localhost";else if(h.split(".").length<=2)n=h;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Xe(this._path)?null:Kte(this._path)}get ref(){return new lp(this._repo,this._path)}get _queryIdentifier(){const e=i9(this._queryParams),n=N3(e);return n==="{}"?"default":n}get _queryObject(){return i9(this._queryParams)}isEqual(e){if(e=Io(e),!(e instanceof rM))return!1;const n=this._repo===e._repo,r=Qte(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+o$e(this._path)}}class lp extends rM{constructor(e,n){super(e,n,new z3,!1)}get parent(){const e=Yte(this._path);return e===null?null:new lp(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}dNe(lp);fNe(lp);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YNe="FIREBASE_DATABASE_EMULATOR_HOST",nL={};let QNe=!1;function XNe(t,e,n,r){t.repoInfo_=new Fte(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function ZNe(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Sa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nr("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=x9(s,i),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[YNe]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=x9(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new Vf(Vf.OWNER):new D5e(t.name,t.options,e);INe("Invalid Firebase Database URL",o),Xe(o.path)||Sa("Database URL must point to the root of a Firebase Database (not including a child path).");const d=e8e(a,t,u,new O5e(t.name,n));return new t8e(d,t)}function JNe(t,e){const n=nL[e];(!n||n[t.key]!==t)&&Sa(`Database ${e}(${t.repoInfo_}) has already been deleted.`),VNe(t),delete n[t.key]}function e8e(t,e,n,r){let i=nL[e.name];i||(i={},nL[e.name]=i);let s=i[t.toURLString()];return s&&Sa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $Ne(t,QNe,n,r),i[t.toURLString()]=s,s}let t8e=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(NNe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new lp(this._repo,gt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(JNe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Sa("Cannot call "+e+" on a deleted database.")}};function n8e(t=jee(),e){const n=C3(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=IDe("database");r&&r8e(n,...r)}return n}function r8e(t,e,n,r={}){t=Io(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Sa("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Sa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vf(Vf.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:ADe(r.mockUserToken,t.app.options.projectId);s=new Vf(o)}XNe(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8e(t){x5e(rp),wh(new Lu("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return ZNe(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Yl(B7,U7,t),Yl(B7,U7,"esm2017")}da.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};da.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};i8e();const s8e={apiKey:"AIzaSyAESUVCltG4kviQLIiiygIROJ7BKMMgvX8",authDomain:"waterquality-trading.firebaseapp.com",projectId:"waterquality-trading",storageBucket:"waterquality-trading.firebasestorage.app",messagingSenderId:"1006831487182",appId:"1:1006831487182:web:a58405168a345d8728689f",measurementId:"G-ECMFLV2Y6B"},o8e=Fee(s8e);n8e(o8e);const ZS=zA(),iM=()=>{var o,a,l;const{STATES:t,ACTIONS:e}=jn(),n=(a=t.notification)==null?void 0:a[(o=Object.keys(t.notification))==null?void 0:o[0]],r=(l=Object.keys(t.notification))==null?void 0:l[0],i=e.clearNotification;if(!n)return null;v.useEffect(()=>{const c=setTimeout(()=>{s()},4e3);return()=>clearTimeout(c)},[r,i]);const s=()=>{i()};return b.jsx(Cr,{children:n&&b.jsxs(l8e,{type:r,initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.5,transition:{duration:.2}},transition:{type:"spring",stiffness:300},children:[n,b.jsx("span",{style:{marginLeft:"10px",cursor:"pointer"},onClick:s,children:""})]})})},a8e={notification:"#729ABD",alert:"#FFC107",error:"#F44336"},l8e=U(ue.div)`
  position: fixed;
  bottom: 20px;
  right: 20px;
  padding: 20px;
  background-color: ${t=>a8e[t.type]||"#333"};
  color: white;
  border-radius: 8px;
  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
  font-size: 1rem;
  z-index: 9999;
  max-width: calc(100% - 40px);
  
  @media (max-width: 768px) {
    font-size: 0.9rem;
    padding: 15px;
  }

`,Mne={hidden:{opacity:0,y:"-10vh"},visible:{opacity:1,y:0},exit:{opacity:0,y:"10vh"}},JS={hidden:{opacity:0},visible:{opacity:1},exit:{opacity:0}};function c8e(t){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(t)}const u8e=U.div`
  .input-section {
  }

  ${on} {
    margin-top: 40px;
    width: 100%;
  }

  ${Hi} {
    width: 100%;
  }

  .secondary-actions {
    .secondary-action-text {
      font-weight: 500;
      font-size: 14px;
      color: ${({theme:t})=>t.colors.ui600};
    }
  }
`,d8e=({onSuccess:t,onSwitchToRegister:e,updateUser:n})=>{const{ACTIONS:r}=jn(),i=Po(),[s,o]=v.useState(""),[a,l]=v.useState(""),[c,u]=v.useState(""),[d,f]=v.useState(!1),[h,p]=v.useState(!1),{logNotification:m}=r||{},g=async x=>{var S;x.preventDefault(),f(!0),u("");try{const E=(await dte(ZS,s,a)).user;if(!E){u("Login failed: no user returned from Firebase.");return}const T={uid:E.uid,username:E.email?E.email.split("@")[0].toLowerCase():"user",email:((S=E.email)==null?void 0:S.toLowerCase())||"",role:"farmer",PIN:123456};n&&await n(null,T),i("/marketplace"),t&&t()}catch(w){console.error("Login error:",w),u(w.message||"Login failed. Please try again.")}finally{f(!1)}},y=async()=>{if(c8e(s))try{await e4e(ZS,s),m("alert",`Password reset email sent to ${s}!`)}catch(x){console.error("Reset password error:",x),u(`Error sending password reset email: ${x.message}`),m("error","Error sending password reset email")}else m("error","Please enter a valid email")};return b.jsxs(u8e,{children:[b.jsx(iM,{type:"error",message:c}),b.jsx(mZ,{children:d?b.jsx(oS,{initial:"hidden",animate:"visible",exit:"exit",variants:JS,children:b.jsx(Player,{autoplay:!0,loop:!0,src:HZ,style:{height:100,width:100}})}):h?b.jsx(oS,{initial:"hidden",animate:"visible",exit:"exit",variants:JS,children:b.jsx(Player,{autoplay:!0,loop:!0,src:WZ,style:{height:100,width:100}})}):b.jsxs(gZ,{variants:Mne,initial:"hidden",animate:"visible",exit:"exit",onSubmit:g,children:[b.jsx("div",{className:"input-section",children:b.jsx(_t,{label:"Email",children:b.jsx(qt,{type:"email",placeholder:"Email",value:s,onChange:x=>o(x.target.value),required:!0})})}),b.jsx("div",{className:"input-section",children:b.jsx(_t,{label:"Password",children:b.jsx(qt,{type:"password",placeholder:"Password",value:a,onChange:x=>l(x.target.value),required:!0})})}),b.jsx("div",{className:"button-area",children:b.jsx(on,{type:"submit",children:"Log In"})}),b.jsxs("div",{className:"secondary-actions",children:[b.jsx("div",{className:"secondary-action-text",children:b.jsx(hA,{type:"button",onClick:y,children:"Forgot Password?"})}),b.jsxs("div",{className:"secondary-action-text",children:["Need an account?"," ",b.jsx(hA,{type:"button",onClick:e,children:"Register"})]})]})]})})]})},f8e=({onSuccess:t,onSwitchToLogin:e,updateUser:n,googleData:r})=>{const[i,s]=v.useState((r==null?void 0:r.name)||""),[o,a]=v.useState(((r==null?void 0:r.gmail)||(r==null?void 0:r.email)||"").toLowerCase()),[l,c]=v.useState(""),[u,d]=v.useState(""),[f,h]=v.useState(!1),[p,m]=v.useState(!1);v.useEffect(()=>{if(p&&t){const y=setTimeout(()=>{t()},2e3);return()=>clearTimeout(y)}},[p,t]);const g=async y=>{y.preventDefault(),d("");const x=(i||"").trim(),S=(o||"").trim().toLowerCase();if(!x){d("Please choose a username.");return}if(!S){d("Please enter an email address.");return}if(!l||l.length<8){d("Password must be at least 8 characters long.");return}h(!0);try{let w=null;if(r!=null&&r.gmail||r!=null&&r.email){const T=(r.gmail||r.email||"").toLowerCase();w={uid:r.uid,username:x.toLowerCase(),email:T,role:"farmer",PIN:123456}}else{const _=(await t4e(ZS,S,l)).user;w={uid:_.uid,username:x.toLowerCase(),email:(_.email||S).toLowerCase(),role:"farmer",PIN:123456}}console.log("RegisterForm  newUser:",w);try{const T=await PEe.create(w);console.log("AccountAPI.create ",T)}catch(T){console.warn("AccountAPI.create failed (non-fatal):",T)}let E=!1;if(n&&(E=!!await n(null,w)),!E)try{sessionStorage.setItem("user",JSON.stringify(w))}catch(T){console.error("Failed to write sessionStorage user:",T)}m(!0)}catch(w){console.error("Registration error:",w),w.code==="auth/email-already-in-use"?d("An account with this email already exists."):w.code==="auth/invalid-email"?d("Please enter a valid email address."):w.code==="auth/weak-password"?d("Password is too weak. Use at least 8 characters."):d(w.message||"Failed to create account. Please try again.")}finally{h(!1)}};return b.jsxs(Cr,{children:[b.jsx(iM,{type:"error",message:u}),b.jsx(mZ,{children:f?b.jsx(oS,{initial:"hidden",animate:"visible",exit:"exit",variants:JS,children:b.jsx(Player,{autoplay:!0,loop:!0,src:HZ,style:{height:100,width:100}})}):p?b.jsx(oS,{initial:"hidden",animate:"visible",exit:"exit",variants:JS,children:b.jsx(Player,{autoplay:!0,loop:!0,src:WZ,style:{height:100,width:100}})}):b.jsxs(gZ,{variants:Mne,initial:"hidden",animate:"visible",exit:"exit",onSubmit:g,children:[b.jsx(_t,{label:"Username",children:b.jsx(qt,{type:"text",value:i,placeholder:"Choose a username",onChange:y=>s(y.target.value),required:!0})}),b.jsx(_t,{label:"Email",children:b.jsx(qt,{type:"email",value:o,placeholder:"you@example.com",onChange:y=>a(y.target.value),required:!0})}),b.jsx(_t,{label:"Password",children:b.jsx(qt,{type:"password",value:l,placeholder:"Create a password (min 8 chars)",onChange:y=>c(y.target.value),required:!0})}),b.jsx(on,{className:"register-button",type:"submit",children:"Register"}),b.jsx("div",{children:b.jsx(hA,{type:"button",onClick:e,children:"Already have an account? Log in"})})]})})]})},h8e=U.h1`
  font-size: 1.5rem;
  color: ${({theme:t})=>t.colors.ui800};

  text-align: left;
  margin-bottom: 1rem;
`,p8e=U.p`
  font-size: 14px;
  font-weight: 500;
  line-height: 1.4;
  color: ${({theme:t})=>t.colors.ui600};
  text-align: left;
  margin-bottom: 2rem;
`;U.div`
  display: flex;
  flex-direction: row;
  gap: 10px;
`;const m8e={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{duration:1,delay:.2}}},g8e=U.div`
  background: url("https://images.unsplash.com/photo-1498408040764-ab6eb772a145?q=80&w=2672&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D");

  background-size: cover;
  background-position: center;
  position: relative;
  padding: 40px 24px;
  > * {
    color: White;
    position: relative;
    z-index: 2;
    max-width: 400px;
    @media (min-width: 1024px) {
      color: inherit;
    }
  }
  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;

    height: 100%;
    background: rgba(
      0,
      0,
      0,
      0.4
    ); // Adjust the rgba value for different overlay colors and opacities
    z-index: 0; // Ensure the overlay is on top of the background image
    @media (min-width: 1024px) {
      background: none;
    }
  }
  margin-bottom: 40px;

  @media (min-width: 1024px) {
    background: none;
    padding: 0px;
    padding-left: 0px;
  }

  .logo-white {
    background: white;
    width: auto;
    max-width: 180px;
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 8px 24px;
    margin-bottom: 16px;
    @media (min-width: 1024px) {
      padding: 0px;
      margin-bottom: 40px;
    }
    img {
      width: 100%;
    }
  }
`,v8e=t=>{const e=new Date().getHours();let n="Day";return e<12?n="Morning":e<18?n="Afternoon":n="Evening",`Good ${n}, ${t}`},y8e=({user:t,setCardState:e,enterDash:n})=>{const{username:r}=t||{};return b.jsxs(g8e,{variants:m8e,initial:"hidden",animate:"visible",children:[b.jsx("div",{className:"logo-white",children:b.jsx("img",{src:b8e,alt:"WQT Logo"})}),b.jsx(h8e,{children:r?v8e(r):"Powered by BlueSignal LTD"}),b.jsx(p8e,{children:"Collaborate with your neighbors, utilities, and local organizations to strengthen water quality, restore ecosystems, and support healthy watersheds."})]})},b9=window.location.hostname,x8e=b9==="cloud.bluesignal.xyz"||b9.endsWith(".cloud.bluesignal.xyz"),b8e=x8e?HQ:WQ,S8e=U.div`
  min-height: 100vh;
  width: 100%;
  display: flex;
  flex-direction: column;
`,w8e=U.div`
  flex: 1;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 24px 16px 32px;
  box-sizing: border-box;
`,E8e=U.div`
  width: 100%;
  max-width: 480px;
  margin: 0 auto;
  box-sizing: border-box;

  @media (min-width: 768px) {
    max-width: 520px;
  }

  .form-elements-wrap {
    margin-top: 16px;
  }

  .form-content {
    width: 100%;
  }
`,_8e=U.img``;U(_8e)``;const $ne=()=>{const{STATES:t,ACTIONS:e}=jn(),n=Po(),[r,i]=v.useState(""),[s,o]=v.useState({}),{user:a}=t||{},{updateUser:l}=e||{};v.useEffect(()=>{if(!(a!=null&&a.uid))return;const u=window.location.hostname;u==="cloud.bluesignal.xyz"||u.endsWith(".cloud.bluesignal.xyz")?n("/dashboard/main",{replace:!0}):n("/marketplace",{replace:!0})},[a,n]);const c=()=>{const u=window.location.hostname,d=u==="cloud.bluesignal.xyz"||u.endsWith(".cloud.bluesignal.xyz");n(d?"/dashboard/main":"/marketplace")};return b.jsxs(S8e,{children:[b.jsx(w8e,{children:b.jsxs(E8e,{children:[b.jsx(y8e,{user:a,setCardState:i,enterDash:c},"welcome"),b.jsx("div",{className:"form-elements-wrap",children:b.jsxs("div",{className:"form-content",children:[b.jsx(Cr,{mode:"wait",children:r!=="register"&&b.jsx(d8e,{onSuccess:c,updateUser:l,onSwitchToRegister:()=>i("register")},"login")}),r==="register"&&b.jsx(f8e,{onSuccess:c,updateUser:l,onSwitchToLogin:()=>i("login"),googleData:s},"register")]})})]})}),b.jsx(uee,{})]})},T8e=U(ue.div)`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100vw;
  height: 100vh;
  text-align: center;
  background-color: #f2f2f2;
`,S9=U.h1`
  font-size: 4em;
  margin-bottom: 20px;
`,QC=U.p`
  font-size: 1.5em;
  margin-bottom: 30px;
`,w9=U(rge)`
  background-color: #007bff;
  color: white;
  padding: 10px 20px;
  border-radius: 4px;
  text-decoration: none;
  font-size: 1.2em;
  transition: background-color 0.3s ease;

  &:hover {
    background-color: #0056b3;
  }
`,C8e={initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:50}},Nne=()=>{const{STATES:t}=jn(),{user:e,isLoading:n}=t||{};return b.jsx(T8e,{initial:"initial",animate:"animate",exit:"exit",variants:C8e,children:n?b.jsx(b.Fragment,{children:b.jsx(QC,{children:"Loading..."})}):e!=null&&e.uid?b.jsxs(b.Fragment,{children:[b.jsx(S9,{children:"404 - Not Found"}),b.jsx(QC,{children:"The page you're looking for doesn't exist."}),b.jsx(w9,{to:"/",children:"Go Home"})]}):b.jsxs(b.Fragment,{children:[b.jsx(S9,{children:"404 - Not Found"}),b.jsx(QC,{children:"The page you're looking for doesn't exist or you do not have access."}),b.jsx(w9,{to:"/",children:"Go Home"})]})})},k8e=U.div`
  min-height: 100vh;
  display: flex;
  flex-direction: column;
`,P8e=U.div`
  flex: 1;
  width: 100%;
  max-width: 1120px;
  margin: 0 auto;
  padding: 24px 16px 48px;

  @media (min-width: 1024px) {
    padding: 40px 0 64px;
  }
`,I8e=U.h1`
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 8px;
  color: ${({theme:t})=>t.colors.ui900};
`,A8e=U.p`
  font-size: 14px;
  color: ${({theme:t})=>t.colors.ui600};
  margin-bottom: 24px;
`,L8e=U.div`
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;

  @media (min-width: 768px) {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
`,XC=U.div`
  border-radius: 12px;
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  padding: 16px;
  background: ${({theme:t})=>t.colors.bg};

  h2 {
    font-size: 13px;
    font-weight: 600;
    color: ${({theme:t})=>t.colors.ui700};
    margin-bottom: 4px;
  }

  p {
    font-size: 20px;
    font-weight: 600;
    color: ${({theme:t})=>t.colors.ui900};
  }

  span {
    display: block;
    margin-top: 6px;
    font-size: 12px;
    color: ${({theme:t})=>t.colors.ui600};
  }
`,R8e=U.div`
  margin-top: 32px;
  padding: 16px;
  border-radius: 12px;
  border: 1px dashed ${({theme:t})=>t.colors.ui300};
  background: ${({theme:t})=>t.colors.bgAlt||"#fafafa"};
  font-size: 13px;
  color: ${({theme:t})=>t.colors.ui700};
`,O8e=()=>b.jsx(k8e,{children:b.jsxs(P8e,{children:[b.jsx(I8e,{children:"Financial Dashboard"}),b.jsx(A8e,{children:"High-level view of credit sales, payouts, and marketplace activity. This is a working placeholder  well wire it to real data next."}),b.jsxs(L8e,{children:[b.jsxs(XC,{children:[b.jsx("h2",{children:"Total Sales"}),b.jsx("p",{children:"$0"}),b.jsx("span",{children:"Lifetime NPC sales across all listings."})]}),b.jsxs(XC,{children:[b.jsx("h2",{children:"Pending Payouts"}),b.jsx("p",{children:"$0"}),b.jsx("span",{children:"Credits sold but not yet settled."})]}),b.jsxs(XC,{children:[b.jsx("h2",{children:"Open Listings"}),b.jsx("p",{children:"0"}),b.jsx("span",{children:"Marketplace listings currently active."})]})]}),b.jsx(R8e,{children:"Detailed revenue analytics, credit flows, and exporter/utility breakdowns will live here. For now, this keeps the route alive and navigable from the marketplace menu."})]})});function D8e(){const[t,e]=v.useState([]),[n,r]=v.useState(null),[i,s]=v.useState(!1);return v.useEffect(()=>{e([]),r(null),s(!1)},[]),{eventsData:t,errorMessage:n,loading:i}}const Fne={hidden:{opacity:0},visible:{opacity:1}},E9=[576,768,992,1200],M8e=t=>{const[e,n]=v.useState(!1);return v.useEffect(()=>{const r=()=>{window.innerWidth<t?n(!0):n(!1)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[t]),e},$8e=U(ue.div)`
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  width: 100%;
  height: 100%;
  animation: ${Fne} 0.5s ease-in-out;
  transition: 0.5s ease-in-out;
  overflow-y: auto;
  overflow-x: hidden;
`,N8e=U(ue.div).attrs(()=>({initial:"hidden",variants:Fne}))`
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 100%;
  padding: 1rem;
  overflow-x: hidden;
  align-items: flex-start; /* Align content to the top of the container */
  overflow-y: auto; // Add vertical scroll if content overflows

  @media (max-width: 768px) {
    width: 80%;
  }
`,F8e=U.h1`
  font-size: ${t=>t.isSmallScreen?"16px":"24px"};
  font-weight: bold;
`,j8e=U.div`
  width: 100%;
  padding: 0 10px;
  border-bottom: 1px solid #00000080;
`,_9=U.h2`
  width: 100%;
  font-size: 1.5em;
  font-weight: bold;
  text-align: center;
  padding-top: 5px;
  padding-bottom: 5px;
  margin-bottom: 20px;
  @media (max-width: ${E9[1]}px) {
    font-size: 1.2em;
  }
  @media (max-width: ${E9[0]}px) {
    font-size: 1em;
  }
`,B8e=U.table`
  width: 80%;
  border-collapse: collapse;
  // background-color: ${fi.secondaryAccent};
  border-radius: 8px;
  margin: auto;
  margin-top: 100px;
  overflow: hidden;
  -webkit-box-shadow: 0px 2px 5px 2px rgba(0, 0, 0, 0.75);
  -moz-box-shadow: 0px 2px 5px 2px rgba(0, 0, 0, 0.75);
  box-shadow: 0px 2px 5px 2px rgba(0, 0, 0, 0.75);

  @media (max-width: 768px) {
    width: 100%;
  }
`,T9=U.th`
  padding: 10px;
  background: ${fi.accent};
  color: white;
  text-align: center;
  border-right: 2px solid #222;
  &:last-child {
    border-right: none;
  }
`,C9=U.td`
  padding: 8px;
  border-bottom: 1px solid #222;
  border-right: 2px solid #222;
  &:last-child {
    border-right: none;
  }
`,U8e=Ms`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,V8e=U.div`
  display: inline-block;
  margin: auto;
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-left-color: #568ca9;
  border-radius: 50%;
  width: 20px;
  height: 20px;
  animation: ${U8e} 0.8s infinite linear;
`,z8e=U.div`
  position: fixed;
  bottom: 30px;
  right: 10px;
  z-index: 999;
  display: flex;
  align-items: center;
  background-color: ${({type:t})=>t==="error"?"#ff9a9a":"#d8f5e9"};
  color: ${({type:t})=>t==="error"?"#ff0000":"#00b800"};
  padding: 10px 20px;
  border-radius: 4px;
  box-shadow: 0px 2px 5px 2px rgba(0, 0, 0, 0.25);
`,H8e=U.button`
  margin-left: 10px;
  background-color: transparent;
  border: none;
  color: ${({type:t})=>t==="error"?"#ff0000":"#00b800"};
  cursor: pointer;
`,W8e=U.button`
  border-radius: 10px;
  backdrop-filter: blur(20px);
  padding: 10px;
  border: 1px solid #333;
  background: #222;
  color: white;
  box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);
  -webkit-box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);
  -moz-box-shadow: 0px 5px 5px 0px rgba(0, 0, 0, 0.75);
  cursor: pointer;
  transition: 0.3s ease;

  &:hover {
    scale: 1.1;
  }

  @media (max-width: 600px) {
    font-size: 10px;
    padding: 5px;
  }
`,G8e=U.div`
  position: fixed;
  top: 7wh;
  left: 0;
  width: 100%;
  height: 60px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #fff;
  border-bottom: 2px solid #222;
  padding: 0 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  box-sizing: border-box;
  z-index: 1000;
`,ZC=(t,e)=>{const n=localStorage.getItem(t);if(!n)return!0;const{timestamp:r}=JSON.parse(n);return Date.now()-r>e},JC=6e5;function K8e(){const t=M8e(768),[e,n]=v.useState([]),[r,i]=v.useState(null),[s,o]=v.useState(null),[a,l]=v.useState([]),[c,u]=v.useState(!0),[d,f]=v.useState(null),[h,p]=v.useState(!1),[m,g]=v.useState(!0),[y,x]=v.useState({});v.useEffect(()=>{const E=T=>{g(T),console.log(T.log)};vr.on("*",T=>{E(T),T.removeListener()})},[]),v.useEffect(()=>{async function E(){const T="REGISTRY_OVERVIEW_DATA";if(!ZC(T,JC)||!m){const _=JSON.parse(localStorage.getItem(T));if(_){n(_.data);return}}if(m||!e)try{const _=await vr.getTotalSold(),I=await vr.getTotalSold(),A=await vr.getTotalSold(),L=await vr.getTotalCertificates(),j=await vr.getAllProducers(),D=await vr.getCreditTypes(1);console.log("DATA STATES*****************************",{totalSupply:ti.toNumber(_),totalSold:ti.toNumber(I),totalBurnedSupply:ti.toNumber(A),totalCertificates:ti.toNumber(L),_producers:j,creditTypes:D}),x({...y,creditTypes:D});const O=[{label:"Total Supply",value:(_==null?void 0:_.toString())+` ${ti.toNumber(_)>0?"NPCs":"NPC"}`},{label:"Total Sold",value:(I==null?void 0:I.toString())+` ${ti.toNumber(I)>0?"NPCs":"NPC"}`},{label:"Total Donated Credits",value:(A==null?void 0:A.toString())+` ${ti.toNumber(A)>0?"NPCs":"NPC"}`},{label:"Credit Types",value:D==null?void 0:D.join(", ")},{label:"Total Certificates",value:L==null?void 0:L.toString()},{label:"Total Farmers",value:j==null?void 0:j.length}];localStorage.setItem(T,JSON.stringify({data:O,timestamp:Date.now()})),setTimeout(()=>{i(j)},1e3),g(null)}catch(_){console.error(_),f(`${_.message}`)}finally{u(!1)}}E()},[m]),v.useEffect(()=>{r&&(async()=>{const T="REGISTRY_PRODUCER_DATA";if(!ZC(T,JC)||!m){const I=JSON.parse(localStorage.getItem(T));if(console.log("cacheDataProducer",{cachedData:I},!!I),I){o(I.data);return}}if(m||!s)try{var{creditTypes:_}=y;console.log("creditTypes",_),_||(_=await vr.getCreditTypes(1),console.log("Re-request of creditTypes"));const I=await Promise.all(r.map(async A=>{const L=await vr.getProducerVerifiers(A),j=await Promise.all(L.map(async D=>{const O=await Promise.all(_.map(async $=>{const R=await vr.getSupply(A,D,$);return{creditType:$,issuedSupply:ti.toNumber(R==null?void 0:R.issued),availableSupply:ti.toNumber(R==null?void 0:R.available),donatedSupply:ti.toNumber(R==null?void 0:R.donated)}}));return{verifier:D,Supplies:O}}));return{producer:A,verifiers:j}}));localStorage.setItem(T,JSON.stringify({data:I,timestamp:Date.now()})),g(!1)}catch(I){console.error(I),f("Failed to fetch producer data")}})()},[r,m]),v.useEffect(()=>{async function E(){const T="REGISTRY_EVENT_DATA";if(!ZC(T,JC)||!m){const _=JSON.parse(localStorage.getItem(T));if(_){l(_.data);return}}if(m||!a){const{eventsData:_,errorMessage:I,loading:A}=D8e();if(I){f(String(I));return}localStorage.setItem(T,JSON.stringify({data:_,timestamp:Date.now()})),g(!1)}}s&&E()},[s,m]);const S=()=>{f(null)},w=()=>{p(!h)};return b.jsx($8e,{children:b.jsxs(N8e,{animate:"visible",children:[c?b.jsx(V8e,{}):b.jsxs(b.Fragment,{children:[b.jsxs(G8e,{children:[b.jsx(F8e,{isSmallScreen:t,children:"- Recent Removals -"}),b.jsx(W8e,{onClick:w,children:"Account Search"})]}),b.jsx("br",{}),b.jsxs(B8e,{children:[b.jsx("thead",{children:b.jsxs("tr",{children:[b.jsx(T9,{children:"Data"}),b.jsx(T9,{children:"Value"})]})}),b.jsx("tbody",{children:e.map((E,T)=>b.jsxs("tr",{children:[b.jsx(C9,{children:E.label}),b.jsx(C9,{children:E.value})]},T))})]}),b.jsxs(j8e,{children:[b.jsx(_9,{children:"Farmers"}),b.jsx(Xm,{width:"50%"}),b.jsx($Te,{producersData:s}),b.jsx(_9,{children:"Events"}),b.jsx(Xm,{width:"50%"}),a.map((E,T)=>b.jsx(PTe,{event:E},T))]})]}),d&&b.jsxs(z8e,{type:"error",children:[d,b.jsx(H8e,{type:"error",onClick:S,children:"Close"})]}),b.jsx(qTe,{isOpen:h,setIsOpen:w})]})})}const q8e="modulepreload",Y8e=function(t){return"/"+t},k9={},Q8e=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=Y8e(s),s in k9)return;k9[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const d=i[u];if(d.href===s&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":q8e,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},X8e=Ms`
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
`,Z8e=U.div`
margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  width: 100vw;
  height: 100vh;
  animation: ${X8e} 0.5s ease-in-out;
  transition: 0.5s ease-in-out;
  overflow-y: auto;
  overflow-x: hidden;
`,J8e=U.div`

  position: fixed;
  width: 100%;
  max-height: 100px;
  background: #fff;
  top: 0;
  left: 0;
  border-bottom: 2px solid black;
  z-index: 999;
`,e6e=U.h1`
font-size: 2rem;
font-weight: bold;
margin: auto;
text-align: center;
color: black;
padding: 10px;
letter-spacing: 2px;
`,t6e=U.ul`
position: absolute;
  list-style: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  height: 100%;
  width: 100%;
  overflow-y: auto;
  padding: 20px;
  padding-top: 90px;
  top: 0;
`,n6e=v.lazy(()=>Q8e(()=>Promise.resolve().then(()=>bTe),void 0)),r6e=()=>{const[t,e]=v.useState([]),[n,r]=v.useState(!0),[i,s]=v.useState("");return v.useEffect(()=>{async function o(){try{const a=await vr.getTotalCertificates(),l=[];for(let d=ti.toNumber(a);d>Math.max(ti.toNumber(a)-10,0);d--){const f=await vr.getCertificateById(d);l.push(f)}const u=(await Promise.all(l)).map(d=>pZ(d));e(u)}catch(a){console.error(a),s(`Failed to fetch data: ${a.message}`)}finally{r(!1)}}o()},[]),n?b.jsx(cA,{}):i?b.jsx(zZ,{error:i}):b.jsxs(Z8e,{id:"invisible-scroll",children:[b.jsx(J8e,{children:b.jsx(e6e,{children:"Recent"})}),b.jsx(t6e,{id:"invisible-scroll",children:b.jsx(v.Suspense,{fallback:b.jsx(cA,{}),children:t.map(o=>b.jsx(n6e,{certificate:o},o.id))})})]})};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const i6e={prefix:"fab",iconName:"linkedin-in",icon:[448,512,[],"f0e1","M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"]},s6e={prefix:"fab",iconName:"facebook-f",icon:[320,512,[],"f39e","M80 299.3V512H196V299.3h86.5l18-97.8H196V166.9c0-51.7 20.3-71.5 72.7-71.5c16.3 0 29.4 .4 37 1.2V7.9C291.4 4 256.4 0 236.2 0C129.3 0 80 50.5 80 159.4v42.1H14v97.8H80z"]},o6e={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]},a6e=U.div`
  display: flex;
  flex-direction: column;
  place-items: center;
  align-items: center;
  text-align: center;
  justify-content: center;
  opacity: 0;
  width: 100vw;
  height: 100vh;
  animation: fadeIn 1s ease forwards;
  overflow: auto;

  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
`,l6e=U.div`
  width: 100%;
  padding-top: 50px;
  overflow: auto;
`,c6e=U.div`
  display: flex;
  justify-content: center;
  align-items: center;
  margin: auto;
  border-top: 1px solid #222;
  padding-top: 10px;
  opacity: 0;
  transform: translateY(20px);
  animation: slideUp 0.5s ease forwards;
  z-index: 100;

  @keyframes slideUp {
    0% {
      opacity: 0;
      transform: translateY(20px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
`,e2=U.a`
  display: inline-block;
  margin: 0 10px;
  color: #333;
  transition: all 0.3s ease;
  width: 24px;
  cursor: pointer;

  &:hover {
    color: #0d5b84;
    transform: translateY(-3px) scale(1.1);
  }
`;function u6e(t){return`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`}function d6e(t,e){return`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(e)}`}function f6e(t,e,n){return`https://www.linkedin.com/shareArticle?url=${encodeURIComponent(t)}&title=${encodeURIComponent(e)}&summary=${encodeURIComponent(n)}`}const P9="My NeptuneChain Certificate",h6e=()=>{const{id:t}=cD(),e=window.location.href,[n,r]=v.useState({}),[i,s]=v.useState(!0),[o,a]=v.useState("");return v.useEffect(()=>{async function l(){try{fetch(`${ve.server_url}/npc_credits/certificates/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(c=>c.json()).then(c=>{console.log("Data",c);const{certificate:u}=c;if(u)if(Number(u==null?void 0:u.id)>0){const f=pZ(u);console.log(f,u,u==null?void 0:u.buyer),r(u)}else a("Certificate Not Found")}).catch(c=>a({message:`Failed to fetch item details: ${c.message}`}))}catch(c){console.error(c),a("Failed to fetch data")}finally{s(!1)}}l()},[t]),i||!n?b.jsx(cA,{}):o?b.jsx(zZ,{error:o}):b.jsxs(a6e,{children:[b.jsx(l6e,{children:b.jsx(dTe,{data:n})}),b.jsxs(c6e,{children:[b.jsx(e2,{href:u6e(e),target:"_blank",children:b.jsx(jt,{icon:s6e})}),b.jsx(e2,{href:d6e(e,P9),target:"_blank",children:b.jsx(jt,{icon:o6e})}),b.jsx(e2,{href:f6e(e,P9,""),target:"_blank",children:b.jsx(jt,{icon:i6e})})]})]})},p6e=[{CompanyName:"Florida Waterworks Co.",Website:"floridawaterworks.com",Address:"1234 Gulf Blvd",City:"Clearwater",States:"FL","Zip Code":"33767",geometry:{coordinates:[-81.5158,27.6648],type:"Point"}},{CompanyName:"Sunshine Water Authority",Website:"sunshinewater.com",Address:"5678 Ocean Dr",City:"Miami",States:"FL","Zip Code":"33139",geometry:{coordinates:[-81.5058,27.6748],type:"Point"}},{CompanyName:"Palm Coast Water Services",Website:"palmcoastwater.com",Address:"4321 Palm Harbor Pkwy",City:"Palm Coast",States:"FL","Zip Code":"32137",geometry:{coordinates:[-81.5258,27.6548],type:"Point"}},{CompanyName:"Everglades Water Authority",Website:"evergladeswater.com",Address:"9876 Swamp Rd",City:"Everglades City",States:"FL","Zip Code":"34139",geometry:{coordinates:[-81.4958,27.6648],type:"Point"}},{CompanyName:"Orlando Water Utilities",Website:"orlandowaterutilities.com",Address:"7890 International Dr",City:"Orlando",States:"FL","Zip Code":"32819",geometry:{coordinates:[-81.5358,27.6848],type:"Point"}},{CompanyName:"St. Augustine Water Authority",Website:"staugustinewater.com",Address:"3456 Anastasia Blvd",City:"St. Augustine",States:"FL","Zip Code":"32080",geometry:{coordinates:[-81.5158,27.6948],type:"Point"}},{CompanyName:"Tampa Bay Water",Website:"tampabaywater.com",Address:"6543 Bayshore Blvd",City:"Tampa",States:"FL","Zip Code":"33611",geometry:{coordinates:[-81.4858,27.6748],type:"Point"}},{CompanyName:"Naples Water Department",Website:"napleswaterdept.com",Address:"1011 5th Ave S",City:"Naples",States:"FL","Zip Code":"34102",geometry:{coordinates:[-81.5258,27.6548],type:"Point"}},{CompanyName:"Panama City Water Authority",Website:"panamacitywater.com",Address:"2200 W Beach Dr",City:"Panama City",States:"FL","Zip Code":"32401",geometry:{coordinates:[-81.5058,27.6748],type:"Point"}},{CompanyName:"Key West Water Works",Website:"keywestwaterworks.com",Address:"987 Truman Ave",City:"Key West",States:"FL","Zip Code":"33040",geometry:{coordinates:[-81.4958,27.6648],type:"Point"}}],m6e={Database:p6e},g6e=()=>b.jsx(z2e,{storesData:m6e});var sM=Rv(),$e=t=>Lv(t,sM),oM=Rv();$e.write=t=>Lv(t,oM);var o_=Rv();$e.onStart=t=>Lv(t,o_);var aM=Rv();$e.onFrame=t=>Lv(t,aM);var lM=Rv();$e.onFinish=t=>Lv(t,lM);var Hf=[];$e.setTimeout=(t,e)=>{const n=$e.now()+e,r=()=>{const s=Hf.findIndex(o=>o.cancel==r);~s&&Hf.splice(s,1),Pl-=~s?1:0},i={time:n,handler:t,cancel:r};return Hf.splice(jne(n),0,i),Pl+=1,Bne(),i};var jne=t=>~(~Hf.findIndex(e=>e.time>t)||~Hf.length);$e.cancel=t=>{o_.delete(t),aM.delete(t),lM.delete(t),sM.delete(t),oM.delete(t)};$e.sync=t=>{rL=!0,$e.batchedUpdates(t),rL=!1};$e.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function r(...i){e=i,$e.onStart(n)}return r.handler=t,r.cancel=()=>{o_.delete(n),e=null},r};var cM=typeof window<"u"?window.requestAnimationFrame:()=>{};$e.use=t=>cM=t;$e.now=typeof performance<"u"?()=>performance.now():Date.now;$e.batchedUpdates=t=>t();$e.catch=console.error;$e.frameLoop="always";$e.advance=()=>{$e.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Vne()};var kl=-1,Pl=0,rL=!1;function Lv(t,e){rL?(e.delete(t),t(0)):(e.add(t),Bne())}function Bne(){kl<0&&(kl=0,$e.frameLoop!=="demand"&&cM(Une))}function v6e(){kl=-1}function Une(){~kl&&(cM(Une),$e.batchedUpdates(Vne))}function Vne(){const t=kl;kl=$e.now();const e=jne(kl);if(e&&(zne(Hf.splice(0,e),n=>n.handler()),Pl-=e),!Pl){v6e();return}o_.flush(),sM.flush(t?Math.min(64,kl-t):16.667),aM.flush(),oM.flush(),lM.flush()}function Rv(){let t=new Set,e=t;return{add(n){Pl+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Pl-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Pl-=e.size,zne(e,r=>r(n)&&t.add(r)),Pl+=t.size,e=t)}}}function zne(t,e){t.forEach(n=>{try{e(n)}catch(r){$e.catch(r)}})}var y6e=Object.defineProperty,x6e=(t,e)=>{for(var n in e)y6e(t,n,{get:e[n],enumerable:!0})},As={};x6e(As,{assign:()=>S6e,colors:()=>Xl,createStringInterpolator:()=>dM,skipAnimation:()=>Wne,to:()=>Hne,willAdvance:()=>fM});function iL(){}var b6e=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),le={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Ho(t,e){if(le.arr(t)){if(!le.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Be=(t,e)=>t.forEach(e);function Eo(t,e,n){if(le.arr(t)){for(let r=0;r<t.length;r++)e.call(n,t[r],`${r}`);return}for(const r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r)}var wr=t=>le.und(t)?[]:le.arr(t)?t:[t];function lg(t,e){if(t.size){const n=Array.from(t);t.clear(),Be(n,e)}}var Tm=(t,...e)=>lg(t,n=>n(...e)),uM=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),dM,Hne,Xl=null,Wne=!1,fM=iL,S6e=t=>{t.to&&(Hne=t.to),t.now&&($e.now=t.now),t.colors!==void 0&&(Xl=t.colors),t.skipAnimation!=null&&(Wne=t.skipAnimation),t.createStringInterpolator&&(dM=t.createStringInterpolator),t.requestAnimationFrame&&$e.use(t.requestAnimationFrame),t.batchedUpdates&&($e.batchedUpdates=t.batchedUpdates),t.willAdvance&&(fM=t.willAdvance),t.frameLoop&&($e.frameLoop=t.frameLoop)},cg=new Set,Fi=[],t2=[],ew=0,a_={get idle(){return!cg.size&&!Fi.length},start(t){ew>t.priority?(cg.add(t),$e.onStart(w6e)):(Gne(t),$e(sL))},advance:sL,sort(t){if(ew)$e.onFrame(()=>a_.sort(t));else{const e=Fi.indexOf(t);~e&&(Fi.splice(e,1),Kne(t))}},clear(){Fi=[],cg.clear()}};function w6e(){cg.forEach(Gne),cg.clear(),$e(sL)}function Gne(t){Fi.includes(t)||Kne(t)}function Kne(t){Fi.splice(E6e(Fi,e=>e.priority>t.priority),0,t)}function sL(t){const e=t2;for(let n=0;n<Fi.length;n++){const r=Fi[n];ew=r.priority,r.idle||(fM(r),r.advance(t),r.idle||e.push(r))}return ew=0,t2=Fi,t2.length=0,Fi=e,Fi.length>0}function E6e(t,e){const n=t.findIndex(e);return n<0?t.length:n}var _6e=(t,e,n)=>Math.min(Math.max(n,t),e),T6e={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ws="[-+]?\\d*\\.?\\d+",tw=ws+"%";function l_(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var C6e=new RegExp("rgb"+l_(ws,ws,ws)),k6e=new RegExp("rgba"+l_(ws,ws,ws,ws)),P6e=new RegExp("hsl"+l_(ws,tw,tw)),I6e=new RegExp("hsla"+l_(ws,tw,tw,ws)),A6e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,L6e=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,R6e=/^#([0-9a-fA-F]{6})$/,O6e=/^#([0-9a-fA-F]{8})$/;function D6e(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=R6e.exec(t))?parseInt(e[1]+"ff",16)>>>0:Xl&&Xl[t]!==void 0?Xl[t]:(e=C6e.exec(t))?(wd(e[1])<<24|wd(e[2])<<16|wd(e[3])<<8|255)>>>0:(e=k6e.exec(t))?(wd(e[1])<<24|wd(e[2])<<16|wd(e[3])<<8|L9(e[4]))>>>0:(e=A6e.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=O6e.exec(t))?parseInt(e[1],16)>>>0:(e=L6e.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=P6e.exec(t))?(I9(A9(e[1]),Ky(e[2]),Ky(e[3]))|255)>>>0:(e=I6e.exec(t))?(I9(A9(e[1]),Ky(e[2]),Ky(e[3]))|L9(e[4]))>>>0:null}function n2(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function I9(t,e,n){const r=n<.5?n*(1+e):n+e-n*e,i=2*n-r,s=n2(i,r,t+1/3),o=n2(i,r,t),a=n2(i,r,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function wd(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function A9(t){return(parseFloat(t)%360+360)%360/360}function L9(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Ky(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function R9(t){let e=D6e(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,r=(e&16711680)>>>16,i=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${r}, ${i}, ${s})`}var u0=(t,e,n)=>{if(le.fun(t))return t;if(le.arr(t))return u0({range:t,output:e,extrapolate:n});if(le.str(t.output[0]))return dM(t);const r=t,i=r.output,s=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(c=>c);return c=>{const u=$6e(c,s);return M6e(c,s[u],s[u+1],i[u],i[u+1],l,o,a,r.map)}};function M6e(t,e,n,r,i,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return r===i?r:e===n?t<=e?r:i:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),r===-1/0?c=-c:i===1/0?c=c+r:c=c*(i-r)+r,c)}function $6e(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var N6e=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*t,i=e==="end"?Math.floor(r):Math.ceil(r);return _6e(0,1,i/t)},nw=1.70158,qy=nw*1.525,O9=nw+1,D9=2*Math.PI/3,M9=2*Math.PI/4.5,Yy=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,F6e={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>O9*t*t*t-nw*t*t,easeOutBack:t=>1+O9*Math.pow(t-1,3)+nw*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((qy+1)*2*t-qy)/2:(Math.pow(2*t-2,2)*((qy+1)*(t*2-2)+qy)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*D9),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*D9)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*M9))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*M9)/2+1,easeInBounce:t=>1-Yy(1-t),easeOutBounce:Yy,easeInOutBounce:t=>t<.5?(1-Yy(1-2*t))/2:(1+Yy(2*t-1))/2,steps:N6e},d0=Symbol.for("FluidValue.get"),Ch=Symbol.for("FluidValue.observers"),$i=t=>!!(t&&t[d0]),$r=t=>t&&t[d0]?t[d0]():t,$9=t=>t[Ch]||null;function j6e(t,e){t.eventObserved?t.eventObserved(e):t(e)}function f0(t,e){const n=t[Ch];n&&n.forEach(r=>{j6e(r,e)})}var qne=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");B6e(this,t)}},B6e=(t,e)=>Yne(t,d0,e);function cp(t,e){if(t[d0]){let n=t[Ch];n||Yne(t,Ch,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function h0(t,e){const n=t[Ch];if(n&&n.has(e)){const r=n.size-1;r?n.delete(e):t[Ch]=null,t.observerRemoved&&t.observerRemoved(r,e)}}var Yne=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),jx=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,U6e=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,N9=new RegExp(`(${jx.source})(%|[a-z]+)`,"i"),V6e=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,c_=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Qne=t=>{const[e,n]=z6e(t);if(!e||uM())return t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||t}else{if(n&&c_.test(n))return Qne(n);if(n)return n}return t},z6e=t=>{const e=c_.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]},r2,H6e=(t,e,n,r,i)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Xne=t=>{r2||(r2=Xl?new RegExp(`(${Object.keys(Xl).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>$r(s).replace(c_,Qne).replace(U6e,R9).replace(r2,R9)),n=e.map(s=>s.match(jx).map(Number)),i=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>u0({...t,output:s}));return s=>{var l;const o=!N9.test(e[0])&&((l=e.find(c=>N9.test(c)))==null?void 0:l.replace(jx,""));let a=0;return e[0].replace(jx,()=>`${i[a++](s)}${o||""}`).replace(V6e,H6e)}},hM="react-spring: ",Zne=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${hM}once requires a function parameter`);return(...r)=>{n||(e(...r),n=!0)}},W6e=Zne(console.warn);function G6e(){W6e(`${hM}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var K6e=Zne(console.warn);function q6e(){K6e(`${hM}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function u_(t){return le.str(t)&&(t[0]=="#"||/\d/.test(t)||!uM()&&c_.test(t)||t in(Xl||{}))}var xf=uM()?v.useEffect:v.useLayoutEffect,Y6e=()=>{const t=v.useRef(!1);return xf(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Jne(){const t=v.useState()[1],e=Y6e();return()=>{e.current&&t(Math.random())}}function Q6e(t,e){const[n]=v.useState(()=>({inputs:e,result:t()})),r=v.useRef(),i=r.current;let s=i;return s?e&&s.inputs&&X6e(e,s.inputs)||(s={inputs:e,result:t()}):s=n,v.useEffect(()=>{r.current=s,i==n&&(n.inputs=n.result=void 0)},[s]),s.result}function X6e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var ere=t=>v.useEffect(t,Z6e),Z6e=[];function J6e(t){const e=v.useRef();return v.useEffect(()=>{e.current=t}),e.current}var p0=Symbol.for("Animated:node"),eFe=t=>!!t&&t[p0]===t,Zs=t=>t&&t[p0],pM=(t,e)=>b6e(t,p0,e),d_=t=>t&&t[p0]&&t[p0].getPayload(),tre=class{constructor(){pM(this,this)}getPayload(){return this.payload||[]}},Ov=class extends tre{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,le.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Ov(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return le.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,le.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},m0=class extends Ov{constructor(t){super(0),this._string=null,this._toString=u0({output:[t,t]})}static create(t){return new m0(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(le.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=u0({output:[this.getValue(),t]})),this._value=0,super.reset()}},rw={dependencies:null},f_=class extends tre{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Eo(this.source,(n,r)=>{eFe(n)?e[r]=n.getValue(t):$i(n)?e[r]=$r(n):t||(e[r]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Be(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Eo(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){rw.dependencies&&$i(t)&&rw.dependencies.add(t);const e=d_(t);e&&Be(e,n=>this.add(n))}},nre=class extends f_{constructor(t){super(t)}static create(t){return new nre(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,r)=>n.setValue(t[r])).some(Boolean):(super.setValue(t.map(tFe)),!0)}};function tFe(t){return(u_(t)?m0:Ov).create(t)}function oL(t){const e=Zs(t);return e?e.constructor:le.arr(t)?nre:u_(t)?m0:Ov}var F9=(t,e)=>{const n=!le.fun(t)||t.prototype&&t.prototype.isReactComponent;return v.forwardRef((r,i)=>{const s=v.useRef(null),o=n&&v.useCallback(p=>{s.current=iFe(i,p)},[i]),[a,l]=rFe(r,e),c=Jne(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},d=new nFe(u,l),f=v.useRef();xf(()=>(f.current=d,Be(l,p=>cp(p,d)),()=>{f.current&&(Be(f.current.deps,p=>h0(p,f.current)),$e.cancel(f.current.update))})),v.useEffect(u,[]),ere(()=>()=>{const p=f.current;Be(p.deps,m=>h0(m,p))});const h=e.getComponentProps(a.getValue());return v.createElement(t,{...h,ref:o})})},nFe=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&$e.write(this.update)}};function rFe(t,e){const n=new Set;return rw.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new f_(t),rw.dependencies=null,[t,n]}function iFe(t,e){return t&&(le.fun(t)?t(e):t.current=e),e}var j9=Symbol.for("AnimatedComponent"),sFe=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=i=>new f_(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:r},s=o=>{const a=B9(o)||"Anonymous";return le.str(o)?o=s[o]||(s[o]=F9(o,i)):o=o[j9]||(o[j9]=F9(o,i)),o.displayName=`Animated(${a})`,o};return Eo(t,(o,a)=>{le.arr(t)&&(a=B9(o)),s[a]=s(o)}),{animated:s}},B9=t=>le.str(t)?t:t&&le.str(t.displayName)?t.displayName:le.fun(t)&&t.name||null;function Nr(t,...e){return le.fun(t)?t(...e):t}var ug=(t,e)=>t===!0||!!(e&&t&&(le.fun(t)?t(e):wr(t).includes(e))),rre=(t,e)=>le.obj(t)?e&&t[e]:t,ire=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,oFe=t=>t,mM=(t,e=oFe)=>{let n=aFe;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const r={};for(const i of n){const s=e(t[i],i);le.und(s)||(r[i]=s)}return r},aFe=["config","onProps","onStart","onChange","onPause","onResume","onRest"],lFe={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function cFe(t){const e={};let n=0;if(Eo(t,(r,i)=>{lFe[i]||(e[i]=r,n++)}),n)return e}function gM(t){const e=cFe(t);if(e){const n={to:e};return Eo(t,(r,i)=>i in e||(n[i]=r)),n}return{...t}}function g0(t){return t=$r(t),le.arr(t)?t.map(g0):u_(t)?As.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function uFe(t){for(const e in t)return!0;return!1}function aL(t){return le.fun(t)||le.arr(t)&&le.obj(t[0])}function U9(t,e){var n;(n=t.ref)==null||n.delete(t),e==null||e.delete(t)}function dFe(t,e){var n;e&&t.ref!==e&&((n=t.ref)==null||n.delete(t),e.add(t),t.ref=e)}var fFe={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},lL={...fFe.default,mass:1,damping:1,easing:F6e.linear,clamp:!1},hFe=class{constructor(){this.velocity=0,Object.assign(this,lL)}};function pFe(t,e,n){n&&(n={...n},V9(n,e),e={...n,...e}),V9(t,e),Object.assign(t,e);for(const o in lL)t[o]==null&&(t[o]=lL[o]);let{frequency:r,damping:i}=t;const{mass:s}=t;return le.und(r)||(r<.01&&(r=.01),i<0&&(i=0),t.tension=Math.pow(2*Math.PI/r,2)*s,t.friction=4*Math.PI*i*s/r),t}function V9(t,e){if(!le.und(e.decay))t.duration=void 0;else{const n=!le.und(e.tension)||!le.und(e.friction);(n||!le.und(e.frequency)||!le.und(e.damping)||!le.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var z9=[],mFe=class{constructor(){this.changed=!1,this.values=z9,this.toValues=null,this.fromValues=z9,this.config=new hFe,this.immediate=!1}};function sre(t,{key:e,props:n,defaultProps:r,state:i,actions:s}){return new Promise((o,a)=>{let l,c,u=ug(n.cancel??(r==null?void 0:r.cancel),e);if(u)h();else{le.und(n.pause)||(i.paused=ug(n.pause,e));let p=r==null?void 0:r.pause;p!==!0&&(p=i.paused||ug(p,e)),l=Nr(n.delay||0,e),p?(i.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){i.resumeQueue.add(f),i.timeouts.delete(c),c.cancel(),l=c.time-$e.now()}function f(){l>0&&!As.skipAnimation?(i.delayed=!0,c=$e.setTimeout(h,l),i.pauseQueue.add(d),i.timeouts.add(c)):h()}function h(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(c),t<=(i.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(p){a(p)}}})}var vM=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Wf(t.get()):e.every(n=>n.noop)?ore(t.get()):ms(t.get(),e.every(n=>n.finished)),ore=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ms=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Wf=t=>({value:t,cancelled:!0,finished:!1});function are(t,e,n,r){const{callId:i,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=i,n.asyncTo=t;const c=mM(e,(g,y)=>y==="onRest"?void 0:g);let u,d;const f=new Promise((g,y)=>(u=g,d=y)),h=g=>{const y=i<=(n.cancelId||0)&&Wf(r)||i!==n.asyncId&&ms(r,!1);if(y)throw g.result=y,d(g),g},p=(g,y)=>{const x=new H9,S=new W9;return(async()=>{if(As.skipAnimation)throw v0(n),S.result=ms(r,!1),d(S),S;h(x);const w=le.obj(g)?{...g}:{...y,to:g};w.parentId=i,Eo(c,(T,_)=>{le.und(w[_])&&(w[_]=T)});const E=await r.start(w);return h(x),n.paused&&await new Promise(T=>{n.resumeQueue.add(T)}),E})()};let m;if(As.skipAnimation)return v0(n),ms(r,!1);try{let g;le.arr(t)?g=(async y=>{for(const x of y)await p(x)})(t):g=Promise.resolve(t(p,r.stop.bind(r))),await Promise.all([g.then(u),f]),m=ms(r.get(),!0,!1)}catch(g){if(g instanceof H9)m=g.result;else if(g instanceof W9)m=g.result;else throw g}finally{i==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return le.fun(o)&&$e.batchedUpdates(()=>{o(m,r,r.item)}),m})()}function v0(t,e){lg(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var H9=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},W9=class extends Error{constructor(){super("SkipAnimationSignal")}},cL=t=>t instanceof yM,gFe=1,yM=class extends qne{constructor(){super(...arguments),this.id=gFe++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Zs(this);return t&&t.getValue()}to(...t){return As.to(this,t)}interpolate(...t){return G6e(),As.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){f0(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||a_.sort(this),f0(this,{type:"priority",parent:this,priority:t})}},Nu=Symbol.for("SpringPhase"),lre=1,uL=2,dL=4,i2=t=>(t[Nu]&lre)>0,Wa=t=>(t[Nu]&uL)>0,qp=t=>(t[Nu]&dL)>0,G9=(t,e)=>e?t[Nu]|=uL|lre:t[Nu]&=~uL,K9=(t,e)=>e?t[Nu]|=dL:t[Nu]&=~dL,vFe=class extends yM{constructor(t,e){if(super(),this.animation=new mFe,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!le.und(t)||!le.und(e)){const n=le.obj(t)?{...t}:{...e,from:t};le.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Wa(this)||this._state.asyncTo)||qp(this)}get goal(){return $r(this.animation.to)}get velocity(){const t=Zs(this);return t instanceof Ov?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return i2(this)}get isAnimating(){return Wa(this)}get isPaused(){return qp(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:s}=r,o=d_(r.to);!o&&$i(r.to)&&(i=wr($r(r.to))),r.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==m0?1:o?o[u].lastPosition:i[u];let f=r.immediate,h=d;if(!f){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const m=r.fromValues[u],g=c.v0!=null?c.v0:c.v0=le.arr(s.velocity)?s.velocity[u]:s.velocity;let y;const x=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(le.und(s.duration))if(s.decay){const S=s.decay===!0?.998:s.decay,w=Math.exp(-(1-S)*p);h=m+g/(1-S)*(1-w),f=Math.abs(c.lastPosition-h)<=x,y=g*w}else{y=c.lastVelocity==null?g:c.lastVelocity;const S=s.restVelocity||x/10,w=s.clamp?0:s.bounce,E=!le.und(w),T=m==d?c.v0>0:m<d;let _,I=!1;const A=1,L=Math.ceil(t/A);for(let j=0;j<L&&(_=Math.abs(y)>S,!(!_&&(f=Math.abs(d-h)<=x,f)));++j){E&&(I=h==d||h>d==T,I&&(y=-y*w,h=d));const D=-s.tension*1e-6*(h-d),O=-s.friction*.001*y,$=(D+O)/s.mass;y=y+$*A,h=h+y*A}}else{let S=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),S=(s.progress||0)+p/this._memoizedDuration,S=S>1?1:S<0?0:S,c.durationProgress=S),h=m+s.easing(S)*(d-m),y=(h-c.lastPosition)/t,f=S==1}c.lastVelocity=y,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=Zs(this),l=a.getValue();if(e){const c=$r(r.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return $e.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Wa(this)){const{to:t,config:e}=this.animation;$e.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return le.und(t)?(n=this.queue||[],this.queue=[]):n=[le.obj(t)?t:{...e,to:t}],Promise.all(n.map(r=>this._update(r))).then(r=>vM(this,r))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),v0(this._state,t&&this._lastCallId),$e.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:r}=t;n=le.obj(n)?n[e]:n,(n==null||aL(n))&&(n=void 0),r=le.obj(r)?r[e]:r,r==null&&(r=void 0);const i={to:n,from:r};return i2(this)||(t.reverse&&([n,r]=[r,n]),r=$r(r),le.und(r)?Zs(this)||this._set(n):this._set(r)),i}_update({...t},e){const{key:n,defaultProps:r}=this;t.default&&Object.assign(r,mM(t,(o,a)=>/^on/.test(a)?rre(o,n):o)),Y9(this,t,"onProps"),Qp(this,"onProps",t,this);const i=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return sre(++this._lastCallId,{key:n,props:t,defaultProps:r,state:s,actions:{pause:()=>{qp(this)||(K9(this,!0),Tm(s.pauseQueue),Qp(this,"onPause",ms(this,Yp(this,this.animation.to)),this))},resume:()=>{qp(this)&&(K9(this,!1),Wa(this)&&this._resume(),Tm(s.resumeQueue),Qp(this,"onResume",ms(this,Yp(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=cre(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Wf(this));const r=!le.und(t.to),i=!le.und(t.from);if(r||i)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Wf(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;i&&!r&&(!e.default||le.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Ho(d,c);f&&(a.from=d),d=$r(d);const h=!Ho(u,l);h&&this._focus(u);const p=aL(e.to),{config:m}=a,{decay:g,velocity:y}=m;(r||i)&&(m.velocity=0),e.config&&!p&&pFe(m,Nr(e.config,s),e.config!==o.config?Nr(o.config,s):void 0);let x=Zs(this);if(!x||le.und(u))return n(ms(this,!0));const S=le.und(e.reset)?i&&!e.default:!le.und(d)&&ug(e.reset,s),w=S?d:this.get(),E=g0(u),T=le.num(E)||le.arr(E)||u_(E),_=!p&&(!T||ug(o.immediate||e.immediate,s));if(h){const j=oL(u);if(j!==x.constructor)if(_)x=this._set(E);else throw Error(`Cannot animate between ${x.constructor.name} and ${j.name}, as the "to" prop suggests`)}const I=x.constructor;let A=$i(u),L=!1;if(!A){const j=S||!i2(this)&&f;(h||j)&&(L=Ho(g0(w),E),A=!L),(!Ho(a.immediate,_)&&!_||!Ho(m.decay,g)||!Ho(m.velocity,y))&&(A=!0)}if(L&&Wa(this)&&(a.changed&&!S?A=!0:A||this._stop(l)),!p&&((A||$i(l))&&(a.values=x.getPayload(),a.toValues=$i(u)?null:I==m0?[1]:wr(E)),a.immediate!=_&&(a.immediate=_,!_&&!S&&this._set(l)),A)){const{onRest:j}=a;Be(yFe,O=>Y9(this,e,O));const D=ms(this,Yp(this,l));Tm(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&$e.batchedUpdates(()=>{var O;a.changed=!S,j==null||j(D,this),S?Nr(o.onRest,D):(O=a.onStart)==null||O.call(a,D,this)})}S&&this._set(w),p?n(are(e.to,e,this._state,this)):A?this._start():Wa(this)&&!h?this._pendingCalls.add(n):n(ore(w))}_focus(t){const e=this.animation;t!==e.to&&($9(this)&&this._detach(),e.to=t,$9(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;$i(e)&&(cp(e,this),cL(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;$i(t)&&h0(t,this)}_set(t,e=!0){const n=$r(t);if(!le.und(n)){const r=Zs(this);if(!r||!Ho(n,r.getValue())){const i=oL(n);!r||r.constructor!=i?pM(this,i.create(n)):r.setValue(n),r&&$e.batchedUpdates(()=>{this._onChange(n,e)})}}return Zs(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Qp(this,"onStart",ms(this,Yp(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Nr(this.animation.onChange,t,this)),Nr(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Zs(this).reset($r(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),Wa(this)||(G9(this,!0),qp(this)||this._resume())}_resume(){As.skipAnimation?this.finish():a_.start(this)}_stop(t,e){if(Wa(this)){G9(this,!1);const n=this.animation;Be(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),f0(this,{type:"idle",parent:this});const r=e?Wf(this.get()):ms(this.get(),Yp(this,t??n.to));Tm(this._pendingCalls,r),n.changed&&(n.changed=!1,Qp(this,"onRest",r,this))}}};function Yp(t,e){const n=g0(e),r=g0(t.get());return Ho(r,n)}function cre(t,e=t.loop,n=t.to){const r=Nr(e);if(r){const i=r!==!0&&gM(r),s=(i||t).reverse,o=!i||i.reset;return iw({...t,loop:e,default:!1,pause:void 0,to:!s||aL(n)?n:void 0,from:o?t.from:void 0,reset:o,...i})}}function iw(t){const{to:e,from:n}=t=gM(t),r=new Set;return le.obj(e)&&q9(e,r),le.obj(n)&&q9(n,r),t.keys=r.size?Array.from(r):null,t}function q9(t,e){Eo(t,(n,r)=>n!=null&&e.add(r))}var yFe=["onStart","onRest","onChange","onPause","onResume"];function Y9(t,e,n){t.animation[n]=e[n]!==ire(e,n)?rre(e[n],t.key):void 0}function Qp(t,e,...n){var r,i,s,o;(i=(r=t.animation)[e])==null||i.call(r,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var xFe=["onStart","onChange","onRest"],bFe=1,SFe=class{constructor(t,e){this.id=bFe++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,n)=>t[n]=e.get()),t}set(t){for(const e in t){const n=t[e];le.und(n)||this.springs[e].set(n)}}update(t){return t&&this.queue.push(iw(t)),this}start(t){let{queue:e}=this;return t?e=wr(t).map(iw):this.queue=[],this._flush?this._flush(this,e):(hre(this,e),wFe(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const n=this.springs;Be(wr(e),r=>n[r].stop(!!t))}else v0(this._state,this._lastAsyncId),this.each(n=>n.stop(!!t));return this}pause(t){if(le.und(t))this.start({pause:!0});else{const e=this.springs;Be(wr(t),n=>e[n].pause())}return this}resume(t){if(le.und(t))this.start({pause:!1});else{const e=this.springs;Be(wr(t),n=>e[n].resume())}return this}each(t){Eo(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,lg(t,([a,l])=>{l.value=this.get(),a(l,this,this._item)}));const s=!r&&this._started,o=i||s&&n.size?this.get():null;i&&e.size&&lg(e,([a,l])=>{l.value=o,a(l,this,this._item)}),s&&(this._started=!1,lg(n,([a,l])=>{l.value=o,a(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;$e.onFrame(this._onFrame)}};function wFe(t,e){return Promise.all(e.map(n=>ure(t,n))).then(n=>vM(t,n))}async function ure(t,e,n){const{keys:r,to:i,from:s,loop:o,onRest:a,onResolve:l}=e,c=le.obj(e.default)&&e.default;o&&(e.loop=!1),i===!1&&(e.to=null),s===!1&&(e.from=null);const u=le.arr(i)||le.fun(i)?i:void 0;u?(e.to=void 0,e.onRest=void 0,c&&(c.onRest=void 0)):Be(xFe,m=>{const g=e[m];if(le.fun(g)){const y=t._events[m];e[m]=({finished:x,cancelled:S})=>{const w=y.get(g);w?(x||(w.finished=!1),S&&(w.cancelled=!0)):y.set(g,{value:null,finished:x||!1,cancelled:S||!1})},c&&(c[m]=e[m])}});const d=t._state;e.pause===!d.paused?(d.paused=e.pause,Tm(e.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(e.pause=!0);const f=(r||Object.keys(t.springs)).map(m=>t.springs[m].start(e)),h=e.cancel===!0||ire(e,"cancel")===!0;(u||h&&d.asyncId)&&f.push(sre(++t._lastAsyncId,{props:e,state:d,actions:{pause:iL,resume:iL,start(m,g){h?(v0(d,t._lastAsyncId),g(Wf(t))):(m.onRest=a,g(are(u,m,d,t)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const p=vM(t,await Promise.all(f));if(o&&p.finished&&!(n&&p.noop)){const m=cre(e,o,i);if(m)return hre(t,[m]),ure(t,m,!0)}return l&&$e.batchedUpdates(()=>l(p,t,t.item)),p}function EFe(t,e){const n={...t.springs};return e&&Be(wr(e),r=>{le.und(r.keys)&&(r=iw(r)),le.obj(r.to)||(r={...r,to:void 0}),fre(n,r,i=>dre(i))}),_Fe(t,n),n}function _Fe(t,e){Eo(e,(n,r)=>{t.springs[r]||(t.springs[r]=n,cp(n,t))})}function dre(t,e){const n=new vFe;return n.key=t,e&&cp(n,e),n}function fre(t,e,n){e.keys&&Be(e.keys,r=>{(t[r]||(t[r]=n(r)))._prepareNode(e)})}function hre(t,e){Be(e,n=>{fre(t.springs,n,r=>dre(r,t))})}var h_=({children:t,...e})=>{const n=v.useContext(sw),r=e.pause||!!n.pause,i=e.immediate||!!n.immediate;e=Q6e(()=>({pause:r,immediate:i}),[r,i]);const{Provider:s}=sw;return v.createElement(s,{value:e},t)},sw=TFe(h_,{});h_.Provider=sw.Provider;h_.Consumer=sw.Consumer;function TFe(t,e){return Object.assign(t,v.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var CFe=()=>{const t=[],e=function(r){q6e();const i=[];return Be(t,(s,o)=>{if(le.und(r))i.push(s.start());else{const a=n(r,s,o);a&&i.push(s.start(a))}}),i};e.current=t,e.add=function(r){t.includes(r)||t.push(r)},e.delete=function(r){const i=t.indexOf(r);~i&&t.splice(i,1)},e.pause=function(){return Be(t,r=>r.pause(...arguments)),this},e.resume=function(){return Be(t,r=>r.resume(...arguments)),this},e.set=function(r){Be(t,(i,s)=>{const o=le.fun(r)?r(s,i):r;o&&i.set(o)})},e.start=function(r){const i=[];return Be(t,(s,o)=>{if(le.und(r))i.push(s.start());else{const a=this._getProps(r,s,o);a&&i.push(s.start(a))}}),i},e.stop=function(){return Be(t,r=>r.stop(...arguments)),this},e.update=function(r){return Be(t,(i,s)=>i.update(this._getProps(r,i,s))),this};const n=function(r,i,s){return le.fun(r)?r(s,i):r};return e._getProps=n,e};function kFe(t,e,n){const r=le.fun(e)&&e,{reset:i,sort:s,trail:o=0,expires:a=!0,exitBeforeEnter:l=!1,onDestroyed:c,ref:u,config:d}=r?r():e,f=v.useMemo(()=>r||arguments.length==3?CFe():void 0,[]),h=wr(t),p=[],m=v.useRef(null),g=i?null:m.current;xf(()=>{m.current=p}),ere(()=>(Be(p,$=>{f==null||f.add($.ctrl),$.ctrl.ref=f}),()=>{Be(m.current,$=>{$.expired&&clearTimeout($.expirationId),U9($.ctrl,f),$.ctrl.stop(!0)})}));const y=IFe(h,r?r():e,g),x=i&&m.current||[];xf(()=>Be(x,({ctrl:$,item:R,key:C})=>{U9($,f),Nr(c,R,C)}));const S=[];if(g&&Be(g,($,R)=>{$.expired?(clearTimeout($.expirationId),x.push($)):(R=S[R]=y.indexOf($.key),~R&&(p[R]=$))}),Be(h,($,R)=>{p[R]||(p[R]={key:y[R],item:$,phase:"mount",ctrl:new SFe},p[R].ctrl.item=$)}),S.length){let $=-1;const{leave:R}=r?r():e;Be(S,(C,P)=>{const k=g[P];~C?($=p.indexOf(k),p[$]={...k,item:h[C]}):R&&p.splice(++$,0,k)})}le.fun(s)&&p.sort(($,R)=>s($.item,R.item));let w=-o;const E=Jne(),T=mM(e),_=new Map,I=v.useRef(new Map),A=v.useRef(!1);Be(p,($,R)=>{const C=$.key,P=$.phase,k=r?r():e;let M,B;const N=Nr(k.delay||0,C);if(P=="mount")M=k.enter,B="enter";else{const z=y.indexOf(C)<0;if(P!="leave")if(z)M=k.leave,B="leave";else if(M=k.update)B="update";else return;else if(!z)M=k.enter,B="enter";else return}if(M=Nr(M,$.item,R),M=le.obj(M)?gM(M):{to:M},!M.config){const z=d||T.config;M.config=Nr(z,$.item,R,B)}w+=o;const V={...T,delay:N+w,ref:u,immediate:k.immediate,reset:!1,...M};if(B=="enter"&&le.und(V.from)){const z=r?r():e,G=le.und(z.initial)||g?z.from:z.initial;V.from=Nr(G,$.item,R)}const{onResolve:H}=V;V.onResolve=z=>{Nr(H,z);const G=m.current,K=G.find(Q=>Q.key===C);if(K&&!(z.cancelled&&K.phase!="update")&&K.ctrl.idle){const Q=G.every(ne=>ne.ctrl.idle);if(K.phase=="leave"){const ne=Nr(a,K.item);if(ne!==!1){const Z=ne===!0?0:ne;if(K.expired=!0,!Q&&Z>0){Z<=2147483647&&(K.expirationId=setTimeout(E,Z));return}}}Q&&G.some(ne=>ne.expired)&&(I.current.delete(K),l&&(A.current=!0),E())}};const W=EFe($.ctrl,V);B==="leave"&&l?I.current.set($,{phase:B,springs:W,payload:V}):_.set($,{phase:B,springs:W,payload:V})});const L=v.useContext(h_),j=J6e(L),D=L!==j&&uFe(L);xf(()=>{D&&Be(p,$=>{$.ctrl.start({default:L})})},[L]),Be(_,($,R)=>{if(I.current.size){const C=p.findIndex(P=>P.key===R.key);p.splice(C,1)}}),xf(()=>{Be(I.current.size?I.current:_,({phase:$,payload:R},C)=>{const{ctrl:P}=C;C.phase=$,f==null||f.add(P),D&&$=="enter"&&P.start({default:L}),R&&(dFe(P,R.ref),(P.ref||f)&&!A.current?P.update(R):(P.start(R),A.current&&(A.current=!1)))})},i?void 0:n);const O=$=>v.createElement(v.Fragment,null,p.map((R,C)=>{const{springs:P}=_.get(R)||R.ctrl,k=$({...P},R.item,R,C);return k&&k.type?v.createElement(k.type,{...k.props,key:le.str(R.key)||le.num(R.key)?R.key:R.ctrl.id,ref:k.ref}):k}));return f?[O,f]:O}var PFe=1;function IFe(t,{key:e,keys:n=e},r){if(n===null){const i=new Set;return t.map(s=>{const o=r&&r.find(a=>a.item===s&&a.phase!=="leave"&&!i.has(a));return o?(i.add(o),o.key):PFe++})}return le.und(n)?t:le.fun(n)?t.map(n):wr(n)}var AFe=class extends yM{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=u0(...e);const n=this._get(),r=oL(n);pM(this,r.create(n))}advance(t){const e=this._get(),n=this.get();Ho(e,n)||(Zs(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Q9(this._active)&&s2(this)}_get(){const t=le.arr(this.source)?this.source.map($r):wr($r(this.source));return this.calc(...t)}_start(){this.idle&&!Q9(this._active)&&(this.idle=!1,Be(d_(this),t=>{t.done=!1}),As.skipAnimation?($e.batchedUpdates(()=>this.advance()),s2(this)):a_.start(this))}_attach(){let t=1;Be(wr(this.source),e=>{$i(e)&&cp(e,this),cL(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Be(wr(this.source),t=>{$i(t)&&h0(t,this)}),this._active.clear(),s2(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=wr(this.source).reduce((e,n)=>Math.max(e,(cL(n)?n.priority:0)+1),0))}};function LFe(t){return t.idle!==!1}function Q9(t){return!t.size||Array.from(t).every(LFe)}function s2(t){t.idle||(t.idle=!0,Be(d_(t),e=>{e.done=!0}),f0(t,{type:"idle",parent:t}))}As.assign({createStringInterpolator:Xne,to:(t,e)=>new AFe(t,e)});var pre=/^--/;function RFe(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!pre.test(t)&&!(dg.hasOwnProperty(t)&&dg[t])?e+"px":(""+e).trim()}var X9={};function OFe(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:r,style:i,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:X9[f]||(X9[f]=f.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in i)if(i.hasOwnProperty(f)){const h=RFe(f,i[f]);pre.test(f)?t.style.setProperty(f,h):t.style[f]=h}d.forEach((f,h)=>{t.setAttribute(f,u[h])}),r!==void 0&&(t.className=r),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var dg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DFe=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),MFe=["Webkit","Ms","Moz","O"];dg=Object.keys(dg).reduce((t,e)=>(MFe.forEach(n=>t[DFe(n,e)]=t[e]),t),dg);var $Fe=/^(matrix|translate|scale|rotate|skew)/,NFe=/^(translate)/,FFe=/^(rotate|skew)/,o2=(t,e)=>le.num(t)&&t!==0?t+e:t,Bx=(t,e)=>le.arr(t)?t.every(n=>Bx(n,e)):le.num(t)?t===e:parseFloat(t)===e,jFe=class extends f_{constructor({x:t,y:e,z:n,...r}){const i=[],s=[];(t||e||n)&&(i.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>o2(a,"px")).join(",")})`,Bx(o,0)])),Eo(r,(o,a)=>{if(a==="transform")i.push([o||""]),s.push(l=>[l,l===""]);else if($Fe.test(a)){if(delete r[a],le.und(o))return;const l=NFe.test(a)?"px":FFe.test(a)?"deg":"";i.push(wr(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${o2(f,l)})`,Bx(f,0)]:c=>[`${a}(${c.map(u=>o2(u,l)).join(",")})`,Bx(c,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new BFe(i,s)),super(r)}},BFe=class extends qne{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Be(this.inputs,(n,r)=>{const i=$r(n[0]),[s,o]=this.transforms[r](le.arr(i)?i:n.map($r));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Be(this.inputs,e=>Be(e,n=>$i(n)&&cp(n,this)))}observerRemoved(t){t==0&&Be(this.inputs,e=>Be(e,n=>$i(n)&&h0(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),f0(this,t)}},UFe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];As.assign({batchedUpdates:Yr.unstable_batchedUpdates,createStringInterpolator:Xne,colors:T6e});var VFe=sFe(UFe,{applyAnimatedValues:OFe,createAnimatedStyle:t=>new jFe(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),zFe=VFe.animated;function Z9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z9(Object(n),!0).forEach(function(r){mre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ux(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ux=function(e){return typeof e}:Ux=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ux(t)}function mre(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gre(t,e){return HFe(t)||WFe(t,e)||GFe(t,e)||KFe()}function HFe(t){if(Array.isArray(t))return t}function WFe(t,e){var n=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function GFe(t,e){if(t){if(typeof t=="string")return eB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eB(t,e)}}function eB(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KFe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Jr=function(e,n,r){var i=!!r,s=te.useRef(r);te.useEffect(function(){s.current=r},[r]),te.useEffect(function(){if(!i||!e)return function(){};var o=function(){s.current&&s.current.apply(s,arguments)};return e.on(n,o),function(){e.off(n,o)}},[i,n,e,s])},fL=function(e){var n=te.useRef(e);return te.useEffect(function(){n.current=e},[e]),n.current},kh=function(e){return e!==null&&Ux(e)==="object"},qFe=function(e){return kh(e)&&typeof e.then=="function"},YFe=function(e){return kh(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},tB="[object Object]",QFe=function t(e,n){if(!kh(e)||!kh(n))return e===n;var r=Array.isArray(e),i=Array.isArray(n);if(r!==i)return!1;var s=Object.prototype.toString.call(e)===tB,o=Object.prototype.toString.call(n)===tB;if(s!==o)return!1;if(!s&&!r)return e===n;var a=Object.keys(e),l=Object.keys(n);if(a.length!==l.length)return!1;for(var c={},u=0;u<a.length;u+=1)c[a[u]]=!0;for(var d=0;d<l.length;d+=1)c[l[d]]=!0;var f=Object.keys(c);if(f.length!==a.length)return!1;var h=e,p=n,m=function(y){return t(h[y],p[y])};return f.every(m)},vre=function(e,n,r){return kh(e)?Object.keys(e).reduce(function(i,s){var o=!kh(n)||!QFe(e[s],n[s]);return r.includes(s)?(o&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),i):o?J9(J9({},i||{}),{},mre({},s,e[s])):i},null):null},yre="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",nB=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yre;if(e===null||YFe(e))return e;throw new Error(n)},XFe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yre;if(qFe(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return nB(i,n)})};var r=nB(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},ZFe=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"2.8.1"}),e.registerAppInfo({name:"react-stripe-js",version:"2.8.1",url:"https://stripe.com/docs/stripe-js/react"}))},p_=te.createContext(null);p_.displayName="ElementsContext";var xre=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},bre=function(e){var n=e.stripe,r=e.options,i=e.children,s=te.useMemo(function(){return XFe(n)},[n]),o=te.useState(function(){return{stripe:s.tag==="sync"?s.stripe:null,elements:s.tag==="sync"?s.stripe.elements(r):null}}),a=gre(o,2),l=a[0],c=a[1];te.useEffect(function(){var f=!0,h=function(m){c(function(g){return g.stripe?g:{stripe:m,elements:m.elements(r)}})};return s.tag==="async"&&!l.stripe?s.stripePromise.then(function(p){p&&f&&h(p)}):s.tag==="sync"&&!l.stripe&&h(s.stripe),function(){f=!1}},[s,l,r]);var u=fL(n);te.useEffect(function(){u!==null&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[u,n]);var d=fL(r);return te.useEffect(function(){if(l.elements){var f=vre(r,d,["clientSecret","fonts"]);f&&l.elements.update(f)}},[r,d,l.elements]),te.useEffect(function(){ZFe(l.stripe)},[l.stripe]),te.createElement(p_.Provider,{value:l},i)};bre.propTypes={stripe:ie.any,options:ie.object};var JFe=function(e){var n=te.useContext(p_);return xre(n,e)},eje=function(){var e=JFe("calls useElements()"),n=e.elements;return n};ie.func.isRequired;var Sre=te.createContext(null);Sre.displayName="CustomCheckoutSdkContext";var tje=function(e,n){if(!e)throw new Error("Could not find CustomCheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CustomCheckoutProvider> provider."));return e},nje=te.createContext(null);nje.displayName="CustomCheckoutContext";ie.any,ie.shape({clientSecret:ie.string.isRequired,elementsOptions:ie.object}).isRequired;var hL=function(e){var n=te.useContext(Sre),r=te.useContext(p_);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CustomCheckoutProvider> and <Elements> providers."));return n?tje(n,e):xre(r,e)},rje=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},yn=function(e,n){var r="".concat(rje(e),"Element"),i=function(l){var c=l.id,u=l.className,d=l.options,f=d===void 0?{}:d,h=l.onBlur,p=l.onFocus,m=l.onReady,g=l.onChange,y=l.onEscape,x=l.onClick,S=l.onLoadError,w=l.onLoaderStart,E=l.onNetworksChange,T=l.onConfirm,_=l.onCancel,I=l.onShippingAddressChange,A=l.onShippingRateChange,L=hL("mounts <".concat(r,">")),j="elements"in L?L.elements:null,D="customCheckoutSdk"in L?L.customCheckoutSdk:null,O=te.useState(null),$=gre(O,2),R=$[0],C=$[1],P=te.useRef(null),k=te.useRef(null);Jr(R,"blur",h),Jr(R,"focus",p),Jr(R,"escape",y),Jr(R,"click",x),Jr(R,"loaderror",S),Jr(R,"loaderstart",w),Jr(R,"networkschange",E),Jr(R,"confirm",T),Jr(R,"cancel",_),Jr(R,"shippingaddresschange",I),Jr(R,"shippingratechange",A),Jr(R,"change",g);var M;m&&(e==="expressCheckout"?M=m:M=function(){m(R)}),Jr(R,"ready",M),te.useLayoutEffect(function(){if(P.current===null&&k.current!==null&&(j||D)){var N=null;D?N=D.createElement(e,f):j&&(N=j.create(e,f)),P.current=N,C(N),N&&N.mount(k.current)}},[j,D,f]);var B=fL(f);return te.useEffect(function(){if(P.current){var N=vre(f,B,["paymentRequest"]);N&&"update"in P.current&&P.current.update(N)}},[f,B]),te.useLayoutEffect(function(){return function(){if(P.current&&typeof P.current.destroy=="function")try{P.current.destroy(),P.current=null}catch{}}},[]),te.createElement("div",{id:c,className:u,ref:k})},s=function(l){hL("mounts <".concat(r,">"));var c=l.id,u=l.className;return te.createElement("div",{id:c,className:u})},o=n?s:i;return o.propTypes={id:ie.string,className:ie.string,onChange:ie.func,onBlur:ie.func,onFocus:ie.func,onReady:ie.func,onEscape:ie.func,onClick:ie.func,onLoadError:ie.func,onLoaderStart:ie.func,onNetworksChange:ie.func,onConfirm:ie.func,onCancel:ie.func,onShippingAddressChange:ie.func,onShippingRateChange:ie.func,options:ie.object},o.displayName=r,o.__elementType=e,o},xn=typeof window>"u",ije=te.createContext(null);ije.displayName="EmbeddedCheckoutProviderContext";var sje=function(){var e=hL("calls useStripe()"),n=e.stripe;return n};yn("auBankAccount",xn);yn("card",xn);yn("cardNumber",xn);yn("cardExpiry",xn);yn("cardCvc",xn);yn("fpxBank",xn);yn("iban",xn);yn("idealBank",xn);yn("p24Bank",xn);yn("epsBank",xn);var oje=yn("payment",xn);yn("expressCheckout",xn);yn("currencySelector",xn);yn("paymentRequestButton",xn);yn("linkAuthentication",xn);yn("address",xn);yn("shippingAddress",xn);yn("paymentMethodMessaging",xn);yn("affirmMessage",xn);yn("afterpayClearpayMessage",xn);var wre="https://js.stripe.com/v3",aje=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,rB="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",lje=function(){for(var e=document.querySelectorAll('script[src^="'.concat(wre,'"]')),n=0;n<e.length;n++){var r=e[n];if(aje.test(r.src))return r}return null},cje=function(e){var n=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(wre).concat(n);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},uje=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:n})},Qy=null,dje=function(e){return Qy!==null||(Qy=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&e&&console.warn(rB),window.Stripe){n(window.Stripe);return}try{var i=lje();i&&e?console.warn(rB):i||(i=cje(e)),i.addEventListener("load",function(){window.Stripe?n(window.Stripe):r(new Error("Stripe.js not available"))}),i.addEventListener("error",function(){r(new Error("Failed to load Stripe.js"))})}catch(s){r(s);return}})),Qy},fje=function(e,n,r){if(e===null)return null;var i=e.apply(void 0,n);return uje(i,r),i},Ere=Promise.resolve().then(function(){return dje(null)}),_re=!1;Ere.catch(function(t){_re||console.warn(t)});var hje=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];_re=!0;var i=Date.now();return Ere.then(function(s){return fje(s,n,i)})};const pje={animation:{rotate:360,transition:{loop:1/0,ease:"linear",duration:1}}},mje=()=>b.jsx(ue.svg,{variants:pje,animate:"animation",xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 50 50",children:b.jsx(ue.circle,{cx:"25",cy:"25",r:"20",stroke:"dodgerblue",strokeWidth:"4",strokeLinecap:"round",fill:"transparent",initial:{pathLength:0,opacity:[0,1,1,0]},animate:{pathLength:[0,.9,.9,0],opacity:[0,1,1,0],rotate:[0,360]},transition:{loop:1/0,ease:"linear",times:[0,.25,.75,1],duration:1.5}})}),gje=U.div`
  background-color: ${fi.background};


h2 { 
  font-size: 24px;
  color: ${({theme:t})=>t.colors.ui800};
  font-weight: 600; 
}

.info-text {
  color: ${({theme:t})=>t.colors.ui600};
  font-weight: 500;
  font-size: 14px;
  margin-top: 16px;
}


${on} { 
  margin-top: 24px;
}

.form-value {
   color: ${({theme:t})=>t.colors.ui800};
   font-weight: 500; 
}


.form-section { 
  margin-top: 16px;
}


.stripe-confirm{ 
  margin-bottom: 16px;
  margin-top: 16px;
  font-size: 14px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
  color: ${({theme:t})=>t.colors.primary500};
  svg {
    margin-right: 2px;
  }
}
`,vje=50,pL=t=>String((t/100).toFixed(2));function yje({proceedToPayment:t,checkoutItems:e}){const[n,r]=v.useState(null),[i,s]=v.useState(null),[o,a]=v.useState(null),l=ve.server_url,c=(e==null?void 0:e[0])||{};if(v.useEffect(()=>{const d=c.priceID;d&&fetch(`${l}/stripe/get/price`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceID:d})}).then(f=>f.json()).then(f=>{console.log("Data",f);const{price:h}=f;r({name:h.nickname,unit_amount:h.unit_amount,string_amount:pL(h.unit_amount),currency:h.currency.toUpperCase()})}).catch(f=>a({message:`Failed to fetch item details: ${f.message}`}))},[]),v.useEffect(()=>{const{unit_amount:d}=n||{};if(d){const f=d-vje/100*d;s(f)}},[n]),o!=null&&o.message)return b.jsx("div",{children:o.message});if(!n)return b.jsx("div",{children:"Loading..."});const u=()=>{t==null||t(n,i)};return b.jsxs(gje,{children:[b.jsx("h2",{children:"Order Confirmation"}),b.jsxs("div",{className:"form-section",children:[b.jsx(Ui,{children:"Name:"}),b.jsx("p",{className:"form-value",children:n.name})]}),b.jsxs("div",{className:"form-section",children:[b.jsx(Ui,{children:"Price:"}),b.jsxs("p",{className:"form-value",children:[n.currency," ",n.string_amount]})]}),b.jsxs("p",{className:"stripe-confirm",style:{textAlign:"left"},children:[b.jsx(fRe,{}),"Purchase is accepted via Stripe."]}),b.jsx("hr",{}),b.jsx("p",{className:"info-text",children:"Stripe will retain the card information, whereas we will retain the First and Last Name, Email Address, Quantity, Whether or not purchase is for a business, if so, what the business is named."}),b.jsx("p",{className:"info-text",children:"During presale, we hold 50% of the payment total. The other 50% will be processed upon the release of our initial supply."}),b.jsxs(on,{onClick:u,children:["Proceed to Pay ",n.currency," ",pL(i)]})]})}const ss={producer:"TBD/TBA",verifier:"npc_network",type:"mitigation",location:"Minnesota, USA",supply:1e4,totalLandArea:3600,priceId:"price_1OefwvFnymUk0uH4x5faSkF9"},xje=({item:t})=>{var m,g,y;const e=sje(),n=eje(),r=Po(),[i,s]=v.useState(null),[o,a]=v.useState(!1),[l,c]=v.useState(!1),{payAmount:u}=t||{},d=1;v.useEffect(()=>{c(e!==null&&n!==null&&!o)},[e,n,o]);const f=async()=>{let x=0;try{const{producer:S,verifier:w,type:E}=ss,T=await vr.buyCredits({accountID:"test_investor",producer:S,verifier:w,creditType:E,amount:d,price:u});console.log("Data",T);const{certID:_}=T.response;_>0&&(x=_),console.log({certReturn:x})}catch(S){throw S!=null&&S.shortMessage?console.log("ERROR",S):console.log({message:`Failed to fetch item details: ${S.message}`}),S}return x},h=async x=>{if(x.preventDefault(),!l)return;a(!0),s(null);const{error:S}=await e.confirmPayment({elements:n,redirect:"if_required"});if(S){const w=S.type==="card_error"||S.type==="validation_error"?S.message:"An unexpected error occurred.";s(w)}else{s("Payment Successful");const w=await f();console.log({newCert:w}),w>0?r(`/certificate/${w}`):s("Certificate Error")}a(!1)},p={hover:{scale:1.05},tap:{scale:.95},disabled:{opacity:.5}};return b.jsx(Sje,{children:b.jsxs("form",{id:"payment-form",onSubmit:h,style:{maxWidth:"400px",margin:"0 auto",position:"relative"},children:[b.jsx("p",{className:"stripe-title",children:"Payments are handled by Stripe"}),b.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},id:"payment-element-container",children:b.jsx(oje,{id:"payment-element"})}),b.jsx(on,{variants:p,animate:o?"disabled":"",disabled:!l,id:"submit",children:o?b.jsx(mje,{}):`Pay ${(y=(g=(m=t==null?void 0:t.item)==null?void 0:m.currency)==null?void 0:g.toUpperCase)==null?void 0:y.call(g)} ${pL(u)}`}),i&&b.jsx(ue.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4},id:"payment-message",style:{marginTop:"20px",color:"red",textAlign:"center"},children:i})]})})},bje=({item:t})=>{const[e,n]=v.useState(null),[r,i]=v.useState(""),s=ve.server_url,o={stripePromise:e,clientSecret:r},{payAmount:a}=t||{};if(v.useEffect(()=>{console.log("stripe_config",o)},[o]),v.useEffect(()=>{fetch(`${s}/stripe/config`,{method:"POST"}).then(async l=>{const{publishableKey:c}=await l.json();console.log("publishableKey",c),n(hje(c))})},[s]),v.useEffect(()=>{console.log("isIntentful",e&&a>=50,s,e,a),e&&a>=50&&fetch(`${s}/stripe/create/payment_intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currency:"USD",amount:a})}).then(async l=>{const{payment_intent:c}=await l.json();i(c==null?void 0:c.clientSecret)})},[e,t]),!(!e||!r||!t))return b.jsx(bre,{stripe:e,options:{clientSecret:r},children:b.jsx(xje,{item:t})})},Sje=U.div`
  
.stripe-title {
  font-size: 16px;
  margin-bottom: 16px;
  color: ${({theme:t})=>t.colors.ui800};
}
  
`,wje=U(ue.div)`
  height: 100%;
margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
 
  max-width: 800px;
  padding: 2rem 1rem;
  box-sizing: border-box;

  overflow: auto;
  overflow-x: hidden;

  transition: 0.5s ease-in-out;
  .features { 
    display: grid;
    gap:32px;
    margin-top: 64px;

    @media(min-width: 672px) { 
      grid-template-columns: 1fr 1fr;
    } 
  }

  .features-section {
    border: 1px solid ${({theme:t})=>t.colors.ui200};
    border-radius: 10px;
    padding: 24px;
    svg {
      font-size: 40px;
      color: ${({theme:t})=>t.colors.primary500};
      margin-bottom: 24px;
    }
    .features-section-title {
      font-size: 16px;
      color: ${({theme:t})=>t.colors.ui800};
      font-weight: 600;
    }
    .features-section-paragraph {
      font-size: 14px;
      color: ${({theme:t})=>t.colors.ui700};
      font-weight: 500;
      margin-top: 8px;
    }
  }
`,Eje=U.div`


  box-sizing: border-box;

  ${({popup:t})=>t&&"filter: blur(20px);"}

  overflow: hidden;

  border-radius: 10px;
  width: 100%;
  // box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;

  @media (max-width: 768px) {
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    overflow: auto;
  }
`,iB=U(zFe.div)`
  flex: 1;


  box-sizing: border-box;

  border-radius: 10px;
  // box-shadow: rgba(0, 0, 0, 0.04) 0px 3px 5px;

  @media (max-width: 767px) {
    width: 100%;
    padding: 0.5rem;
  }
`;U.div`
  width: ${({width:t})=>t||"50%"};
  display: flex;
  flex-direction: ${({direction:t})=>t||"row"};
  align-items: ${({align:t})=>t||"flex-start"};
  justify-content: ${({justify:t})=>t||"flex-start"};
`;const _je=U.div`
  width: 100%;

  display: flex;
  flex-direction: column;

  border-radius: 10px;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  text-align: left;

  .disclaimer { 
    margin-top: 12px;
  }

  h3 {
    margin: 0 0 10px;
    font-size: 20px;
    font-weight: bold;
    color: ${({theme:t})=>t.colors.ui800}
  }

  p {
    margin: 0;
  }
`,Tje=U.div`
margin-top: 40px;
  font-size: 0.8rem;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center; 
  width: 100%;

  .card-stats { 
    display: flex;
    margin-top: 8px;
    gap:16px;
  }
  .card-stat { 
    display: flex; 
    gap: 8px;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
    color: ${({theme:t})=>t.colors.ui600};
    svg {
       color: ${({theme:t})=>t.colors.primary500};
    }
  }

  h3 {
    margin: 0;
  }

  .subtext {
    margin: 0;
  }

  .link {
    color: ${fi.accent};
    font-weight: 500;
    margin: 0;
    font-size: 0.9rem;
    transition: 0.3s ease;
    cursor: pointer;
  }

  .link:hover {
    text-decoration: underline;
  }
`;U.div`
  color: red;
  margin: 10px 0;
`;U.h1`
  font-size: 1.7rem;
  color: #123456;
`;const Cje=U.p`
  margin: 0;
  text-align: justify;
  font-size: 0.9rem;
`,kje=U.div`
  width: 100%;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  text-align: justify;

  overflow: auto;

  margin: 0;
  box-sizing: border-box;
`;U(Cje)`
  text-align: justify;
  width: 80%;
  font-style: italic;
  font-size: 0.8rem;
  margin: 0;
`;U.div`
  width: 100%;
  padding: 0.5rem 1rem;

  box-sizing: border-box;
`;const Pje=`
width: 95%;
display: block;

font-family: inherit;
font-size: 0.8rem;
line-height: 1.5rem;
font-weight: 700;
color: rgba(31, 33, 35, 1);

outline: none;
appearance: none;
background-color: rgb(255, 255, 255);
border: 1px solid rgba(228, 231, 233, 1);
box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
border-radius: 0.25rem;

margin: 0.2rem 0;
padding: 0.75rem;
box-sizing: border-box;
`;U.input`
  ${Pje}
`;U.button`
  border: 0px solid;
  box-sizing: border-box;
  border-color: rgba(250, 251, 251, 1);
  margin: 0px;
  font-family: inherit;
  text-transform: none;
  background-image: none;
  cursor: pointer;
  padding: 0px;
  appearance: button;
  //width: 90%;
  border-radius: 0.25rem;
  background: ${fi.accent};
  text-align: center;
  font-size: 1rem;
  line-height: 1.5rem;
  font-weight: 700;
  color: white;
  padding-left: 1.75rem;
  padding-right: 1.75rem;
  padding-top: 0.625rem;
  padding-bottom: 0.625rem;
  margin-top: 20px;
  transition: 0.3s ease-in-out;

  &:hover {
    scale: 1.1;
  }
`;const Ije=({onNextClick:t})=>{const[e,n]=v.useState({firstName:"",lastName:"",email:"",isBusiness:!1}),[r,i]=v.useState({}),[s,o]=v.useState(!1),[a,l]=v.useState(!1);v.useEffect(()=>{const p=zA().currentUser;p&&(l(!0),n({firstName:p.displayName.split(" ")[0],lastName:p.displayName.split(" ")[1]||"",email:p.email,isBusiness:!1}))},[]);const c=()=>{let h={};return console.log(e),e.firstName.trim()||(h.firstName="First name is required"),e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(h.email="Email is invalid"):h.email="Email is required",e.isBusiness&&!e.lastName.trim()&&(h.lastName="Last name is required for businesses"),console.log(h),i(h),Object.keys(h).length===0},u=async()=>{const h=zA(),p=new Xo;try{await T4e(h,p),l(!0)}catch(m){console.error("Error during Google sign-in:",m),i({...r,signIn:"Google sign-in failed. Please try again."})}},d=async h=>{if(console.log(c()),h.preventDefault(),c()){o(!0);try{a||l(!0),t(e)}catch(p){console.error("Error during form submission:",p),i({...r,form:"Submission failed. Please try again."})}finally{o(!1)}}},f=h=>{const{name:p,value:m}=h.target;n({...e,[p]:m})};return b.jsxs(Aje,{onSubmit:d,children:[a?b.jsx("p",{className:"form-title",children:"Please confirm your details."}):b.jsxs(b.Fragment,{children:[b.jsx("p",{children:"Sign in to continue:"}),b.jsx(Rje,{onClick:u,children:"Sign in with Google"}),b.jsx("p",{children:"or"})]}),b.jsx(_t,{label:"First Name",error:r.firstName,children:b.jsx(qt,{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:f,className:r.firstName?"error":"",required:!0})}),b.jsx(_t,{error:r.lastName,label:"Last Name",children:b.jsx(qt,{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:f,className:r.lastName?"error":""})}),b.jsx(_t,{label:"Email",error:r.email,children:b.jsx(qt,{type:"email",id:"email",name:"email",value:e.email,onChange:f,className:r.email?"error":"",required:!0})}),b.jsx("div",{className:"",children:b.jsxs("label",{className:"checkbox-section",htmlFor:"isBusiness",children:[b.jsx("input",{type:"checkbox",id:"isBusiness",name:"isBusiness",className:"checkbox",checked:e.isBusiness,onChange:h=>n({...e,isBusiness:h.target.checked})}),"Is this for a business?"]})}),b.jsx(on,{type:"submit",disabled:s,children:s?"Processing...":"Next"}),r.form&&b.jsx(Lje,{children:r.form})]})},Aje=U.form`
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 15px;
  margin-top: 40px;

  .checkbox-section { 
    display: flex;
    align-items: center;
    gap:8px;
    font-weight: 500; 
    font-size: 14px;
    .checkbox {
      height: 20px;
      width: 20px;
      margin-bottom: 0px;
      border: 1px solid ${({theme:t})=>t.colors.ui200};
      accent-color: ${({theme:t})=>t.colors.primary500};
    }
  }

  .form-title {
    font-size: 18px;
    font-weight: 500;
    color: ${({theme:t})=>t.colors.ui800};
  }
`,Lje=U.div`
  color: red;
  font-size: 12px;
`,Rje=U.button`
  background-color: #4285F4;
  color: white;
  border: none;
  padding: 10px 15px;
  cursor: pointer;
  margin-bottom: 10px;
  border-radius: 4px;

  &:hover {
    background-color: #357ae8;
  }
`;function Oje({setIsPaying:t,checkoutItems:e}){const[n,r]=v.useState(1),[i,s]=v.useState(null),o=2,a=v.useRef(null);v.useEffect(()=>{i&&r(3)},[i]);const l=()=>{t==null||t(!1)},c=()=>{n<o&&(r(n+1),a.current.classList.add("slide-left"),setTimeout(()=>{a.current.classList.remove("slide-left")},500))},u=(d,f)=>s({item:d,payAmount:f});return b.jsxs(kje,{children:[b.jsxs("div",{className:"form-container",ref:a,children:[n===1&&b.jsx(Ije,{onNextClick:c}),n===2&&b.jsx(yje,{proceedToPayment:u,checkoutItems:e}),n===3&&i&&b.jsx(bje,{item:i})]}),b.jsx("div",{className:"navigation",children:b.jsx(yOe,{onClick:l})})]})}const Dje=U.div`
height: 400px;
width: 100%;


  border-radius: 10px;
  /* Hide the links at the bottom of the map */
  .gm-style > div:nth-child(1) > a {
    display: none !important;
  }

  /* Hide the Google logo */
  .gm-style .gm-style-cc {
    display: none !important;
  }
`;function Mje(){const t=v.useRef(null),[e,n]=v.useState(null),[r,i]=v.useState(null);v.useEffect(()=>{s()},[]),v.useEffect(()=>{const o=document.createElement("script");return o.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC84TiV0-W9JMWCHWGmnh-9M9CjQFPG6XY",o.async=!0,o.defer=!0,document.head.appendChild(o),o.onload=()=>{n(new google.maps.Map(t.current,{center:{lat:48.8036,lng:-95.0969},zoom:13,disableDefaultUI:!0,gestureHandling:"none",mapTypeId:"satellite"}))},()=>{window.google&&window.google.maps&&e&&window.google.maps.event.clearInstanceListeners(e)}},[]);const s=async()=>i(await BZ.getKey());return b.jsx(Dje,{ref:t})}const $je=U.div`
  width: 100%;
  @media (min-width: 1200px) {
    grid-template-columns: 6fr 6fr;
    gap: 32px;
  }

  ${on} {
    margin-top: 12px
  }

  .form-section {
    margin-top: 40px;
    max-width: 400px;
  }

  .disclaimer { 
    max-width: 400px;
  }

`,Nje=({isLoading:t,supplyManagement:e,handlePayment:n})=>{const{amount:r,setAmount:i}=e||{},[s,o]=te.useState("");function a(l){console.log(l),console.log(parseInt(l)),parseInt(l)>0?n():o("Please enter an amount")}return b.jsx($je,{children:b.jsx(_je,{children:b.jsxs(Tje,{children:[b.jsx("h3",{children:"A farmer near you is selling now"}),b.jsxs("div",{className:"card-stats",children:[b.jsxs("div",{className:"card-stat",children:[b.jsx(mRe,{}),b.jsx("p",{children:ss==null?void 0:ss.location})]}),b.jsxs("div",{className:"card-stat",children:[b.jsx(vOe,{}),b.jsxs("p",{children:[ss==null?void 0:ss.totalLandArea," acres"]})]}),b.jsxs("div",{className:"card-stat",children:[b.jsx(xOe,{}),b.jsxs("p",{className:"subtext",children:["Supplier: ",ss==null?void 0:ss.producer.toUpperCase()]})]})]}),b.jsx(_t,{error:s,className:"form-section",label:"Nutrient Pollution Certificates",children:b.jsx(qt,{type:"number",value:r,onFocus:()=>o(""),onChange:l=>i==null?void 0:i(l.target.value),placeholder:"Enter your amount"})}),b.jsx("div",{children:b.jsx(on,{id:"remove-carbon-button",onClick:()=>{a(r)},children:t?"Processing...":"Buy Offsets"})}),b.jsx("span",{className:"disclaimer",children:"This is a pre-order for verified impact certificates. Detailed information about the farmer and supply will be provided with the launch of our marketplace."})]})})})},Fje=()=>{const[t,e]=v.useState(1);v.useState(!1);const[n,r]=v.useState(!1),i=kFe(n,{from:{opacity:0},enter:{opacity:1}}),s=[{priceID:ss.priceId,quantity:ti.toNumber(t)}],o=async()=>{r(!0)};return b.jsxs(wje,{children:[b.jsx("div",{id:"checkout"}),b.jsx(Mje,{}),b.jsxs(Eje,{children:[b.jsx(iB,{}),i((a,l)=>l?b.jsx(iB,{style:a,children:b.jsx(Oje,{setIsPaying:r,checkoutItems:s})}):b.jsx(Nje,{supplyManagement:{amount:t,setAmount:e},handlePayment:o}))]}),b.jsxs("div",{className:"features",children:[b.jsxs("div",{className:"features-section",children:[b.jsx(pRe,{}),b.jsx("div",{className:"features-section-title",children:"Eliminate Pollution"}),b.jsx("div",{className:"features-section-paragraph",children:"Enhance water quality and reduce pollution. Each purchase includes a real-time tracking certificate, ensuring verified digital impacts."})]}),b.jsxs("div",{className:"features-section",children:[b.jsx(dRe,{}),b.jsx("div",{className:"features-section-title",children:"Nutrient Pollution Certificates"}),b.jsx("div",{className:"features-section-paragraph",children:"Each credit offsets 1 pound of mixed nutrient pollutants in the watershed, supporting vital environmental conservation and restoration efforts."})]})]})]})};function bo(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function sB(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Tre(...t){return e=>{let n=!1;const r=t.map(i=>{const s=sB(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():sB(t[i],null)}}}}function Ls(...t){return v.useCallback(Tre(...t),t)}function jje(t,e){const n=v.createContext(e),r=s=>{const{children:o,...a}=s,l=v.useMemo(()=>a,Object.values(a));return b.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=v.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function m_(t,e=[]){let n=[];function r(s,o){const a=v.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:f,children:h,...p}=d,m=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,g=v.useMemo(()=>p,Object.values(p));return b.jsx(m.Provider,{value:g,children:h})};c.displayName=s+"Provider";function u(d,f){var m;const h=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,p=v.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>v.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Bje(i,...e)]}function Bje(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}var Ph=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},Uje=Jw[" useId ".trim().toString()]||(()=>{}),Vje=0;function fg(t){const[e,n]=v.useState(Uje());return Ph(()=>{t||n(r=>r??String(Vje++))},[t]),t||(e?`radix-${e}`:"")}var zje=Jw[" useInsertionEffect ".trim().toString()]||Ph;function g_({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=Hje({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=v.useRef(t!==void 0);v.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=v.useCallback(u=>{var d;if(a){const f=Wje(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function Hje({defaultProp:t,onChange:e}){const[n,r]=v.useState(t),i=v.useRef(n),s=v.useRef(e);return zje(()=>{s.current=e},[e]),v.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function Wje(t){return typeof t=="function"}function ow(t){const e=Gje(t),n=v.forwardRef((r,i)=>{const{children:s,...o}=r,a=v.Children.toArray(s),l=a.find(qje);if(l){const c=l.props.children,u=a.map(d=>d===l?v.Children.count(c)>1?v.Children.only(null):v.isValidElement(c)?c.props.children:null:d);return b.jsx(e,{...o,ref:i,children:v.isValidElement(c)?v.cloneElement(c,void 0,u):null})}return b.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}function Gje(t){const e=v.forwardRef((n,r)=>{const{children:i,...s}=n;if(v.isValidElement(i)){const o=Qje(i),a=Yje(s,i.props);return i.type!==v.Fragment&&(a.ref=r?Tre(r,o):o),v.cloneElement(i,a)}return v.Children.count(i)>1?v.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Kje=Symbol("radix.slottable");function qje(t){return v.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Kje}function Yje(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Qje(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Xje=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Qr=Xje.reduce((t,e)=>{const n=ow(`Primitive.${e}`),r=v.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),b.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Zje(t,e){t&&Yr.flushSync(()=>t.dispatchEvent(e))}function y0(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Jje(t,e=globalThis==null?void 0:globalThis.document){const n=y0(t);v.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var e7e="DismissableLayer",mL="dismissableLayer.update",t7e="dismissableLayer.pointerDownOutside",n7e="dismissableLayer.focusOutside",oB,Cre=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kre=v.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=v.useContext(Cre),[u,d]=v.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=v.useState({}),p=Ls(e,_=>d(_)),m=Array.from(c.layers),[g]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),x=u?m.indexOf(u):-1,S=c.layersWithOutsidePointerEventsDisabled.size>0,w=x>=y,E=s7e(_=>{const I=_.target,A=[...c.branches].some(L=>L.contains(I));!w||A||(i==null||i(_),o==null||o(_),_.defaultPrevented||a==null||a())},f),T=o7e(_=>{const I=_.target;[...c.branches].some(L=>L.contains(I))||(s==null||s(_),o==null||o(_),_.defaultPrevented||a==null||a())},f);return Jje(_=>{x===c.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&a&&(_.preventDefault(),a()))},f),v.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(oB=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),aB(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=oB)}},[u,f,n,c]),v.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),aB())},[u,c]),v.useEffect(()=>{const _=()=>h({});return document.addEventListener(mL,_),()=>document.removeEventListener(mL,_)},[]),b.jsx(Qr.div,{...l,ref:p,style:{pointerEvents:S?w?"auto":"none":void 0,...t.style},onFocusCapture:bo(t.onFocusCapture,T.onFocusCapture),onBlurCapture:bo(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:bo(t.onPointerDownCapture,E.onPointerDownCapture)})});kre.displayName=e7e;var r7e="DismissableLayerBranch",i7e=v.forwardRef((t,e)=>{const n=v.useContext(Cre),r=v.useRef(null),i=Ls(e,r);return v.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),b.jsx(Qr.div,{...t,ref:i})});i7e.displayName=r7e;function s7e(t,e=globalThis==null?void 0:globalThis.document){const n=y0(t),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){Pre(t7e,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function o7e(t,e=globalThis==null?void 0:globalThis.document){const n=y0(t),r=v.useRef(!1);return v.useEffect(()=>{const i=s=>{s.target&&!r.current&&Pre(n7e,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function aB(){const t=new CustomEvent(mL);document.dispatchEvent(t)}function Pre(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Zje(i,s):i.dispatchEvent(s)}var a2="focusScope.autoFocusOnMount",l2="focusScope.autoFocusOnUnmount",lB={bubbles:!1,cancelable:!0},a7e="FocusScope",Ire=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=v.useState(null),c=y0(i),u=y0(s),d=v.useRef(null),f=Ls(e,m=>l(m)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let m=function(S){if(h.paused||!a)return;const w=S.target;a.contains(w)?d.current=w:tl(d.current,{select:!0})},g=function(S){if(h.paused||!a)return;const w=S.relatedTarget;w!==null&&(a.contains(w)||tl(d.current,{select:!0}))},y=function(S){if(document.activeElement===document.body)for(const E of S)E.removedNodes.length>0&&tl(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",g);const x=new MutationObserver(y);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",g),x.disconnect()}}},[r,a,h.paused]),v.useEffect(()=>{if(a){uB.add(h);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(a2,lB);a.addEventListener(a2,c),a.dispatchEvent(y),y.defaultPrevented||(l7e(h7e(Are(a)),{select:!0}),document.activeElement===m&&tl(a))}return()=>{a.removeEventListener(a2,c),setTimeout(()=>{const y=new CustomEvent(l2,lB);a.addEventListener(l2,u),a.dispatchEvent(y),y.defaultPrevented||tl(m??document.body,{select:!0}),a.removeEventListener(l2,u),uB.remove(h)},0)}}},[a,c,u,h]);const p=v.useCallback(m=>{if(!n&&!r||h.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const x=m.currentTarget,[S,w]=c7e(x);S&&w?!m.shiftKey&&y===w?(m.preventDefault(),n&&tl(S,{select:!0})):m.shiftKey&&y===S&&(m.preventDefault(),n&&tl(w,{select:!0})):y===x&&m.preventDefault()}},[n,r,h.paused]);return b.jsx(Qr.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})});Ire.displayName=a7e;function l7e(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(tl(r,{select:e}),document.activeElement!==n)return}function c7e(t){const e=Are(t),n=cB(e,t),r=cB(e.reverse(),t);return[n,r]}function Are(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cB(t,e){for(const n of t)if(!u7e(n,{upTo:e}))return n}function u7e(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function d7e(t){return t instanceof HTMLInputElement&&"select"in t}function tl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&d7e(t)&&e&&t.select()}}var uB=f7e();function f7e(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=dB(t,e),t.unshift(e)},remove(e){var n;t=dB(t,e),(n=t[0])==null||n.resume()}}}function dB(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function h7e(t){return t.filter(e=>e.tagName!=="A")}var p7e="Portal",Lre=v.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=v.useState(!1);Ph(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?XO.createPortal(b.jsx(Qr.div,{...r,ref:e}),o):null});Lre.displayName=p7e;function m7e(t,e){return v.useReducer((n,r)=>e[n][r]??n,t)}var Dv=t=>{const{present:e,children:n}=t,r=g7e(e),i=typeof n=="function"?n({present:r.isPresent}):v.Children.only(n),s=Ls(r.ref,v7e(i));return typeof n=="function"||r.isPresent?v.cloneElement(i,{ref:s}):null};Dv.displayName="Presence";function g7e(t){const[e,n]=v.useState(),r=v.useRef(null),i=v.useRef(t),s=v.useRef("none"),o=t?"mounted":"unmounted",[a,l]=m7e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const c=Xy(r.current);s.current=a==="mounted"?c:"none"},[a]),Ph(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,h=Xy(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Ph(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=h=>{const m=Xy(r.current).includes(CSS.escape(h.animationName));if(h.target===e&&m&&(l("ANIMATION_END"),!i.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},f=h=>{h.target===e&&(s.current=Xy(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:v.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Xy(t){return(t==null?void 0:t.animationName)||"none"}function v7e(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var c2=0;function y7e(){v.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??fB()),document.body.insertAdjacentElement("beforeend",t[1]??fB()),c2++,()=>{c2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),c2--}},[])}function fB(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var hg="right-scroll-bar-position",pg="width-before-scroll-bar",x7e="with-scroll-bars-hidden",b7e="--removed-body-scroll-bar-size";function u2(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function S7e(t,e){var n=v.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var w7e=typeof window<"u"?v.useLayoutEffect:v.useEffect,hB=new WeakMap;function Rre(t,e){var n=S7e(e||null,function(r){return t.forEach(function(i){return u2(i,r)})});return w7e(function(){var r=hB.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||u2(a,null)}),s.forEach(function(a){i.has(a)||u2(a,o)})}hB.set(n,t)},[t]),n}function E7e(t){return t}function _7e(t,e){e===void 0&&(e=E7e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Ore(t){t===void 0&&(t={});var e=_7e(null);return e.options=sr({async:!0,ssr:!1},t),e}var Dre=function(t){var e=t.sideCar,n=ip(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,sr({},n))};Dre.isSideCarExport=!0;function Mre(t,e){return t.useMedium(e),Dre}var $re=Ore(),d2=function(){},v_=v.forwardRef(function(t,e){var n=v.useRef(null),r=v.useState({onScrollCapture:d2,onWheelCapture:d2,onTouchMoveCapture:d2}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noRelative,p=t.noIsolation,m=t.inert,g=t.allowPinchZoom,y=t.as,x=y===void 0?"div":y,S=t.gapMode,w=ip(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,T=Rre([n,e]),_=sr(sr({},w),i);return v.createElement(v.Fragment,null,u&&v.createElement(E,{sideCar:$re,removeScrollBar:c,shards:d,noRelative:h,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:S}),o?v.cloneElement(v.Children.only(a),sr(sr({},_),{ref:T})):v.createElement(x,sr({},_,{className:l,ref:T}),a))});v_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};v_.classNames={fullWidth:pg,zeroRight:hg};var pB,T7e=function(){if(pB)return pB;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function C7e(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=T7e();return e&&t.setAttribute("nonce",e),t}function k7e(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function P7e(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var I7e=function(){var t=0,e=null;return{add:function(n){t==0&&(e=C7e())&&(k7e(e,n),P7e(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},A7e=function(){var t=I7e();return function(e,n){v.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},xM=function(){var t=A7e(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},L7e={left:0,top:0,right:0,gap:0},f2=function(t){return parseInt(t||"",10)||0},R7e=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[f2(n),f2(r),f2(i)]},O7e=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return L7e;var e=R7e(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},D7e=xM(),Gf="data-scroll-locked",M7e=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(x7e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Gf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hg,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(pg,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(hg," .").concat(hg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(pg," .").concat(pg,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Gf,`] {
    `).concat(b7e,": ").concat(a,`px;
  }
`)},mB=function(){var t=parseInt(document.body.getAttribute(Gf)||"0",10);return isFinite(t)?t:0},$7e=function(){v.useEffect(function(){return document.body.setAttribute(Gf,(mB()+1).toString()),function(){var t=mB()-1;t<=0?document.body.removeAttribute(Gf):document.body.setAttribute(Gf,t.toString())}},[])},Nre=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;$7e();var s=v.useMemo(function(){return O7e(i)},[i]);return v.createElement(D7e,{styles:M7e(s,!e,i,n?"":"!important")})},gL=!1;if(typeof window<"u")try{var Zy=Object.defineProperty({},"passive",{get:function(){return gL=!0,!0}});window.addEventListener("test",Zy,Zy),window.removeEventListener("test",Zy,Zy)}catch{gL=!1}var Ed=gL?{passive:!1}:!1,N7e=function(t){return t.tagName==="TEXTAREA"},Fre=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!N7e(t)&&n[e]==="visible")},F7e=function(t){return Fre(t,"overflowY")},j7e=function(t){return Fre(t,"overflowX")},gB=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=jre(t,r);if(i){var s=Bre(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},B7e=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},U7e=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},jre=function(t,e){return t==="v"?F7e(e):j7e(e)},Bre=function(t,e){return t==="v"?B7e(e):U7e(e)},V7e=function(t,e){return t==="h"&&e==="rtl"?-1:1},z7e=function(t,e,n,r,i){var s=V7e(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var h=Bre(t,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&jre(t,a)&&(d+=y,f+=p);var x=a.parentNode;a=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&Math.abs(d)<1||!i&&o>d)||!u&&(i&&Math.abs(f)<1||!i&&-o>f))&&(c=!0),c},Jy=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},vB=function(t){return[t.deltaX,t.deltaY]},yB=function(t){return t&&"current"in t?t.current:t},H7e=function(t,e){return t[0]===e[0]&&t[1]===e[1]},W7e=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},G7e=0,_d=[];function K7e(t){var e=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),i=v.useState(G7e++)[0],s=v.useState(xM)[0],o=v.useRef(t);v.useEffect(function(){o.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Vee([t.lockRef.current],(t.shards||[]).map(yB),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=Jy(m),x=n.current,S="deltaX"in m?m.deltaX:x[0]-y[0],w="deltaY"in m?m.deltaY:x[1]-y[1],E,T=m.target,_=Math.abs(S)>Math.abs(w)?"h":"v";if("touches"in m&&_==="h"&&T.type==="range")return!1;var I=gB(_,T);if(!I)return!0;if(I?E=_:(E=_==="v"?"h":"v",I=gB(_,T)),!I)return!1;if(!r.current&&"changedTouches"in m&&(S||w)&&(r.current=E),!E)return!0;var A=r.current||E;return z7e(A,g,m,A==="h"?S:w,!0)},[]),l=v.useCallback(function(m){var g=m;if(!(!_d.length||_d[_d.length-1]!==s)){var y="deltaY"in g?vB(g):Jy(g),x=e.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&H7e(E.delta,y)})[0];if(x&&x.should){g.cancelable&&g.preventDefault();return}if(!x){var S=(o.current.shards||[]).map(yB).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=S.length>0?a(g,S[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),c=v.useCallback(function(m,g,y,x){var S={name:m,delta:g,target:y,should:x,shadowParent:q7e(y)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(w){return w!==S})},1)},[]),u=v.useCallback(function(m){n.current=Jy(m),r.current=void 0},[]),d=v.useCallback(function(m){c(m.type,vB(m),m.target,a(m,t.lockRef.current))},[]),f=v.useCallback(function(m){c(m.type,Jy(m),m.target,a(m,t.lockRef.current))},[]);v.useEffect(function(){return _d.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Ed),document.addEventListener("touchmove",l,Ed),document.addEventListener("touchstart",u,Ed),function(){_d=_d.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Ed),document.removeEventListener("touchmove",l,Ed),document.removeEventListener("touchstart",u,Ed)}},[]);var h=t.removeScrollBar,p=t.inert;return v.createElement(v.Fragment,null,p?v.createElement(s,{styles:W7e(i)}):null,h?v.createElement(Nre,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function q7e(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Y7e=Mre($re,K7e);var Ure=v.forwardRef(function(t,e){return v.createElement(v_,sr({},t,{ref:e,sideCar:Y7e}))});Ure.classNames=v_.classNames;const Q7e=Ure;var X7e=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Td=new WeakMap,e1=new WeakMap,t1={},h2=0,Vre=function(t){return t&&(t.host||Vre(t.parentNode))},Z7e=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Vre(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},J7e=function(t,e,n,r){var i=Z7e(e,Array.isArray(t)?t:[t]);t1[n]||(t1[n]=new WeakMap);var s=t1[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var h=f.getAttribute(r),p=h!==null&&h!=="false",m=(Td.get(f)||0)+1,g=(s.get(f)||0)+1;Td.set(f,m),s.set(f,g),o.push(f),m===1&&p&&e1.set(f,!0),g===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return u(e),a.clear(),h2++,function(){o.forEach(function(d){var f=Td.get(d)-1,h=s.get(d)-1;Td.set(d,f),s.set(d,h),f||(e1.has(d)||d.removeAttribute(r),e1.delete(d)),h||d.removeAttribute(n)}),h2--,h2||(Td=new WeakMap,Td=new WeakMap,e1=new WeakMap,t1={})}},zre=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=e||X7e(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),J7e(r,i,n,"aria-hidden")):function(){return null}},y_="Dialog",[Hre,n1t]=m_(y_),[e9e,Fs]=Hre(y_),Wre=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=v.useRef(null),l=v.useRef(null),[c,u]=g_({prop:r,defaultProp:i??!1,onChange:s,caller:y_});return b.jsx(e9e,{scope:e,triggerRef:a,contentRef:l,contentId:fg(),titleId:fg(),descriptionId:fg(),open:c,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};Wre.displayName=y_;var Gre="DialogTrigger",Kre=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fs(Gre,n),s=Ls(e,i.triggerRef);return b.jsx(Qr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":wM(i.open),...r,ref:s,onClick:bo(t.onClick,i.onOpenToggle)})});Kre.displayName=Gre;var bM="DialogPortal",[t9e,qre]=Hre(bM,{forceMount:void 0}),Yre=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Fs(bM,e);return b.jsx(t9e,{scope:e,forceMount:n,children:v.Children.map(r,o=>b.jsx(Dv,{present:n||s.open,children:b.jsx(Lre,{asChild:!0,container:i,children:o})}))})};Yre.displayName=bM;var aw="DialogOverlay",Qre=v.forwardRef((t,e)=>{const n=qre(aw,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Fs(aw,t.__scopeDialog);return s.modal?b.jsx(Dv,{present:r||s.open,children:b.jsx(r9e,{...i,ref:e})}):null});Qre.displayName=aw;var n9e=ow("DialogOverlay.RemoveScroll"),r9e=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fs(aw,n);return b.jsx(Q7e,{as:n9e,allowPinchZoom:!0,shards:[i.contentRef],children:b.jsx(Qr.div,{"data-state":wM(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Fu="DialogContent",Xre=v.forwardRef((t,e)=>{const n=qre(Fu,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Fs(Fu,t.__scopeDialog);return b.jsx(Dv,{present:r||s.open,children:s.modal?b.jsx(i9e,{...i,ref:e}):b.jsx(s9e,{...i,ref:e})})});Xre.displayName=Fu;var i9e=v.forwardRef((t,e)=>{const n=Fs(Fu,t.__scopeDialog),r=v.useRef(null),i=Ls(e,n.contentRef,r);return v.useEffect(()=>{const s=r.current;if(s)return zre(s)},[]),b.jsx(Zre,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bo(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:bo(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:bo(t.onFocusOutside,s=>s.preventDefault())})}),s9e=v.forwardRef((t,e)=>{const n=Fs(Fu,t.__scopeDialog),r=v.useRef(!1),i=v.useRef(!1);return b.jsx(Zre,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Zre=v.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Fs(Fu,n),l=v.useRef(null),c=Ls(e,l);return y7e(),b.jsxs(b.Fragment,{children:[b.jsx(Ire,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:b.jsx(kre,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":wM(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(a9e,{titleId:a.titleId}),b.jsx(c9e,{contentRef:l,descriptionId:a.descriptionId})]})]})}),SM="DialogTitle",Jre=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fs(SM,n);return b.jsx(Qr.h2,{id:i.titleId,...r,ref:e})});Jre.displayName=SM;var eie="DialogDescription",o9e=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fs(eie,n);return b.jsx(Qr.p,{id:i.descriptionId,...r,ref:e})});o9e.displayName=eie;var tie="DialogClose",nie=v.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Fs(tie,n);return b.jsx(Qr.button,{type:"button",...r,ref:e,onClick:bo(t.onClick,()=>i.onOpenChange(!1))})});nie.displayName=tie;function wM(t){return t?"open":"closed"}var rie="DialogTitleWarning",[r1t,iie]=jje(rie,{contentName:Fu,titleName:SM,docsSlug:"dialog"}),a9e=({titleId:t})=>{const e=iie(rie),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return v.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},l9e="DialogDescriptionWarning",c9e=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${iie(l9e).contentName}}.`;return v.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},u9e=Wre,d9e=Kre,f9e=Yre,sie=Qre,oie=Xre,h9e=Jre,aie=nie;function p9e(t){const e=t+"CollectionProvider",[n,r]=m_(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=m=>{const{scope:g,children:y}=m,x=te.useRef(null),S=te.useRef(new Map).current;return b.jsx(i,{scope:g,itemMap:S,collectionRef:x,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=ow(a),c=te.forwardRef((m,g)=>{const{scope:y,children:x}=m,S=s(a,y),w=Ls(g,S.collectionRef);return b.jsx(l,{ref:w,children:x})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=ow(u),h=te.forwardRef((m,g)=>{const{scope:y,children:x,...S}=m,w=te.useRef(null),E=Ls(g,w),T=s(u,y);return te.useEffect(()=>(T.itemMap.set(w,{ref:w,...S}),()=>void T.itemMap.delete(w))),b.jsx(f,{[d]:"",ref:E,children:x})});h.displayName=u;function p(m){const g=s(t+"CollectionConsumer",m);return te.useCallback(()=>{const x=g.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((T,_)=>S.indexOf(T.ref.current)-S.indexOf(_.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},p,r]}var x_="Collapsible",[m9e,lie]=m_(x_),[g9e,EM]=m9e(x_),cie=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[l,c]=g_({prop:r,defaultProp:i??!1,onChange:o,caller:x_});return b.jsx(g9e,{scope:n,disabled:s,contentId:fg(),open:l,onOpenToggle:v.useCallback(()=>c(u=>!u),[c]),children:b.jsx(Qr.div,{"data-state":TM(l),"data-disabled":s?"":void 0,...a,ref:e})})});cie.displayName=x_;var uie="CollapsibleTrigger",die=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=EM(uie,n);return b.jsx(Qr.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":TM(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:bo(t.onClick,i.onOpenToggle)})});die.displayName=uie;var _M="CollapsibleContent",fie=v.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=EM(_M,t.__scopeCollapsible);return b.jsx(Dv,{present:n||i.open,children:({present:s})=>b.jsx(v9e,{...r,ref:e,present:s})})});fie.displayName=_M;var v9e=v.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=EM(_M,n),[a,l]=v.useState(r),c=v.useRef(null),u=Ls(e,c),d=v.useRef(0),f=d.current,h=v.useRef(0),p=h.current,m=o.open||a,g=v.useRef(m),y=v.useRef(void 0);return v.useEffect(()=>{const x=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(x)},[]),Ph(()=>{const x=c.current;if(x){y.current=y.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const S=x.getBoundingClientRect();d.current=S.height,h.current=S.width,g.current||(x.style.transitionDuration=y.current.transitionDuration,x.style.animationName=y.current.animationName),l(r)}},[o.open,r]),b.jsx(Qr.div,{"data-state":TM(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!m,...s,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...t.style},children:m&&i})});function TM(t){return t?"open":"closed"}var y9e=cie,x9e=die,b9e=fie,S9e=v.createContext(void 0);function w9e(t){const e=v.useContext(S9e);return t||e||"ltr"}var js="Accordion",E9e=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[CM,_9e,T9e]=p9e(js),[b_,i1t]=m_(js,[T9e,lie]),kM=lie(),hie=te.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,s=r;return b.jsx(CM.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?b.jsx(I9e,{...s,ref:e}):b.jsx(P9e,{...i,ref:e})})});hie.displayName=js;var[pie,C9e]=b_(js),[mie,k9e]=b_(js,{collapsible:!1}),P9e=te.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...o}=t,[a,l]=g_({prop:n,defaultProp:r??"",onChange:i,caller:js});return b.jsx(pie,{scope:t.__scopeAccordion,value:te.useMemo(()=>a?[a]:[],[a]),onItemOpen:l,onItemClose:te.useCallback(()=>s&&l(""),[s,l]),children:b.jsx(mie,{scope:t.__scopeAccordion,collapsible:s,children:b.jsx(gie,{...o,ref:e})})})}),I9e=te.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,a]=g_({prop:n,defaultProp:r??[],onChange:i,caller:js}),l=te.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=te.useCallback(u=>a((d=[])=>d.filter(f=>f!==u)),[a]);return b.jsx(pie,{scope:t.__scopeAccordion,value:o,onItemOpen:l,onItemClose:c,children:b.jsx(mie,{scope:t.__scopeAccordion,collapsible:!0,children:b.jsx(gie,{...s,ref:e})})})}),[A9e,S_]=b_(js),gie=te.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:s="vertical",...o}=t,a=te.useRef(null),l=Ls(a,e),c=_9e(n),d=w9e(i)==="ltr",f=bo(t.onKeyDown,h=>{var I;if(!E9e.includes(h.key))return;const p=h.target,m=c().filter(A=>{var L;return!((L=A.ref.current)!=null&&L.disabled)}),g=m.findIndex(A=>A.ref.current===p),y=m.length;if(g===-1)return;h.preventDefault();let x=g;const S=0,w=y-1,E=()=>{x=g+1,x>w&&(x=S)},T=()=>{x=g-1,x<S&&(x=w)};switch(h.key){case"Home":x=S;break;case"End":x=w;break;case"ArrowRight":s==="horizontal"&&(d?E():T());break;case"ArrowDown":s==="vertical"&&E();break;case"ArrowLeft":s==="horizontal"&&(d?T():E());break;case"ArrowUp":s==="vertical"&&T();break}const _=x%y;(I=m[_].ref.current)==null||I.focus()});return b.jsx(A9e,{scope:n,disabled:r,direction:i,orientation:s,children:b.jsx(CM.Slot,{scope:n,children:b.jsx(Qr.div,{...o,"data-orientation":s,ref:l,onKeyDown:r?void 0:f})})})}),lw="AccordionItem",[L9e,PM]=b_(lw),R9e=te.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,s=S_(lw,n),o=C9e(lw,n),a=kM(n),l=fg(),c=r&&o.value.includes(r)||!1,u=s.disabled||t.disabled;return b.jsx(L9e,{scope:n,open:c,disabled:u,triggerId:l,children:b.jsx(y9e,{"data-orientation":s.orientation,"data-state":Sie(c),...a,...i,ref:e,disabled:u,open:c,onOpenChange:d=>{d?o.onItemOpen(r):o.onItemClose(r)}})})});R9e.displayName=lw;var vie="AccordionHeader",O9e=te.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=S_(js,n),s=PM(vie,n);return b.jsx(Qr.h3,{"data-orientation":i.orientation,"data-state":Sie(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:e})});O9e.displayName=vie;var vL="AccordionTrigger",yie=te.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=S_(js,n),s=PM(vL,n),o=k9e(vL,n),a=kM(n);return b.jsx(CM.ItemSlot,{scope:n,children:b.jsx(x9e,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...a,...r,ref:e})})});yie.displayName=vL;var xie="AccordionContent",bie=te.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=S_(js,n),s=PM(xie,n),o=kM(n);return b.jsx(b9e,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});bie.displayName=xie;function Sie(t){return t?"open":"closed"}var D9e=hie,M9e=yie,$9e=bie;U.div`
  position: relative;
`;U.div`
display: flex;
flex-direction: column;
text-align: left; 
gap:2px;
`;U.div`
display: flex;
align-items: center;
gap:8px
`;U.div`
height: 40px; 
width: 40px;
border-radius: 50%;
background: ${({theme:t})=>t.colors.ui200};
display: inline-flex;
align-items: center;
justify-content: center;
`;U.div`
text-transform: capitalize;
`;U.div`
color: ${({theme:t})=>t.colors.ui800};
font-weight: 500;
text-transform: capitalize;
font-size: 12px;
`;U.button`
  background: none;
  position: relative;
  border: none;
  color: ${t=>t.theme.colors.primary500};
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0px;
  padding: 8px 0px;
  font-weight: 600;
  font-size: 14px;
  svg { 
    color: ${({theme:t})=>t.colors.ui500}
  }
  :hover {
     background: none;
     border: none;
  }
`;U(ue.div)`
  position: absolute;
  width: 250px;
  bottom: 102%;
  left: 0;
  z-index: 9999;
  background-color: white;
  border-radius: 4px;
  box-shadow: ${({theme:t})=>t.boxShadow.light};
`;U.div`
  display: flex;
  align-items: center;
  padding: 12px 20px;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap:16px; 
  font-weight: 500;
  color: ${t=>t.theme.colors.primary700};
  cursor: pointer;

  &:hover {
    background-color: ${({theme:t})=>t.colors.ui100}
  }
`;U.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 24px;

  @media (min-width: 1200px) {
    padding: 40px 0px 40px 0px;
  }
`;const N9e=Ms`
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
`,F9e=Ms`
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
`;U(D9e)`
  width: 100%;

  .content[data-state="open"] {
    animation: ${F9e} 300ms cubic-bezier(0.87, 0, 0.13, 1);
  }
  .content[data-state="closed"] {
    animation: ${N9e} 300ms cubic-bezier(0.87, 0, 0.13, 1);
  }
`;U(M9e)`
  width: 100%;
  background: none;
  border: none;
  padding: 0;
  color: inherit;
  text-align: left;

  font-weight: 500;
  .cta {
    font-weight: 500;
  }
  &[data-state="open"] {
    .AccordionChevron {
      transform: rotate(180deg);
    }
  }

  .AccordionChevron {
    transition: transform 300ms cubic-bezier(0.87, 0, 0.13, 1);
    font-size: 14px;
  }
`;U($9e)`
  padding-left: 38px;
  margin-left: 22px;
  font-weight: 500;
  color: ${({theme:t})=>t.colors.ui600};
  font-size: 14px;
  overflow: hidden;

  border-bottom: 1px solid ${({theme:t})=>t.colors.ui300};
  .cta {
    padding: 8px 0px;
    display: block;
    color: ${({theme:t})=>t.colors.ui700};
    text-decoration: none;
    font-weight: 500;
    &:hover {
      text-decoration: underline;
      color: ${({theme:t})=>t.colors.ui800};
    }
  }
`;const j9e=Ms`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
  

`;U(aie)`
  background: transparent;
  color: ${({theme:t})=>t.colors.ui800};
  font-size: 12px;
  height: 40px;
  width: 40px;
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 16px;
`;U.div`
  display: flex;
  justify-content: space-between;
  max-width: 90%;
  margin: 0 auto;
  width: 100%;
  padding: 24px 0px;
  .logo {
    width: 120px;
  }

  .dialog-trigger {
    button {
      backgorund: none;
    }
  }

  @media (min-width: 1200px) {
    display: none;
  }
`;U(sie)`
  position: fixed;
  inset: 0;
  animation: overlayShow 150ms cubic-bezier(0.16, 1, 0.3, 1);
  background-color: rgba(0, 0, 0, 0.5); /* Add background color */
  animation: ${j9e} 0.3s ease-in-out;
`;U(oie)`
  background-color: white;
  border-radius: 6px;
  box-shadow: hsl(206 22% 7% / 35%) 0px 10px 38px -10px,
    hsl(206 22% 7% / 20%) 0px 10px 20px -15px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90vw;
  max-width: 450px;
  max-height: 85vh;
  padding: 16px;
  animation: contentShow 150ms cubic-bezier(0.16, 1, 0.3, 1);
  outline: none;

  .dialog-close-wrap {
    display: flex;
    justify-content: flex-end;
    button {
      padding: 16px 0px;
    }
  }
`;U.aside`
  width: 400px;
  background: ${({theme:t})=>t.colors.ui50};
  z-index: 1000;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 20px;
  display: none;

  @media (min-width: 1200px) {
    display: block;
  }
`;U.div`
  display: flex;
  align-items: center;
  gap: 4px;
  img {
    width: 125px;
  }
  h1 {
    font-size: 16px;
    color: ${({theme:t})=>t.colors.ui800};
  }
`;const B9e=(t,e)=>{const n=JSON.parse(localStorage.getItem("notifications"))||[],r={id:n.length,type:t,message:e,time:Date.now()},i=[...n,r];return localStorage.setItem("notifications",JSON.stringify(i)),r},U9e=()=>{const{STATES:t,ACTIONS:e}=jn(),[n,r]=v.useState([]),{user:i,notificationBarOpen:s}=t||{},{handleNotificationsBar:o,logNotification:a}=e||{};v.useEffect(()=>{const u=JSON.parse(localStorage.getItem("notifications"))||[];u&&r(u)},[t]);const l=u=>{const d=B9e(u,`This is a sample ${u} notification`);a(d.type,d.message)};if(!i)return;const c={open:{opacity:1,x:0},closed:{opacity:0,x:"100%"}};return b.jsx(b.Fragment,{children:b.jsx(Cr,{children:s&&b.jsxs(b.Fragment,{children:[b.jsx(H9e,{icon:zQ,onClick:o}),b.jsxs(V9e,{as:ue.div,initial:"closed",animate:"open",exit:"closed",variants:c,children:[b.jsx("h5",{children:"**For Testing Only**"}),b.jsx("button",{onClick:()=>l(""),children:"Send Sample Message Notification"}),b.jsx("button",{onClick:()=>l("alert"),children:"Send Sample Alert Notification"}),b.jsx("button",{onClick:()=>l("error"),children:"Send Sample Error Notification"}),b.jsx("h5",{children:"********************"}),n==null?void 0:n.map((u,d)=>b.jsxs(z9e,{type:u.type,children:[b.jsx("p",{children:u.message}),b.jsx("small",{children:u.time})]},d))]})]})})})},V9e=U.div`
  position: fixed;
  display: flex;
  flex-direction: column;
  padding: 1.5rem;
  padding-top: 20%;
  box-sizing: border-box;
  box-shadow: -5px 0px 15px rgba(0, 0, 0, 0.2);
  top: 0;
  right: 0;
  width: 60%;
  height: 100%;
  z-index: 1000;
  background: #fff;
  overflow: auto;

  @media (min-width: 768px) {
    width: 30%;
  }

  button {
    background: #134b5f;
    color: white;
    margin: 5px;
    font-size: 0.8rem;
  }
`,z9e=U.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem;
  font-size: 0.8rem;
  margin: 10px 0;
  border-bottom: 1px solid #ccc;
  //background-color: #fff;
  background-color: ${t=>t.type==="error"?"#ffebee":t.type==="alert"?"#e8f5e9":"#A5F8D3"};
`,H9e=U(jt)`
  position: fixed;
  top: 10%;
  left: 45%;
  font-size: 1.5rem;
  cursor: pointer;
  z-index: 9999;
`,W9e=U.div`
  display: flex;
  justify-content: center;
  gap:10px;
  padding: 20px;
  box-sizing: border-box;
  

  ${on} { 
    margin-top: 24px;
  }
  @media (max-width: 992px) {
    flex-direction: column;
  }
`,G9e=U.div`
width: 100%; 
height: auto;
max-width: 400px;
//overflow: auto;
display: flex;
flex-direction: column;
align-items: center;


.profile-image-section { 
  margin-bottom: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

  @media (max-width: 992px) {
    width: 100%;
  }
`,K9e=U(ue.img)`
  height: 100px;
  width: 100px;
  border-radius: 50%;
  margin-bottom: 20px;
  cursor: pointer;
  border: 1px solid ${({theme:t})=>t.colors.ui200};
  transition: 0.3s ease-in-out;

`,q9e=U.form`
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 16px;
`;U(ue.div)`
  background: none;
  border: none;
  color: #63c3d1;
  font-weight: bold;
  cursor: pointer;
  padding: 5px;
  border-radius: 25%;
  margin-bottom: 10px;
  transition: all 0.3s ease-in-out;

      ${({active:t})=>t&&`
       padding: 10px;
       border-radius: 0;
    background: #333;
    color: #fff;
    border: 1px solid #ddd;
    box-shadow: 0 0 2px #000;
    `}
  &:hover {
    text-decoration: underline;
  }
`;U(ue.div)`
  padding: 10px 20px;
  background-color: #63c3d1;
  border: none;
  border-radius: 5px;
  color: white;
  cursor: pointer;
  &:hover {
    background-color: #508a99;
  }
`;const Y9e=()=>{const{STATES:t}=jn(),[e,n]=v.useState(Ju);v.useState(!1);const{user:r}=t||{},i=()=>{document.getElementById("profileImageInput").click()},s=a=>{if(a.target.files&&a.target.files[0]){const l=new FileReader;l.onload=c=>{n(c.target.result)},l.readAsDataURL(a.target.files[0])}},o=a=>{a.preventDefault(),console.log("Edit Profile Opted")};return b.jsx(W9e,{children:b.jsxs(G9e,{children:[b.jsxs("div",{className:"profile-image-section",children:[b.jsx(K9e,{src:e,onClick:i}),b.jsx(Hi,{onClick:i,children:"Upload Profile Image"})]}),b.jsx(qt,{type:"file",id:"profileImageInput",style:{display:"none"},onChange:s}),b.jsxs(q9e,{onSubmit:o,children:[b.jsx(_t,{label:"Username",children:b.jsx(qt,{type:"text",id:"username",value:r==null?void 0:r.username,readOnly:!0})}),b.jsx(_t,{label:"Email",children:b.jsx(qt,{type:"email",id:"email",value:r==null?void 0:r.email,readOnly:!0})}),b.jsx(_t,{label:"Account type",children:b.jsx(qt,{type:"text",id:"type",value:r==null?void 0:r.role,readOnly:!0})}),b.jsx(on,{whileHover:{scale:1.05},whileTap:{scale:.95},children:"Edit Profile"})]})]})})};U.div`
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
  box-sizing: border-box;
`;U.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
`;U.label`
  font-weight: bold;
  color: #333;
  margin-right: 10px;
`;U(ue.div)`
  cursor: pointer;
  &:hover {
    opacity: 0.9;
  }
`;U.input.attrs({type:"color"})`
  padding: 5px;
  cursor: pointer;
`;U(ue.div)`
  cursor: pointer;
  &:hover {
    opacity: 0.9;
  }
`;const Q9e=U.div`
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
  box-sizing: border-box;
  max-width: 320px;
  margin: 0 auto;
`,X9e=U(ue.div)`
  padding: 10px 20px;
  background-color: #63c3d1;
  border: none;
  border-radius: 5px;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease-in-out;

  box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;

  &:hover {
    background-color: #508a99;
  }
`;U(X9e)`
  background-color: #e74c3c;
  &:hover {
    background-color: #c0392b;
  }
`;const Z9e=()=>{const t=()=>{console.log("Backing up user data...")},e=()=>{console.log("Exporting user data...")},n=()=>{window.confirm("Are you sure you want to delete your data? This action is irreversible.")&&console.log("Deleting user data...")};return b.jsxs(Q9e,{children:[b.jsx(Hi,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,children:"Backup My Data"}),b.jsx(Hi,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,children:"Export My Data"}),b.jsx(pA,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,children:"Delete My Data"})]})},J9e=U.input.attrs({type:"radio"})`
  height: 20px;
  width: 20px;
  border-radius: 50%;
  margin-bottom: 0px;
  accent-color: ${({theme:t})=>t.colors.primary500};
`,eBe=U.div`
  display: flex;
  align-items: center;
  gap: 8px;
  label {
    font-size: 14px;
    font-weight: 400;
    color: ${({theme:t})=>t.colors.ui800};
    margin-bottom: 0px;
  }
`;function Cd({label:t,onChange:e,checked:n}){return b.jsxs(eBe,{children:[b.jsx(J9e,{onChange:e,checked:n,id:"radio"}),b.jsx("label",{htmlFor:"radio",children:t})]})}const wie=U.select`
  background: ${({theme:t})=>t.colors.ui50};
  height: ${({theme:t})=>t.formHeightMd};
  padding: 0px 8px;
  border-radius: ${({theme:t})=>t.borderRadius.default};
  color: ${({theme:t})=>t.colors.ui800};
  margin: 0px;
  width: 100%;
  font-weight: 500;
  border: 1px solid ${({theme:t})=>t.colors.ui300};
  option {
    color: ${({theme:t})=>t.colors.ui600};
  }
`,tBe=U.div`
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
  box-sizing: border-box;
  max-width: 320px;
  margin: 0 auto;


  .radio-button-area { 
    display: flex;
    flex-direction: column;
    gap:4px;
  }

`;U.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
`;U.label`
  font-weight: bold;
  color: #333;
`;U.select`
  padding: 8px 10px;
  border: 1px solid #e0e0e0;
  border-radius: 5px;
  background-color: #fff;
  box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;
`;U(ue.div)`
  padding: 10px;
  cursor: pointer;
  border-radius: 5px;
  background-color: ${({isActive:t})=>t?"#63c3d1":"#aaa"};
  color: #fff;
  
  box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;

  &:hover {
    opacity: 0.9;
  }
`;const nBe=()=>{const{STATES:t}=jn(),[e,n]=v.useState("Everyone"),[r,i]=v.useState(!0),[s,o]=v.useState(!0),[a,l]=v.useState(!0),{user:c}=t||{},u=c==null?void 0:c.role;return console.log({accountType:u}),b.jsxs(tBe,{children:[b.jsxs(_t,{children:[b.jsx(Ui,{children:"Profile Visibility:"}),b.jsxs(wie,{value:e,onChange:d=>n(d.target.value),children:[b.jsx("option",{value:"Everyone",children:"Everyone"}),b.jsx("option",{value:"Only Verifiers",children:"Only Verifiers"}),b.jsx("option",{value:"No one",children:"No one"})]})]}),b.jsxs(_t,{children:[b.jsx(Ui,{children:"Activity Status:"}),b.jsxs("div",{className:"radio-button-area",children:[b.jsx(Cd,{onChange:()=>{i(!0)},label:"Visible",checked:r}),b.jsx(Cd,{onChange:()=>{i(!1)},label:"Hidden",checked:!r})]})]}),b.jsxs(_t,{children:[b.jsx(Ui,{children:"Transaction Privacy:"}),b.jsxs("div",{className:"radio-button-area",children:[b.jsx(Cd,{label:"Public",checked:s,onChange:()=>o(!0)}),b.jsx(Cd,{label:"Private",checked:!s,onChange:()=>o(!1)})]})]}),b.jsxs(_t,{children:[b.jsx(Ui,{children:"Data Upload Privacy:"}),b.jsxs("div",{className:"radio-button-area",children:[b.jsx(Cd,{label:"Public",checked:a,onChange:()=>l(!0)}),b.jsx(Cd,{label:"Private",checked:!a,onChange:()=>l(!1)})]})]})]})},rBe=U.div`
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
  box-sizing: border-box;
  max-width: 320px;
  margin: 0 auto;
`;U.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
`;U.label`
  font-weight: bold;
  color: #333;
`;U(ue.div)`
  padding: 10px;
  cursor: pointer;
  border-radius: 5px;
  background-color: ${({isActive:t})=>t?"#63c3d1":"#aaa"};
  color: #fff;

  &:hover {
    opacity: 0.9;
  }
`;U(ue.button)`
  padding: 10px 20px;
  border-radius: 5px;
  color: #fff;
  cursor: pointer;
  background-color: ${({danger:t})=>t?"#e74c3c":"#63c3d1"};

  box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;

  ${({active:t})=>t&&`
       padding: 10px;
       border-radius: 0;
    background: #333;
    color: #fff;
    border: 1px solid #ddd;
    box-shadow: 0 0 2px #000;
    `}
  &:hover {
    background-color: ${({danger:t})=>t?"#c0392b":"#508a99"};
  }
`;const iBe=U.form`
  width: 100%;
  display: flex;
  flex-direction: column;
  gap:24px;
`,sBe=()=>{const{STATES:t,ACTIONS:e}=jn(),[n,r]=v.useState(!1),[i,s]=v.useState(!1),[o,a]=v.useState(""),[l,c]=v.useState(""),[u,d]=v.useState(""),{user:f}=t||{},{logNotification:h}=e||{},p=()=>{s(!i)},m=()=>{a(""),c(""),d("")},g=E=>{E.preventDefault(),y()},y=async()=>{if(l===u)try{const E=await dte(ZS,f==null?void 0:f.email,o);E!=null&&E.user?(await n4e(E.user,l),h("alert","Password Changed!"),m()):h("error",`SignIn Error: Check Password for ${f==null?void 0:f.email}`)}catch(E){h("error",E.message)}else h("error","Passwords do not match")},x=()=>{r(!n)},S=()=>{console.log("Deactivating account...")},w=()=>{window.confirm("Are you sure you want to delete your account? This action is irreversible.")&&console.log("Deleting account...")};return b.jsxs(rBe,{children:[b.jsxs(Hi,{active:i,onClick:p,children:["Change Password"," ",b.jsx(jt,{icon:i?$ve:Hve})]}),i&&b.jsxs(iBe,{onSubmit:g,children:[b.jsx(_t,{label:"Current password",children:b.jsx(qt,{type:"password",id:"currentPassword",value:o,onChange:E=>a(E.target.value),required:!0})}),b.jsx(_t,{label:"New password",children:b.jsx(qt,{type:"password",id:"newPassword",value:l,onChange:E=>c(E.target.value),required:!0})}),b.jsx(_t,{label:"Confirm New Password",children:b.jsx(qt,{type:"password",id:"confirmNewPassword",value:u,onChange:E=>d(E.target.value),required:!0})}),b.jsx(on,{type:"submit",children:"Save Password Changes"})]}),b.jsx(Hi,{children:"Manage Email Settings"}),b.jsxs(_t,{children:[b.jsx(Ui,{children:"Two-Factor Authentication:"}),b.jsx(Hi,{isActive:n,onClick:x,children:n?"Enabled":"Disabled"})]}),b.jsx(pA,{danger:!0,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,children:"Deactivate Account"}),b.jsx(pA,{danger:!0,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:w,children:"Delete Account"})]})},oBe=()=>{var c;const{STATES:t,ACTIONS:e}=jn(),{user:n,settingsTab:r,settingsMenuOpen:i}=t||{},{handleSettingsTab:s,handleSettingsMenu:o}=e||{};if(!n||!i)return;const a=[{name:"Profile Settings",icon:Mve,component:b.jsx(Y9e,{})},{name:"Account Settings",icon:Uve,component:b.jsxs(b.Fragment,{children:[b.jsx(nBe,{}),b.jsx(Z9e,{}),b.jsx(sBe,{})]})}],l=(c=a.find(u=>u.name===r))==null?void 0:c.component;return b.jsxs(aBe,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[b.jsxs(lBe,{children:[b.jsx(cBe,{value:r,onChange:u=>s(u.target.value),children:a.map((u,d)=>b.jsx("option",{value:u.name,children:u.name},d))}),b.jsx(uBe,{icon:Ove})]}),b.jsxs(dBe,{role:"dialog","aria-labelledby":"settingsMenuTitle",children:[b.jsx(gBe,{icon:qve,color:"#fff",onClick:o,"aria-label":"Close settings menu",tabIndex:"0"}),b.jsx(fBe,{role:"tablist",children:a.map((u,d)=>b.jsxs(hBe,{active:u.name===r,onClick:()=>s(u.name),role:"tab",tabIndex:"0","aria-selected":u.name===r,children:[(u==null?void 0:u.icon)&&b.jsx(pBe,{icon:u.icon}),u.name]},d))}),b.jsx(mBe,{role:"tabpanel",children:l})]})]})},aBe=U(ue.div)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
`,lBe=U.div`
  display: none;

  @media (max-width: 768px) {
    display: flex;
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
  }
`,cBe=U.select`
  padding: 12px 40px 12px 15px;
  font-size: 16px;
  border-radius: 5px;
  border: 1px solid #ddd;
  appearance: none;
  background-color: #f7f7f7;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  position: relative;

  &:focus {
    outline: none;
    border-color: #63c3d1;
  }

  &:after {
    content: "";
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    z-index: -1;
  }
`,uBe=U(jt)`
  position: absolute;
  right: 15px;
  top: 50%;
  transform: translateY(-50%);
  color: #888;
`,dBe=U(ue.div)`
  display: flex;
  justify-content: center;
  box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
  width: 90%;
  height: 90%;
  backdrop-filter: blur(10px);
  border-radius: 10px;
  overflow: hidden;
  background: white;
  overflow-y: auto;
  @media (min-width: 769px) {
    max-width: 800px;
    max-height: 80vh;
  }
`,fBe=U.div`
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  border-right: 1px solid #ddd;
  overflow: hidden;

  @media (max-width: 768px) {
    display: none;
  }
`,hBe=U(ue.div)`
  // flex-grow: 1;
  text-align: center;
  cursor: pointer;
  padding: 15px;
  font-weight: 500;
  color: ${t=>t.active?"#fff":t.theme.colors.ui800};
  background-color: ${t=>t.active?t.theme.colors.primary500:"white"};
  display: flex;
  align-items: center;
  justify-content: center;

  &:hover {
  }

  @media (max-width: 768px) {
    // flex: 1 0 auto;
  }
`,pBe=U(jt)`
  margin-right: 10px;
`,mBe=U.div`
  padding: 40px 0px;
  overflow-y: auto;
  flex-grow: 1;

  @media (max-width: 768px) {
    padding: 15px;
  }
`,gBe=U(jt)`
  position: absolute;
  top: 16px;
  right: 24px;
  padding: 8px;
  font-size: 16px;
  color: ${t=>t.theme.colors.ui600};
  // background-color: #222;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  transition: 0.3s ease-in-out;

  &:hover {
    scale: 1.1;
    color: #f00;
  }
`;ps.register(CS,PS,rg,ree,see,tee);const vBe=U.div`
  display: ${({loading:t})=>t?"block":"none"};
  text-align: center;
  margin-top: 10px;
`,yBe=U.div`
  background-color: #fff;
  width: 100%;
  margin-top: 40px;

  canvas {
    width: 100% !important;
    height: 100% !important;
  }

  @media (min-width: 768px) {
  }
`,xBe=U.footer`
  text-align: left;
  color: ${({theme:t})=>t.colors.ui600};
  font-size: 14px;
  margin-top: 16px;
  font-weight: 500;
  font-size: 0.8em;
`,bBe=U.div`
  .header-text {
    width: 600px;
  }

  .form-section-wrapper {
    @media (min-width: 768px) {
      display: flex;
      gap: 40px;
    }
  }

  form {
    display: flex;
    flex-direction: column;
    gap: 16px;

    @media (min-width: 768px) {
      width: 250px;
    }
    .form-section-inputs {
      display: flex;

      gap: 8px;
      @media (min-width: 768px) {
        flex-direction: column;
      }
    }
    > div {
    }
  }
`,p2={"Corn Grain":{yields:{180:{N:120.6,P2O5:63,K2O:45,S:14.4,Mg:14.4},190:{N:127.3,P2O5:66.5,K2O:47.5,S:15.2,Mg:15.2},200:{N:134,P2O5:70,K2O:50,S:16,Mg:16},210:{N:140.7,P2O5:73.5,K2O:52.5,S:16.8,Mg:16.8},220:{N:147.4,P2O5:77,K2O:55,S:17.6,Mg:17.6},230:{N:154.1,P2O5:80.5,K2O:57.5,S:18.4,Mg:18.4},240:{N:160.8,P2O5:84,K2O:60,S:19.2,Mg:19.2},250:{N:167.5,P2O5:87.5,K2O:62.5,S:20,Mg:20},260:{N:174.2,P2O5:91,K2O:65,S:20.8,Mg:20.8},270:{N:180.9,P2O5:94.5,K2O:67.5,S:21.6,Mg:21.6},280:{N:187.6,P2O5:98,K2O:70,S:22.4,Mg:22.4},290:{N:194.3,P2O5:101.5,K2O:72.5,S:23.2,Mg:23.2},300:{N:201,P2O5:105,K2O:75,S:24,Mg:24}},unit:"bushels"},Alfalfa:{yields:{2:{N:102,P2O5:24,K2O:98,S:10.8,Mg:10.4},2.5:{N:127.5,P2O5:30,K2O:122.5,S:13.5,Mg:13},3:{N:153,P2O5:36,K2O:147,S:16.2,Mg:15.6},3.5:{N:178.5,P2O5:42,K2O:171.5,S:18.9,Mg:18.2},4:{N:204,P2O5:48,K2O:196,S:21.6,Mg:20.8},4.5:{N:229.5,P2O5:54,K2O:220.5,S:24.3,Mg:23.4},5:{N:255,P2O5:60,K2O:245,S:27,Mg:26},5.5:{N:280.5,P2O5:66,K2O:269.5,S:29.7,Mg:28.6},6:{N:306,P2O5:72,K2O:294,S:32.4,Mg:31.2},6.5:{N:331.5,P2O5:78,K2O:318.5,S:35.1,Mg:33.8},7:{N:357,P2O5:84,K2O:343,S:37.8,Mg:36.4},7.5:{N:382.5,P2O5:90,K2O:367.5,S:40.5,Mg:39},8:{N:408,P2O5:96,K2O:392,S:43.2,Mg:41.6}},unit:"tons"},"Corn Silage":{yields:{10:{N:97,P2O5:31,K2O:73,S:11,Mg:23},12:{N:116.4,P2O5:37.2,K2O:87.6,S:13.2,Mg:27.6},14:{N:135.8,P2O5:43.4,K2O:102.2,S:15.4,Mg:32.2},16:{N:155.2,P2O5:49.6,K2O:116.8,S:17.6,Mg:36.8},18:{N:174.6,P2O5:55.8,K2O:131.4,S:19.8,Mg:41.4},20:{N:194,P2O5:62,K2O:146,S:22,Mg:46},22:{N:213.4,P2O5:68.2,K2O:160.6,S:24.2,Mg:50.6},24:{N:232.8,P2O5:74.4,K2O:175.2,S:26.4,Mg:55.2},26:{N:252.2,P2O5:80.6,K2O:189.8,S:28.6,Mg:59.8},28:{N:271.6,P2O5:86.8,K2O:204.4,S:30.8,Mg:64.4},30:{N:291,P2O5:93,K2O:219,S:33,Mg:69},32:{N:310.4,P2O5:99.2,K2O:233.6,S:35.2,Mg:73.6},34:{N:329.8,P2O5:105.4,K2O:248.2,S:37.4,Mg:78.2}},unit:"tons"},Soybean:{yields:{40:{N:130,P2O5:29.2,K2O:48,S:7.2,Mg:7.2},45:{N:146.3,P2O5:32.9,K2O:54,S:8.1,Mg:8.1},50:{N:162.5,P2O5:36.5,K2O:60,S:9,Mg:9},55:{N:178.8,P2O5:40.2,K2O:66,S:9.9,Mg:9.9},60:{N:195,P2O5:43.8,K2O:72,S:10.8,Mg:10.8},65:{N:211.3,P2O5:47.5,K2O:78,S:11.7,Mg:11.7},70:{N:227.5,P2O5:51.1,K2O:84,S:12.6,Mg:12.6},75:{N:243.8,P2O5:54.8,K2O:90,S:13.5,Mg:13.5},80:{N:260,P2O5:58.4,K2O:96,S:14.4,Mg:14.4},85:{N:276.3,P2O5:62.1,K2O:102,S:15.3,Mg:15.3},90:{N:292.5,P2O5:65.7,K2O:108,S:16.2,Mg:16.2},95:{N:308.8,P2O5:69.4,K2O:114,S:17.1,Mg:17.1},100:{N:325,P2O5:73,K2O:120,S:18,Mg:18}},unit:"bushels"},Canola:{yields:{30:{N:48,P2O5:24,K2O:12,S:7.5,Mg:9},35:{N:56,P2O5:28,K2O:14,S:8.8,Mg:10.5},40:{N:64,P2O5:32,K2O:16,S:10,Mg:12},45:{N:72,P2O5:36,K2O:18,S:11.3,Mg:13.5},50:{N:80,P2O5:40,K2O:20,S:12.5,Mg:15},55:{N:88,P2O5:44,K2O:22,S:13.8,Mg:16.5},60:{N:96,P2O5:48,K2O:24,S:15,Mg:18},65:{N:104,P2O5:52,K2O:26,S:16.3,Mg:19.5},70:{N:112,P2O5:56,K2O:28,S:17.5,Mg:21},75:{N:120,P2O5:60,K2O:30,S:18.8,Mg:22.5},80:{N:128,P2O5:64,K2O:32,S:20,Mg:24},85:{N:136,P2O5:68,K2O:34,S:21.3,Mg:25.5},90:{N:144,P2O5:72,K2O:36,S:22.5,Mg:27}},unit:"bushels"},Cotton:{yields:{1:{N:32,P2O5:14,K2O:19,S:3.5,Mg:0},1.3:{N:40,P2O5:17.5,K2O:23.8,S:4.4,Mg:0},1.5:{N:48,P2O5:21,K2O:28.5,S:5.3,Mg:0},1.8:{N:56,P2O5:24.5,K2O:33.3,S:6.1,Mg:0},2:{N:64,P2O5:28,K2O:38,S:7,Mg:0},2.3:{N:72,P2O5:31.5,K2O:42.8,S:7.9,Mg:0},2.5:{N:80,P2O5:35,K2O:47.5,S:8.8,Mg:0},2.8:{N:88,P2O5:38.5,K2O:52.3,S:9.6,Mg:0},3:{N:96,P2O5:42,K2O:57,S:10.5,Mg:0},3.3:{N:104,P2O5:45.5,K2O:61.8,S:11.4,Mg:0},3.5:{N:112,P2O5:49,K2O:66.5,S:12.3,Mg:0},3.8:{N:120,P2O5:52.5,K2O:71.3,S:13.1,Mg:0},4:{N:128,P2O5:56,K2O:76,S:14,Mg:0}},unit:"bales"},"Spring Wheat":{yields:{40:{N:59.6,P2O5:22.8,K2O:13.2,S:4,Mg:6},45:{N:67.1,P2O5:25.7,K2O:14.9,S:4.5,Mg:6.8},50:{N:74.5,P2O5:28.5,K2O:16.5,S:5,Mg:7.5},55:{N:82,P2O5:31.4,K2O:18.2,S:5.5,Mg:8.3},60:{N:89.4,P2O5:34.2,K2O:19.8,S:6,Mg:9},65:{N:96.9,P2O5:37.1,K2O:21.5,S:6.5,Mg:9.8},70:{N:104.3,P2O5:39.9,K2O:23.1,S:7,Mg:10.5},75:{N:111.8,P2O5:42.8,K2O:24.8,S:7.5,Mg:11.3},80:{N:119.2,P2O5:45.6,K2O:26.4,S:8,Mg:12},85:{N:126.7,P2O5:48.5,K2O:28.1,S:8.5,Mg:12.8},90:{N:134.1,P2O5:51.3,K2O:29.7,S:9,Mg:13.5},95:{N:141.6,P2O5:54.2,K2O:31.4,S:9.5,Mg:14.3},100:{N:149,P2O5:57,K2O:33,S:10,Mg:15}},unit:"bushels"},"Winter Wheat":{yields:{40:{N:46.4,P2O5:19.2,K2O:11.6,S:4,Mg:6},45:{N:52.2,P2O5:21.6,K2O:13.1,S:4.5,Mg:6.8},50:{N:58,P2O5:24,K2O:14.5,S:5,Mg:7.5},55:{N:63.8,P2O5:26.4,K2O:16,S:5.5,Mg:8.3},60:{N:69.6,P2O5:28.8,K2O:17.4,S:6,Mg:9},65:{N:75.4,P2O5:31.2,K2O:18.9,S:6.5,Mg:9.8},70:{N:81.2,P2O5:33.6,K2O:20.3,S:7,Mg:10.5},75:{N:87,P2O5:36,K2O:21.8,S:7.5,Mg:11.3},80:{N:92.8,P2O5:38.4,K2O:23.2,S:8,Mg:12},85:{N:98.6,P2O5:40.8,K2O:24.7,S:8.5,Mg:12.8},90:{N:104.4,P2O5:43.2,K2O:26.1,S:9,Mg:13.5},95:{N:110.2,P2O5:45.6,K2O:27.6,S:9.5,Mg:14.3},100:{N:116,P2O5:48,K2O:29,S:10,Mg:15}},unit:"bushels"}},SBe=({isOpen:t,onClose:e})=>{const[n,r]=v.useState("Corn Grain"),[i,s]=v.useState(""),[o,a]=v.useState(!1),[l,c]=v.useState(null),[u,d]=v.useState(""),f=v.useRef(null);v.useEffect(()=>{const S={N:0,P2O5:0,K2O:0,S:0,Mg:0},w=(l==null?void 0:l.removalRates)||S;w&&x(w)},[l]);const h=(S,w)=>{let E=null;for(let T in S)T=parseFloat(T),(E===null||Math.abs(T-w)<Math.abs(E-w))&&(E=T);return S[E]},p=(S,w)=>{let E,T;switch(S){case"Alfalfa":E=2,T=8;break;case"Corn Grain":E=180,T=300;break;case"Corn Silage":E=10,T=34;break;case"Soybean":E=40,T=100;break;case"Canola":E=30,T=90;break;case"Cotton":E=1,T=4;break;case"Spring Wheat":E=40,T=100;break;case"Winter Wheat":E=40,T=100;break;default:return{valid:!1}}return{valid:w>=E&&w<=T,min:E,max:T}},m=(S,w)=>{if(p2.hasOwnProperty(S)){const E=p2[S];return{removalRates:h(E.yields,w),unit:E.unit}}return{}},g=async S=>{S.preventDefault();const w=parseFloat(i),E=p(n,w);if(!isNaN(w)&&E.valid){d(""),a(!0);try{setTimeout(()=>{const T=m(n,w);console.log("nutrientRemovalResult",T),c(T)},500)}catch(T){d(T.message)}finally{a(!1)}}else d(`Please enter a valid yield value within the accepted range for ${n} (${E.min} to ${E.max} ${E.unit}).`),c(null)},y=v.useRef(null),x=S=>{y.current&&y.current.destroy();const w=f.current.getContext("2d");y.current=new ps(w,{type:"bar",data:{labels:Object.keys(S),datasets:[{label:"Nutrient Removal",data:Object.values(S),backgroundColor:["#3b82f6","#e5e5e5","#6366f1","#eab308","#a3a3a3"]}]},options:{scales:{y:{beginAtZero:!0}}}})};return b.jsx("div",{children:b.jsx(bBe,{children:b.jsx(yv,{title:"Nutrient Removal Calculator",description:`Each harvest depletes soil nutrients, varying by crop and yield.
              Identify what's lost with our Nutrient Removal Calculator by
              selecting your crop and yield.`,children:b.jsxs("div",{className:"form-section-wrapper",children:[b.jsxs("form",{onSubmit:g,children:[b.jsxs("div",{className:"form-section-inputs",children:[b.jsxs(_t,{children:[b.jsx(Ui,{htmlFor:"cropSelect",children:"Crop type"}),b.jsx(wie,{id:"cropSelect",value:n,onChange:S=>r(S.target.value),children:Object.keys(p2).map((S,w)=>b.jsx("option",{value:S,children:S},w))})]}),b.jsxs(_t,{error:u,children:[b.jsx(Ui,{htmlFor:"yieldInput",children:"Yield per Acre"}),b.jsx(qt,{error:u,type:"number",id:"yieldInput",placeholder:"Enter yield",value:i,onChange:S=>s(S.target.value)})]})]}),b.jsx(on,{type:"submit",children:"Calculate"})]}),b.jsx(vBe,{loading:o,children:"Loading..."}),b.jsxs("div",{children:[b.jsx(yBe,{children:b.jsx("canvas",{ref:f})}),b.jsxs(xBe,{children:[b.jsxs("p",{children:["Nutrient removal coefficients based on IPNI Nutrient Removal Calculator (Jan. 2018) and various sources including Alabama Extension: ANR-449, CFI, and North Carolina: AG-439-16. For more details, visit"," ",b.jsx("a",{href:"http://www.ipni.net/article/IPNI-3346",children:"IPNI"}),"."]}),b.jsx("p",{children:"*Nutrient removal values may vary regionally. Use locally available data for accurate nutrient recommendations."})]})]})]})})})})};U(ue.div)`
  position: fixed;
  right: 1.5rem;
  top: 12rem;
  width: 5%;
  border-radius: 10px;
  box-shadow: 1px 2px 2px 0px #000;
  background-color: #134b5f;

  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 10px;
  font-size: 24px; // Icon size

  z-index: 1000; 
`;U(ue.div)`
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: ${yh.accent};
  color: white;
  border: 1px solid ${yh.accent};
  box-shadow: 0 2px 10px rgba(0, 0, 0, 1);
  z-index: 1000; 
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px; // Icon size
`;class m2 extends Error{constructor(e,n,r,i){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,this.data=i,this.internal=r}}const wBe="stream open failed",Eie="stream is offline",EBe="stream is waiting for data",IM="shutting down since this session is not allowed to view this stream",_ie="metadata indicates that webrtc playback contains bframes",Tie="response indicates unacceptable playback protocol",Cie=t=>t.message.toLowerCase().includes(wBe)||t.message.toLowerCase().includes(EBe)||t.message.toLowerCase().includes(Eie),kie=t=>t.message.toLowerCase().includes(IM),_Be=t=>t.message.toLowerCase().includes(_ie),TBe=t=>t.message.toLowerCase().includes(Tie),CBe=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let c=o;if(a){const u=(l==null?void 0:l.equalityFn)||Object.is;let d=o(r.getState());c=f=>{const h=o(f);if(!u(d,h)){const p=d;a(d=h,p)}},l!=null&&l.fireImmediately&&a(d,d)}return i(c)},t(e,n,r)},Pie=CBe;function AM(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:i=>n.removeItem(i)}}const x0=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return x0(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return x0(r)(n)}}}},kBe=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:g=>g,version:0,merge:(g,y)=>({...y,...g}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...g)},r,i);const u=x0(s.serialize),d=()=>{const g=s.partialize({...r()});let y;const x=u({state:g,version:s.version}).then(S=>c.setItem(s.name,S)).catch(S=>{y=S});if(y)throw y;return x},f=i.setState;i.setState=(g,y)=>{f(g,y),d()};const h=t((...g)=>{n(...g),d()},r,i);let p;const m=()=>{var g;if(!c)return;o=!1,a.forEach(x=>x(r()));const y=((g=s.onRehydrateStorage)==null?void 0:g.call(s,r()))||void 0;return x0(c.getItem.bind(c))(s.name).then(x=>{if(x)return s.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return s.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var S;return p=s.merge(x,(S=r())!=null?S:h),n(p,!0),d()}).then(()=>{y==null||y(p,void 0),o=!0,l.forEach(x=>x(p))}).catch(x=>{y==null||y(void 0,x)})};return i.persist={setOptions:g=>{s={...s,...g},g.getStorage&&(c=g.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(l.add(g),()=>{l.delete(g)})},m(),p||h},PBe=(t,e)=>(n,r,i)=>{let s={storage:AM(()=>localStorage),partialize:m=>m,version:0,merge:(m,g)=>({...g,...m}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...m)},r,i);const u=()=>{const m=s.partialize({...r()});return c.setItem(s.name,{state:m,version:s.version})},d=i.setState;i.setState=(m,g)=>{d(m,g),u()};const f=t((...m)=>{n(...m),u()},r,i);i.getInitialState=()=>f;let h;const p=()=>{var m,g;if(!c)return;o=!1,a.forEach(x=>{var S;return x((S=r())!=null?S:f)});const y=((g=s.onRehydrateStorage)==null?void 0:g.call(s,(m=r())!=null?m:f))||void 0;return x0(c.getItem.bind(c))(s.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return[!0,s.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var S;const[w,E]=x;if(h=s.merge(E,(S=r())!=null?S:f),n(h,!0),w)return u()}).then(()=>{y==null||y(h,void 0),h=r(),o=!0,l.forEach(x=>x(h))}).catch(x=>{y==null||y(void 0,x)})};return i.persist={setOptions:m=>{s={...s,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(l.add(m),()=>{l.delete(m)})},s.skipHydration||p(),h||f},IBe=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?kBe(t,e):PBe(t,e),Iie=IBe,xB=t=>{let e;const n=new Set,r=(u,d)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const h=e;e=d??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(p=>p(e,h))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{n.clear()}},c=e=t(r,i,l);return l},Aie=t=>t?xB(t):xB,ABe={getItem:t=>"",setItem:(t,e)=>{},removeItem:t=>{}};function LM({storage:t=ABe,key:e="livepeer"}){return{getItem:async(n,r=null)=>{try{const i=await t.getItem(`${e}.${n}`);return i?JSON.parse(i):r}catch(i){return console.warn(i),r}},setItem:async(n,r)=>{if(r===null)await t.removeItem(`${e}.${n}`);else try{await t.setItem(`${e}.${n}`,JSON.stringify(r))}catch(i){console.error(i)}},removeItem:async n=>t.removeItem(`${e}.${n}`)}}const LBe="livepeer-store";class RBe{constructor({provider:e,storage:n=LM({})}){this.store=Aie(Pie(Iie(()=>({provider:e()}),{name:LBe,storage:AM(()=>n),partialize:r=>({}),version:1}))),this.config={provider:e,storage:n},this.storage=n}get error(){return this.store.getState().error}get provider(){return this.store.getState().provider}get subscribe(){return this.store.subscribe}setState(e){const n=typeof e=="function"?e(this.store.getState()):e;this.store.setState(n,!0)}clearState(){this.setState(e=>({...e,data:void 0,error:void 0}))}async destroy(){this.clearState(),this.store.destroy()}}let yL=null;function OBe(t){const e=new RBe(t);return yL=e,e}function Lie(){if(!yL)throw new Error("No livepeer client found.");return yL}const DBe="@livepeer/core@1.9.2",MBe="@livepeer/react@2.9.2",$Be="@livepeer/react-native@1.9.2",os={core:DBe,react:MBe,reactNative:$Be};function ju(){return Lie().provider}const NBe=[{name:"720p",bitrate:2e6,fps:30,width:1280,height:720},{name:"480p",bitrate:1e6,fps:30,width:854,height:480},{name:"360p",bitrate:5e5,fps:30,width:640,height:360}],FBe={name:"Livepeer Studio",baseUrl:"https://livepeer.studio/api",webrtcIngestBaseUrl:"https://webrtc.livepeer.studio/webrtc"};function jBe(t){const e=Lie(),n=async()=>t(ju());return e.subscribe(({provider:i})=>i,n)}function BBe(t){return ju().createAsset(t)}function UBe(t){return ju().getPlaybackInfo(t)}function VBe(t){return ju().createClip(t)}function zBe(t){return ju().createStream({...t,profiles:(t==null?void 0:t.profiles)??NBe})}const Rie=(t,...e)=>{try{const n=Object.keys(t);return e.filter(r=>n.includes(r)).reduce((r,i)=>({...r,[i]:t[i]}),{})}catch{throw new Error("Could not pick keys for object.")}};function Oa(t,...e){try{return Object.keys(t).filter(r=>!e.some(i=>String(i)===r)).reduce((r,i)=>({...r,[i]:t[i]}),{})}catch{throw new Error("Could not omit keys for object.")}}const g2=t=>{var e;for(const n of Object.keys(bB))if((e=bB[n])!=null&&e.some(r=>r===t))return n;return null},bB={"application/mp4":["mp4s","m4p"],"application/ogg":["ogx"],"application/vnd.apple.mpegurl":["m3u8"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.dts":["dts"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"audio/xm":["xm"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/vp8":["vp8"],"video/webm":["webm"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"]},SB=/\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,wB=/\.(mp4|ogv|webm|mov|m4v|avi|m3u8)($|\?)/i,HBe=/data:video/i,EB=/\.(m3u8)($|\?)/i,WBe=/(webrtc|sdp)/i,GBe=/data:(.+?);base64/,Oie=t=>{var n,r,i;const e=t.match(GBe);return WBe.test(t)?{type:"webrtc",src:t,mime:"video/h264"}:EB.test(t)?{type:"hls",src:t,mime:g2(((n=EB.exec(t))==null?void 0:n[1])??"")}:wB.test(t)?{type:"video",src:t,mime:g2(((r=wB.exec(t))==null?void 0:r[1])??"")}:SB.test(t)?{type:"audio",src:t,mime:g2(((i=SB.exec(t))==null?void 0:i[1])??"")}:HBe.test(t)?{type:"video",src:t,mime:e?e[1]:"video/mp4"}:null},_B=5e3,RM=1,KBe=3e3,qBe="hls",YBe="webrtc",QBe="recordings",XBe=t=>{const n=new URL(t).pathname.split("/"),r=n.includes(qBe),i=n.includes(YBe),s=n.includes(QBe);return i?n==null?void 0:n[((n==null?void 0:n.length)??0)-1]:s||r?(n==null?void 0:n[((n==null?void 0:n.length)??0)-2])??null:null},ZBe=["_lastInteraction","_requestSeekDiff","_requestedFullscreenLastTime","_requestedPictureInPictureLastTime","_requestedPlayPauseLastTime","_requestedRangeToSeekTo","_playLastTime","_setVolume","_updateBuffered","_updateLastInteraction","_updateMediaStream","_updateSource","setIsVolumeChangeSupported","setError","setWebsocketMetadata","setStalled","setWaiting","onProgress","onDurationChange","onPlay","onPause","onClipCreated","onClipError","onClipStarted","_updatePlaybackOffsetMs"],cw=t=>Oa(t,...ZBe),Kf=t=>t&&!isNaN(t)&&isFinite(t)?t:0,v2=(t,e)=>Math.min(Math.max(0,Kf(t)),Kf(e)?Kf(e)-.01:0),y2=t=>Math.min(Math.max(0,Kf(t)),1),Die=({element:t,device:e,storage:n,mediaProps:r,opts:i})=>{const s=Aie(Pie(Iie((o,a)=>({_element:t??null,canPlay:!1,hidden:!1,live:!1,ingestUrl:r.ingestUrl??null,playbackId:r.playbackId??null,src:null,autoplay:!!r.autoPlay,muted:!!r.muted,priority:!!r.priority,preload:r.priority?"full":"none",viewerId:r.viewerId??"",creatorId:r.creatorId??"",clipLength:r.clipLength,onClipCreated:r.onClipCreated,onClipError:r.onClipError,onClipStarted:r.onClipStarted,playbackOffsetMs:0,deviceIds:null,hasPlayed:!1,playing:!1,fullscreen:!1,pictureInPicture:!1,waiting:!1,stalled:!1,loading:!1,playbackRate:1,_mediaStream:null,video:null,device:e,progress:0,duration:0,buffered:0,volume:y2((i==null?void 0:i.defaultVolume)??RM),isVolumeChangeSupported:!1,_lastInteraction:Date.now(),_requestedRangeToSeekTo:0,_requestedClipLastTime:Date.now(),_requestedFullscreenLastTime:Date.now(),_requestedPictureInPictureLastTime:Date.now(),_requestedPlayPauseLastTime:0,_playLastTime:0,_updateMediaStream:(l,c)=>o(({deviceIds:u})=>({_mediaStream:l,...c!=null&&c.video?{video:!0}:{},deviceIds:{...u,...c!=null&&c.audio?{audio:c.audio}:{},...c!=null&&c.video?{video:c.video}:{}}})),setHidden:l=>o(({playing:c})=>({hidden:c?l:!1})),_updateLastInteraction:()=>o(()=>({_lastInteraction:Date.now(),hidden:!1})),_updateSource:l=>o(({playbackId:c})=>({src:Oie(l),...c?{}:{playbackId:XBe(l)}})),_updatePlaybackOffsetMs:l=>o(()=>({playbackOffsetMs:l})),onCanPlay:()=>o(()=>({canPlay:!0,loading:!1})),onPlay:()=>o(()=>({playing:!0,hasPlayed:!0,stalled:!1,waiting:!1,_playLastTime:Date.now()})),onPause:()=>o(()=>({playing:!1,hidden:!1,stalled:!1,waiting:!1})),togglePlay:l=>{const{hidden:c,setHidden:u,device:d}=s.getState();!l&&c&&d.isMobile?u(!1):o(()=>({_requestedPlayPauseLastTime:Date.now(),_lastInteraction:Date.now()}))},toggleVideo:()=>o(({video:l})=>({video:!l})),onProgress:l=>o(()=>({progress:Kf(l),waiting:!1,stalled:!1})),requestSeek:l=>o(({duration:c})=>({_requestedRangeToSeekTo:v2(l,c),progress:v2(l,c)})),onDurationChange:l=>o(({live:c})=>({duration:l,live:l===Number.POSITIVE_INFINITY?!0:c})),setWebsocketMetadata:l=>o(()=>({metadata:l})),_updateBuffered:l=>o(()=>({buffered:l})),_requestSeekDiff:l=>o(({progress:c,duration:u})=>({_requestedRangeToSeekTo:v2(Kf(c)+l/1e3,u)})),requestSeekBack:(l=_B)=>a()._requestSeekDiff(-l),requestSeekForward:(l=_B)=>a()._requestSeekDiff(l),setSize:l=>o(()=>({size:l})),setWaiting:l=>o(()=>({waiting:l})),setError:l=>o(()=>({error:l})),setStalled:l=>o(()=>({stalled:l})),setLoading:l=>o(()=>({loading:l})),setFullscreen:l=>o(()=>({fullscreen:l})),requestToggleFullscreen:()=>o(()=>({_requestedFullscreenLastTime:Date.now()})),requestClip:()=>o(()=>({_requestedClipLastTime:Date.now()})),setPictureInPicture:l=>o(()=>({pictureInPicture:l})),requestTogglePictureInPicture:()=>o(()=>({_requestedPictureInPictureLastTime:Date.now()})),setLive:l=>o(()=>({live:l})),requestVolume:l=>o(({volume:c})=>({volume:l===0?c:y2(l),muted:l===0})),_setVolume:l=>o(()=>({volume:y2(l)})),requestToggleMute:()=>o(({muted:l})=>({muted:!l})),setIsVolumeChangeSupported:l=>o(()=>({isVolumeChangeSupported:l}))}),{name:"livepeer-player",version:1,partialize:({volume:o,playbackRate:a})=>({volume:o,playbackRate:a}),storage:AM(()=>n)})));return s},TB=t=>{if(typeof t=="object"&&t!==null){if(typeof Object.getPrototypeOf=="function"){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}return Object.prototype.toString.call(t)==="[object Object]"}return!1},Il=(...t)=>t.reduce((e,n)=>{if(Array.isArray(n))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(n).forEach(r=>{["__proto__","constructor","prototype"].includes(r)||(Array.isArray(e[r])&&Array.isArray(n[r])?e[r]=Il.options.mergeArrays?Array.from(new Set(e[r].concat(n[r]))):n[r]:TB(e[r])&&TB(n[r])?e[r]=Il(e[r],n[r]):e[r]=n[r])}),e},{}),Mie={mergeArrays:!0};Il.options=Mie;Il.withOptions=(t,...e)=>{Il.options={mergeArrays:!0,...t};const n=Il(...e);return Il.options=Mie,n};const x2=Il;var xL={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof io<"u"&&io,r=function(){function s(){this.fetch=!1,this.DOMException=n.DOMException}return s.prototype=n,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof io<"u"&&io||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(R){return R&&DataView.prototype.isPrototypeOf(R)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(R){return R&&u.indexOf(Object.prototype.toString.call(R))>-1};function f(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R==="")throw new TypeError('Invalid character in header field name: "'+R+'"');return R.toLowerCase()}function h(R){return typeof R!="string"&&(R=String(R)),R}function p(R){var C={next:function(){var P=R.shift();return{done:P===void 0,value:P}}};return l.iterable&&(C[Symbol.iterator]=function(){return C}),C}function m(R){this.map={},R instanceof m?R.forEach(function(C,P){this.append(P,C)},this):Array.isArray(R)?R.forEach(function(C){if(C.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+C.length);this.append(C[0],C[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(C){this.append(C,R[C])},this)}m.prototype.append=function(R,C){R=f(R),C=h(C);var P=this.map[R];this.map[R]=P?P+", "+C:C},m.prototype.delete=function(R){delete this.map[f(R)]},m.prototype.get=function(R){return R=f(R),this.has(R)?this.map[R]:null},m.prototype.has=function(R){return this.map.hasOwnProperty(f(R))},m.prototype.set=function(R,C){this.map[f(R)]=h(C)},m.prototype.forEach=function(R,C){for(var P in this.map)this.map.hasOwnProperty(P)&&R.call(C,this.map[P],P,this)},m.prototype.keys=function(){var R=[];return this.forEach(function(C,P){R.push(P)}),p(R)},m.prototype.values=function(){var R=[];return this.forEach(function(C){R.push(C)}),p(R)},m.prototype.entries=function(){var R=[];return this.forEach(function(C,P){R.push([P,C])}),p(R)},l.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function g(R){if(!R._noBody){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}}function y(R){return new Promise(function(C,P){R.onload=function(){C(R.result)},R.onerror=function(){P(R.error)}})}function x(R){var C=new FileReader,P=y(C);return C.readAsArrayBuffer(R),P}function S(R){var C=new FileReader,P=y(C),k=/charset=([A-Za-z0-9_-]+)/.exec(R.type),M=k?k[1]:"utf-8";return C.readAsText(R,M),P}function w(R){for(var C=new Uint8Array(R),P=new Array(C.length),k=0;k<C.length;k++)P[k]=String.fromCharCode(C[k]);return P.join("")}function E(R){if(R.slice)return R.slice(0);var C=new Uint8Array(R.byteLength);return C.set(new Uint8Array(R)),C.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(R){this.bodyUsed=this.bodyUsed,this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:l.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:l.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():l.arrayBuffer&&l.blob&&c(R)?(this._bodyArrayBuffer=E(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||d(R))?this._bodyArrayBuffer=E(R):this._bodyText=R=Object.prototype.toString.call(R):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var R=g(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=g(this);return R||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var R=g(this);if(R)return R;if(this._bodyBlob)return S(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var _=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function I(R){var C=R.toUpperCase();return _.indexOf(C)>-1?C:R}function A(R,C){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');C=C||{};var P=C.body;if(R instanceof A){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,C.headers||(this.headers=new m(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!P&&R._bodyInit!=null&&(P=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new m(C.headers)),this.method=I(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal||function(){if("AbortController"in a){var B=new AbortController;return B.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(C.cache==="no-store"||C.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}A.prototype.clone=function(){return new A(this,{body:this._bodyInit})};function L(R){var C=new FormData;return R.trim().split("&").forEach(function(P){if(P){var k=P.split("="),M=k.shift().replace(/\+/g," "),B=k.join("=").replace(/\+/g," ");C.append(decodeURIComponent(M),decodeURIComponent(B))}}),C}function j(R){var C=new m,P=R.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var M=k.split(":"),B=M.shift().trim();if(B){var N=M.join(":").trim();try{C.append(B,N)}catch(V){console.warn("Response "+V.message)}}}),C}T.call(A.prototype);function D(R,C){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=C.statusText===void 0?"":""+C.statusText,this.headers=new m(C.headers),this.url=C.url||"",this._initBody(R)}T.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},D.error=function(){var R=new D(null,{status:200,statusText:""});return R.ok=!1,R.status=0,R.type="error",R};var O=[301,302,303,307,308];D.redirect=function(R,C){if(O.indexOf(C)===-1)throw new RangeError("Invalid status code");return new D(null,{status:C,headers:{location:R}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(C,P){this.message=C,this.name=P;var k=Error(C);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function $(R,C){return new Promise(function(P,k){var M=new A(R,C);if(M.signal&&M.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var B=new XMLHttpRequest;function N(){B.abort()}B.onload=function(){var W={statusText:B.statusText,headers:j(B.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(B.status<200||B.status>599)?W.status=200:W.status=B.status,W.url="responseURL"in B?B.responseURL:W.headers.get("X-Request-URL");var z="response"in B?B.response:B.responseText;setTimeout(function(){P(new D(z,W))},0)},B.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},B.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},B.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function V(W){try{return W===""&&a.location.href?a.location.href:W}catch{return W}}if(B.open(M.method,V(M.url),!0),M.credentials==="include"?B.withCredentials=!0:M.credentials==="omit"&&(B.withCredentials=!1),"responseType"in B&&(l.blob?B.responseType="blob":l.arrayBuffer&&(B.responseType="arraybuffer")),C&&typeof C.headers=="object"&&!(C.headers instanceof m||a.Headers&&C.headers instanceof a.Headers)){var H=[];Object.getOwnPropertyNames(C.headers).forEach(function(W){H.push(f(W)),B.setRequestHeader(W,h(C.headers[W]))}),M.headers.forEach(function(W,z){H.indexOf(z)===-1&&B.setRequestHeader(z,W)})}else M.headers.forEach(function(W,z){B.setRequestHeader(z,W)});M.signal&&(M.signal.addEventListener("abort",N),B.onreadystatechange=function(){B.readyState===4&&M.signal.removeEventListener("abort",N)}),B.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return $.polyfill=!0,a.fetch||(a.fetch=$,a.Headers=m,a.Request=A,a.Response=D),o.Headers=m,o.Request=A,o.Response=D,o.fetch=$,o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=n.fetch?n:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(xL,xL.exports);var JBe=xL.exports;const qf=Ku(JBe),eUe=["livepeer","livepeercdn","lp-playback"],tUe=async(t,e,n)=>{var r,i;try{const o=new URL(e).host.split("."),a=eUe.includes((o==null?void 0:o[o.length-2])??""),l=(o==null?void 0:o[(o==null?void 0:o.length)-1])??null,c=l==="com"||l==="studio"?"studio":l==="fun"?"fun:20443":l==="monster"?"monster":null;if(t&&a&&c)try{const u=await qf(`https://playback.livepeer.${c}/json_video+${t}.js`),d=(r=u==null?void 0:u.url)==null?void 0:r.replace("https:","wss:"),f=d?new URL(d):null;return f&&n&&f.searchParams.set("tkn",n),((i=f==null?void 0:f.toString)==null?void 0:i.call(f))??null}catch(u){console.log("Could not fetch metrics reporting URL.",u)}}catch(s){return console.error(s==null?void 0:s.message),null}return null};class nUe{constructor(e){ce(this,"active",!1);ce(this,"values",[]);ce(this,"score",null);ce(this,"averagingSteps",20);this.store=e}init(){this.active||(this.values=[],this.score=null,this.active=!0)}reset(){this.active?this.values=[]:this.init()}destroy(){this.active&&(this.values=[],this.score=null,this.active=!1)}calculateScore(){if(this.active){const e=this.values.length>0?this.values[this.values.length-1]:void 0,n={clockTime:Date.now()*.001,mediaTime:this.store.getState().progress,score:e?this.valueToScore(e):0};if(this.values.push(n),this.values.length<2)return null;const r=this.values[0];if(r!==void 0){const i=this.valueToScore(r,n);return this.values.length>this.averagingSteps&&this.values.shift(),this.score=Math.max(i,n.score),Math.round(this.score*10)/10}}return null}valueToScore(e,n){var i,s,o;const r=((o=(s=(i=this==null?void 0:this.store)==null?void 0:i.getState)==null?void 0:s.call(i))==null?void 0:o.playbackRate)??1;return((n==null?void 0:n.mediaTime)??this.store.getState().progress-e.mediaTime)/((n==null?void 0:n.clockTime)??Date.now()*.001-e.clockTime)/r}}class b2{constructor(){ce(this,"totalTime",0);ce(this,"countStarts",0);ce(this,"startTime",0)}start(){this.startTime=Date.now(),this.countStarts++}stop(){this.totalTime+=this.startTime>0?Date.now()-this.startTime:0,this.startTime=0}getTotalTime(){return this.totalTime+=this.startTime>0?Date.now()-this.startTime:0,this.startTime=this.startTime>0?Date.now():0,this.totalTime}getCountStarts(){return this.countStarts}}function rUe(){try{return typeof window<"u"&&window.self!==window.top}catch{return!0}}class iUe{constructor(e){ce(this,"requestedPlayTime",0);ce(this,"firstFrameTime",0);ce(this,"retryCount",0);ce(this,"connected",!1);ce(this,"previousMetrics",null);ce(this,"timeWaiting",new b2);ce(this,"timeStalled",new b2);ce(this,"timeUnpaused",new b2);var a,l,c,u,d;const n=e.getState();this.store=e;const r=typeof window<"u"?((a=window==null?void 0:window.location)==null?void 0:a.href)??"":"",i=rUe()&&typeof document<"u"&&(document==null?void 0:document.referrer)||r,s=((l=n==null?void 0:n.src)==null?void 0:l.type)??"unknown",o=(n==null?void 0:n.device.version)??"unknown";this.currentMetrics={autoplay:n.priority&&n.autoplay?"autoplay":n.preload==="full"?"preload-full":n.preload==="metadata"?"preload-metadata":"standard",duration:null,firstPlayback:0,nError:0,nStalled:0,nWaiting:0,offset:0,pageUrl:i,playbackScore:null,player:`${s}-${o}`,sourceType:((c=n==null?void 0:n.src)==null?void 0:c.mime)??"unknown",sourceUrl:((u=n==null?void 0:n.src)==null?void 0:u.src)??null,playerHeight:null,playerWidth:null,preloadTime:0,timeStalled:0,timeUnpaused:0,timeWaiting:0,ttff:0,uid:n.viewerId,userAgent:String(((d=n==null?void 0:n.device)==null?void 0:d.userAgent)??"").replace(/\\|"/gm,""),videoHeight:null,videoWidth:null},this.destroy=e.subscribe((f,h)=>{var p,m,g,y,x;if(this.requestedPlayTime===0&&f._playLastTime!==0&&(this.requestedPlayTime=Math.max(f._playLastTime-S2,0)),((p=f.src)==null?void 0:p.src)!==((m=h.src)==null?void 0:m.src)){const S=((g=f==null?void 0:f.src)==null?void 0:g.type)??"unknown",w=(f==null?void 0:f.device.version)??"unknown";this.currentMetrics.player=`${S}-${w}`,this.currentMetrics.sourceType=((y=f.src)==null?void 0:y.mime)??"unknown",this.currentMetrics.sourceUrl=((x=f.src)==null?void 0:x.src)??null}f.playing!==h.playing&&(f.playing?(this.timeStalled.stop(),this.timeWaiting.stop(),this.timeUnpaused.start()):this.timeUnpaused.stop()),f.progress!==h.progress&&!this.timeUnpaused.startTime&&(this.timeStalled.stop(),this.timeWaiting.stop(),this.timeUnpaused.start()),f.stalled!==h.stalled&&f.stalled&&(this.timeStalled.start(),this.timeUnpaused.stop()),f.waiting!==h.waiting&&f.waiting&&(this.timeWaiting.start(),this.timeUnpaused.stop())})}addError(e){this.currentMetrics.nError++,this.currentMetrics.lastError=e}getFirstPlayback(){return this.currentMetrics.firstPlayback}setFirstPlayback(){this.currentMetrics.firstPlayback=Date.now()-S2}getFirstFrameTime(){return this.firstFrameTime}setFirstFrameTime(){this.firstFrameTime=Date.now()-S2}setPlaybackScore(e){this.currentMetrics.playbackScore=e}setConnected(e){this.connected=e}getMetrics(){var r,i,s,o,a,l,c,u;const e={...this.currentMetrics,playerHeight:((i=(r=this.store.getState().size)==null?void 0:r.container)==null?void 0:i.height)??null,playerWidth:((o=(s=this.store.getState().size)==null?void 0:s.container)==null?void 0:o.width)??null,videoWidth:((l=(a=this.store.getState().size)==null?void 0:a.media)==null?void 0:l.width)??null,videoHeight:((u=(c=this.store.getState().size)==null?void 0:c.media)==null?void 0:u.height)??null,duration:this.store.getState().duration,nWaiting:this.timeWaiting.getCountStarts(),nStalled:this.timeStalled.getCountStarts(),timeWaiting:this.timeWaiting.getTotalTime(),timeStalled:this.timeStalled.getTotalTime(),timeUnpaused:this.timeUnpaused.getTotalTime(),offset:this.store.getState().playbackOffsetMs??0,preloadTime:this.requestedPlayTime,ttff:this.firstFrameTime>0&&this.requestedPlayTime>0?Math.max(this.firstFrameTime-this.requestedPlayTime,0):0},n=this.previousMetrics;return this.previousMetrics=e,{current:e,previous:n}}}const sUe=()=>{try{return Math.random().toString(16).substring(2)}catch{}return"none"},oUe=sUe(),S2=Date.now();function aUe(t,e){const n={metrics:null,destroy:()=>{}};if(!t)return n;if(!WebSocket)return console.log("Environment does not support WebSocket"),n;let r,i=null,s=!0;const o=new iUe(t),a=new nUe(t),l=()=>{var m;if(!s||!r)return;const d=a.calculateScore();d!==null&&o.setPlaybackScore(d);const f=o.getMetrics(),h={};let p;for(p in f.current){const g=f.current[p];g!==((m=f==null?void 0:f.previous)==null?void 0:m[p])&&(h[p]=g)}Object.keys(h).length>0&&lUe(r,h),i=setTimeout(function(){l()},1e3)};let c=null;const u=t.subscribe(d=>{var f;if(d!=null&&d.playbackId&&(d==null?void 0:d.playbackId)!==c&&((f=d==null?void 0:d.src)!=null&&f.src)&&d._element){const h=d.playbackId,m=d.src.src;c=h;try{const g=async(y=0)=>{const x=await tUe(h,m,oUe);if(x){const S=new WebSocket(x);return S.addEventListener("open",()=>{l()}),S.addEventListener("message",w=>{var E,T,_,I,A,L;try{if(w!=null&&w.data){const j=JSON.parse(w.data);j!=null&&j.error&&t.getState().live&&(e==null||e(new Error(j.error))),((E=j==null?void 0:j.meta)!=null&&E.bframes||(T=j==null?void 0:j.meta)!=null&&T.buffer_window)&&t.getState().setWebsocketMetadata({bframes:(_=j==null?void 0:j.meta)!=null&&_.bframes?Number((I=j==null?void 0:j.meta)==null?void 0:I.bframes):void 0,bufferWindow:(A=j==null?void 0:j.meta)!=null&&A.buffer_window?Number((L=j==null?void 0:j.meta)==null?void 0:L.buffer_window):void 0})}}catch{console.warn("Failed to parse metadata from websocket.")}}),S.addEventListener("close",w=>{i&&(clearTimeout(i),i=null,s=!1),w.code!==3077&&setTimeout(function(){g(y++).then(E=>{r=E})},Math.pow(2,y)*1e3)}),S}return null};g().then(y=>{r=y}).catch(y=>{console.error(y),e==null||e(y)})}catch(g){console.error(g)}}});try{const d=t.subscribe((p,m)=>{p.playing!==m.playing&&o.getFirstPlayback()===0&&o.setFirstPlayback(),p.progress!==m.progress&&o.getFirstFrameTime()===0&&o.setFirstFrameTime(),p.error!==m.error&&p.error&&o.addError(p.error??"unknown")}),f=t.subscribe((p,m)=>{(p.playing!==m.playing&&p.playing||p.loading!==m.loading&&p.loading)&&a.init(),p._requestedRangeToSeekTo!==m._requestedRangeToSeekTo&&a.reset(),p.playing!==m.playing&&!p.playing&&a.destroy()});return{metrics:o,destroy:()=>{var p,m;s=!1,u==null||u(),f==null||f(),d==null||d(),(p=a==null?void 0:a.destroy)==null||p.call(a),(m=o==null?void 0:o.destroy)==null||m.call(o),i&&clearTimeout(i),r==null||r.close(3077)}}}catch(d){console.error(d)}return n}function lUe(t,e){t.readyState===t.OPEN&&t.send(JSON.stringify(e))}const dn=[{key:"16to9",value:"16 / 9",numeric:16/9},{key:"1to1",value:"1 / 1",numeric:1/1},{key:"9to16",value:"9 / 16",numeric:9/16},{key:"4to5",value:"4 / 5",numeric:4/5},{key:"21to9",value:"21 / 9",numeric:21/9}],$ie="3.7.8",cUe=$ie,up=typeof Buffer=="function",CB=typeof TextDecoder=="function"?new TextDecoder:void 0,kB=typeof TextEncoder=="function"?new TextEncoder:void 0,uUe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Cm=Array.prototype.slice.call(uUe),n1=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(Cm),dUe=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,zn=String.fromCharCode.bind(String),PB=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),Nie=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),Fie=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),jie=t=>{let e,n,r,i,s="";const o=t.length%3;for(let a=0;a<t.length;){if((n=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(i=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|i,s+=Cm[e>>18&63]+Cm[e>>12&63]+Cm[e>>6&63]+Cm[e&63]}return o?s.slice(0,o-3)+"===".substring(o):s},OM=typeof btoa=="function"?t=>btoa(t):up?t=>Buffer.from(t,"binary").toString("base64"):jie,bL=up?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,i=t.length;r<i;r+=4096)n.push(zn.apply(null,t.subarray(r,r+4096)));return OM(n.join(""))},Vx=(t,e=!1)=>e?Nie(bL(t)):bL(t),fUe=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?zn(192|e>>>6)+zn(128|e&63):zn(224|e>>>12&15)+zn(128|e>>>6&63)+zn(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return zn(240|e>>>18&7)+zn(128|e>>>12&63)+zn(128|e>>>6&63)+zn(128|e&63)}},hUe=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Bie=t=>t.replace(hUe,fUe),IB=up?t=>Buffer.from(t,"utf8").toString("base64"):kB?t=>bL(kB.encode(t)):t=>OM(Bie(t)),Yf=(t,e=!1)=>e?Nie(IB(t)):IB(t),AB=t=>Yf(t,!0),pUe=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,mUe=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return zn((n>>>10)+55296)+zn((n&1023)+56320);case 3:return zn((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return zn((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Uie=t=>t.replace(pUe,mUe),Vie=t=>{if(t=t.replace(/\s+/g,""),!dUe.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n,r,i=[];for(let s=0;s<t.length;)e=n1[t.charAt(s++)]<<18|n1[t.charAt(s++)]<<12|(n=n1[t.charAt(s++)])<<6|(r=n1[t.charAt(s++)]),n===64?i.push(zn(e>>16&255)):r===64?i.push(zn(e>>16&255,e>>8&255)):i.push(zn(e>>16&255,e>>8&255,e&255));return i.join("")},DM=typeof atob=="function"?t=>atob(Fie(t)):up?t=>Buffer.from(t,"base64").toString("binary"):Vie,zie=up?t=>PB(Buffer.from(t,"base64")):t=>PB(DM(t).split("").map(e=>e.charCodeAt(0))),Hie=t=>zie(Wie(t)),gUe=up?t=>Buffer.from(t,"base64").toString("utf8"):CB?t=>CB.decode(zie(t)):t=>Uie(DM(t)),Wie=t=>Fie(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),SL=t=>gUe(Wie(t)),vUe=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},Gie=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),Kie=function(){const t=(e,n)=>Object.defineProperty(String.prototype,e,Gie(n));t("fromBase64",function(){return SL(this)}),t("toBase64",function(e){return Yf(this,e)}),t("toBase64URI",function(){return Yf(this,!0)}),t("toBase64URL",function(){return Yf(this,!0)}),t("toUint8Array",function(){return Hie(this)})},qie=function(){const t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,Gie(n));t("toBase64",function(e){return Vx(this,e)}),t("toBase64URI",function(){return Vx(this,!0)}),t("toBase64URL",function(){return Vx(this,!0)})},yUe=()=>{Kie(),qie()},Yie={version:$ie,VERSION:cUe,atob:DM,atobPolyfill:Vie,btoa:OM,btoaPolyfill:jie,fromBase64:SL,toBase64:Yf,encode:Yf,encodeURI:AB,encodeURL:AB,utob:Bie,btou:Uie,decode:SL,isValid:vUe,fromUint8Array:Vx,toUint8Array:Hie,extendString:Kie,extendUint8Array:qie,extendBuiltins:yUe};var xUe=function(e,n){if(n=n.split(":")[0],e=+e,!e)return!1;switch(n){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0},MM={},bUe=Object.prototype.hasOwnProperty,SUe;function LB(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch{return null}}function RB(t){try{return encodeURIComponent(t)}catch{return null}}function wUe(t){for(var e=/([^=?#&]+)=?([^&]*)/g,n={},r;r=e.exec(t);){var i=LB(r[1]),s=LB(r[2]);i===null||s===null||i in n||(n[i]=s)}return n}function EUe(t,e){e=e||"";var n=[],r,i;typeof e!="string"&&(e="?");for(i in t)if(bUe.call(t,i)){if(r=t[i],!r&&(r===null||r===SUe||isNaN(r))&&(r=""),i=RB(i),r=RB(r),i===null||r===null)continue;n.push(i+"="+r)}return n.length?e+n.join("&"):""}MM.stringify=EUe;MM.parse=wUe;var Qie=xUe,w_=MM,_Ue=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Xie=/[\n\r\t]/g,TUe=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Zie=/:\d+$/,CUe=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,kUe=/^[a-zA-Z]:/;function $M(t){return(t||"").toString().replace(_Ue,"")}var wL=[["#","hash"],["?","query"],function(e,n){return So(n.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],OB={hash:1,query:1};function Jie(t){var e;typeof window<"u"?e=window:typeof io<"u"?e=io:typeof self<"u"?e=self:e={};var n=e.location||{};t=t||n;var r={},i=typeof t,s;if(t.protocol==="blob:")r=new _o(unescape(t.pathname),{});else if(i==="string"){r=new _o(t,{});for(s in OB)delete r[s]}else if(i==="object"){for(s in t)s in OB||(r[s]=t[s]);r.slashes===void 0&&(r.slashes=TUe.test(t.href))}return r}function So(t){return t==="file:"||t==="ftp:"||t==="http:"||t==="https:"||t==="ws:"||t==="wss:"}function ese(t,e){t=$M(t),t=t.replace(Xie,""),e=e||{};var n=CUe.exec(t),r=n[1]?n[1].toLowerCase():"",i=!!n[2],s=!!n[3],o=0,a;return i?s?(a=n[2]+n[3]+n[4],o=n[2].length+n[3].length):(a=n[2]+n[4],o=n[2].length):s?(a=n[3]+n[4],o=n[3].length):a=n[4],r==="file:"?o>=2&&(a=a.slice(2)):So(r)?a=n[4]:r?i&&(a=a.slice(2)):o>=2&&So(e.protocol)&&(a=n[4]),{protocol:r,slashes:i||So(r),slashesCount:o,rest:a}}function PUe(t,e){if(t==="")return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,i=n[r-1],s=!1,o=0;r--;)n[r]==="."?n.splice(r,1):n[r]===".."?(n.splice(r,1),o++):o&&(r===0&&(s=!0),n.splice(r,1),o--);return s&&n.unshift(""),(i==="."||i==="..")&&n.push(""),n.join("/")}function _o(t,e,n){if(t=$M(t),t=t.replace(Xie,""),!(this instanceof _o))return new _o(t,e,n);var r,i,s,o,a,l,c=wL.slice(),u=typeof e,d=this,f=0;for(u!=="object"&&u!=="string"&&(n=e,e=null),n&&typeof n!="function"&&(n=w_.parse),e=Jie(e),i=ese(t||"",e),r=!i.protocol&&!i.slashes,d.slashes=i.slashes||r&&e.slashes,d.protocol=i.protocol||e.protocol||"",t=i.rest,(i.protocol==="file:"&&(i.slashesCount!==2||kUe.test(t))||!i.slashes&&(i.protocol||i.slashesCount<2||!So(d.protocol)))&&(c[3]=[/(.*)/,"pathname"]);f<c.length;f++){if(o=c[f],typeof o=="function"){t=o(t,d);continue}s=o[0],l=o[1],s!==s?d[l]=t:typeof s=="string"?(a=s==="@"?t.lastIndexOf(s):t.indexOf(s),~a&&(typeof o[2]=="number"?(d[l]=t.slice(0,a),t=t.slice(a+o[2])):(d[l]=t.slice(a),t=t.slice(0,a)))):(a=s.exec(t))&&(d[l]=a[1],t=t.slice(0,a.index)),d[l]=d[l]||r&&o[3]&&e[l]||"",o[4]&&(d[l]=d[l].toLowerCase())}n&&(d.query=n(d.query)),r&&e.slashes&&d.pathname.charAt(0)!=="/"&&(d.pathname!==""||e.pathname!=="")&&(d.pathname=PUe(d.pathname,e.pathname)),d.pathname.charAt(0)!=="/"&&So(d.protocol)&&(d.pathname="/"+d.pathname),Qie(d.port,d.protocol)||(d.host=d.hostname,d.port=""),d.username=d.password="",d.auth&&(a=d.auth.indexOf(":"),~a?(d.username=d.auth.slice(0,a),d.username=encodeURIComponent(decodeURIComponent(d.username)),d.password=d.auth.slice(a+1),d.password=encodeURIComponent(decodeURIComponent(d.password))):d.username=encodeURIComponent(decodeURIComponent(d.auth)),d.auth=d.password?d.username+":"+d.password:d.username),d.origin=d.protocol!=="file:"&&So(d.protocol)&&d.host?d.protocol+"//"+d.host:"null",d.href=d.toString()}function IUe(t,e,n){var r=this;switch(t){case"query":typeof e=="string"&&e.length&&(e=(n||w_.parse)(e)),r[t]=e;break;case"port":r[t]=e,Qie(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,Zie.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(e){var i=t==="pathname"?"/":"#";r[t]=e.charAt(0)!==i?i+e:e}else r[t]=e;break;case"username":case"password":r[t]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(r.username=e.slice(0,s),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=e.slice(s+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<wL.length;o++){var a=wL[o];a[4]&&(r[a[1]]=r[a[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&So(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function AUe(t){(!t||typeof t!="function")&&(t=w_.stringify);var e,n=this,r=n.host,i=n.protocol;i&&i.charAt(i.length-1)!==":"&&(i+=":");var s=i+(n.protocol&&n.slashes||So(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):n.protocol!=="file:"&&So(n.protocol)&&!r&&n.pathname!=="/"&&(s+="@"),(r[r.length-1]===":"||Zie.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,e=typeof n.query=="object"?t(n.query):n.query,e&&(s+=e.charAt(0)!=="?"?"?"+e:e),n.hash&&(s+=n.hash),s}_o.prototype={set:IUe,toString:AUe};_o.extractProtocol=ese;_o.location=Jie;_o.trimLeft=$M;_o.qs=w_;var LUe=_o;const tse=Ku(LUe);function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}function DB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,OUe(r.key),r)}}function RUe(t,e,n){return e&&DB(t.prototype,e),n&&DB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function OUe(t){var e=DUe(t,"string");return Ih(e)==="symbol"?e:String(e)}function DUe(t,e){if(Ih(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ih(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $Ue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b0(t,e)}function NUe(t){var e=nse();return function(){var r=S0(t),i;if(e){var s=S0(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return FUe(this,i)}}function FUe(t,e){if(e&&(Ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jUe(t)}function jUe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EL(t){var e=typeof Map=="function"?new Map:void 0;return EL=function(r){if(r===null||!BUe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return zx(r,arguments,S0(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),b0(i,r)},EL(t)}function zx(t,e,n){return nse()?zx=Reflect.construct.bind():zx=function(i,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(i,a),c=new l;return o&&b0(c,o.prototype),c},zx.apply(null,arguments)}function nse(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function BUe(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function b0(t,e){return b0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},b0(t,e)}function S0(t){return S0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S0(t)}var r1=function(t){$Ue(n,t);var e=NUe(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(MUe(this,n),i=e.call(this,r),i.originalRequest=o,i.originalResponse=a,i.causingError=s,s!=null&&(r+=", caused by ".concat(s.toString())),o!=null){var l=o.getHeader("X-Request-ID")||"n/a",c=o.getMethod(),u=o.getURL(),d=a?a.getStatus():"n/a",f=a?a.getBody()||"":"n/a";r+=", originated from request (method: ".concat(c,", url: ").concat(u,", response code: ").concat(d,", response text: ").concat(f,", request id: ").concat(l,")")}return i.message=r,i}return RUe(n)}(EL(Error));function UUe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})}function _L(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_L=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(C,P,k){C[P]=k.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(C,P,k){return Object.defineProperty(C,P,{value:k,enumerable:!0,configurable:!0,writable:!0}),C[P]}try{c({},"")}catch{c=function(k,M,B){return k[M]=B}}function u(C,P,k,M){var B=P&&P.prototype instanceof y?P:y,N=Object.create(B.prototype),V=new $(M||[]);return i(N,"_invoke",{value:L(C,k,V)}),N}function d(C,P,k){try{return{type:"normal",arg:C.call(P,k)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function y(){}function x(){}function S(){}var w={};c(w,o,function(){return this});var E=Object.getPrototypeOf,T=E&&E(E(R([])));T&&T!==n&&r.call(T,o)&&(w=T);var _=S.prototype=y.prototype=Object.create(w);function I(C){["next","throw","return"].forEach(function(P){c(C,P,function(k){return this._invoke(P,k)})})}function A(C,P){function k(B,N,V,H){var W=d(C[B],C,N);if(W.type!=="throw"){var z=W.arg,G=z.value;return G&&Bu(G)=="object"&&r.call(G,"__await")?P.resolve(G.__await).then(function(K){k("next",K,V,H)},function(K){k("throw",K,V,H)}):P.resolve(G).then(function(K){z.value=K,V(z)},function(K){return k("throw",K,V,H)})}H(W.arg)}var M;i(this,"_invoke",{value:function(N,V){function H(){return new P(function(W,z){k(N,V,W,z)})}return M=M?M.then(H,H):H()}})}function L(C,P,k){var M=f;return function(B,N){if(M===p)throw new Error("Generator is already running");if(M===m){if(B==="throw")throw N;return{value:t,done:!0}}for(k.method=B,k.arg=N;;){var V=k.delegate;if(V){var H=j(V,k);if(H){if(H===g)continue;return H}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(M===f)throw M=m,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);M=p;var W=d(C,P,k);if(W.type==="normal"){if(M=k.done?m:h,W.arg===g)continue;return{value:W.arg,done:k.done}}W.type==="throw"&&(M=m,k.method="throw",k.arg=W.arg)}}}function j(C,P){var k=P.method,M=C.iterator[k];if(M===t)return P.delegate=null,k==="throw"&&C.iterator.return&&(P.method="return",P.arg=t,j(C,P),P.method==="throw")||k!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+k+"' method")),g;var B=d(M,C.iterator,P.arg);if(B.type==="throw")return P.method="throw",P.arg=B.arg,P.delegate=null,g;var N=B.arg;return N?N.done?(P[C.resultName]=N.value,P.next=C.nextLoc,P.method!=="return"&&(P.method="next",P.arg=t),P.delegate=null,g):N:(P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,g)}function D(C){var P={tryLoc:C[0]};1 in C&&(P.catchLoc=C[1]),2 in C&&(P.finallyLoc=C[2],P.afterLoc=C[3]),this.tryEntries.push(P)}function O(C){var P=C.completion||{};P.type="normal",delete P.arg,C.completion=P}function $(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(D,this),this.reset(!0)}function R(C){if(C||C===""){var P=C[o];if(P)return P.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var k=-1,M=function B(){for(;++k<C.length;)if(r.call(C,k))return B.value=C[k],B.done=!1,B;return B.value=t,B.done=!0,B};return M.next=M}}throw new TypeError(Bu(C)+" is not iterable")}return x.prototype=S,i(_,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:x,configurable:!0}),x.displayName=c(S,l,"GeneratorFunction"),e.isGeneratorFunction=function(C){var P=typeof C=="function"&&C.constructor;return!!P&&(P===x||(P.displayName||P.name)==="GeneratorFunction")},e.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,S):(C.__proto__=S,c(C,l,"GeneratorFunction")),C.prototype=Object.create(_),C},e.awrap=function(C){return{__await:C}},I(A.prototype),c(A.prototype,a,function(){return this}),e.AsyncIterator=A,e.async=function(C,P,k,M,B){B===void 0&&(B=Promise);var N=new A(u(C,P,k,M),B);return e.isGeneratorFunction(P)?N:N.next().then(function(V){return V.done?V.value:N.next()})},I(_),c(_,l,"Generator"),c(_,o,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),e.keys=function(C){var P=Object(C),k=[];for(var M in P)k.push(M);return k.reverse(),function B(){for(;k.length;){var N=k.pop();if(N in P)return B.value=N,B.done=!1,B}return B.done=!0,B}},e.values=R,$.prototype={constructor:$,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!P)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var P=this.tryEntries[0].completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var k=this;function M(z,G){return V.type="throw",V.arg=P,k.next=z,G&&(k.method="next",k.arg=t),!!G}for(var B=this.tryEntries.length-1;B>=0;--B){var N=this.tryEntries[B],V=N.completion;if(N.tryLoc==="root")return M("end");if(N.tryLoc<=this.prev){var H=r.call(N,"catchLoc"),W=r.call(N,"finallyLoc");if(H&&W){if(this.prev<N.catchLoc)return M(N.catchLoc,!0);if(this.prev<N.finallyLoc)return M(N.finallyLoc)}else if(H){if(this.prev<N.catchLoc)return M(N.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return M(N.finallyLoc)}}}},abrupt:function(P,k){for(var M=this.tryEntries.length-1;M>=0;--M){var B=this.tryEntries[M];if(B.tryLoc<=this.prev&&r.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var N=B;break}}N&&(P==="break"||P==="continue")&&N.tryLoc<=k&&k<=N.finallyLoc&&(N=null);var V=N?N.completion:{};return V.type=P,V.arg=k,N?(this.method="next",this.next=N.finallyLoc,g):this.complete(V)},complete:function(P,k){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&k&&(this.next=k),g},finish:function(P){for(var k=this.tryEntries.length-1;k>=0;--k){var M=this.tryEntries[k];if(M.finallyLoc===P)return this.complete(M.completion,M.afterLoc),O(M),g}},catch:function(P){for(var k=this.tryEntries.length-1;k>=0;--k){var M=this.tryEntries[k];if(M.tryLoc===P){var B=M.completion;if(B.type==="throw"){var N=B.arg;O(M)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(P,k,M){return this.delegate={iterator:R(P),resultName:k,nextLoc:M},this.method==="next"&&(this.arg=t),g}},e}function MB(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){n(c);return}a.done?e(l):Promise.resolve(l).then(r,i)}function VUe(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){MB(s,r,i,o,a,"next",l)}function a(l){MB(s,r,i,o,a,"throw",l)}o(void 0)})}}function rse(t,e){return GUe(t)||WUe(t,e)||HUe(t,e)||zUe()}function zUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HUe(t,e){if(t){if(typeof t=="string")return $B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $B(t,e)}}function $B(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WUe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function GUe(t){if(Array.isArray(t))return t}function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(t)}function NB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NB(Object(n),!0).forEach(function(r){KUe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KUe(t,e,n){return e=ise(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qUe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ise(r.key),r)}}function YUe(t,e,n){return e&&FB(t.prototype,e),n&&FB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ise(t){var e=QUe(t,"string");return Bu(e)==="symbol"?e:String(e)}function QUe(t,e){if(Bu(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Bu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XUe={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:sse,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},uw=function(){function t(e,n){qUe(this,t),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return YUe(t,[{key:"findPreviousUploads",value:function(){var n=this;return this.options.fingerprint(this.file,this.options).then(function(r){return n._urlStorage.findUploadsByFingerprint(r)})}},{key:"resumeFromPreviousUpload",value:function(n){this.url=n.uploadUrl||null,this._parallelUploadUrls=n.parallelUploadUrls||null,this._urlStorageKey=n.urlStorageKey}},{key:"start",value:function(){var n=this,r=this.file;if(!r){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var i=this.options.retryDelays;if(i!=null&&Object.prototype.toString.call(i)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var s=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];s<o.length;s++){var a=o[s];if(this.options[a]){this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(r,this.options).then(function(l){return n._fingerprint=l,n._source?n._source:n.options.fileReader.openFile(r,n.options.chunkSize)}).then(function(l){if(n._source=l,n.options.uploadLengthDeferred)n._size=null;else if(n.options.uploadSize!=null){if(n._size=Number(n.options.uploadSize),Number.isNaN(n._size)){n._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(n._size=n._source.size,n._size==null){n._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}n.options.parallelUploads>1||n._parallelUploadUrls!=null?n._startParallelUpload():n._startSingleUpload()}).catch(function(l){n._emitError(l)})}},{key:"_startParallelUpload",value:function(){var n,r=this,i=this._size,s=0;this._parallelUploads=[];var o=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,a=(n=this.options.parallelUploadBoundaries)!==null&&n!==void 0?n:JUe(this._source.size,o);this._parallelUploadUrls&&a.forEach(function(u,d){u.uploadUrl=r._parallelUploadUrls[d]||null}),this._parallelUploadUrls=new Array(a.length);var l=a.map(function(u,d){var f=0;return r._source.slice(u.start,u.end).then(function(h){var p=h.value;return new Promise(function(m,g){var y=kd(kd({},r.options),{},{uploadUrl:u.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:kd(kd({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:m,onError:g,onProgress:function(w){s=s-f+w,f=w,r._emitProgress(s,i)},onUploadUrlAvailable:function(){r._parallelUploadUrls[d]=x.url,r._parallelUploadUrls.filter(function(w){return!!w}).length===a.length&&r._saveUploadInUrlStorage()}}),x=new t(p,y);x.start(),r._parallelUploads.push(x)})})}),c;Promise.all(l).then(function(){c=r._openRequest("POST",r.options.endpoint),c.setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var u=jB(r.options.metadata);return u!==""&&c.setHeader("Upload-Metadata",u),r._sendRequest(c,null)}).then(function(u){if(!zd(u.getStatus(),200)){r._emitHttpError(c,u,"tus: unexpected response while creating upload");return}var d=u.getHeader("Location");if(d==null){r._emitHttpError(c,u,"tus: invalid or missing Location header");return}r.url=zB(r.options.endpoint,d),"Created upload at ".concat(r.url),r._emitSuccess()}).catch(function(u){r._emitError(u)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(n){var r=this;return this._parallelUploads!=null&&this._parallelUploads.forEach(function(i){i.abort(n)}),this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!n||this.url==null?Promise.resolve():t.terminate(this.url,this.options).then(function(){return r._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(n,r,i,s){this._emitError(new r1(i,s,n,r))}},{key:"_emitError",value:function(n){var r=this;if(!this._aborted){if(this.options.retryDelays!=null){var i=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(i&&(this._retryAttempt=0),VB(n,this._retryAttempt,this.options)){var s=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){r.start()},s);return}}if(typeof this.options.onError=="function")this.options.onError(n);else throw n}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess()}},{key:"_emitProgress",value:function(n,r){typeof this.options.onProgress=="function"&&this.options.onProgress(n,r)}},{key:"_emitChunkComplete",value:function(n,r,i){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(n,r,i)}},{key:"_createUpload",value:function(){var n=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var r=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?r.setHeader("Upload-Defer-Length",1):r.setHeader("Upload-Length",this._size);var i=jB(this.options.metadata);i!==""&&r.setHeader("Upload-Metadata",i);var s;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,s=this._addChunkToRequest(r)):s=this._sendRequest(r,null),s.then(function(o){if(!zd(o.getStatus(),200)){n._emitHttpError(r,o,"tus: unexpected response while creating upload");return}var a=o.getHeader("Location");if(a==null){n._emitHttpError(r,o,"tus: invalid or missing Location header");return}if(n.url=zB(n.options.endpoint,a),"Created upload at ".concat(n.url),typeof n.options.onUploadUrlAvailable=="function"&&n.options.onUploadUrlAvailable(),n._size===0){n._emitSuccess(),n._source.close();return}n._saveUploadInUrlStorage().then(function(){n.options.uploadDataDuringCreation?n._handleUploadResponse(r,o):(n._offset=0,n._performUpload())})}).catch(function(o){n._emitHttpError(r,null,"tus: failed to create upload",o)})}},{key:"_resumeUpload",value:function(){var n=this,r=this._openRequest("HEAD",this.url),i=this._sendRequest(r,null);i.then(function(s){var o=s.getStatus();if(!zd(o,200)){if(o===423){n._emitHttpError(r,s,"tus: upload is currently locked; retry later");return}if(zd(o,400)&&n._removeFromUrlStorage(),!n.options.endpoint){n._emitHttpError(r,s,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}n.url=null,n._createUpload();return}var a=parseInt(s.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){n._emitHttpError(r,s,"tus: invalid or missing offset value");return}var l=parseInt(s.getHeader("Upload-Length"),10);if(Number.isNaN(l)&&!n.options.uploadLengthDeferred){n._emitHttpError(r,s,"tus: invalid or missing length value");return}typeof n.options.onUploadUrlAvailable=="function"&&n.options.onUploadUrlAvailable(),n._saveUploadInUrlStorage().then(function(){if(a===l){n._emitProgress(l,l),n._emitSuccess();return}n._offset=a,n._performUpload()})}).catch(function(s){n._emitHttpError(r,null,"tus: failed to resume upload",s)})}},{key:"_performUpload",value:function(){var n=this;if(!this._aborted){var r;this.options.overridePatchMethod?(r=this._openRequest("POST",this.url),r.setHeader("X-HTTP-Method-Override","PATCH")):r=this._openRequest("PATCH",this.url),r.setHeader("Upload-Offset",this._offset);var i=this._addChunkToRequest(r);i.then(function(s){if(!zd(s.getStatus(),200)){n._emitHttpError(r,s,"tus: unexpected response while uploading chunk");return}n._handleUploadResponse(r,s)}).catch(function(s){n._aborted||n._emitHttpError(r,null,"tus: failed to upload chunk at offset ".concat(n._offset),s)})}}},{key:"_addChunkToRequest",value:function(n){var r=this,i=this._offset,s=this._offset+this.options.chunkSize;return n.setProgressHandler(function(o){r._emitProgress(i+o,r._size)}),n.setHeader("Content-Type","application/offset+octet-stream"),(s===1/0||s>this._size)&&!this.options.uploadLengthDeferred&&(s=this._size),this._source.slice(i,s).then(function(o){var a=o.value,l=o.done,c=a&&a.size?a.size:0;r.options.uploadLengthDeferred&&l&&(r._size=r._offset+c,n.setHeader("Upload-Length",r._size));var u=r._offset+c;return!r.options.uploadLengthDeferred&&l&&u!==r._size?Promise.reject(new Error("upload was configured with a size of ".concat(r._size," bytes, but the source is done after ").concat(u," bytes"))):a===null?r._sendRequest(n):(r._emitProgress(r._offset,r._size),r._sendRequest(n,a))})}},{key:"_handleUploadResponse",value:function(n,r){var i=parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(i)){this._emitHttpError(n,r,"tus: invalid or missing offset value");return}if(this._emitProgress(i,this._size),this._emitChunkComplete(i-this._offset,i,this._size),this._offset=i,i===this._size){this._emitSuccess(),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(n,r){var i=BB(n,r,this.options);return this._req=i,i}},{key:"_removeFromUrlStorage",value:function(){var n=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(r){n._emitError(r)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var n=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var r={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?r.parallelUploadUrls=this._parallelUploadUrls:r.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,r).then(function(i){n._urlStorageKey=i})}},{key:"_sendRequest",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return UB(n,r,this.options)}}],[{key:"terminate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=BB("DELETE",n,r);return UB(i,null,r).then(function(s){if(s.getStatus()!==204)throw new r1("tus: unexpected response while terminating upload",null,i,s)}).catch(function(s){if(s instanceof r1||(s=new r1("tus: failed to terminate upload",s,i,null)),!VB(s,0,r))throw s;var o=r.retryDelays[0],a=r.retryDelays.slice(1),l=kd(kd({},r),{},{retryDelays:a});return new Promise(function(c){return setTimeout(c,o)}).then(function(){return t.terminate(n,l)})})}}]),t}();function jB(t){return Object.entries(t).map(function(e){var n=rse(e,2),r=n[0],i=n[1];return"".concat(r," ").concat(Yie.encode(String(i)))}).join(",")}function zd(t,e){return t>=e&&t<e+100}function BB(t,e,n){var r=n.httpStack.createRequest(t,e);r.setHeader("Tus-Resumable","1.0.0");var i=n.headers||{};if(Object.entries(i).forEach(function(o){var a=rse(o,2),l=a[0],c=a[1];r.setHeader(l,c)}),n.addRequestId){var s=UUe();r.setHeader("X-Request-ID",s)}return r}function UB(t,e,n){return TL.apply(this,arguments)}function TL(){return TL=VUe(_L().mark(function t(e,n,r){var i;return _L().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(typeof r.onBeforeRequest!="function"){o.next=3;break}return o.next=3,r.onBeforeRequest(e);case 3:return o.next=5,e.send(n);case 5:if(i=o.sent,typeof r.onAfterResponse!="function"){o.next=9;break}return o.next=9,r.onAfterResponse(e,i);case 9:return o.abrupt("return",i);case 10:case"end":return o.stop()}},t)})),TL.apply(this,arguments)}function ZUe(){var t=!0;return typeof window<"u"&&"navigator"in window&&window.navigator.onLine===!1&&(t=!1),t}function VB(t,e,n){return n.retryDelays==null||e>=n.retryDelays.length||t.originalRequest==null?!1:n&&typeof n.onShouldRetry=="function"?n.onShouldRetry(t,e,n):sse(t)}function sse(t){var e=t.originalResponse?t.originalResponse.getStatus():0;return(!zd(e,400)||e===409||e===423)&&ZUe()}function zB(t,e){return new tse(e,t).toString()}function JUe(t,e){for(var n=Math.floor(t/e),r=[],i=0;i<e;i++)r.push({start:n*i,end:n*(i+1)});return r[e-1].end=t,r}uw.defaultOptions=XUe;function w0(t){"@babel/helpers - typeof";return w0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w0(t)}function eVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nVe(r.key),r)}}function tVe(t,e,n){return e&&HB(t.prototype,e),n&&HB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nVe(t){var e=rVe(t,"string");return w0(e)==="symbol"?e:String(e)}function rVe(t,e){if(w0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(w0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iVe=function(){function t(){eVe(this,t)}return tVe(t,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(n){return Promise.resolve([])}},{key:"removeUpload",value:function(n){return Promise.resolve()}},{key:"addUpload",value:function(n,r){return Promise.resolve(null)}}]),t}();function E0(t){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E0(t)}function sVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aVe(r.key),r)}}function oVe(t,e,n){return e&&WB(t.prototype,e),n&&WB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function aVe(t){var e=lVe(t,"string");return E0(e)==="symbol"?e:String(e)}function lVe(t,e){if(E0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(E0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CL=!1;try{CL="localStorage"in window;var w2="tusSupport",GB=localStorage.getItem(w2);localStorage.setItem(w2,GB),GB===null&&localStorage.removeItem(w2)}catch(t){if(t.code===t.SECURITY_ERR||t.code===t.QUOTA_EXCEEDED_ERR)CL=!1;else throw t}var cVe=CL,uVe=function(){function t(){sVe(this,t)}return oVe(t,[{key:"findAllUploads",value:function(){var n=this._findEntries("tus::");return Promise.resolve(n)}},{key:"findUploadsByFingerprint",value:function(n){var r=this._findEntries("tus::".concat(n,"::"));return Promise.resolve(r)}},{key:"removeUpload",value:function(n){return localStorage.removeItem(n),Promise.resolve()}},{key:"addUpload",value:function(n,r){var i=Math.round(Math.random()*1e12),s="tus::".concat(n,"::").concat(i);return localStorage.setItem(s,JSON.stringify(r)),Promise.resolve(s)}},{key:"_findEntries",value:function(n){for(var r=[],i=0;i<localStorage.length;i++){var s=localStorage.key(i);if(s.indexOf(n)===0)try{var o=JSON.parse(localStorage.getItem(s));o.urlStorageKey=s,r.push(o)}catch{}}return r}}]),t}();function _0(t){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_0(t)}function NM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dVe(r.key),r)}}function FM(t,e,n){return e&&KB(t.prototype,e),n&&KB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dVe(t){var e=fVe(t,"string");return _0(e)==="symbol"?e:String(e)}function fVe(t,e){if(_0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(_0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hVe=function(){function t(){NM(this,t)}return FM(t,[{key:"createRequest",value:function(n,r){return new pVe(n,r)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),t}(),pVe=function(){function t(e,n){NM(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,n,!0),this._method=e,this._url=n,this._headers={}}return FM(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(n,r){this._xhr.setRequestHeader(n,r),this._headers[n]=r}},{key:"getHeader",value:function(n){return this._headers[n]}},{key:"setProgressHandler",value:function(n){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(r){r.lengthComputable&&n(r.loaded)})}},{key:"send",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(i,s){n._xhr.onload=function(){i(new mVe(n._xhr))},n._xhr.onerror=function(o){s(o)},n._xhr.send(r)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),mVe=function(){function t(e){NM(this,t),this._xhr=e}return FM(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(n){return this._xhr.getResponseHeader(n)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),ose=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function gVe(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var i=r.response;e(i)},r.onerror=function(i){n(i)},r.open("GET",t),r.send()})}var vVe=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function yVe(t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(){var i=new Uint8Array(r.result);e({value:i})},r.onerror=function(i){n(i)},r.readAsArrayBuffer(t)})}function T0(t){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T0(t)}function xVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SVe(r.key),r)}}function bVe(t,e,n){return e&&qB(t.prototype,e),n&&qB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function SVe(t){var e=wVe(t,"string");return T0(e)==="symbol"?e:String(e)}function wVe(t,e){if(T0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(T0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YB=function(){function t(e){xVe(this,t),this._file=e,this.size=e.size}return bVe(t,[{key:"slice",value:function(n,r){if(vVe())return yVe(this._file.slice(n,r));var i=this._file.slice(n,r),s=r>=this.size;return Promise.resolve({value:i,done:s})}},{key:"close",value:function(){}}]),t}();function C0(t){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C0(t)}function EVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function QB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TVe(r.key),r)}}function _Ve(t,e,n){return e&&QB(t.prototype,e),n&&QB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function TVe(t){var e=CVe(t,"string");return C0(e)==="symbol"?e:String(e)}function CVe(t,e){if(C0(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(C0(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XB(t){return t===void 0?0:t.size!==void 0?t.size:t.length}function kVe(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}throw new Error("Unknown data type")}var PVe=function(){function t(e){EVe(this,t),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return _Ve(t,[{key:"slice",value:function(n,r){return n<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(n,r)}},{key:"_readUntilEnoughDataOrDone",value:function(n,r){var i=this,s=r<=this._bufferOffset+XB(this._buffer);if(this._done||s){var o=this._getDataFromBuffer(n,r),a=o==null?this._done:!1;return Promise.resolve({value:o,done:a})}return this._reader.read().then(function(l){var c=l.value,u=l.done;return u?i._done=!0:i._buffer===void 0?i._buffer=c:i._buffer=kVe(i._buffer,c),i._readUntilEnoughDataOrDone(n,r)})}},{key:"_getDataFromBuffer",value:function(n,r){n>this._bufferOffset&&(this._buffer=this._buffer.slice(n-this._bufferOffset),this._bufferOffset=n);var i=XB(this._buffer)===0;return this._done&&i?null:this._buffer.slice(0,r-n)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),t}();function Uu(t){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uu(t)}function kL(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */kL=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(C,P,k){C[P]=k.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(C,P,k){return Object.defineProperty(C,P,{value:k,enumerable:!0,configurable:!0,writable:!0}),C[P]}try{c({},"")}catch{c=function(k,M,B){return k[M]=B}}function u(C,P,k,M){var B=P&&P.prototype instanceof y?P:y,N=Object.create(B.prototype),V=new $(M||[]);return i(N,"_invoke",{value:L(C,k,V)}),N}function d(C,P,k){try{return{type:"normal",arg:C.call(P,k)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function y(){}function x(){}function S(){}var w={};c(w,o,function(){return this});var E=Object.getPrototypeOf,T=E&&E(E(R([])));T&&T!==n&&r.call(T,o)&&(w=T);var _=S.prototype=y.prototype=Object.create(w);function I(C){["next","throw","return"].forEach(function(P){c(C,P,function(k){return this._invoke(P,k)})})}function A(C,P){function k(B,N,V,H){var W=d(C[B],C,N);if(W.type!=="throw"){var z=W.arg,G=z.value;return G&&Uu(G)=="object"&&r.call(G,"__await")?P.resolve(G.__await).then(function(K){k("next",K,V,H)},function(K){k("throw",K,V,H)}):P.resolve(G).then(function(K){z.value=K,V(z)},function(K){return k("throw",K,V,H)})}H(W.arg)}var M;i(this,"_invoke",{value:function(N,V){function H(){return new P(function(W,z){k(N,V,W,z)})}return M=M?M.then(H,H):H()}})}function L(C,P,k){var M=f;return function(B,N){if(M===p)throw new Error("Generator is already running");if(M===m){if(B==="throw")throw N;return{value:t,done:!0}}for(k.method=B,k.arg=N;;){var V=k.delegate;if(V){var H=j(V,k);if(H){if(H===g)continue;return H}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(M===f)throw M=m,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);M=p;var W=d(C,P,k);if(W.type==="normal"){if(M=k.done?m:h,W.arg===g)continue;return{value:W.arg,done:k.done}}W.type==="throw"&&(M=m,k.method="throw",k.arg=W.arg)}}}function j(C,P){var k=P.method,M=C.iterator[k];if(M===t)return P.delegate=null,k==="throw"&&C.iterator.return&&(P.method="return",P.arg=t,j(C,P),P.method==="throw")||k!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+k+"' method")),g;var B=d(M,C.iterator,P.arg);if(B.type==="throw")return P.method="throw",P.arg=B.arg,P.delegate=null,g;var N=B.arg;return N?N.done?(P[C.resultName]=N.value,P.next=C.nextLoc,P.method!=="return"&&(P.method="next",P.arg=t),P.delegate=null,g):N:(P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,g)}function D(C){var P={tryLoc:C[0]};1 in C&&(P.catchLoc=C[1]),2 in C&&(P.finallyLoc=C[2],P.afterLoc=C[3]),this.tryEntries.push(P)}function O(C){var P=C.completion||{};P.type="normal",delete P.arg,C.completion=P}function $(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(D,this),this.reset(!0)}function R(C){if(C||C===""){var P=C[o];if(P)return P.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var k=-1,M=function B(){for(;++k<C.length;)if(r.call(C,k))return B.value=C[k],B.done=!1,B;return B.value=t,B.done=!0,B};return M.next=M}}throw new TypeError(Uu(C)+" is not iterable")}return x.prototype=S,i(_,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:x,configurable:!0}),x.displayName=c(S,l,"GeneratorFunction"),e.isGeneratorFunction=function(C){var P=typeof C=="function"&&C.constructor;return!!P&&(P===x||(P.displayName||P.name)==="GeneratorFunction")},e.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,S):(C.__proto__=S,c(C,l,"GeneratorFunction")),C.prototype=Object.create(_),C},e.awrap=function(C){return{__await:C}},I(A.prototype),c(A.prototype,a,function(){return this}),e.AsyncIterator=A,e.async=function(C,P,k,M,B){B===void 0&&(B=Promise);var N=new A(u(C,P,k,M),B);return e.isGeneratorFunction(P)?N:N.next().then(function(V){return V.done?V.value:N.next()})},I(_),c(_,l,"Generator"),c(_,o,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),e.keys=function(C){var P=Object(C),k=[];for(var M in P)k.push(M);return k.reverse(),function B(){for(;k.length;){var N=k.pop();if(N in P)return B.value=N,B.done=!1,B}return B.done=!0,B}},e.values=R,$.prototype={constructor:$,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!P)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var P=this.tryEntries[0].completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var k=this;function M(z,G){return V.type="throw",V.arg=P,k.next=z,G&&(k.method="next",k.arg=t),!!G}for(var B=this.tryEntries.length-1;B>=0;--B){var N=this.tryEntries[B],V=N.completion;if(N.tryLoc==="root")return M("end");if(N.tryLoc<=this.prev){var H=r.call(N,"catchLoc"),W=r.call(N,"finallyLoc");if(H&&W){if(this.prev<N.catchLoc)return M(N.catchLoc,!0);if(this.prev<N.finallyLoc)return M(N.finallyLoc)}else if(H){if(this.prev<N.catchLoc)return M(N.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return M(N.finallyLoc)}}}},abrupt:function(P,k){for(var M=this.tryEntries.length-1;M>=0;--M){var B=this.tryEntries[M];if(B.tryLoc<=this.prev&&r.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var N=B;break}}N&&(P==="break"||P==="continue")&&N.tryLoc<=k&&k<=N.finallyLoc&&(N=null);var V=N?N.completion:{};return V.type=P,V.arg=k,N?(this.method="next",this.next=N.finallyLoc,g):this.complete(V)},complete:function(P,k){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&k&&(this.next=k),g},finish:function(P){for(var k=this.tryEntries.length-1;k>=0;--k){var M=this.tryEntries[k];if(M.finallyLoc===P)return this.complete(M.completion,M.afterLoc),O(M),g}},catch:function(P){for(var k=this.tryEntries.length-1;k>=0;--k){var M=this.tryEntries[k];if(M.tryLoc===P){var B=M.completion;if(B.type==="throw"){var N=B.arg;O(M)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(P,k,M){return this.delegate={iterator:R(P),resultName:k,nextLoc:M},this.method==="next"&&(this.arg=t),g}},e}function ZB(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){n(c);return}a.done?e(l):Promise.resolve(l).then(r,i)}function IVe(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){ZB(s,r,i,o,a,"next",l)}function a(l){ZB(s,r,i,o,a,"throw",l)}o(void 0)})}}function AVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RVe(r.key),r)}}function LVe(t,e,n){return e&&JB(t.prototype,e),n&&JB(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RVe(t){var e=OVe(t,"string");return Uu(e)==="symbol"?e:String(e)}function OVe(t,e){if(Uu(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DVe=function(){function t(){AVe(this,t)}return LVe(t,[{key:"openFile",value:function(){var e=IVe(kL().mark(function r(i,s){var o;return kL().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(ose()&&i&&typeof i.uri<"u")){l.next=11;break}return l.prev=1,l.next=4,gVe(i.uri);case 4:return o=l.sent,l.abrupt("return",new YB(o));case 8:throw l.prev=8,l.t0=l.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(l.t0));case 11:if(!(typeof i.slice=="function"&&typeof i.size<"u")){l.next=13;break}return l.abrupt("return",Promise.resolve(new YB(i)));case 13:if(typeof i.read!="function"){l.next=18;break}if(s=Number(s),Number.isFinite(s)){l.next=17;break}return l.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return l.abrupt("return",Promise.resolve(new PVe(i,s)));case 18:return l.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return l.stop()}},r,null,[[1,8]])}));function n(r,i){return e.apply(this,arguments)}return n}()}]),t}();function MVe(t,e){return ose()?Promise.resolve($Ve(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}function $Ve(t,e){var n=t.exif?NVe(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",n,e.endpoint].join("/")}function NVe(t){var e=0;if(t.length===0)return e;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);e=(e<<5)-e+r,e&=e}return e}function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function FVe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eU(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ase(r.key),r)}}function jVe(t,e,n){return e&&eU(t.prototype,e),n&&eU(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function BVe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PL(t,e)}function PL(t,e){return PL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PL(t,e)}function UVe(t){var e=HVe();return function(){var r=dw(t),i;if(e){var s=dw(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return VVe(this,i)}}function VVe(t,e){if(e&&(Ah(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zVe(t)}function zVe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HVe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dw(t){return dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dw(t)}function tU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tU(Object(n),!0).forEach(function(r){WVe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WVe(t,e,n){return e=ase(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ase(t){var e=GVe(t,"string");return Ah(e)==="symbol"?e:String(e)}function GVe(t,e){if(Ah(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ah(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nU=bf(bf({},uw.defaultOptions),{},{httpStack:new hVe,fileReader:new DVe,urlStorage:cVe?new uVe:new iVe,fingerprint:MVe}),KVe=function(t){BVe(n,t);var e=UVe(n);function n(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return FVe(this,n),i=bf(bf({},nU),i),e.call(this,r,i)}return jVe(n,null,[{key:"terminate",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return s=bf(bf({},nU),s),uw.terminate(i,s)}}]),n}(uw);class qVe{constructor(e){this._config=e}getConfig(){return this._config}async _get(e,n){const r=await qf(`${this._config.baseUrl}${e}`,{method:"GET",...n,headers:{...n==null?void 0:n.headers,"x-core-sdk-version":os.core,"x-react-sdk-version":os.react,"x-react-native-sdk-version":os.reactNative}});if(!r.ok)throw new m2(r.status,`Provider failed to get object from ${this._config.baseUrl}${e}, status code was ${r.status}`,await r.json());return r.json()}async _create(e,n){const r=await qf(`${this._config.baseUrl}${e}`,{method:"POST",...n,...n!=null&&n.json?{body:JSON.stringify(n.json)}:{},headers:{...n!=null&&n.json?{"content-type":"application/json"}:{},...n==null?void 0:n.headers,"x-core-sdk-version":os.core,"x-react-sdk-version":os.react,"x-react-native-sdk-version":os.reactNative}});if(!r.ok)throw new m2(r.status,"Provider failed to create object",await r.json());return r.json()}async _update(e,n){const r=await qf(`${this._config.baseUrl}${e}`,{method:"PATCH",...n,...n!=null&&n.json?{body:JSON.stringify(n.json)}:{},headers:{...n!=null&&n.json?{"content-type":"application/json"}:{},...n==null?void 0:n.headers,"x-core-sdk-version":os.core,"x-react-sdk-version":os.react,"x-react-native-sdk-version":os.reactNative}});if(!r.ok)throw new m2(r.status,"Provider failed to update object",await r.json())}}const YVe=100*1024*1024;class QVe extends qVe{constructor(e){super(e),this._defaultHeaders={...e.apiKey?{Authorization:`Bearer ${e.apiKey}`}:{},...e.origin?{Origin:e.origin}:{}}}async createStream(e){const n=this._getPlaybackPolicyMapped(e.playbackPolicy),r=await this._create("/stream",{json:{...e,...n?{playbackPolicy:n}:{},...e.creatorId?{creatorId:e.creatorId}:{}},headers:this._defaultHeaders});return this._mapToStream(r)}async updateStream(e){var i;const n=typeof e=="string"?e:e.streamId,r=this._getPlaybackPolicyMapped(e.playbackPolicy);return await this._update(`/stream/${n}`,{json:{...typeof(e==null?void 0:e.record)<"u"?{record:!!e.record}:{},...typeof(e==null?void 0:e.suspend)<"u"?{suspended:!!e.suspend}:{},...typeof((i=e==null?void 0:e.multistream)==null?void 0:i.targets)<"u"?{multistream:{targets:e.multistream.targets.map(s=>typeof s.id>"u"||"url"in(s.spec??{})?{...s,id:void 0}:{...s,spec:void 0})}}:{},...r?{playbackPolicy:r}:{},...e.creatorId?{creatorId:e.creatorId}:{}},headers:this._defaultHeaders}),this.getStream(n)}async getStream(e){const n=await this._get(`/stream/${typeof e=="string"?e:e.streamId}`,{headers:this._defaultHeaders});return this._mapToStream(n)}async getStreamSession(e){return await this._get(`/session/${typeof e=="string"?e:e.streamSessionId}`,{headers:this._defaultHeaders})}async getStreamSessions(e){return await this._get(`/stream/${typeof e=="string"?e:e.streamId}/sessions`,{headers:this._defaultHeaders})}async createClip(e){return(await this._create("/clip",{json:{playbackId:e.playbackId,startTime:e.startTime,endTime:e.endTime,...e.name?{name:e.name}:{},...e.sessionId?{sessionId:e.sessionId}:{}},headers:this._defaultHeaders})).asset}async createAsset(e){const{sources:n,onProgress:r,noWait:i,chunkSize:s}=e;let o=n.map(d=>({name:d.name,progress:0,assetId:null,phase:d!=null&&d.url?"waiting":"uploading"}));const a=await Promise.allSettled(n.map(async(d,f)=>{var p,m,g,y,x,S,w;const h=this._getPlaybackPolicyMapped(d.playbackPolicy);if(d.url){const E=await this._create("/asset/upload/url",{json:{name:d.name,url:d.url,storage:(p=d==null?void 0:d.storage)!=null&&p.ipfs?{ipfs:{spec:{nftMetadata:((m=d==null?void 0:d.storage)==null?void 0:m.metadata)??{},...(g=d==null?void 0:d.storage)!=null&&g.metadataTemplate?{nftMetadataTemplate:d.storage.metadataTemplate}:{}}}}:void 0,...h?{playbackPolicy:h}:{},...d.creatorId?{creatorId:d.creatorId}:{}},headers:this._defaultHeaders});return(y=E==null?void 0:E.asset)==null?void 0:y.id}else{const E=await this._create("/asset/request-upload",{json:{name:d.name,storage:(x=d==null?void 0:d.storage)!=null&&x.ipfs?{ipfs:{spec:{nftMetadata:((S=d==null?void 0:d.storage)==null?void 0:S.metadata)??{},...(w=d==null?void 0:d.storage)!=null&&w.metadataTemplate?{nftMetadataTemplate:d.storage.metadataTemplate}:{}}}}:void 0,...h?{playbackPolicy:h}:{},...d.creatorId?{creatorId:d.creatorId}:{}},headers:this._defaultHeaders}),{tusEndpoint:T,asset:{id:_}}=E;return await new Promise((I,A)=>{const L=new KVe(d.file,{endpoint:T,metadata:{id:_},...s?{chunkSize:s}:typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"?null:{chunkSize:YVe},onError:j=>{console.log("Failed because: ",j)},onProgress(j,D){const O=j/D,$={name:d.name,assetId:_,progress:O,phase:"uploading"},R=[...o];R[f]=$,o=R,r==null||r(o)},onSuccess(){I()}});L.findPreviousUploads().then(j=>{(j==null?void 0:j.length)>0&&j[0]&&L.resumeFromPreviousUpload(j[0]),L.start()}).catch(A)}),_}}));if(i)return Promise.all(a.map(async d=>{if(d.status==="rejected")throw d.reason;return this.getAsset(d.value)}));const l=5;return[...(await Promise.allSettled(a.map(async(d,f)=>{var y,x,S;if(d.status==="rejected")throw d.reason;let h=null,p=0;for(;((y=h==null?void 0:h.status)==null?void 0:y.phase)!=="ready"&&((x=h==null?void 0:h.status)==null?void 0:x.phase)!=="failed";)try{if(await new Promise(w=>setTimeout(w,Math.random()*1e3+4e3)),h=await this.getAsset(d.value),typeof((S=h.status)==null?void 0:S.phase)<"u"){const w={name:h.name,assetId:h.id,progress:h.status.progress??0,phase:h.status.phase},E=[...o];E[f]=w,o=E,r==null||r(o)}else throw new Error("Asset phase was undefined.")}catch(w){if(p>l)throw w;p+=1}const m={name:h.name,assetId:h.id,progress:1,phase:h.status.phase},g=[...o];return g[f]=m,o=g,r==null||r(o),h}))).map(d=>{if(d.status==="fulfilled")return d.value;throw d.reason})]}async getAsset(e){return await this._get(`/asset/${typeof e=="string"?e:e.assetId}`,{headers:this._defaultHeaders})}async updateAsset(e){const{assetId:n,name:r,storage:i}=e,s=this._getPlaybackPolicyMapped(e.playbackPolicy);return await this._update(`/asset/${n}`,{json:{name:typeof r<"u"?String(r):void 0,storage:i!=null&&i.ipfs?{ipfs:{spec:{nftMetadata:(i==null?void 0:i.metadata)??{},...i!=null&&i.metadataTemplate?{nftMetadataTemplate:i.metadataTemplate}:{}}}}:void 0,...s?{playbackPolicy:s}:{},...e.creatorId?{creatorId:e.creatorId}:{}},headers:this._defaultHeaders}),this.getAsset({assetId:n})}_getRtmpIngestUrl(e){return`rtmp://rtmp.livepeer.com/live/${e}`}async getPlaybackInfo(e){const n=typeof e=="string"?e:e.playbackId,r=encodeURIComponent(n),i=await this._get(`/playback/${r}?recordings=true`,{headers:this._defaultHeaders});return this._mapToPlaybackInfo(i)}_getPlaybackUrl(e){return`https://livepeercdn.com/hls/${e}/index.m3u8`}async getAssetMetrics(e){const n=typeof e=="string"?e:e.assetId,r=await this._get(`/data/views/${n}/total`,{headers:this._defaultHeaders});return this._mapToViewsMetrics(r)}async _mapToStream(e){return{...e,multistream:await this._mapToMultistream(e.multistream)}}async _mapToMultistream(e){if(!(e!=null&&e.targets))return;const n=e.targets.map(async r=>{const{name:i}=await this._get(`/multistream/target/${r.id}`,{headers:this._defaultHeaders});return{...r,spec:{name:i}}});return{targets:await Promise.all(n)}}_mapToPlaybackInfo(e){var n,r,i,s;return{type:e==null?void 0:e.type,meta:{...e==null?void 0:e.meta,live:!!((n=e==null?void 0:e.meta)!=null&&n.live),source:(i=(r=e==null?void 0:e.meta)==null?void 0:r.source)==null?void 0:i.map(o=>({...o})),attestation:(s=e==null?void 0:e.meta)==null?void 0:s.attestation}}}_mapToViewsMetrics(e){return{type:"ViewsMetrics",metrics:e}}_getPlaybackPolicyMapped(e){return e&&typeof(e==null?void 0:e.type)<"u"?e.type==="webhook"?{type:e.type,webhookId:e.webhookId,webhookContext:e.webhookContext}:{type:e.type}:null}}function XVe(t){return()=>new QVe({...FBe,...t})}var rU,ht="colors",hr="sizes",xe="space",ZVe={gap:xe,gridGap:xe,columnGap:xe,gridColumnGap:xe,rowGap:xe,gridRowGap:xe,inset:xe,insetBlock:xe,insetBlockEnd:xe,insetBlockStart:xe,insetInline:xe,insetInlineEnd:xe,insetInlineStart:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,marginBlock:xe,marginBlockEnd:xe,marginBlockStart:xe,marginInline:xe,marginInlineEnd:xe,marginInlineStart:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,paddingBlock:xe,paddingBlockEnd:xe,paddingBlockStart:xe,paddingInline:xe,paddingInlineEnd:xe,paddingInlineStart:xe,top:xe,right:xe,bottom:xe,left:xe,scrollMargin:xe,scrollMarginTop:xe,scrollMarginRight:xe,scrollMarginBottom:xe,scrollMarginLeft:xe,scrollMarginX:xe,scrollMarginY:xe,scrollMarginBlock:xe,scrollMarginBlockEnd:xe,scrollMarginBlockStart:xe,scrollMarginInline:xe,scrollMarginInlineEnd:xe,scrollMarginInlineStart:xe,scrollPadding:xe,scrollPaddingTop:xe,scrollPaddingRight:xe,scrollPaddingBottom:xe,scrollPaddingLeft:xe,scrollPaddingX:xe,scrollPaddingY:xe,scrollPaddingBlock:xe,scrollPaddingBlockEnd:xe,scrollPaddingBlockStart:xe,scrollPaddingInline:xe,scrollPaddingInlineEnd:xe,scrollPaddingInlineStart:xe,fontSize:"fontSizes",background:ht,backgroundColor:ht,backgroundImage:ht,borderImage:ht,border:ht,borderBlock:ht,borderBlockEnd:ht,borderBlockStart:ht,borderBottom:ht,borderBottomColor:ht,borderColor:ht,borderInline:ht,borderInlineEnd:ht,borderInlineStart:ht,borderLeft:ht,borderLeftColor:ht,borderRight:ht,borderRightColor:ht,borderTop:ht,borderTopColor:ht,caretColor:ht,color:ht,columnRuleColor:ht,fill:ht,outline:ht,outlineColor:ht,stroke:ht,textDecorationColor:ht,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:hr,minBlockSize:hr,maxBlockSize:hr,inlineSize:hr,minInlineSize:hr,maxInlineSize:hr,width:hr,minWidth:hr,maxWidth:hr,height:hr,minHeight:hr,maxHeight:hr,flexBasis:hr,gridTemplateColumns:hr,gridTemplateRows:hr,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},JVe=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Mv=()=>{const t=Object.create(null);return(e,n,...r)=>{const i=(s=>JSON.stringify(s,JVe))(e);return i in t?t[i]:t[i]=n(e,...r)}},Hx=Symbol.for("sxs.internal"),jM=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),iU=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:eze}=Object.prototype,IL=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),tze=/\s+(?![^()]*\))/,Pd=t=>e=>t(...typeof e=="string"?String(e).split(tze):[e]),sU={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:Pd((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:Pd((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:Pd((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:Pd((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:Pd((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:Pd((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},E2=/([\d.]+)([^]*)/,nze=(t,e)=>t.length?t.reduce((n,r)=>(n.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),n),[]):e,rze=(t,e)=>t in ize&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${IL(t)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${IL(t)}:${r}fit-content`)+s):String(e),ize={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},wa=t=>t?t+"-":"",lse=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?wa(e)+(a.includes("$")?"":wa(n))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),sze=/\s*,\s*(?![^()]*\))/,oze=Object.prototype.toString,Sf=(t,e,n,r,i)=>{let s,o,a;const l=(c,u,d)=>{let f,h;const p=m=>{for(f in m){const x=f.charCodeAt(0)===64,S=x&&Array.isArray(m[f])?m[f]:[m[f]];for(h of S){const w=/[A-Z]/.test(y=f)?y:y.replace(/-[^]/g,T=>T[1].toUpperCase()),E=typeof h=="object"&&h&&h.toString===oze&&(!r.utils[w]||!u.length);if(w in r.utils&&!E){const T=r.utils[w];if(T!==o){o=T,p(T(h)),o=null;continue}}else if(w in sU){const T=sU[w];if(T!==a){a=T,p(T(h)),a=null;continue}}if(x&&(g=f.slice(1)in r.media?"@media "+r.media[f.slice(1)]:f,f=g.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(T,_,I,A,L,j)=>{const D=E2.test(_),O=.0625*(D?-1:1),[$,R]=D?[A,_]:[_,A];return"("+(I[0]==="="?"":I[0]===">"===D?"max-":"min-")+$+":"+(I[0]!=="="&&I.length===1?R.replace(E2,(C,P,k)=>Number(P)+O*(I===">"?1:-1)+k):R)+(L?") and ("+(L[0]===">"?"min-":"max-")+$+":"+(L.length===1?j.replace(E2,(C,P,k)=>Number(P)+O*(L===">"?-1:1)+k):j):"")+")"})),E){const T=x?d.concat(f):[...d],_=x?[...u]:nze(u,f.split(sze));s!==void 0&&i(oU(...s)),s=void 0,l(h,_,T)}else s===void 0&&(s=[[],u,d]),f=x||f.charCodeAt(0)!==36?f:`--${wa(r.prefix)}${f.slice(1).replace(/\$/g,"-")}`,h=E?h:typeof h=="number"?h&&w in aze?String(h)+"px":String(h):lse(rze(w,h??""),r.prefix,r.themeMap[w]),s[0].push(`${x?`${f} `:`${IL(f)}:`}${h}`)}}var g,y};p(c),s!==void 0&&i(oU(...s)),s=void 0};l(t,e,n)},oU=(t,e,n)=>`${n.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,aze={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},aU=t=>String.fromCharCode(t+(t>25?39:97)),mu=t=>(e=>{let n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=aU(n%52)+r;return aU(n%52)+r})(((e,n)=>{let r=n.length;for(;r;)e=33*e^n.charCodeAt(--r);return e})(5381,JSON.stringify(t))>>>0),km=["themed","global","styled","onevar","resonevar","allvar","inline"],lze=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},cze=t=>{let e;const n=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const c in e.rules)if(e.rules[c].group===s)return`--sxs{--sxs:${[...e.rules[c].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const c in a)delete a[c]}const i=Object(t).styleSheets||[];for(const a of i)if(lze(a)){for(let l=0,c=a.cssRules;c[l];++l){const u=Object(c[l]);if(u.type!==1)continue;const d=Object(c[l+1]);if(d.type!==4)continue;++l;const{cssText:f}=u;if(!f.startsWith("--sxs"))continue;const h=f.slice(14,-3).trim().split(/\s+/),p=km[h[0]];p&&(e||(e={sheet:a,reset:r,rules:{},toString:n}),e.rules[p]={group:d,index:l,cache:new Set(h)})}if(e)break}if(!e){const a=(l,c)=>({type:c,cssRules:[],insertRule(u,d){this.cssRules.splice(d,0,a(u,{import:3,undefined:1}[(u.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,u=>u.cssText).join("")}}`:l}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:s,rules:o}=e;for(let a=km.length-1;a>=0;--a){const l=km[a];if(!o[l]){const c=km[a+1],u=o[c]?o[c].index:s.cssRules.length;s.insertRule("@media{}",u),s.insertRule(`--sxs{--sxs:${a}}`,u),o[l]={group:s.cssRules[u+1],index:u,cache:new Set([a])}}uze(o[l])}};return r(),e},uze=t=>{const e=t.group;let n=e.cssRules.length;t.apply=r=>{try{e.insertRule(r,n),++n}catch{}}},Xp=Symbol(),dze=Mv(),fze=(t,e)=>dze(t,()=>(...n)=>{let r={type:null,composers:new Set};for(const i of n)if(i!=null)if(i[Hx]){r.type==null&&(r.type=i[Hx].type);for(const s of i[Hx].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(hze(i,t));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),pze(t,r,e)}),hze=({variants:t,compoundVariants:e,defaultVariants:n,...r},i)=>{const s=`${wa(i.prefix)}c-${mu(r)}`,o=[],a=[],l=Object.create(null),c=[];for(const f in n)l[f]=String(n[f]);if(typeof t=="object"&&t)for(const f in t){u=l,d=f,eze.call(u,d)||(l[f]="undefined");const h=t[f];for(const p in h){const m={[f]:String(p)};String(p)==="undefined"&&c.push(f);const g=h[p],y=[m,g,!iU(g)];o.push(y)}}var u,d;if(typeof e=="object"&&e)for(const f of e){let{css:h,...p}=f;h=typeof h=="object"&&h||{};for(const g in p)p[g]=String(p[g]);const m=[p,h,!iU(h)];a.push(m)}return[s,r,o,a,l,c]},pze=(t,e,n)=>{const[r,i,s,o]=mze(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(d=>{function f(){for(let h=0;h<f[Xp].length;h++){const[p,m]=f[Xp][h];d.rules[p].apply(m)}return f[Xp]=[],null}return f[Xp]=[],f.rules={},km.forEach(h=>f.rules[h]={apply:p=>f[Xp].push([h,p])}),f})(n):null,l=(a||n).rules,c=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,u=d=>{d=typeof d=="object"&&d||gze;const{css:f,...h}=d,p={};for(const y in s)if(delete h[y],y in d){let x=d[y];typeof x=="object"&&x?p[y]={"@initial":s[y],...x}:(x=String(x),p[y]=x!=="undefined"||o.has(y)?x:s[y])}else p[y]=s[y];const m=new Set([...i]);for(const[y,x,S,w]of e.composers){n.rules.styled.cache.has(y)||(n.rules.styled.cache.add(y),Sf(x,[`.${y}`],[],t,_=>{l.styled.apply(_)}));const E=lU(S,p,t.media),T=lU(w,p,t.media,!0);for(const _ of E)if(_!==void 0)for(const[I,A,L]of _){const j=`${y}-${mu(A)}-${I}`;m.add(j);const D=(L?n.rules.resonevar:n.rules.onevar).cache,O=L?l.resonevar:l.onevar;D.has(j)||(D.add(j),Sf(A,[`.${j}`],[],t,$=>{O.apply($)}))}for(const _ of T)if(_!==void 0)for(const[I,A]of _){const L=`${y}-${mu(A)}-${I}`;m.add(L),n.rules.allvar.cache.has(L)||(n.rules.allvar.cache.add(L),Sf(A,[`.${L}`],[],t,j=>{l.allvar.apply(j)}))}}if(typeof f=="object"&&f){const y=`${r}-i${mu(f)}-css`;m.add(y),n.rules.inline.cache.has(y)||(n.rules.inline.cache.add(y),Sf(f,[`.${y}`],[],t,x=>{l.inline.apply(x)}))}for(const y of String(d.className||"").trim().split(/\s+/))y&&m.add(y);const g=h.className=[...m].join(" ");return{type:e.type,className:g,selector:c,props:h,toString:()=>g,deferredInjector:a}};return jM(u,{className:r,selector:c,[Hx]:e,toString:()=>(n.rules.styled.cache.has(r)||u(),r)})},mze=t=>{let e="";const n=[],r={},i=[];for(const[s,,,,o,a]of t){e===""&&(e=s),n.push(s),i.push(...a);for(const l in o){const c=o[l];(r[l]===void 0||c!=="undefined"||a.includes(c))&&(r[l]=c)}}return[e,n,r,new Set(i)]},lU=(t,e,n,r)=>{const i=[];e:for(let[s,o,a]of t){if(a)continue;let l,c=0,u=!1;for(l in s){const d=s[l];let f=e[l];if(f!==d){if(typeof f!="object"||!f)continue e;{let h,p,m=0;for(const g in f){if(d===String(f[g])){if(g!=="@initial"){const y=g.slice(1);(p=p||[]).push(y in n?n[y]:g.replace(/^@media ?/,"")),u=!0}c+=m,h=!0}++m}if(p&&p.length&&(o={["@media "+p.join(", ")]:o}),!h)continue e}}}(i[c]=i[c]||[]).push([r?"cv":`${l}-${s[l]}`,o,u])}return i},gze={},vze=Mv(),yze=(t,e)=>vze(t,()=>(...n)=>{const r=()=>{for(let i of n){i=typeof i=="object"&&i||{};let s=mu(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}Sf(i,[],[],t,o=>{e.rules.global.apply(o)})}}return""};return jM(r,{toString:r})}),xze=Mv(),bze=(t,e)=>xze(t,()=>n=>{const r=`${wa(t.prefix)}k-${mu(n)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];Sf(n,[],[],t,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return jM(i,{get name(){return i()},toString:i})}),Sze=class{constructor(t,e,n,r){this.token=t==null?"":String(t),this.value=e==null?"":String(e),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+wa(this.prefix)+wa(this.scale)+this.token}toString(){return this.computedValue}},wze=Mv(),Eze=(t,e)=>wze(t,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const i=`.${n=(n=typeof n=="string"?n:"")||`${wa(t.prefix)}t-${mu(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const c in r[l]){const u=`--${wa(t.prefix)}${l}-${c}`,d=lse(String(r[l][c]),t.prefix,l);s[l][c]=new Sze(c,d,l,t.prefix),o.push(`${u}:${d}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const l=`${r===t.theme?":root,":""}.${n}{${o.join(";")}}`;e.rules.themed.apply(l)}return n};return{...s,get className(){return a()},selector:i,toString:a}}),_ze=Mv(),cse=t=>{let e=!1;const n=_ze(t,r=>{e=!0;const i="prefix"in(r=typeof r=="object"&&r||{})?String(r.prefix):"",s=typeof r.media=="object"&&r.media||{},o=typeof r.root=="object"?r.root||null:globalThis.document||null,a=typeof r.theme=="object"&&r.theme||{},l={prefix:i,media:s,theme:a,themeMap:typeof r.themeMap=="object"&&r.themeMap||{...ZVe},utils:typeof r.utils=="object"&&r.utils||{}},c=cze(o),u={css:fze(l,c),globalCss:yze(l,c),keyframes:bze(l,c),createTheme:Eze(l,c),reset(){c.reset(),u.theme.toString()},theme:{},sheet:c,config:l,prefix:i,getCssText:c.toString,toString:c.toString};return String(u.theme=u.createTheme(a)),u});return e||n.reset(),n},Tze=()=>rU||(rU=cse()),Da=(...t)=>Tze().keyframes(...t),Zp=function(t){return t&&t.Math===Math&&t},Tt=Zp(typeof globalThis=="object"&&globalThis)||Zp(typeof window=="object"&&window)||Zp(typeof self=="object"&&self)||Zp(typeof io=="object"&&io)||Zp(typeof io=="object"&&io)||function(){return this}()||Function("return this")(),E_={},Bt=function(t){try{return!!t()}catch{return!0}},Cze=Bt,dr=!Cze(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),kze=Bt,__=!kze(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),Pze=__,i1=Function.prototype.call,Ar=Pze?i1.bind(i1):function(){return i1.apply(i1,arguments)},BM={},use={}.propertyIsEnumerable,dse=Object.getOwnPropertyDescriptor,Ize=dse&&!use.call({1:2},1);BM.f=Ize?function(e){var n=dse(this,e);return!!n&&n.enumerable}:use;var $v=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}},fse=__,hse=Function.prototype,AL=hse.call,Aze=fse&&hse.bind.bind(AL,AL),Xt=fse?Aze:function(t){return function(){return AL.apply(t,arguments)}},pse=Xt,Lze=pse({}.toString),Rze=pse("".slice),dp=function(t){return Rze(Lze(t),8,-1)},Oze=Xt,Dze=Bt,Mze=dp,_2=Object,$ze=Oze("".split),T_=Dze(function(){return!_2("z").propertyIsEnumerable(0)})?function(t){return Mze(t)==="String"?$ze(t,""):_2(t)}:_2,C_=function(t){return t==null},Nze=C_,Fze=TypeError,id=function(t){if(Nze(t))throw new Fze("Can't call method on "+t);return t},jze=T_,Bze=id,fp=function(t){return jze(Bze(t))},T2=typeof document=="object"&&document.all,bn=typeof T2>"u"&&T2!==void 0?function(t){return typeof t=="function"||t===T2}:function(t){return typeof t=="function"},Uze=bn,Lr=function(t){return typeof t=="object"?t!==null:Uze(t)},C2=Tt,Vze=bn,zze=function(t){return Vze(t)?t:void 0},xc=function(t,e){return arguments.length<2?zze(C2[t]):C2[t]&&C2[t][e]},Hze=Xt,k_=Hze({}.isPrototypeOf),Wze=Tt,cU=Wze.navigator,uU=cU&&cU.userAgent,Nv=uU?String(uU):"",mse=Tt,k2=Nv,dU=mse.process,fU=mse.Deno,hU=dU&&dU.versions||fU&&fU.version,pU=hU&&hU.v8,gs,fw;pU&&(gs=pU.split("."),fw=gs[0]>0&&gs[0]<4?1:+(gs[0]+gs[1]));!fw&&k2&&(gs=k2.match(/Edge\/(\d+)/),(!gs||gs[1]>=74)&&(gs=k2.match(/Chrome\/(\d+)/),gs&&(fw=+gs[1])));var Fv=fw,mU=Fv,Gze=Bt,Kze=Tt,qze=Kze.String,gse=!!Object.getOwnPropertySymbols&&!Gze(function(){var t=Symbol("symbol detection");return!qze(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&mU&&mU<41}),Yze=gse,vse=Yze&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Qze=xc,Xze=bn,Zze=k_,Jze=vse,eHe=Object,yse=Jze?function(t){return typeof t=="symbol"}:function(t){var e=Qze("Symbol");return Xze(e)&&Zze(e.prototype,eHe(t))},tHe=String,P_=function(t){try{return tHe(t)}catch{return"Object"}},nHe=bn,rHe=P_,iHe=TypeError,Ma=function(t){if(nHe(t))return t;throw new iHe(rHe(t)+" is not a function")},sHe=Ma,oHe=C_,UM=function(t,e){var n=t[e];return oHe(n)?void 0:sHe(n)},P2=Ar,I2=bn,A2=Lr,aHe=TypeError,lHe=function(t,e){var n,r;if(e==="string"&&I2(n=t.toString)&&!A2(r=P2(n,t))||I2(n=t.valueOf)&&!A2(r=P2(n,t))||e!=="string"&&I2(n=t.toString)&&!A2(r=P2(n,t)))return r;throw new aHe("Can't convert object to primitive value")},xse={exports:{}},cHe=!1,gU=Tt,uHe=Object.defineProperty,VM=function(t,e){try{uHe(gU,t,{value:e,configurable:!0,writable:!0})}catch{gU[t]=e}return e},dHe=Tt,fHe=VM,vU="__core-js_shared__",yU=xse.exports=dHe[vU]||fHe(vU,{});(yU.versions||(yU.versions=[])).push({version:"3.46.0",mode:"global",copyright:" 2014-2025 Denis Pushkarev (zloirock.ru), 2025 CoreJS Company (core-js.io)",license:"https://github.com/zloirock/core-js/blob/v3.46.0/LICENSE",source:"https://github.com/zloirock/core-js"});var zM=xse.exports,xU=zM,HM=function(t,e){return xU[t]||(xU[t]=e||{})},hHe=id,pHe=Object,sd=function(t){return pHe(hHe(t))},mHe=Xt,gHe=sd,vHe=mHe({}.hasOwnProperty),Si=Object.hasOwn||function(e,n){return vHe(gHe(e),n)},yHe=Xt,xHe=0,bHe=Math.random(),SHe=yHe(1.1.toString),bse=function(t){return"Symbol("+(t===void 0?"":t)+")_"+SHe(++xHe+bHe,36)},wHe=Tt,EHe=HM,bU=Si,_He=bse,THe=gse,CHe=vse,wf=wHe.Symbol,L2=EHe("wks"),kHe=CHe?wf.for||wf:wf&&wf.withoutSetter||_He,an=function(t){return bU(L2,t)||(L2[t]=THe&&bU(wf,t)?wf[t]:kHe("Symbol."+t)),L2[t]},PHe=Ar,SU=Lr,wU=yse,IHe=UM,AHe=lHe,LHe=an,RHe=TypeError,OHe=LHe("toPrimitive"),DHe=function(t,e){if(!SU(t)||wU(t))return t;var n=IHe(t,OHe),r;if(n){if(e===void 0&&(e="default"),r=PHe(n,t,e),!SU(r)||wU(r))return r;throw new RHe("Can't convert object to primitive value")}return e===void 0&&(e="number"),AHe(t,e)},MHe=DHe,$He=yse,Sse=function(t){var e=MHe(t,"string");return $He(e)?e:e+""},NHe=Tt,EU=Lr,LL=NHe.document,FHe=EU(LL)&&EU(LL.createElement),I_=function(t){return FHe?LL.createElement(t):{}},jHe=dr,BHe=Bt,UHe=I_,wse=!jHe&&!BHe(function(){return Object.defineProperty(UHe("div"),"a",{get:function(){return 7}}).a!==7}),VHe=dr,zHe=Ar,HHe=BM,WHe=$v,GHe=fp,KHe=Sse,qHe=Si,YHe=wse,_U=Object.getOwnPropertyDescriptor;E_.f=VHe?_U:function(e,n){if(e=GHe(e),n=KHe(n),YHe)try{return _U(e,n)}catch{}if(qHe(e,n))return WHe(!zHe(HHe.f,e,n),e[n])};var Lo={},QHe=dr,XHe=Bt,Ese=QHe&&XHe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),ZHe=Lr,JHe=String,eWe=TypeError,wi=function(t){if(ZHe(t))return t;throw new eWe(JHe(t)+" is not an object")},tWe=dr,nWe=wse,rWe=Ese,s1=wi,TU=Sse,iWe=TypeError,R2=Object.defineProperty,sWe=Object.getOwnPropertyDescriptor,O2="enumerable",D2="configurable",M2="writable";Lo.f=tWe?rWe?function(e,n,r){if(s1(e),n=TU(n),s1(r),typeof e=="function"&&n==="prototype"&&"value"in r&&M2 in r&&!r[M2]){var i=sWe(e,n);i&&i[M2]&&(e[n]=r.value,r={configurable:D2 in r?r[D2]:i[D2],enumerable:O2 in r?r[O2]:i[O2],writable:!1})}return R2(e,n,r)}:R2:function(e,n,r){if(s1(e),n=TU(n),s1(r),nWe)try{return R2(e,n,r)}catch{}if("get"in r||"set"in r)throw new iWe("Accessors not supported");return"value"in r&&(e[n]=r.value),e};var oWe=dr,aWe=Lo,lWe=$v,A_=oWe?function(t,e,n){return aWe.f(t,e,lWe(1,n))}:function(t,e,n){return t[e]=n,t},_se={exports:{}},RL=dr,cWe=Si,Tse=Function.prototype,uWe=RL&&Object.getOwnPropertyDescriptor,WM=cWe(Tse,"name"),dWe=WM&&(function(){}).name==="something",fWe=WM&&(!RL||RL&&uWe(Tse,"name").configurable),L_={EXISTS:WM,PROPER:dWe,CONFIGURABLE:fWe},hWe=Xt,pWe=bn,OL=zM,mWe=hWe(Function.toString);pWe(OL.inspectSource)||(OL.inspectSource=function(t){return mWe(t)});var GM=OL.inspectSource,gWe=Tt,vWe=bn,CU=gWe.WeakMap,yWe=vWe(CU)&&/native code/.test(String(CU)),xWe=HM,bWe=bse,kU=xWe("keys"),KM=function(t){return kU[t]||(kU[t]=bWe(t))},qM={},SWe=yWe,Cse=Tt,wWe=Lr,EWe=A_,$2=Si,N2=zM,_We=KM,TWe=qM,PU="Object already initialized",DL=Cse.TypeError,CWe=Cse.WeakMap,hw,k0,pw,kWe=function(t){return pw(t)?k0(t):hw(t,{})},PWe=function(t){return function(e){var n;if(!wWe(e)||(n=k0(e)).type!==t)throw new DL("Incompatible receiver, "+t+" required");return n}};if(SWe||N2.state){var zs=N2.state||(N2.state=new CWe);zs.get=zs.get,zs.has=zs.has,zs.set=zs.set,hw=function(t,e){if(zs.has(t))throw new DL(PU);return e.facade=t,zs.set(t,e),e},k0=function(t){return zs.get(t)||{}},pw=function(t){return zs.has(t)}}else{var Id=_We("state");TWe[Id]=!0,hw=function(t,e){if($2(t,Id))throw new DL(PU);return e.facade=t,EWe(t,Id,e),e},k0=function(t){return $2(t,Id)?t[Id]:{}},pw=function(t){return $2(t,Id)}}var od={set:hw,get:k0,has:pw,enforce:kWe,getterFor:PWe},YM=Xt,IWe=Bt,AWe=bn,o1=Si,ML=dr,LWe=L_.CONFIGURABLE,RWe=GM,kse=od,OWe=kse.enforce,DWe=kse.get,IU=String,Wx=Object.defineProperty,MWe=YM("".slice),$We=YM("".replace),NWe=YM([].join),FWe=ML&&!IWe(function(){return Wx(function(){},"length",{value:8}).length!==8}),jWe=String(String).split("String"),BWe=_se.exports=function(t,e,n){MWe(IU(e),0,7)==="Symbol("&&(e="["+$We(IU(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!o1(t,"name")||LWe&&t.name!==e)&&(ML?Wx(t,"name",{value:e,configurable:!0}):t.name=e),FWe&&n&&o1(n,"arity")&&t.length!==n.arity&&Wx(t,"length",{value:n.arity});try{n&&o1(n,"constructor")&&n.constructor?ML&&Wx(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var r=OWe(t);return o1(r,"source")||(r.source=NWe(jWe,typeof e=="string"?e:"")),t};Function.prototype.toString=BWe(function(){return AWe(this)&&DWe(this).source||RWe(this)},"toString");var Pse=_se.exports,UWe=bn,VWe=Lo,zWe=Pse,HWe=VM,Ro=function(t,e,n,r){r||(r={});var i=r.enumerable,s=r.name!==void 0?r.name:e;if(UWe(n)&&zWe(n,s,r),r.global)i?t[e]=n:HWe(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch{}i?t[e]=n:VWe.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},Ise={},WWe=Math.ceil,GWe=Math.floor,KWe=Math.trunc||function(e){var n=+e;return(n>0?GWe:WWe)(n)},qWe=KWe,QM=function(t){var e=+t;return e!==e||e===0?0:qWe(e)},YWe=QM,QWe=Math.max,XWe=Math.min,XM=function(t,e){var n=YWe(t);return n<0?QWe(n+e,0):XWe(n,e)},ZWe=QM,JWe=Math.min,Ase=function(t){var e=ZWe(t);return e>0?JWe(e,9007199254740991):0},eGe=Ase,ad=function(t){return eGe(t.length)},tGe=fp,nGe=XM,rGe=ad,AU=function(t){return function(e,n,r){var i=tGe(e),s=rGe(i);if(s===0)return!t&&-1;var o=nGe(r,s),a;if(t&&n!==n){for(;s>o;)if(a=i[o++],a!==a)return!0}else for(;s>o;o++)if((t||o in i)&&i[o]===n)return t||o||0;return!t&&-1}},Lse={includes:AU(!0),indexOf:AU(!1)},iGe=Xt,F2=Si,sGe=fp,oGe=Lse.indexOf,aGe=qM,LU=iGe([].push),Rse=function(t,e){var n=sGe(t),r=0,i=[],s;for(s in n)!F2(aGe,s)&&F2(n,s)&&LU(i,s);for(;e.length>r;)F2(n,s=e[r++])&&(~oGe(i,s)||LU(i,s));return i},ZM=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],lGe=Rse,cGe=ZM,uGe=cGe.concat("length","prototype");Ise.f=Object.getOwnPropertyNames||function(e){return lGe(e,uGe)};var JM={};JM.f=Object.getOwnPropertySymbols;var dGe=xc,fGe=Xt,hGe=Ise,pGe=JM,mGe=wi,gGe=fGe([].concat),vGe=dGe("Reflect","ownKeys")||function(e){var n=hGe.f(mGe(e)),r=pGe.f;return r?gGe(n,r(e)):n},RU=Si,yGe=vGe,xGe=E_,bGe=Lo,SGe=function(t,e,n){for(var r=yGe(e),i=bGe.f,s=xGe.f,o=0;o<r.length;o++){var a=r[o];!RU(t,a)&&!(n&&RU(n,a))&&i(t,a,s(e,a))}},wGe=Bt,EGe=bn,_Ge=/#|\.prototype\./,jv=function(t,e){var n=CGe[TGe(t)];return n===PGe?!0:n===kGe?!1:EGe(e)?wGe(e):!!e},TGe=jv.normalize=function(t){return String(t).replace(_Ge,".").toLowerCase()},CGe=jv.data={},kGe=jv.NATIVE="N",PGe=jv.POLYFILL="P",Ose=jv,a1=Tt,IGe=E_.f,AGe=A_,LGe=Ro,RGe=VM,OGe=SGe,DGe=Ose,un=function(t,e){var n=t.target,r=t.global,i=t.stat,s,o,a,l,c,u;if(r?o=a1:i?o=a1[n]||RGe(n,{}):o=a1[n]&&a1[n].prototype,o)for(a in e){if(c=e[a],t.dontCallGetSet?(u=IGe(o,a),l=u&&u.value):l=o[a],s=DGe(r?a:n+(i?".":"#")+a,t.forced),!s&&l!==void 0){if(typeof c==typeof l)continue;OGe(c,l)}(t.sham||l&&l.sham)&&AGe(c,"sham",!0),LGe(o,a,c,t)}},MGe=an,$Ge=MGe("toStringTag"),Dse={};Dse[$Ge]="z";var e4=String(Dse)==="[object z]",NGe=e4,FGe=bn,Gx=dp,jGe=an,BGe=jGe("toStringTag"),UGe=Object,VGe=Gx(function(){return arguments}())==="Arguments",zGe=function(t,e){try{return t[e]}catch{}},Bv=NGe?Gx:function(t){var e,n,r;return t===void 0?"Undefined":t===null?"Null":typeof(n=zGe(e=UGe(t),BGe))=="string"?n:VGe?Gx(e):(r=Gx(e))==="Object"&&FGe(e.callee)?"Arguments":r},HGe=Bv,WGe=String,$a=function(t){if(HGe(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return WGe(t)},GGe=wi,Mse=function(){var t=GGe(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},t4=Bt,KGe=Tt,n4=KGe.RegExp,r4=t4(function(){var t=n4("a","y");return t.lastIndex=2,t.exec("abcd")!==null}),qGe=r4||t4(function(){return!n4("a","y").sticky}),YGe=r4||t4(function(){var t=n4("^r","gy");return t.lastIndex=2,t.exec("str")!==null}),QGe={BROKEN_CARET:YGe,MISSED_STICKY:qGe,UNSUPPORTED_Y:r4},$se={},XGe=Rse,ZGe=ZM,Nse=Object.keys||function(e){return XGe(e,ZGe)},JGe=dr,eKe=Ese,tKe=Lo,nKe=wi,rKe=fp,iKe=Nse;$se.f=JGe&&!eKe?Object.defineProperties:function(e,n){nKe(e);for(var r=rKe(n),i=iKe(n),s=i.length,o=0,a;s>o;)tKe.f(e,a=i[o++],r[a]);return e};var sKe=xc,Fse=sKe("document","documentElement"),oKe=wi,aKe=$se,OU=ZM,lKe=qM,cKe=Fse,uKe=I_,dKe=KM,DU=">",MU="<",$L="prototype",NL="script",jse=dKe("IE_PROTO"),j2=function(){},Bse=function(t){return MU+NL+DU+t+MU+"/"+NL+DU},$U=function(t){t.write(Bse("")),t.close();var e=t.parentWindow.Object;return t=null,e},fKe=function(){var t=uKe("iframe"),e="java"+NL+":",n;return t.style.display="none",cKe.appendChild(t),t.src=String(e),n=t.contentWindow.document,n.open(),n.write(Bse("document.F=Object")),n.close(),n.F},l1,Kx=function(){try{l1=new ActiveXObject("htmlfile")}catch{}Kx=typeof document<"u"?document.domain&&l1?$U(l1):fKe():$U(l1);for(var t=OU.length;t--;)delete Kx[$L][OU[t]];return Kx()};lKe[jse]=!0;var R_=Object.create||function(e,n){var r;return e!==null?(j2[$L]=oKe(e),r=new j2,j2[$L]=null,r[jse]=e):r=Kx(),n===void 0?r:aKe.f(r,n)},hKe=Bt,pKe=Tt,mKe=pKe.RegExp,gKe=hKe(function(){var t=mKe(".","s");return!(t.dotAll&&t.test(`
`)&&t.flags==="s")}),vKe=Bt,yKe=Tt,xKe=yKe.RegExp,bKe=vKe(function(){var t=xKe("(?<a>b)","g");return t.exec("b").groups.a!=="b"||"b".replace(t,"$<a>c")!=="bc"}),Ef=Ar,O_=Xt,SKe=$a,wKe=Mse,EKe=QGe,_Ke=HM,TKe=R_,CKe=od.get,kKe=gKe,PKe=bKe,IKe=_Ke("native-string-replace",String.prototype.replace),mw=RegExp.prototype.exec,FL=mw,AKe=O_("".charAt),LKe=O_("".indexOf),RKe=O_("".replace),B2=O_("".slice),jL=function(){var t=/a/,e=/b*/g;return Ef(mw,t,"a"),Ef(mw,e,"a"),t.lastIndex!==0||e.lastIndex!==0}(),Use=EKe.BROKEN_CARET,BL=/()??/.exec("")[1]!==void 0,OKe=jL||BL||Use||kKe||PKe;OKe&&(FL=function(e){var n=this,r=CKe(n),i=SKe(e),s=r.raw,o,a,l,c,u,d,f;if(s)return s.lastIndex=n.lastIndex,o=Ef(FL,s,i),n.lastIndex=s.lastIndex,o;var h=r.groups,p=Use&&n.sticky,m=Ef(wKe,n),g=n.source,y=0,x=i;if(p&&(m=RKe(m,"y",""),LKe(m,"g")===-1&&(m+="g"),x=B2(i,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&AKe(i,n.lastIndex-1)!==`
`)&&(g="(?: "+g+")",x=" "+x,y++),a=new RegExp("^(?:"+g+")",m)),BL&&(a=new RegExp("^"+g+"$(?!\\s)",m)),jL&&(l=n.lastIndex),c=Ef(mw,p?a:n,x),p?c?(c.input=B2(c.input,y),c[0]=B2(c[0],y),c.index=n.lastIndex,n.lastIndex+=c[0].length):n.lastIndex=0:jL&&c&&(n.lastIndex=n.global?c.index+c[0].length:l),BL&&c&&c.length>1&&Ef(IKe,c[0],a,function(){for(u=1;u<arguments.length-2;u++)arguments[u]===void 0&&(c[u]=void 0)}),c&&h)for(c.groups=d=TKe(null),u=0;u<h.length;u++)f=h[u],d[f[0]]=c[f[1]];return c});var DKe=FL,MKe=un,NU=DKe;MKe({target:"RegExp",proto:!0,forced:/./.exec!==NU},{exec:NU});var $Ke=e4,NKe=Bv,FKe=$Ke?{}.toString:function(){return"[object "+NKe(this)+"]"},jKe=e4,BKe=Ro,UKe=FKe;jKe||BKe(Object.prototype,"toString",UKe,{unsafe:!0});var Jp=Tt,VKe=Nv,zKe=dp,c1=function(t){return VKe.slice(0,t.length)===t},Vse=function(){return c1("Bun/")?"BUN":c1("Cloudflare-Workers")?"CLOUDFLARE":c1("Deno/")?"DENO":c1("Node.js/")?"NODE":Jp.Bun&&typeof Bun.version=="string"?"BUN":Jp.Deno&&typeof Deno.version=="object"?"DENO":zKe(Jp.process)==="process"?"NODE":Jp.window&&Jp.document?"BROWSER":"REST"}(),HKe=Vse,D_=HKe==="NODE",WKe=Tt,GKe=WKe,KKe=Xt,qKe=Ma,YKe=function(t,e,n){try{return KKe(qKe(Object.getOwnPropertyDescriptor(t,e)[n]))}catch{}},QKe=Lr,XKe=function(t){return QKe(t)||t===null},ZKe=XKe,JKe=String,eqe=TypeError,tqe=function(t){if(ZKe(t))return t;throw new eqe("Can't set "+JKe(t)+" as a prototype")},nqe=YKe,rqe=Lr,iqe=id,sqe=tqe,zse=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,e={},n;try{n=nqe(Object.prototype,"__proto__","set"),n(e,[]),t=e instanceof Array}catch{}return function(i,s){return iqe(i),sqe(s),rqe(i)&&(t?n(i,s):i.__proto__=s),i}}():void 0),oqe=Lo.f,aqe=Si,lqe=an,FU=lqe("toStringTag"),hp=function(t,e,n){t&&!n&&(t=t.prototype),t&&!aqe(t,FU)&&oqe(t,FU,{configurable:!0,value:e})},jU=Pse,cqe=Lo,i4=function(t,e,n){return n.get&&jU(n.get,e,{getter:!0}),n.set&&jU(n.set,e,{setter:!0}),cqe.f(t,e,n)},uqe=xc,dqe=i4,fqe=an,hqe=dr,BU=fqe("species"),pqe=function(t){var e=uqe(t);hqe&&e&&!e[BU]&&dqe(e,BU,{configurable:!0,get:function(){return this}})},mqe=k_,gqe=TypeError,s4=function(t,e){if(mqe(e,t))return t;throw new gqe("Incorrect invocation")},vqe=Xt,yqe=Bt,Hse=bn,xqe=Bv,bqe=xc,Sqe=GM,Wse=function(){},Gse=bqe("Reflect","construct"),o4=/^\s*(?:class|function)\b/,wqe=vqe(o4.exec),Eqe=!o4.test(Wse),em=function(e){if(!Hse(e))return!1;try{return Gse(Wse,[],e),!0}catch{return!1}},Kse=function(e){if(!Hse(e))return!1;switch(xqe(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Eqe||!!wqe(o4,Sqe(e))}catch{return!0}};Kse.sham=!0;var M_=!Gse||yqe(function(){var t;return em(em.call)||!em(Object)||!em(function(){t=!0})||t})?Kse:em,_qe=M_,Tqe=P_,Cqe=TypeError,kqe=function(t){if(_qe(t))return t;throw new Cqe(Tqe(t)+" is not a constructor")},UU=wi,Pqe=kqe,Iqe=C_,Aqe=an,Lqe=Aqe("species"),Rqe=function(t,e){var n=UU(t).constructor,r;return n===void 0||Iqe(r=UU(n)[Lqe])?e:Pqe(r)},Oqe=__,qse=Function.prototype,VU=qse.apply,zU=qse.call,Dqe=typeof Reflect=="object"&&Reflect.apply||(Oqe?zU.bind(VU):function(){return zU.apply(VU,arguments)}),Mqe=dp,$qe=Xt,Yse=function(t){if(Mqe(t)==="Function")return $qe(t)},HU=Yse,Nqe=Ma,Fqe=__,jqe=HU(HU.bind),ld=function(t,e){return Nqe(t),e===void 0?t:Fqe?jqe(t,e):function(){return t.apply(e,arguments)}},Bqe=Xt,$_=Bqe([].slice),Uqe=TypeError,a4=function(t,e){if(t<e)throw new Uqe("Not enough arguments");return t},Vqe=Nv,Qse=/(?:ipad|iphone|ipod).*applewebkit/i.test(Vqe),ui=Tt,zqe=Dqe,Hqe=ld,WU=bn,Wqe=Si,Xse=Bt,GU=Fse,Gqe=$_,KU=I_,Kqe=a4,qqe=Qse,Yqe=D_,UL=ui.setImmediate,VL=ui.clearImmediate,Qqe=ui.process,U2=ui.Dispatch,Xqe=ui.Function,qU=ui.MessageChannel,Zqe=ui.String,V2=0,mg={},YU="onreadystatechange",P0,Ac,z2,H2;Xse(function(){P0=ui.location});var l4=function(t){if(Wqe(mg,t)){var e=mg[t];delete mg[t],e()}},W2=function(t){return function(){l4(t)}},QU=function(t){l4(t.data)},XU=function(t){ui.postMessage(Zqe(t),P0.protocol+"//"+P0.host)};(!UL||!VL)&&(UL=function(e){Kqe(arguments.length,1);var n=WU(e)?e:Xqe(e),r=Gqe(arguments,1);return mg[++V2]=function(){zqe(n,void 0,r)},Ac(V2),V2},VL=function(e){delete mg[e]},Yqe?Ac=function(t){Qqe.nextTick(W2(t))}:U2&&U2.now?Ac=function(t){U2.now(W2(t))}:qU&&!qqe?(z2=new qU,H2=z2.port2,z2.port1.onmessage=QU,Ac=Hqe(H2.postMessage,H2)):ui.addEventListener&&WU(ui.postMessage)&&!ui.importScripts&&P0&&P0.protocol!=="file:"&&!Xse(XU)?(Ac=XU,ui.addEventListener("message",QU,!1)):YU in KU("script")?Ac=function(t){GU.appendChild(KU("script"))[YU]=function(){GU.removeChild(this),l4(t)}}:Ac=function(t){setTimeout(W2(t),0)});var Zse={set:UL,clear:VL},ZU=Tt,Jqe=dr,eYe=Object.getOwnPropertyDescriptor,Jse=function(t){if(!Jqe)return ZU[t];var e=eYe(ZU,t);return e&&e.value},eoe=function(){this.head=null,this.tail=null};eoe.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t){var e=this.head=t.next;return e===null&&(this.tail=null),t.item}}};var toe=eoe,tYe=Nv,nYe=/ipad|iphone|ipod/i.test(tYe)&&typeof Pebble<"u",rYe=Nv,iYe=/web0s(?!.*chrome)/i.test(rYe),Lh=Tt,sYe=Jse,JU=ld,G2=Zse.set,oYe=toe,aYe=Qse,lYe=nYe,cYe=iYe,K2=D_,eV=Lh.MutationObserver||Lh.WebKitMutationObserver,tV=Lh.document,nV=Lh.process,u1=Lh.Promise,zL=sYe("queueMicrotask"),Ad,q2,Y2,d1,rV;if(!zL){var f1=new oYe,h1=function(){var t,e;for(K2&&(t=nV.domain)&&t.exit();e=f1.get();)try{e()}catch(n){throw f1.head&&Ad(),n}t&&t.enter()};!aYe&&!K2&&!cYe&&eV&&tV?(q2=!0,Y2=tV.createTextNode(""),new eV(h1).observe(Y2,{characterData:!0}),Ad=function(){Y2.data=q2=!q2}):!lYe&&u1&&u1.resolve?(d1=u1.resolve(void 0),d1.constructor=u1,rV=JU(d1.then,d1),Ad=function(){rV(h1)}):K2?Ad=function(){nV.nextTick(h1)}:(G2=JU(G2,Lh),Ad=function(){G2(h1)}),zL=function(t){f1.head||Ad(),f1.add(t)}}var uYe=zL,dYe=function(t,e){try{arguments.length===1?console.error(t):console.error(t,e)}catch{}},c4=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}},fYe=Tt,N_=fYe.Promise,hYe=Tt,gg=N_,pYe=bn,mYe=Ose,gYe=GM,vYe=an,iV=Vse,Q2=Fv;gg&&gg.prototype;var yYe=vYe("species"),HL=!1,noe=pYe(hYe.PromiseRejectionEvent),xYe=mYe("Promise",function(){var t=gYe(gg),e=t!==String(gg);if(!e&&Q2===66)return!0;if(!Q2||Q2<51||!/native code/.test(t)){var n=new gg(function(s){s(1)}),r=function(s){s(function(){},function(){})},i=n.constructor={};if(i[yYe]=r,HL=n.then(function(){})instanceof r,!HL)return!0}return!e&&(iV==="BROWSER"||iV==="DENO")&&!noe}),Uv={CONSTRUCTOR:xYe,REJECTION_EVENT:noe,SUBCLASSING:HL},pp={},sV=Ma,bYe=TypeError,SYe=function(t){var e,n;this.promise=new t(function(r,i){if(e!==void 0||n!==void 0)throw new bYe("Bad Promise constructor");e=r,n=i}),this.resolve=sV(e),this.reject=sV(n)};pp.f=function(t){return new SYe(t)};var wYe=un,gw=D_,ac=Tt,EYe=GKe,Rh=Ar,oV=Ro,aV=zse,_Ye=hp,TYe=pqe,CYe=Ma,qx=bn,kYe=Lr,PYe=s4,IYe=Rqe,roe=Zse.set,u4=uYe,AYe=dYe,LYe=c4,RYe=toe,ioe=od,vw=N_,d4=Uv,soe=pp,F_="Promise",ooe=d4.CONSTRUCTOR,OYe=d4.REJECTION_EVENT,DYe=d4.SUBCLASSING,X2=ioe.getterFor(F_),MYe=ioe.set,Hd=vw&&vw.prototype,Kc=vw,p1=Hd,aoe=ac.TypeError,WL=ac.document,f4=ac.process,GL=soe.f,$Ye=GL,NYe=!!(WL&&WL.createEvent&&ac.dispatchEvent),loe="unhandledrejection",FYe="rejectionhandled",lV=0,coe=1,jYe=2,h4=1,uoe=2,m1,cV,doe,uV,foe=function(t){var e;return kYe(t)&&qx(e=t.then)?e:!1},hoe=function(t,e){var n=e.value,r=e.state===coe,i=r?t.ok:t.fail,s=t.resolve,o=t.reject,a=t.domain,l,c,u;try{i?(r||(e.rejection===uoe&&UYe(e),e.rejection=h4),i===!0?l=n:(a&&a.enter(),l=i(n),a&&(a.exit(),u=!0)),l===t.promise?o(new aoe("Promise-chain cycle")):(c=foe(l))?Rh(c,l,s,o):s(l)):o(n)}catch(d){a&&!u&&a.exit(),o(d)}},poe=function(t,e){t.notified||(t.notified=!0,u4(function(){for(var n=t.reactions,r;r=n.get();)hoe(r,t);t.notified=!1,e&&!t.rejection&&BYe(t)}))},moe=function(t,e,n){var r,i;NYe?(r=WL.createEvent("Event"),r.promise=e,r.reason=n,r.initEvent(t,!1,!0),ac.dispatchEvent(r)):r={promise:e,reason:n},!OYe&&(i=ac["on"+t])?i(r):t===loe&&AYe("Unhandled promise rejection",n)},BYe=function(t){Rh(roe,ac,function(){var e=t.facade,n=t.value,r=dV(t),i;if(r&&(i=LYe(function(){gw?f4.emit("unhandledRejection",n,e):moe(loe,e,n)}),t.rejection=gw||dV(t)?uoe:h4,i.error))throw i.value})},dV=function(t){return t.rejection!==h4&&!t.parent},UYe=function(t){Rh(roe,ac,function(){var e=t.facade;gw?f4.emit("rejectionHandled",e):moe(FYe,e,t.value)})},_f=function(t,e,n){return function(r){t(e,r,n)}},Qf=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=jYe,poe(t,!0))},KL=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new aoe("Promise can't be resolved itself");var r=foe(e);r?u4(function(){var i={done:!1};try{Rh(r,e,_f(KL,i,t),_f(Qf,i,t))}catch(s){Qf(i,s,t)}}):(t.value=e,t.state=coe,poe(t,!1))}catch(i){Qf({done:!1},i,t)}}};if(ooe&&(Kc=function(e){PYe(this,p1),CYe(e),Rh(m1,this);var n=X2(this);try{e(_f(KL,n),_f(Qf,n))}catch(r){Qf(n,r)}},p1=Kc.prototype,m1=function(e){MYe(this,{type:F_,done:!1,notified:!1,parent:!1,reactions:new RYe,rejection:!1,state:lV,value:null})},m1.prototype=oV(p1,"then",function(e,n){var r=X2(this),i=GL(IYe(this,Kc));return r.parent=!0,i.ok=qx(e)?e:!0,i.fail=qx(n)&&n,i.domain=gw?f4.domain:void 0,r.state===lV?r.reactions.add(i):u4(function(){hoe(i,r)}),i.promise}),cV=function(){var t=new m1,e=X2(t);this.promise=t,this.resolve=_f(KL,e),this.reject=_f(Qf,e)},soe.f=GL=function(t){return t===Kc||t===doe?new cV(t):$Ye(t)},qx(vw)&&Hd!==Object.prototype)){uV=Hd.then,DYe||oV(Hd,"then",function(e,n){var r=this;return new Kc(function(i,s){Rh(uV,r,i,s)}).then(e,n)},{unsafe:!0});try{delete Hd.constructor}catch{}aV&&aV(Hd,p1)}wYe({global:!0,constructor:!0,wrap:!0,forced:ooe},{Promise:Kc});doe=EYe.Promise;_Ye(Kc,F_,!1);TYe(F_);var Vv={},VYe=an,zYe=Vv,HYe=VYe("iterator"),WYe=Array.prototype,goe=function(t){return t!==void 0&&(zYe.Array===t||WYe[HYe]===t)},GYe=Bv,fV=UM,KYe=C_,qYe=Vv,YYe=an,QYe=YYe("iterator"),j_=function(t){if(!KYe(t))return fV(t,QYe)||fV(t,"@@iterator")||qYe[GYe(t)]},XYe=Ar,ZYe=Ma,JYe=wi,eQe=P_,tQe=j_,nQe=TypeError,p4=function(t,e){var n=arguments.length<2?tQe(t):e;if(ZYe(n))return JYe(XYe(n,t));throw new nQe(eQe(t)+" is not iterable")},rQe=Ar,hV=wi,iQe=UM,voe=function(t,e,n){var r,i;hV(t);try{if(r=iQe(t,"return"),!r){if(e==="throw")throw n;return n}r=rQe(r,t)}catch(s){i=!0,r=s}if(e==="throw")throw n;if(i)throw r;return hV(r),n},sQe=ld,oQe=Ar,aQe=wi,lQe=P_,cQe=goe,uQe=ad,pV=k_,dQe=p4,fQe=j_,mV=voe,hQe=TypeError,Yx=function(t,e){this.stopped=t,this.result=e},gV=Yx.prototype,yoe=function(t,e,n){var r=n&&n.that,i=!!(n&&n.AS_ENTRIES),s=!!(n&&n.IS_RECORD),o=!!(n&&n.IS_ITERATOR),a=!!(n&&n.INTERRUPTED),l=sQe(e,r),c,u,d,f,h,p,m,g=function(x){return c&&mV(c,"normal"),new Yx(!0,x)},y=function(x){return i?(aQe(x),a?l(x[0],x[1],g):l(x[0],x[1])):a?l(x,g):l(x)};if(s)c=t.iterator;else if(o)c=t;else{if(u=fQe(t),!u)throw new hQe(lQe(t)+" is not iterable");if(cQe(u)){for(d=0,f=uQe(t);f>d;d++)if(h=y(t[d]),h&&pV(gV,h))return h;return new Yx(!1)}c=dQe(t,u)}for(p=s?t.next:c.next;!(m=oQe(p,c)).done;){try{h=y(m.value)}catch(x){mV(c,"throw",x)}if(typeof h=="object"&&h&&pV(gV,h))return h}return new Yx(!1)},pQe=an,xoe=pQe("iterator"),boe=!1;try{var mQe=0,vV={next:function(){return{done:!!mQe++}},return:function(){boe=!0}};vV[xoe]=function(){return this},Array.from(vV,function(){throw 2})}catch{}var gQe=function(t,e){try{if(!e&&!boe)return!1}catch{return!1}var n=!1;try{var r={};r[xoe]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch{}return n},vQe=N_,yQe=gQe,xQe=Uv.CONSTRUCTOR,Soe=xQe||!yQe(function(t){vQe.all(t).then(void 0,function(){})}),bQe=un,SQe=Ar,wQe=Ma,EQe=pp,_Qe=c4,TQe=yoe,CQe=Soe;bQe({target:"Promise",stat:!0,forced:CQe},{all:function(e){var n=this,r=EQe.f(n),i=r.resolve,s=r.reject,o=_Qe(function(){var a=wQe(n.resolve),l=[],c=0,u=1;TQe(e,function(d){var f=c++,h=!1;u++,SQe(a,n,d).then(function(p){h||(h=!0,l[f]=p,--u||i(l))},s)}),--u||i(l)});return o.error&&s(o.value),r.promise}});var kQe=un,PQe=Uv.CONSTRUCTOR,qL=N_,IQe=xc,AQe=bn,LQe=Ro,yV=qL&&qL.prototype;kQe({target:"Promise",proto:!0,forced:PQe,real:!0},{catch:function(t){return this.then(void 0,t)}});if(AQe(qL)){var xV=IQe("Promise").prototype.catch;yV.catch!==xV&&LQe(yV,"catch",xV,{unsafe:!0})}var RQe=un,OQe=Ar,DQe=Ma,MQe=pp,$Qe=c4,NQe=yoe,FQe=Soe;RQe({target:"Promise",stat:!0,forced:FQe},{race:function(e){var n=this,r=MQe.f(n),i=r.reject,s=$Qe(function(){var o=DQe(n.resolve);NQe(e,function(a){OQe(o,n,a).then(r.resolve,i)})});return s.error&&i(s.value),r.promise}});var jQe=un,BQe=pp,UQe=Uv.CONSTRUCTOR;jQe({target:"Promise",stat:!0,forced:UQe},{reject:function(e){var n=BQe.f(this),r=n.reject;return r(e),n.promise}});var VQe=wi,zQe=Lr,HQe=pp,WQe=function(t,e){if(VQe(t),zQe(e)&&e.constructor===t)return e;var n=HQe.f(t),r=n.resolve;return r(e),n.promise},GQe=un,KQe=xc,qQe=Uv.CONSTRUCTOR,YQe=WQe;KQe("Promise");GQe({target:"Promise",stat:!0,forced:qQe},{resolve:function(e){return YQe(this,e)}});var QQe=an,XQe=R_,ZQe=Lo.f,YL=QQe("unscopables"),QL=Array.prototype;QL[YL]===void 0&&ZQe(QL,YL,{configurable:!0,value:XQe(null)});var woe=function(t){QL[YL][t]=!0},JQe=un,eXe=Lse.includes,tXe=Bt,nXe=woe,rXe=tXe(function(){return!Array(1).includes()});JQe({target:"Array",proto:!0,forced:rXe},{includes:function(e){return eXe(this,e,arguments.length>1?arguments[1]:void 0)}});nXe("includes");var iXe=Lr,sXe=dp,oXe=an,aXe=oXe("match"),lXe=function(t){var e;return iXe(t)&&((e=t[aXe])!==void 0?!!e:sXe(t)==="RegExp")},cXe=lXe,uXe=TypeError,Eoe=function(t){if(cXe(t))throw new uXe("The method doesn't accept regular expressions");return t},dXe=an,fXe=dXe("match"),_oe=function(t){var e=/./;try{"/./"[t](e)}catch{try{return e[fXe]=!1,"/./"[t](e)}catch{}}return!1},hXe=un,pXe=Xt,mXe=Eoe,gXe=id,bV=$a,vXe=_oe,yXe=pXe("".indexOf);hXe({target:"String",proto:!0,forced:!vXe("includes")},{includes:function(e){return!!~yXe(bV(gXe(this)),bV(mXe(e)),arguments.length>1?arguments[1]:void 0)}});function xXe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bXe(t){var e=xXe(t,"string");return typeof e=="symbol"?e:String(e)}function rs(t,e,n){return e=bXe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var cd=function(){return typeof window<"u"},Toe=function(){var e,n,r;return cd()?(e=window)===null||e===void 0||(n=e.navigator)===null||n===void 0||(r=n.userAgent)===null||r===void 0?void 0:r.toLowerCase():""},Coe=function(){return/iphone|ipad|ipod|ios|CriOS|FxiOS/.test(Toe())},koe=function(){return/android/.test(Toe())},yw=function(){return cd()&&(Coe()||koe())},Poe=function(e){if(cd()&&e!==null&&e!==void 0&&e.mime){var n;if(e!=null&&(n=e.type)!==null&&n!==void 0&&n.includes("audio")){var r=document.createElement("audio");return r.canPlayType(e.mime).length>0}else{var i=document.createElement("video");return i.canPlayType(e.mime).length>0}}return!0},Ga="#00a55f",SXe="#B7B7B7",Z2="rgba(255,255,255,1)",wXe={borderStyles:{containerBorderStyle:"solid"},borderWidths:{containerBorderWidth:0,loadingWidth:"3px"},colors:{accent:Ga,background:"#000000",containerBorderColor:"transparent",icon:Z2,iconHover:"rgba(255,255,255,0.8)",liveIndicator:"#e5484d",loading:Ga,progressLeft:Ga,progressMiddle:Ga,progressRight:Ga,progressThumb:Z2,volumeLeft:Ga,volumeMiddle:Ga,volumeRight:Ga,volumeThumb:Z2,errorText:SXe},fonts:{display:"ui-sans-serif"},fontSizes:{timeFontSize:"1.0rem",timeFontSizeMd:"0.95rem",timeFontSizeSm:"0.85rem",titleFontSize:"1.1rem",titleFontSizeMd:"1rem",titleFontSizeSm:"0.9rem",errorTitleFontSize:"2.5rem",errorTitleFontSizeMd:"2.0rem",errorTitleFontSizeSm:"1.3rem",errorTextFontSize:"0.95rem",errorTextFontSizeMd:"0.85rem",errorTextFontSizeSm:"0.75rem"},fontWeights:{titleFontWeight:"400",errorTitleFontWeight:"700"},sizes:{iconButtonSize:"42px",iconButtonSizeSm:"36px",liveIndicatorSize:"5px",loading:"64px",thumb:"10px",thumbActive:"12px",trackActive:"5px",trackContainerHeight:"15px",trackContainerHeightSm:"20px",trackInactive:"3px"},space:{controlsBottomMarginX:"10px",controlsBottomMarginY:"5px",controlsTopMarginX:"15px",controlsTopMarginY:"10px",timeMarginX:"8px"},radii:{containerBorderRadius:"0px",slider:"3px"}},B_=cse({media:{sm:"(min-width: 640px)",md:"(min-width: 768px)",lg:"(min-width: 1024px)"},theme:wXe}),Ne=B_.css,EXe=B_.createTheme;B_.theme;B_.getCssText;var _Xe=Da({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1.1)"}}),TXe=Ne("button",{background:"none",border:"none",cursor:"pointer",outline:"inherit",padding:0,height:"$iconButtonSizeSm",width:"$iconButtonSizeSm",minHeight:"$iconButtonSizeSm",minWidth:"$iconButtonSizeSm","@lg":{height:"$iconButtonSize",width:"$iconButtonSize",minHeight:"$iconButtonSize",minWidth:"$iconButtonSize"},color:"$icon","&:hover":{color:"$iconHover",animation:yw()?void 0:"".concat(_Xe," 200ms")}}),Lc,CXe=Ne("div",{variants:{aspectRatio:(Lc={},rs(Lc,dn[0].key,rs({aspectRatio:dn[0].value},"@supports not (aspect-ratio: ".concat(dn[0].value,")"),{"&:before":{float:"left",paddingTop:"calc(".concat(dn[0].value,")%"),content:""},"&:after":{display:"block",content:"",clear:"both"}})),rs(Lc,dn[1].key,rs({aspectRatio:dn[1].value},"@supports not (aspect-ratio: ".concat(dn[1].value,")"),{"&:before":{float:"left",paddingTop:"calc(".concat(dn[1].value,")%"),content:""},"&:after":{display:"block",content:"",clear:"both"}})),rs(Lc,dn[2].key,rs({aspectRatio:dn[2].value},"@supports not (aspect-ratio: ".concat(dn[2].value,")"),{"&:before":{float:"left",paddingTop:"calc(".concat(dn[2].value,")%"),content:""},"&:after":{display:"block",content:"",clear:"both"}})),rs(Lc,dn[3].key,rs({aspectRatio:dn[3].value},"@supports not (aspect-ratio: ".concat(dn[3].value,")"),{"&:before":{float:"left",paddingTop:"calc(".concat(dn[3].value,")%"),content:""},"&:after":{display:"block",content:"",clear:"both"}})),rs(Lc,dn[4].key,rs({aspectRatio:dn[4].value},"@supports not (aspect-ratio: ".concat(dn[4].value,")"),{"&:before":{float:"left",paddingTop:"calc(".concat(dn[4].value,")%"),content:""},"&:after":{display:"block",content:"",clear:"both"}})),Lc)}}),kXe=Ne(CXe,{fontFamily:"$display, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji",backgroundColor:"$background",overflow:"hidden",maxWidth:"100%",maxHeight:"100%",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flex:1,svg:{pointerEvents:"none"},variants:{size:{fullscreen:{zIndex:2147483647},default:{boxShadow:"rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px",borderStyle:"$containerBorderStyle",borderColor:"$containerBorderColor",borderRadius:"$containerBorderRadius",borderWidth:"$containerBorderWidth",zIndex:1}}},defaultVariants:{size:"default"}}),U_=Ne("span",{color:"$icon",userSelect:"none"}),PXe=Ne("div",{display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"220px",marginTop:"1rem","@md":{maxWidth:"340px"},maxHeight:"100%"}),IXe=Ne(U_,{fontWeight:"$errorTitleFontWeight",margin:"0.5rem 0 0.5rem 0",fontSize:"$errorTitleFontSizeSm","@md":{fontSize:"$errorTitleFontSizeMd",margin:"2rem 0 0.5rem 0"},"@lg":{fontSize:"$errorTitleFontSize"}}),AXe=Ne(U_,{fontWeight:"$titleFontWeight",color:"$errorText",textAlign:"center",width:"90%",fontSize:"$errorTextFontSizeSm",marginBottom:"1rem","@md":{fontSize:"$errorTextFontSizeMd"},"@lg":{fontSize:"$errorTextFontSize"}}),LXe={background:PXe,title:IXe,text:AXe},RXe=Da({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),OXe=Ne("div",{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%","&:after":{content:" ",display:"block",width:"$loading",height:"$loading",maxWidth:"100%",maxHeight:"100%",borderRadius:"50%",borderWidth:"$loadingWidth",borderStyle:"solid",borderColor:"$loading transparent $loading transparent",animation:"".concat(RXe," 1.4s ease-in-out infinite")}}),DXe=Da({"0%":{opacity:1},"100%":{opacity:0}}),MXe=Da({"0%":{opacity:0},"100%":{opacity:1}}),zv=Ne("div",{variants:{display:{shown:{opacity:1,animation:yw()?void 0:"".concat(MXe," 0.2s")},hidden:{opacity:0,animation:yw()?void 0:"".concat(DXe," 0.2s")}}},defaultVariants:{display:"shown"}}),$Xe=Ne(zv,{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",bottom:0,left:0,right:0,top:0,height:"100%",backgroundColor:"#000000"}),NXe=Ne(zv,{position:"absolute",bottom:0,left:0,right:0,height:233,marginBottom:-1,maxWidth:"100%",maxHeight:"100%",overflow:"hidden",backgroundImage:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADpCAYAAADlAl1mAAAAAXNSR0IArs4c6QAAAexJREFUOE9V0ftrzXEcx/H3x+43l9lmGGaz65ld2YUZG2YYKUlJUpKSpNZSkpSkJClJSVKSkj9Sj8/3nJ12fnie5/v9en/en+/3nIjik6rfNOU6YwfJqNGp0ctWGylSLavTqzNe72S9YYgGaYOysYJodKxJ2uSeZseaC4uUWpQt0lbWWlhEtFnVZv1O5RbSLkHGbifKiBR7XJnR7kS7dG+BSNlSh7TDvZ02d5rL6DLXxfYZriCiW69bbz+rIKUDyoyDW+hxB0RPpJQOCTIOb8cRZUavB+r1QCyOVpD6WJ97s/Wb67f5GINsMaA3YG6QDbIh7zZUWEQaNjesHHHRiB7EqLlRx0qsZKQkHdMb0zturopx5bhgwqoJJaRJNmnBlGBKj8W0YNq+GTbjFzrBqjipzJh1bNYxFnNsjs1bMF9YpFhgC3qnCkQkiNMMYlGwqDzDyoiIJc+35O85a66MFHFOmbHsjmVnM1Y884rgvLKClC4oIS5ux6pg1ZZLgow1v9pa2SIus4wrBVKkbFedhVhn67Zku2bBdcENr3CT3ZLe9oJ32F12T3DfCz7QewiP9B7b8kT5VPmMbVi6yZ7DCwtemnvFXrvoDXtr7p3gPXxQfhR8suqz8gv7Kv3mZb5Lf+j91PvFfsMf+Av//gMAXDGpZ05jKQAAAABJRU5ErkJggg==")'}),FXe=Ne(zv,{top:0,marginTop:"$controlsTopMarginY",marginBottom:"$controlsTopMarginY",marginLeft:"$controlsTopMarginX",marginRight:"$controlsTopMarginX",display:"inline-flex",alignItems:"center",justifyContent:"space-between",position:"absolute",left:0,right:0}),jXe=Ne(zv,{justifyContent:"center",bottom:0,marginTop:"$controlsBottomMarginY",marginBottom:"$controlsBottomMarginY",marginLeft:"$controlsBottomMarginX",marginRight:"$controlsBottomMarginX",display:"inline-flex",alignItems:"center",position:"absolute",flexDirection:"column",left:0,right:0}),xw=Ne("div",{width:"100%",display:"inline-flex",alignItems:"center",justifyContent:"space-between"}),BXe=Ne(xw,{width:"auto"}),UXe=Ne(xw,{width:"auto"}),VXe=Ne(zv,{top:0,userSelect:"none",color:"$icon",marginTop:"$controlsTopMarginY",marginBottom:"$controlsTopMarginY",marginLeft:"$controlsTopMarginX",marginRight:"$controlsTopMarginX",display:"inline-flex",alignItems:"flex-start",justifyContent:"flex-start",position:"absolute",fontSize:"$timeFontSizeSm","@md":{fontSize:"$timeFontSizeMd"},"@lg":{fontSize:"$timeFontSize"},left:0,right:0,bottom:0}),zXe={background:$Xe,gradient:NXe,loading:OXe,loadingText:VXe,error:LXe,top:{container:FXe},bottom:{container:jXe,middle:{container:xw},lower:{container:xw,left:UXe,right:BXe}}},HXe=Ne("img",{maxWidth:"100%",width:"100%",maxHeight:"100%",height:"100%",pointerEvents:"none",userSelect:"none",objectPosition:"center",objectFit:"cover",variants:{size:{fullscreen:{width:"100% !important",height:"100% !important"},default:{}}},defaultVariants:{size:"default"}}),Ioe=Ne("video",{width:"100% !important",height:"100% !important",objectPosition:"center",variants:{size:{fullscreen:{objectFit:"contain","&::-webkit-media-overlay-enclosure":{display:"none !important"},"&::-webkit-media-controls-enclosure":{display:"none !important"}},contain:{objectFit:"contain"},cover:{objectFit:"cover"}}},defaultVariants:{size:"cover"}}),WXe=Ne("audio",Ioe),GXe={audio:WXe,poster:HXe,video:Ioe},KXe=Da({"0%":{opacity:0},"100%":{opacity:1}}),qXe=Da({"0%":{opacity:0,transform:"translate(-50%, -48%) scale(.96)"},"100%":{opacity:1,transform:"translate(-50%, -50%) scale(1)"}}),YXe=Ne("div",{backgroundColor:"hsla(0, 0%, 0%, 0.439)",position:"fixed",inset:0,animation:"".concat(KXe," 150ms cubic-bezier(0.16, 1, 0.3, 1)")}),QXe=Ne("div",{fontFamily:"$display, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji",backgroundColor:"white",color:"black",borderRadius:6,display:"inline-flex",flexDirection:"column",gap:12,boxShadow:"hsl(206 22% 7% / 35%) 0px 10px 38px -10px, hsl(206 22% 7% / 20%) 0px 10px 20px -15px",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"350px",maxWidth:"85%",maxHeight:"85vh",padding:25,animation:"".concat(qXe," 150ms cubic-bezier(0.16, 1, 0.3, 1)"),"&:focus":{outline:"none"}}),XXe=Ne("span",{margin:0,fontWeight:600,color:"black",fontSize:20,marginBottom:12}),ZXe=Ne("button",{all:"unset",fontFamily:"inherit",borderRadius:"100%",height:20,width:20,display:"inline-flex",alignItems:"center",justifyContent:"center",position:"absolute",top:10,right:10,cursor:"pointer"}),JXe=Ne("div",{display:"inline-flex",flexDirection:"column",gap:8}),eZe=Ne("button",{all:"unset",display:"inline-flex",alignItems:"center",justifyContent:"center",borderRadius:4,padding:"0 15px",fontSize:13,lineHeight:1,height:35,gap:5,backgroundColor:"white",color:"black",borderStyle:"solid",borderWidth:1,borderColor:"black",boxShadow:"0 2px 10px hsla(0, 0%, 0%, 0.141)","&:hover":{backgroundColor:"hsl(294, 5.5%, 95.3%)"},"&:focus":{boxShadow:"0 0 0 2px black"},"&[data-placeholder]":{color:"hsl(0, 0%, 9.0%)"}}),tZe=Ne("span",{fontSize:16,fontWeight:600}),nZe=Ne("span",{}),rZe=Ne("div",{overflow:"hidden",backgroundColor:"white",display:"flex",flexDirection:"column",borderRadius:6,borderStyle:"solid",borderWidth:1,borderColor:"black",boxShadow:"0px 10px 38px -10px rgba(22, 23, 24, 0.35), 0px 10px 20px -15px rgba(22, 23, 24, 0.2)"}),iZe=Ne("div",{padding:5}),sZe=Ne("div",{fontFamily:"$display, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji",fontSize:13,lineHeight:1,borderRadius:3,display:"flex",alignItems:"center",height:25,padding:"10px 35px 10px 30px",position:"relative",userSelect:"none",color:"black","&[data-disabled]":{pointerEvents:"none"},"&[data-highlighted]":{outline:"none",backgroundColor:"#fafafa"}}),oZe=Ne("div",{position:"absolute",left:4,width:30,display:"inline-flex",alignItems:"center",justifyContent:"center"}),aZe={overlay:YXe,content:QXe,title:XXe,close:ZXe,select:{content:rZe,group:JXe,label:tZe,icon:nZe,item:sZe,itemIndicator:oZe,trigger:eZe,viewport:iZe}},lZe=Da({"0%":{height:"$trackInactive"},"100%":{height:"$trackActive"}}),cZe=Da({"0%":{height:"$trackActive"},"100%":{height:"$trackInactive"}}),uZe=Ne("div",{minHeight:"$trackContainerHeightSm","@lg":{minHeight:"$trackContainerHeight"},"@media (hover: none)":{minHeight:"$trackContainerHeightSm"},position:"relative",display:"flex",alignItems:"center",minWidth:80,touchAction:"none",cursor:"pointer",height:"100%",width:"100%"}),m4=Ne("div",{variants:{size:{default:{height:"$trackInactive",animation:"".concat(cZe," 0.1s")},active:{height:"$trackActive",animation:"".concat(lZe," 0.1s")}},rounded:{full:{borderRadius:"$slider"},left:{borderTopLeftRadius:"$slider",borderBottomLeftRadius:"$slider"},right:{borderTopRightRadius:"$slider",borderBottomRightRadius:"$slider"},none:{}}},defaultVariants:{size:"default",rounded:"none"}}),dZe=Ne(m4,{backgroundColor:"$accent",opacity:.95}),fZe=Ne(m4,{backgroundColor:"$accent",opacity:.55}),hZe=Ne(m4,{backgroundColor:"$accent",opacity:.2}),pZe=Ne("div",{variants:{size:{default:{width:"$thumb",height:"$thumb"},active:{width:"$thumbActive",height:"$thumbActive"}}},defaultVariants:{size:"default"},backgroundColor:"$icon",borderRadius:"100%"}),mZe={container:uZe,thumb:pZe,track:{left:dZe,middle:fZe,right:hZe}},gZe=Da({"0%, 100%":{opacity:1},"50%":{opacity:.5}}),vZe=Ne("div",{marginLeft:"$timeMarginX",marginRight:"$timeMarginX",display:"flex",alignItems:"center"}),yZe=Ne("div",{backgroundColor:"$liveIndicator",borderRadius:"100%",width:"$liveIndicatorSize",height:"$liveIndicatorSize",animation:"".concat(gZe," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite")}),xZe=Ne(U_,{marginLeft:"$timeMarginX",marginRight:"$timeMarginX",fontVariant:"tabular-nums",fontSize:"$timeFontSizeSm","@md":{fontSize:"$timeFontSizeMd"},"@lg":{fontSize:"$timeFontSize"}}),bZe={container:vZe,text:xZe,liveIndicator:yZe},SZe=Ne(U_,{fontWeight:"$titleFontWeight",fontSize:"$titleFontSizeSm","@md":{fontSize:"$titleFontSizeMd"},"@lg":{fontSize:"$titleFontSize"}}),wZe=Ne("div",{display:"inline-flex",alignItems:"center",justifyContent:"center"}),EZe={container:wZe},me={container:kXe,controlsContainer:zXe,iconButton:TXe,media:GXe,settings:aZe,slider:mZe,time:bZe,title:SZe,volume:EZe};function _Ze(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TZe(t){var e=_Ze(t,"string");return typeof e=="symbol"?e:String(e)}function CZe(t,e,n){return e=TZe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SV(Object(n),!0).forEach(function(r){CZe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var wV=dr,kZe=Xt,PZe=Ar,IZe=Bt,J2=Nse,AZe=JM,LZe=BM,RZe=sd,OZe=T_,Ld=Object.assign,EV=Object.defineProperty,DZe=kZe([].concat),Aoe=!Ld||IZe(function(){if(wV&&Ld({b:1},Ld(EV({},"a",{enumerable:!0,get:function(){EV(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},e={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(i){e[i]=i}),Ld({},t)[n]!==7||J2(Ld({},e)).join("")!==r})?function(e,n){for(var r=RZe(e),i=arguments.length,s=1,o=AZe.f,a=LZe.f;i>s;)for(var l=OZe(arguments[s++]),c=o?DZe(J2(l),o(l)):J2(l),u=c.length,d=0,f;u>d;)f=c[d++],(!wV||PZe(a,l,f))&&(r[f]=l[f]);return r}:Ld,MZe=un,_V=Aoe;MZe({target:"Object",stat:!0,arity:2,forced:Object.assign!==_V},{assign:_V});const $Ze=()=>{};function NZe(t,{interval:e=1e3,onError:n=$Ze}={}){if(typeof t!="function")throw new Error("argument is not function.");let r=!1,i=0,s,o=null;const a=async()=>{if(o){const c=o;o=null;try{r=!0,await t(...c)}catch(u){n(u)}finally{i=Date.now(),r=!1}}},l=async()=>{clearTimeout(s),s=setTimeout(()=>{r?l():a()},e)};return(...c)=>{o=c;const u=Date.now()-i<e;r||u?l():a()}}const FZe=({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:i=JSON.parse,retry:s})=>{if(t){const o=async a=>{try{await t.setItem(e,r(a));return}catch(l){return l}};return{persistClient:NZe(async a=>{let l=a,c=await o(l),u=0;for(;c&&l;)u++,l=await(s==null?void 0:s({persistedClient:l,error:c,errorCount:u})),l&&(c=await o(l))},{interval:n}),restoreClient:async()=>{const a=await t.getItem(e);if(a)return i(a)},removeClient:()=>t.removeItem(e)}}return{persistClient:TV,restoreClient:()=>Promise.resolve(void 0),removeClient:TV}};function TV(){}class mp{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const n={listener:e};return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const I0=typeof window>"u"||"Deno"in window;function Li(){}function jZe(t,e){return typeof t=="function"?t(e):t}function XL(t){return typeof t=="number"&&t>=0&&t!==1/0}function Loe(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Pm(t,e,n){return Hv(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function BZe(t,e,n){return Hv(t)?typeof e=="function"?{...n,mutationKey:t,mutationFn:e}:{...e,mutationKey:t}:typeof t=="function"?{...e,mutationFn:t}:{...t}}function cl(t,e,n){return Hv(t)?[{...e,queryKey:t},n]:[t||{},e]}function CV(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(Hv(o)){if(r){if(e.queryHash!==g4(o,e.options))return!1}else if(!bw(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function kV(t,e){const{exact:n,fetching:r,predicate:i,mutationKey:s}=t;if(Hv(s)){if(!e.options.mutationKey)return!1;if(n){if(au(e.options.mutationKey)!==au(s))return!1}else if(!bw(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function g4(t,e){return((e==null?void 0:e.queryKeyHashFn)||au)(t)}function au(t){return JSON.stringify(t,(e,n)=>JL(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function bw(t,e){return Roe(t,e)}function Roe(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Roe(t[n],e[n])):!1}function Ooe(t,e){if(t===e)return t;const n=PV(t)&&PV(e);if(n||JL(t)&&JL(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,o=n?[]:{};let a=0;for(let l=0;l<s;l++){const c=n?l:i[l];o[c]=Ooe(t[c],e[c]),o[c]===t[c]&&a++}return r===s&&a===r?t:o}return e}function ZL(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function PV(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function JL(t){if(!IV(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!IV(n)||!n.hasOwnProperty("isPrototypeOf"))}function IV(t){return Object.prototype.toString.call(t)==="[object Object]"}function Hv(t){return Array.isArray(t)}function Doe(t){return new Promise(e=>{setTimeout(e,t)})}function AV(t){Doe(0).then(t)}function UZe(){if(typeof AbortController=="function")return new AbortController}function eR(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Ooe(t,e):e}class VZe extends mp{constructor(){super(),this.setup=e=>{if(!I0&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Sw=new VZe,LV=["online","offline"];class zZe extends mp{constructor(){super(),this.setup=e=>{if(!I0&&window.addEventListener){const n=()=>e();return LV.forEach(r=>{window.addEventListener(r,n,!1)}),()=>{LV.forEach(r=>{window.removeEventListener(r,n)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const ww=new zZe;function HZe(t){return Math.min(1e3*2**t,3e4)}function V_(t){return(t??"online")==="online"?ww.isOnline():!0}class Moe{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function Qx(t){return t instanceof Moe}function $oe(t){let e=!1,n=0,r=!1,i,s,o;const a=new Promise((g,y)=>{s=g,o=y}),l=g=>{r||(h(new Moe(g)),t.abort==null||t.abort())},c=()=>{e=!0},u=()=>{e=!1},d=()=>!Sw.isFocused()||t.networkMode!=="always"&&!ww.isOnline(),f=g=>{r||(r=!0,t.onSuccess==null||t.onSuccess(g),i==null||i(),s(g))},h=g=>{r||(r=!0,t.onError==null||t.onError(g),i==null||i(),o(g))},p=()=>new Promise(g=>{i=y=>{const x=r||!d();return x&&g(y),x},t.onPause==null||t.onPause()}).then(()=>{i=void 0,r||t.onContinue==null||t.onContinue()}),m=()=>{if(r)return;let g;try{g=t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(f).catch(y=>{var x,S;if(r)return;const w=(x=t.retry)!=null?x:3,E=(S=t.retryDelay)!=null?S:HZe,T=typeof E=="function"?E(n,y):E,_=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!_){h(y);return}n++,t.onFail==null||t.onFail(n,y),Doe(T).then(()=>{if(d())return p()}).then(()=>{e?h(y):m()})})};return V_(t.networkMode)?m():p().then(m),{promise:a,cancel:l,continue:()=>(i==null?void 0:i())?a:Promise.resolve(),cancelRetry:c,continueRetry:u}}const v4=console;function WZe(){let t=[],e=0,n=u=>{u()},r=u=>{u()};const i=u=>{let d;e++;try{d=u()}finally{e--,e||a()}return d},s=u=>{e?t.push(u):AV(()=>{n(u)})},o=u=>(...d)=>{s(()=>{u(...d)})},a=()=>{const u=t;t=[],u.length&&AV(()=>{r(()=>{u.forEach(d=>{n(d)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u}}}const tn=WZe();class Noe{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),XL(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(I0?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class GZe extends Noe{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||v4,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||KZe(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,n){const r=eR(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){this.dispatch({type:"setState",state:e,setStateOptions:n})}cancel(e){var n;const r=this.promise;return(n=this.retryer)==null||n.cancel(e),r?r.then(Li).catch(Li):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Loe(this.state.dataUpdatedAt,e)}onFocus(){var e;const n=this.observers.find(r=>r.shouldFetchOnWindowFocus());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const n=this.observers.find(r=>r.shouldFetchOnReconnect());n&&n.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,n){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&n!=null&&n.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}Array.isArray(this.options.queryKey);const o=UZe(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(a);const c=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),u={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};if(l(u),(r=this.options.behavior)==null||r.onFetch(u),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=u.fetchOptions)==null?void 0:i.meta)){var d;this.dispatch({type:"fetch",meta:(d=u.fetchOptions)==null?void 0:d.meta})}const f=h=>{if(Qx(h)&&h.silent||this.dispatch({type:"error",error:h}),!Qx(h)){var p,m,g,y;(p=(m=this.cache.config).onError)==null||p.call(m,h,this),(g=(y=this.cache.config).onSettled)==null||g.call(y,this.state.data,h,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=$oe({fn:u.fetchFn,abort:o==null?void 0:o.abort.bind(o),onSuccess:h=>{var p,m,g,y;if(typeof h>"u"){f(new Error(this.queryHash+" data is undefined"));return}this.setData(h),(p=(m=this.cache.config).onSuccess)==null||p.call(m,h,this),(g=(y=this.cache.config).onSettled)==null||g.call(y,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:f,onFail:(h,p)=>{this.dispatch({type:"failed",failureCount:h,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const n=r=>{var i,s;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:V_(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return Qx(o)&&o.revert&&this.revertState?{...this.revertState}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function KZe(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=typeof e<"u",r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"loading",fetchStatus:"idle"}}class qZe extends mp{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,n,r){var i;const s=n.queryKey,o=(i=n.queryHash)!=null?i:g4(s,n);let a=this.get(o);return a||(a=new GZe({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const n=this.queriesMap[e.queryHash];n&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),n===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){tn.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,n){const[r]=cl(e,n);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>CV(r,i))}findAll(e,n){const[r]=cl(e,n);return Object.keys(r).length>0?this.queries.filter(i=>CV(r,i)):this.queries}notify(e){tn.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}onFocus(){tn.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){tn.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class YZe extends Noe{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||v4,this.observers=[],this.state=e.state||Foe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(n=>n!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,n;return(e=(n=this.retryer)==null?void 0:n.continue())!=null?e:this.execute()}async execute(){const e=()=>{var _;return this.retryer=$oe({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(I,A)=>{this.dispatch({type:"failed",failureCount:I,error:A})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(_=this.options.retry)!=null?_:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},n=this.state.status==="loading";try{var r,i,s,o,a,l,c,u;if(!n){var d,f,h,p;this.dispatch({type:"loading",variables:this.options.variables}),await((d=(f=this.mutationCache.config).onMutate)==null?void 0:d.call(f,this.state.variables,this));const I=await((h=(p=this.options).onMutate)==null?void 0:h.call(p,this.state.variables));I!==this.state.context&&this.dispatch({type:"loading",context:I,variables:this.state.variables})}const _=await e();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,_,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,_,this.state.variables,this.state.context)),await((a=(l=this.mutationCache.config).onSettled)==null?void 0:a.call(l,_,null,this.state.variables,this.state.context,this)),await((c=(u=this.options).onSettled)==null?void 0:c.call(u,_,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:_}),_}catch(_){try{var m,g,y,x,S,w,E,T;throw await((m=(g=this.mutationCache.config).onError)==null?void 0:m.call(g,_,this.state.variables,this.state.context,this)),await((y=(x=this.options).onError)==null?void 0:y.call(x,_,this.state.variables,this.state.context)),await((S=(w=this.mutationCache.config).onSettled)==null?void 0:S.call(w,void 0,_,this.state.variables,this.state.context,this)),await((E=(T=this.options).onSettled)==null?void 0:E.call(T,void 0,_,this.state.variables,this.state.context)),_}finally{this.dispatch({type:"error",error:_})}}}dispatch(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!V_(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=n(this.state),tn.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function Foe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class QZe extends mp{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,n,r){const i=new YZe({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(n),state:r,defaultOptions:n.mutationKey?e.getMutationDefaults(n.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(n=>n!==e),this.notify({type:"removed",mutation:e})}clear(){tn.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(n=>kV(e,n))}findAll(e){return this.mutations.filter(n=>kV(e,n))}notify(e){tn.batch(()=>{this.listeners.forEach(({listener:n})=>{n(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const n=this.mutations.filter(r=>r.state.isPaused);return tn.batch(()=>n.reduce((r,i)=>r.then(()=>i.continue().catch(Li)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function XZe(){return{onFetch:t=>{t.fetchFn=()=>{var e,n,r,i,s,o;const a=(e=t.fetchOptions)==null||(n=e.meta)==null?void 0:n.refetchPage,l=(r=t.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,c=l==null?void 0:l.pageParam,u=(l==null?void 0:l.direction)==="forward",d=(l==null?void 0:l.direction)==="backward",f=((s=t.state.data)==null?void 0:s.pages)||[],h=((o=t.state.data)==null?void 0:o.pageParams)||[];let p=h,m=!1;const g=T=>{Object.defineProperty(T,"signal",{enumerable:!0,get:()=>{var _;if((_=t.signal)!=null&&_.aborted)m=!0;else{var I;(I=t.signal)==null||I.addEventListener("abort",()=>{m=!0})}return t.signal}})},y=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),x=(T,_,I,A)=>(p=A?[_,...p]:[...p,_],A?[I,...T]:[...T,I]),S=(T,_,I,A)=>{if(m)return Promise.reject("Cancelled");if(typeof I>"u"&&!_&&T.length)return Promise.resolve(T);const L={queryKey:t.queryKey,pageParam:I,meta:t.options.meta};g(L);const j=y(L);return Promise.resolve(j).then(O=>x(T,I,O,A))};let w;if(!f.length)w=S([]);else if(u){const T=typeof c<"u",_=T?c:RV(t.options,f);w=S(f,T,_)}else if(d){const T=typeof c<"u",_=T?c:ZZe(t.options,f);w=S(f,T,_,!0)}else{p=[];const T=typeof t.options.getNextPageParam>"u";w=(a&&f[0]?a(f[0],0,f):!0)?S([],T,h[0]):Promise.resolve(x([],h[0],f[0]));for(let I=1;I<f.length;I++)w=w.then(A=>{if(a&&f[I]?a(f[I],I,f):!0){const j=T?h[I]:RV(t.options,A);return S(A,T,j)}return Promise.resolve(x(A,h[I],f[I]))})}return w.then(T=>({pages:T,pageParams:p}))}}}}function RV(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}function ZZe(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}class JZe{constructor(e={}){this.queryCache=e.queryCache||new qZe,this.mutationCache=e.mutationCache||new QZe,this.logger=e.logger||v4,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Sw.subscribe(()=>{Sw.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=ww.subscribe(()=>{ww.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,n;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(n=this.unsubscribeOnline)==null||n.call(this),this.unsubscribeOnline=void 0)}isFetching(e,n){const[r]=cl(e,n);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state.data}ensureQueryData(e,n,r){const i=Pm(e,n,r),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:n,state:r})=>{const i=r.data;return[n,i]})}setQueryData(e,n,r){const i=this.queryCache.find(e),s=i==null?void 0:i.state.data,o=jZe(n,s);if(typeof o>"u")return;const a=Pm(e),l=this.defaultQueryOptions(a);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,n,r){return tn.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,n,r)]))}getQueryState(e,n){var r;return(r=this.queryCache.find(e,n))==null?void 0:r.state}removeQueries(e,n){const[r]=cl(e,n),i=this.queryCache;tn.batch(()=>{i.findAll(r).forEach(s=>{i.remove(s)})})}resetQueries(e,n,r){const[i,s]=cl(e,n,r),o=this.queryCache,a={type:"active",...i};return tn.batch(()=>(o.findAll(i).forEach(l=>{l.reset()}),this.refetchQueries(a,s)))}cancelQueries(e,n,r){const[i,s={}]=cl(e,n,r);typeof s.revert>"u"&&(s.revert=!0);const o=tn.batch(()=>this.queryCache.findAll(i).map(a=>a.cancel(s)));return Promise.all(o).then(Li).catch(Li)}invalidateQueries(e,n,r){const[i,s]=cl(e,n,r);return tn.batch(()=>{var o,a;if(this.queryCache.findAll(i).forEach(c=>{c.invalidate()}),i.refetchType==="none")return Promise.resolve();const l={...i,type:(o=(a=i.refetchType)!=null?a:i.type)!=null?o:"active"};return this.refetchQueries(l,s)})}refetchQueries(e,n,r){const[i,s]=cl(e,n,r),o=tn.batch(()=>this.queryCache.findAll(i).filter(l=>!l.isDisabled()).map(l=>{var c;return l.fetch(void 0,{...s,cancelRefetch:(c=s==null?void 0:s.cancelRefetch)!=null?c:!0,meta:{refetchPage:i.refetchPage}})}));let a=Promise.all(o).then(Li);return s!=null&&s.throwOnError||(a=a.catch(Li)),a}fetchQuery(e,n,r){const i=Pm(e,n,r),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,n,r){return this.fetchQuery(e,n,r).then(Li).catch(Li)}fetchInfiniteQuery(e,n,r){const i=Pm(e,n,r);return i.behavior=XZe(),this.fetchQuery(i)}prefetchInfiniteQuery(e,n,r){return this.fetchInfiniteQuery(e,n,r).then(Li).catch(Li)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,n){const r=this.queryDefaults.find(i=>au(e)===au(i.queryKey));r?r.defaultOptions=n:this.queryDefaults.push({queryKey:e,defaultOptions:n})}getQueryDefaults(e){if(!e)return;const n=this.queryDefaults.find(r=>bw(e,r.queryKey));return n==null?void 0:n.defaultOptions}setMutationDefaults(e,n){const r=this.mutationDefaults.find(i=>au(e)===au(i.mutationKey));r?r.defaultOptions=n:this.mutationDefaults.push({mutationKey:e,defaultOptions:n})}getMutationDefaults(e){if(!e)return;const n=this.mutationDefaults.find(r=>bw(e,r.mutationKey));return n==null?void 0:n.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const n={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!n.queryHash&&n.queryKey&&(n.queryHash=g4(n.queryKey,n)),typeof n.refetchOnReconnect>"u"&&(n.refetchOnReconnect=n.networkMode!=="always"),typeof n.useErrorBoundary>"u"&&(n.useErrorBoundary=!!n.suspense),n}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class eJe extends mp{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),OV(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return tR(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return tR(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),ZL(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const s=this.hasListeners();s&&DV(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e),r=this.createResult(n,e);return nJe(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Li)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),I0||this.currentResult.isStale||!XL(this.options.staleTime))return;const n=Loe(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(I0||this.options.enabled===!1||!XL(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Sw.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const r=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,l=e!==r,c=l?e.state:this.currentQueryInitialState,u=l?this.currentResult:this.previousQueryResult,{state:d}=e;let{dataUpdatedAt:f,error:h,errorUpdatedAt:p,fetchStatus:m,status:g}=d,y=!1,x=!1,S;if(n._optimisticResults){const I=this.hasListeners(),A=!I&&OV(e,n),L=I&&DV(e,r,n,i);(A||L)&&(m=V_(e.options.networkMode)?"fetching":"paused",f||(g="loading")),n._optimisticResults==="isRestoring"&&(m="idle")}if(n.keepPreviousData&&!d.dataUpdatedAt&&u!=null&&u.isSuccess&&g!=="error")S=u.data,f=u.dataUpdatedAt,g=u.status,y=!0;else if(n.select&&typeof d.data<"u")if(s&&d.data===(o==null?void 0:o.data)&&n.select===this.selectFn)S=this.selectResult;else try{this.selectFn=n.select,S=n.select(d.data),S=eR(s==null?void 0:s.data,S,n),this.selectResult=S,this.selectError=null}catch(I){this.selectError=I}else S=d.data;if(typeof n.placeholderData<"u"&&typeof S>"u"&&g==="loading"){let I;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))I=s.data;else if(I=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof I<"u")try{I=n.select(I),this.selectError=null}catch(A){this.selectError=A}typeof I<"u"&&(g="success",S=eR(s==null?void 0:s.data,I,n),x=!0)}this.selectError&&(h=this.selectError,S=this.selectResult,p=Date.now(),g="error");const w=m==="fetching",E=g==="loading",T=g==="error";return{status:g,fetchStatus:m,isLoading:E,isSuccess:g==="success",isError:T,isInitialLoading:E&&w,data:S,dataUpdatedAt:f,error:h,errorUpdatedAt:p,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!E,isLoadingError:T&&d.dataUpdatedAt===0,isPaused:m==="paused",isPlaceholderData:x,isPreviousData:y,isRefetchError:T&&d.dataUpdatedAt!==0,isStale:y4(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,ZL(r,n))return;this.currentResult=r;const i={cache:!0},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const a=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(l=>{const c=l;return this.currentResult[c]!==n[c]&&a.has(c)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!Qx(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){tn.batch(()=>{if(e.onSuccess){var n,r,i,s;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,l,c;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(l=(c=this.options).onSettled)==null||l.call(c,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:u})=>{u(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function tJe(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function OV(t,e){return tJe(t,e)||t.state.dataUpdatedAt>0&&tR(t,e,e.refetchOnMount)}function tR(t,e,n){if(e.enabled!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&y4(t,e)}return!1}function DV(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&y4(t,n)}function y4(t,e){return t.isStaleByTime(e.staleTime)}function nJe(t,e,n){return n.keepPreviousData?!1:n.placeholderData!==void 0?e.isPlaceholderData:t.getCurrentResult()!==e}let rJe=class extends mp{constructor(e,n){super(),this.client=e,this.setOptions(n),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var n;const r=this.options;this.options=this.client.defaultMutationOptions(e),ZL(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(n=this.currentMutation)==null||n.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const n={listeners:!0};e.type==="success"?n.onSuccess=!0:e.type==="error"&&(n.onError=!0),this.notify(n)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,n){return this.mutateOptions=n,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:Foe(),n={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=n}notify(e){tn.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var n,r,i,s;(n=(r=this.mutateOptions).onSuccess)==null||n.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(i=(s=this.mutateOptions).onSettled)==null||i.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var o,a,l,c;(o=(a=this.mutateOptions).onError)==null||o.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(l=(c=this.mutateOptions).onSettled)==null||l.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:u})=>{u(this.currentResult)})})}};function iJe(t){return{mutationKey:t.options.mutationKey,state:t.state}}function sJe(t){return{state:t.state,queryKey:t.queryKey,queryHash:t.queryHash}}function oJe(t){return t.state.isPaused}function aJe(t){return t.state.status==="success"}function lJe(t,e={}){const n=[],r=[];if(e.dehydrateMutations!==!1){const i=e.shouldDehydrateMutation||oJe;t.getMutationCache().getAll().forEach(s=>{i(s)&&n.push(iJe(s))})}if(e.dehydrateQueries!==!1){const i=e.shouldDehydrateQuery||aJe;t.getQueryCache().getAll().forEach(s=>{i(s)&&r.push(sJe(s))})}return{mutations:n,queries:r}}function joe(t,e,n){if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),i=t.getQueryCache(),s=e.mutations||[],o=e.queries||[];s.forEach(a=>{var l;r.build(t,{...n==null||(l=n.defaultOptions)==null?void 0:l.mutations,mutationKey:a.mutationKey},a.state)}),o.forEach(a=>{var l;const c=i.get(a.queryHash),u={...a.state,fetchStatus:"idle"};if(c){c.state.dataUpdatedAt<u.dataUpdatedAt&&c.setState(u);return}i.build(t,{...n==null||(l=n.defaultOptions)==null?void 0:l.queries,queryKey:a.queryKey,queryHash:a.queryHash},u)})}var Boe={exports:{}},Uoe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oh=v;function cJe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uJe=typeof Object.is=="function"?Object.is:cJe,dJe=Oh.useState,fJe=Oh.useEffect,hJe=Oh.useLayoutEffect,pJe=Oh.useDebugValue;function mJe(t,e){var n=e(),r=dJe({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return hJe(function(){i.value=n,i.getSnapshot=e,ek(i)&&s({inst:i})},[t,n,e]),fJe(function(){return ek(i)&&s({inst:i}),t(function(){ek(i)&&s({inst:i})})},[t]),pJe(n),n}function ek(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!uJe(t,n)}catch{return!0}}function gJe(t,e){return e()}var vJe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?gJe:mJe;Uoe.useSyncExternalStore=Oh.useSyncExternalStore!==void 0?Oh.useSyncExternalStore:vJe;Boe.exports=Uoe;var Voe=Boe.exports;const zoe=Voe.useSyncExternalStore,MV=v.createContext(void 0),Hoe=v.createContext(!1);function Woe(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=MV),window.ReactQueryClientContext):MV)}const x4=({context:t}={})=>{const e=v.useContext(Woe(t,v.useContext(Hoe)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},yJe=({client:t,children:e,context:n,contextSharing:r=!1})=>{v.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]);const i=Woe(n,r);return v.createElement(Hoe.Provider,{value:!n&&r},v.createElement(i.Provider,{value:t},e))},Goe=v.createContext(!1),xJe=()=>v.useContext(Goe);Goe.Provider;function bJe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const SJe=v.createContext(bJe()),wJe=()=>v.useContext(SJe);function Koe(t,e){return typeof t=="function"?t(...e):!!t}const EJe=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},_Je=t=>{v.useEffect(()=>{t.clearReset()},[t])},TJe=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&Koe(n,[t.error,r]),CJe=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},kJe=(t,e)=>t.isLoading&&t.isFetching&&!e,PJe=(t,e,n)=>(t==null?void 0:t.suspense)&&kJe(e,n),IJe=(t,e,n)=>e.fetchOptimistic(t).then(({data:r})=>{t.onSuccess==null||t.onSuccess(r),t.onSettled==null||t.onSettled(r,null)}).catch(r=>{n.clearReset(),t.onError==null||t.onError(r),t.onSettled==null||t.onSettled(void 0,r)});function AJe(t,e){const n=x4({context:t.context}),r=xJe(),i=wJe(),s=n.defaultQueryOptions(t);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=tn.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=tn.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=tn.batchCalls(s.onSettled)),CJe(s),EJe(s,i),_Je(i);const[o]=v.useState(()=>new e(n,s)),a=o.getOptimisticResult(s);if(zoe(v.useCallback(l=>{const c=r?()=>{}:o.subscribe(tn.batchCalls(l));return o.updateResult(),c},[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),v.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),PJe(s,a,r))throw IJe(s,o,i);if(TJe({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function LJe(t,e,n){const r=Pm(t,e,n);return AJe(r,eJe)}function RJe(t,e={}){const n=x4({context:e.context}),r=v.useRef(e);r.current=e,v.useMemo(()=>{t&&joe(n,t,r.current)},[n,t])}const OJe=({children:t,options:e,state:n})=>(RJe(n,e),t);function DJe(t,e,n){const r=BZe(t,e,n),i=x4({context:r.context}),[s]=v.useState(()=>new rJe(i,r));v.useEffect(()=>{s.setOptions(r)},[s,r]);const o=zoe(v.useCallback(l=>s.subscribe(tn.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=v.useCallback((l,c)=>{s.mutate(l,c).catch(MJe)},[s]);if(o.error&&Koe(s.options.useErrorBoundary,[o.error]))throw o.error;return{...o,mutate:a,mutateAsync:o.mutate}}function MJe(){}const $Je=["added","removed","updated"];function $V(t){return $Je.includes(t)}async function NJe({queryClient:t,persister:e,maxAge:n=1e3*60*60*24,buster:r="",hydrateOptions:i}){try{const s=await e.restoreClient();if(s)if(s.timestamp){const o=Date.now()-s.timestamp>n,a=s.buster!==r;o||a?e.removeClient():joe(t,s.clientState,i)}else e.removeClient()}catch{e.removeClient()}}async function NV({queryClient:t,persister:e,buster:n="",dehydrateOptions:r}){const i={buster:n,timestamp:Date.now(),clientState:lJe(t,r)};await e.persistClient(i)}function FJe(t){const e=t.queryClient.getQueryCache().subscribe(r=>{$V(r.type)&&NV(t)}),n=t.queryClient.getMutationCache().subscribe(r=>{$V(r.type)&&NV(t)});return()=>{e(),n()}}function jJe(t){let e=!1,n;const r=()=>{e=!0,n==null||n()},i=NJe(t).then(()=>{e||(n=FJe(t))});return[r,i]}function BJe(t){try{return JSON.parse(t)}catch{return{}}}function FV(t,e){return t.slice(0,e).join(".")||"."}function jV(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function UJe(t,e){const n=typeof t=="function",r=typeof e=="function",i=[],s=[];return function(a,l){if(typeof l=="object")if(i.length){const c=jV(i,this);c===0?i[i.length]=this:(i.splice(c),s.splice(c)),s[s.length]=a;const u=jV(i,l);if(u!==0)return r?e.call(this,a,l,FV(s,u)):`[ref=${FV(s,u)}]`}else i[0]=l,s[0]=a;return n?t.call(this,a,l):l}}function VJe(t,e,n,r){try{return JSON.stringify(t,UJe(e,r),n??void 0)}catch{return"{}"}}const zJe=()=>new JZe({defaultOptions:{queries:{cacheTime:1e3*60*60*24,networkMode:"offlineFirst",refetchOnWindowFocus:!1,retry:0},mutations:{networkMode:"offlineFirst"}}});function HJe({queryClient:t=zJe(),...e}){const n=OBe(e),r=e!=null&&e.storage?FZe({key:"livepeer.cache",storage:e.storage,serialize:VJe,deserialize:BJe}):void 0;return r&&jJe({queryClient:t,persister:r,dehydrateOptions:{shouldDehydrateQuery:i=>i.cacheTime!==0}}),Object.assign(n,{queryClient:t})}function WJe(t){if(t==null)throw new TypeError("Cannot destructure "+t)}function GJe(t){var e=Object.assign({},(WJe(t),t));return HJe(De({storage:typeof window<"u"?e.storage?e.storage:LM({storage:window.localStorage}):void 0},e))}const qoe=v.createContext(void 0),Ew=v.createContext(void 0);function KJe({children:t,client:e,dehydratedState:n}){return b.jsx(qoe.Provider,{value:e,children:b.jsx(yJe,{context:Ew,client:e.queryClient,children:b.jsx(OJe,{options:{context:Ew},state:n??void 0,children:t})})})}function qJe(){const t=v.useContext(qoe);if(!t)throw new Error(["`useClient` must be used within `LivepeerConfig`."].join(`
`));return t}const YJe=["cacheTime","networkMode","onError","onMutate","onSettled","onSuccess","retry","retryDelay","useErrorBoundary","meta"];function Yoe(t,e,n){const{data:r,error:i,isError:s,isIdle:o,isLoading:a,isSuccess:l,mutate:c,mutateAsync:u,reset:d,variables:f,status:h}=DJe(e,{context:Ew,mutationKey:n,...typeof(t==null?void 0:t.mutationConfig)=="object"?Rie(t.mutationConfig,...YJe):{},useErrorBoundary:!1});return v.useMemo(()=>({data:r,error:i,isError:s,isIdle:o,isLoading:a,isSuccess:l,mutate:t?()=>c({...t,config:void 0}):void 0,mutateAsync:()=>t?u({...t,config:void 0}):void 0,variables:f,status:h,internal:{reset:d}}),[r,i,s,o,a,l,c,u,d,f,h,t])}const QJe=["cacheTime","enabled","networkMode","initialData","initialDataUpdatedAt","isDataEqual","keepPreviousData","meta","notifyOnChangeProps","onError","onSettled","onSuccess","placeholderData","refetchInterval","refetchIntervalInBackground","refetchOnMount","refetchOnReconnect","refetchOnWindowFocus","retry","retryOnMount","retryDelay","select","staleTime","structuralSharing","suspense","useErrorBoundary"];function Qoe(t){const{data:e,dataUpdatedAt:n,error:r,errorUpdatedAt:i,failureCount:s,isError:o,isFetched:a,isFetchedAfterMount:l,isFetching:c,isPaused:u,isLoadingError:d,isPlaceholderData:f,isPreviousData:h,isRefetchError:p,isRefetching:m,isStale:g,isSuccess:y,refetch:x,remove:S,status:w,fetchStatus:E}=LJe({...t,context:Ew}),T=v.useMemo(()=>w==="loading"&&E==="idle"?"idle":w,[w,E]),_=v.useMemo(()=>T==="idle",[T]),I=v.useMemo(()=>T==="loading"&&E==="fetching",[T,E]);return{data:e,error:r,isError:o,isFetched:a,isFetching:c,isIdle:_,isLoading:I,isRefetching:m,isSuccess:y,refetch:x,status:T,internal:{fetchStatus:E,dataUpdatedAt:n,errorUpdatedAt:i,failureCount:s,isFetchedAfterMount:l,isLoadingError:d,isPaused:u,isPlaceholderData:f,isPreviousData:h,isRefetchError:p,isStale:g,remove:S}}}var XJe=Xoe,BV=128,ZJe=127,JJe=~ZJe,eet=Math.pow(2,31);function Xoe(t,e,n){e=e||[],n=n||0;for(var r=n;t>=eet;)e[n++]=t&255|BV,t/=128;for(;t&JJe;)e[n++]=t&255|BV,t>>>=7;return e[n]=t|0,Xoe.bytes=n-r+1,e}var tet=nR,net=128,UV=127;function nR(t,r){var n=0,r=r||0,i=0,s=r,o,a=t.length;do{if(s>=a)throw nR.bytes=0,new RangeError("Could not decode varint");o=t[s++],n+=i<28?(o&UV)<<i:(o&UV)*Math.pow(2,i),i+=7}while(o>=net);return nR.bytes=s-r,n}var ret=Math.pow(2,7),iet=Math.pow(2,14),set=Math.pow(2,21),oet=Math.pow(2,28),aet=Math.pow(2,35),cet=Math.pow(2,42),uet=Math.pow(2,49),det=Math.pow(2,56),fet=Math.pow(2,63),het=function(t){return t<ret?1:t<iet?2:t<set?3:t<oet?4:t<aet?5:t<cet?6:t<uet?7:t<det?8:t<fet?9:10},pet={encode:XJe,decode:tet,encodingLength:het},_w=pet;const rR=(t,e=0)=>[_w.decode(t,e),_w.decode.bytes],Tw=(t,e,n=0)=>(_w.encode(t,e,n),e),Cw=t=>_w.encodingLength(t),met=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},b4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},get=(t,e)=>{const n=e.byteLength,r=Cw(t),i=r+Cw(n),s=new Uint8Array(i+n);return Tw(t,s,0),Tw(n,s,r),s.set(e,i),new S4(t,n,e,s)},vet=t=>{const e=b4(t),[n,r]=rR(e),[i,s]=rR(e.subarray(r)),o=e.subarray(r+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new S4(n,i,o,e)},yet=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&met(t.bytes,e.bytes);class S4{constructor(e,n,r,i){this.code=e,this.size=n,this.digest=r,this.bytes=i}}function xet(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(n[o]!==255)throw new TypeError(s+" is ambiguous");n[o]=i}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var m=0,g=0,y=0,x=p.length;y!==x&&p[y]===0;)y++,m++;for(var S=(x-y)*u+1>>>0,w=new Uint8Array(S);y!==x;){for(var E=p[y],T=0,_=S-1;(E!==0||T<g)&&_!==-1;_--,T++)E+=256*w[_]>>>0,w[_]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");g=T,y++}for(var I=S-g;I!==S&&w[I]===0;)I++;for(var A=l.repeat(m);I<S;++I)A+=t.charAt(w[I]);return A}function f(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var m=0;if(p[m]!==" "){for(var g=0,y=0;p[m]===l;)g++,m++;for(var x=(p.length-m)*c+1>>>0,S=new Uint8Array(x);p[m];){var w=n[p.charCodeAt(m)];if(w===255)return;for(var E=0,T=x-1;(w!==0||E<y)&&T!==-1;T--,E++)w+=a*S[T]>>>0,S[T]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");y=E,m++}if(p[m]!==" "){for(var _=x-y;_!==x&&S[_]===0;)_++;for(var I=new Uint8Array(g+(x-_)),A=g;_!==x;)I[A++]=S[_++];return I}}}function h(p){var m=f(p);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:f,decode:h}}var bet=xet,wet=bet;class Eet{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class _et{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Zoe(this,e)}}class Tet{constructor(e){this.decoders=e}or(e){return Zoe(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Zoe=(t,e)=>new Tet({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Cet{constructor(e,n,r,i){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=i,this.encoder=new Eet(e,n,r),this.decoder=new _et(e,n,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Joe=({name:t,prefix:e,encode:n,decode:r})=>new Cet(t,e,n,r),eae=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:i}=wet(n,e);return Joe({prefix:t,name:e,encode:r,decode:s=>b4(i(s))})},ket=(t,e,n,r)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*n/8|0);let a=0,l=0,c=0;for(let u=0;u<s;++u){const d=i[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<n|d,a+=n,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=n||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},Pet=(t,e,n)=>{const r=e[e.length-1]==="=",i=(1<<n)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>n;)o-=n,s+=e[i&a>>o];if(o&&(s+=e[i&a<<n-o]),r)for(;s.length*n&7;)s+="=";return s},Na=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>Joe({prefix:e,name:t,encode(i){return Pet(i,r,n)},decode(i){return ket(i,r,n,t)}}),ul=eae({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});eae({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const Xx=Na({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});Na({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});Na({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});Na({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});Na({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});Na({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});Na({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});Na({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});Na({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});class An{constructor(e,n,r,i){this.code=n,this.version=e,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:v1,byteLength:v1,code:g1,version:g1,multihash:g1,bytes:g1,_baseCache:v1,asCID:v1})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:n}=this;if(e!==tm)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==Ret)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return An.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:n}=this.multihash,r=get(e,n);return An.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&yet(this.multihash,e.multihash)}toString(e){const{bytes:n,version:r,_baseCache:i}=this;switch(r){case 0:return Aet(n,i,e||ul.encoder);default:return Let(n,i,e||Xx.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Det(/^0\.0/,Met),!!(e&&(e[zV]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof An)return e;if(e!=null&&e.asCID===e){const{version:n,code:r,multihash:i,bytes:s}=e;return new An(n,r,i,s||VV(n,r,i.bytes))}else if(e!=null&&e[zV]===!0){const{version:n,multihash:r,code:i}=e,s=vet(r);return An.create(n,i,s)}else return null}static create(e,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(n!==tm)throw new Error(`Version 0 CID must use dag-pb (code: ${tm}) block encoding`);return new An(e,n,r,r.bytes)}case 1:{const i=VV(e,n,r.bytes);return new An(e,n,r,i)}default:throw new Error("Invalid version")}}static createV0(e){return An.create(0,tm,e)}static createV1(e,n){return An.create(1,e,n)}static decode(e){const[n,r]=An.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return n}static decodeFirst(e){const n=An.inspectBytes(e),r=n.size-n.multihashSize,i=b4(e.subarray(r,r+n.multihashSize));if(i.byteLength!==n.multihashSize)throw new Error("Incorrect length");const s=i.subarray(n.multihashSize-n.digestSize),o=new S4(n.multihashCode,n.digestSize,s,i);return[n.version===0?An.createV0(o):An.createV1(n.codec,o),e.subarray(n.size)]}static inspectBytes(e){let n=0;const r=()=>{const[d,f]=rR(e.subarray(n));return n+=f,d};let i=r(),s=tm;if(i===18?(i=0,n=0):i===1&&(s=r()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);const o=n,a=r(),l=r(),c=n+l,u=c-o;return{version:i,codec:s,multihashCode:a,digestSize:l,multihashSize:u,size:c}}static parse(e,n){const[r,i]=Iet(e,n),s=An.decode(i);return s._baseCache.set(r,e),s}}const Iet=(t,e)=>{switch(t[0]){case"Q":{const n=e||ul;return[ul.prefix,n.decode(`${ul.prefix}${t}`)]}case ul.prefix:{const n=e||ul;return[ul.prefix,n.decode(t)]}case Xx.prefix:{const n=e||Xx;return[Xx.prefix,n.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Aet=(t,e,n)=>{const{prefix:r}=n;if(r!==ul.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const i=e.get(r);if(i==null){const s=n.encode(t).slice(1);return e.set(r,s),s}else return i},Let=(t,e,n)=>{const{prefix:r}=n,i=e.get(r);if(i==null){const s=n.encode(t);return e.set(r,s),s}else return i},tm=112,Ret=18,VV=(t,e,n)=>{const r=Cw(t),i=r+Cw(e),s=new Uint8Array(i+n.byteLength);return Tw(t,s,0),Tw(e,s,r),s.set(n,i),s},zV=Symbol.for("@ipld/js-cid/CID"),g1={writable:!1,configurable:!1,enumerable:!0},v1={writable:!1,enumerable:!1,configurable:!1},Oet="0.0.0-dev",Det=(t,e)=>{if(t.test(Oet))console.warn(e);else throw new Error(e)},Met=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,HV=/^(ar):\/\/([^/?#]+)(.*)$/,WV=/^https:\/\/(arweave\.net|arweave\.dev)\/([^/?#]+)(.*)$/,GV=/^https:\/\/([^/]+)\.(arweave\.net|arweave\.dev)\/([^/?#]+)(.*)$/,KV=t=>{var a,l,c,u,d,f;if(!t)return null;const e=(a=t.match(HV))==null?void 0:a[2],n=(l=t.match(HV))==null?void 0:l[3];if(e)return tk(e,n);const r=(c=t.match(GV))==null?void 0:c[3],i=(u=t.match(GV))==null?void 0:u[4];if(r)return tk(r,i);const s=(d=t.match(WV))==null?void 0:d[2],o=(f=t.match(WV))==null?void 0:f[3];return s?tk(s,o):null},tk=(t,e)=>{const n=`${t}${e??""}`;return{url:`ar://${n}`,id:n}},$et=/^([^/?#]+)$/,qV=/^(ipfs):\/\/([^/?#]+)(.*)$/,YV=/^https?:\/\/[^/]+\/(ipfs)\/([^/?#]+)(.*)$/,QV=/^https?:\/\/([^/]+)\.(ipfs)\.[^/?#]+(.*)$/,XV=t=>{var l,c,u,d,f,h,p;if(!t)return null;const e=(l=t.match(qV))==null?void 0:l[2],n=(c=t.match(qV))==null?void 0:c[3];if(y1(e))return x1(e,n);const r=(u=t.match(QV))==null?void 0:u[1],i=(d=t.match(QV))==null?void 0:d[3];if(y1(r))return x1(r,i);const s=(f=t.match(YV))==null?void 0:f[2],o=(h=t.match(YV))==null?void 0:h[3];if(y1(s))return x1(s,o);const a=(p=t.match($et))==null?void 0:p[1];return y1(a)?x1(a):null},y1=t=>{try{return t?typeof t=="string"?!!An.parse(t):t instanceof Uint8Array?!!An.decode(t):!!An.asCID(t):!1}catch{return!1}},x1=(t,e)=>{const n=`${t}${e??""}`;return{url:`ipfs://${n}`,id:n}},Net=t=>typeof t=="number"&&!Number.isNaN(t);var tae={exports:{}},nae={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_=v,Fet=Voe;function jet(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bet=typeof Object.is=="function"?Object.is:jet,Uet=Fet.useSyncExternalStore,Vet=z_.useRef,zet=z_.useEffect,Het=z_.useMemo,Wet=z_.useDebugValue;nae.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=Vet(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Het(function(){function l(h){if(!c){if(c=!0,u=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return d=p}return d=h}if(p=d,Bet(u,h))return p;var m=r(h);return i!==void 0&&i(p,m)?(u=h,p):(u=h,d=m)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,i]);var a=Uet(t,s[0],s[1]);return zet(function(){o.hasValue=!0,o.value=a},[a]),Wet(a),a};tae.exports=nae;var rae=tae.exports;const Get=Ku(rae);function H_(){return rae.useSyncExternalStoreWithSelector(t=>jBe(t),()=>ju(),()=>ju(),t=>t)}function Ket(t){const e=H_(),[n,r]=v.useState(void 0),i=Yoe(t,async s=>BBe({...s,onProgress:o=>r(o)}),[{entity:"createAsset",livepeerProvider:e}]);return v.useMemo(()=>({...i,progress:n}),[i,n])}const qet=(t,e)=>[{entity:"getPlaybackInfo",args:t,config:e}];function Yet(t){const e=H_();return Qoe(Qet(t,e))}function Qet(t,e){const n=typeof t=="string"?t:{playbackId:(t==null?void 0:t.playbackId)??""};return{clearClient:t.clearClient,queryKey:qet(n,e.getConfig()),queryFn:async()=>UBe(t),enabled:!!(typeof t=="string"?t:t!=null&&t.playbackId),...typeof t=="object"?Rie(t,...QJe):{}}}const W_=(t,e,n,r,i)=>{const s=v.useMemo(()=>t?e??n:r??i,[t,e,n,r,i]);return v.useMemo(()=>v.isValidElement(s)?v.cloneElement(s):null,[s])},Xet=(t,e)=>v.useMemo(()=>t&&v.isValidElement(t)?v.cloneElement(t):e,[t,e]),Zet=({streamKey:t,children:e,controls:n,theme:r,title:i,onError:s,aspectRatio:o="16to9",objectFit:a="contain",mediaElementRef:l,onPlaybackStatusUpdate:c,playbackStatusSelector:u,renderChildrenOutsideContainer:d})=>{const f=H_(),h=v.useMemo(()=>{const I=f.getConfig().webrtcIngestBaseUrl;return!t||!I?null:`${I}/${t}`},[t,f]),[p,m]=v.useState(null),[g,y]=v.useState(null),x=v.useCallback(I=>{const A=I?{type:kie(I)?"access-control":Cie(I)?"offline":"unknown",message:(I==null?void 0:I.message)??"Error with playback."}:null;return y(A),I&&(console.warn(I),s==null||s(I)),I},[s]);v.useEffect(()=>{t&&y(null)},[t]);const S=v.useCallback(I=>{I&&(m(I),l==null||l(I))},[l]),w=v.useMemo(()=>({ref:S,ingestUrl:h,objectFit:a,options:n,broadcastError:g,onBroadcastError:x,onPlaybackStatusUpdate:c,playbackStatusSelector:u}),[g,S,n,h,a,x,c,u]),E=v.useMemo(()=>({autoPlay:!1,playbackId:void 0,muted:!1,priority:!1,ingestUrl:h??void 0}),[h]),T=v.useMemo(()=>({hidePosterOnPlayed:!0,showLoadingSpinner:!0,loadingText:null,showUploadingIndicator:!1,error:g}),[g]),_=v.useMemo(()=>({ingestUrl:h,children:e,controls:n,theme:r,title:i,aspectRatio:o,objectFit:a,onBroadcastError:x,onPlaybackStatusUpdate:c,renderChildrenOutsideContainer:d}),[h,o,e,n,a,r,i,x,c,d]);return{mediaElement:p,broadcastProps:w,mediaControllerProps:E,controlsContainerProps:T,props:_}},Jet=t=>{const[e,n]=v.useState(null),{onChange:r,thumbIcon:i,defaultThumbIcon:s,sliderWidth:o,ariaName:a,isActive:l,leftCss:c,middleCss:u,rightCss:d,thumbCss:f}=t,h=l||e!==null,p=v.useCallback(async(E,T)=>{if(o){const _=E/o,I=Math.min(Math.max(0,_),1);T?(await(r==null?void 0:r(I)),n(null)):n(I)}},[r,o]),{value:m,middleValue:g}=v.useMemo(()=>{const E=e!==null?e:isNaN(t.value)?0:t.value,T=e!==null?0:t.secondaryValue&&!isNaN(t.value)&&!isNaN(t.secondaryValue)?t.secondaryValue-t.value:0;return{value:E,middleValue:T>0?T:0}},[e,t.value,t.secondaryValue]),y=v.useMemo(()=>({css:{...f,zIndex:1},size:h?"active":"default"}),[f,h]),x=Xet(i,v.cloneElement(s,y)),S=v.useMemo(()=>1-(m+g),[m,g]),w=v.useMemo(()=>Math.round(m*100),[m]);return{title:`${w}% ${a}`,value:w,active:h,handle:x,sliderProps:{onUpdate:p},sliderLeftTrackProps:{shown:m>.001,rounded:m===1&&!h?"full":"left",css:{...c,flex:m}},sliderMiddleTrackProps:{shown:(g??0)>0,rounded:g===1?h?"right":"full":m<=.001?"left":S===0?"right":"none",css:{...u,flex:g}},sliderRightTrackProps:{shown:(S??0)>0,rounded:m<=.001&&!h?"full":"right",css:{...d,flex:S}}}},ett=t=>{const{onPress:e,live:n,requestClip:r,playbackId:i,defaultIcon:s,length:o,...a}=t,l=v.useCallback(async()=>{await(e==null?void 0:e()),await r()},[e,r]),c=v.useMemo(()=>`Clip last ${Number(o).toFixed(0)}s (x)`,[o]),u=v.useMemo(()=>i&&n,[i,n]);return{title:c,isShown:u,buttonProps:{onPress:l,children:s,...a}}},ttt=t=>{const{togglePlay:e,canPlay:n,buffered:r,isBroadcast:i,_updateLastInteraction:s}=t,o=v.useMemo(()=>n||r!==0,[n,r]),a=v.useCallback(()=>{o&&(i?s():e())},[e,o,i,s]);return{isLoaded:o,containerProps:{onPress:a}}},ntt=t=>{const{enterIcon:e,exitIcon:n,onPress:r,fullscreen:i,pictureInPicture:s,requestToggleFullscreen:o,defaultEnterIcon:a,defaultExitIcon:l,...c}=t,u=v.useCallback(async()=>{await(r==null?void 0:r()),await o()},[r,o]),d=W_(i,n,l,e,a);return{title:v.useMemo(()=>i?"Exit full screen (f)":"Full screen (f)",[i]),buttonProps:s?null:{onPress:u,children:d,...c}}},rtt=t=>{const{playIcon:e,pauseIcon:n,onPress:r,togglePlay:i,playing:s,defaultPauseIcon:o,defaultPlayIcon:a,...l}=t,c=async()=>{await(r==null?void 0:r()),await i()},u=W_(s,n,o,e,a);return{title:v.useMemo(()=>s?"Pause (k)":"Play (k)",[s]),buttonProps:{onPress:c,children:u,...l}}},itt=t=>{const{duration:e,progress:n,requestSeek:r,buffered:i,live:s,...o}=t,[a,l,c]=v.useMemo(()=>[0,e&&!isNaN(e)?e:0,n&&!isNaN(n)?n:0],[e,n]),u=v.useMemo(()=>c/(l-a),[a,l,c]),d=v.useMemo(()=>i/(l-a),[a,l,i]),f=v.useCallback(async p=>{var g;const m=p*(l-a);await((g=t==null?void 0:t.onSeek)==null?void 0:g.call(t,m)),r(m)},[l,a,r,t]),h=v.useMemo(()=>(e/60).toFixed(1),[e]);return{isVisible:!s,title:`progress of ${h} minutes`,progressProps:{onChange:f,value:u,secondaryValue:d,leftCss:{backgroundColor:"$progressLeft"},middleCss:{backgroundColor:"$progressMiddle"},rightCss:{backgroundColor:"$progressRight"},thumbCss:{backgroundColor:"$progressThumb"},...o}}},ZV=t=>{if(t!=null&&!isNaN(t)&&isFinite(t)){const e=Math.round(t),n=Math.floor(e/3600),r=Math.floor(e%60);if(n>0){const s=Math.floor(e%3600/60);return`${n}:${s.toString().padStart(2,"0")}:${r<10?"0":""}${r}`}return`${Math.floor(e/60)}:${r.toString().padStart(2,"0")}`}return"0:00"},stt=t=>{const{duration:e,progress:n,live:r}=t,i=v.useMemo(()=>ZV(n??null),[n]),s=v.useMemo(()=>ZV(e??null),[e]);return{title:v.useMemo(()=>r?i:`${i} / ${s}`,[i,s,r]),live:r}},iae=t=>{const{unmutedIcon:e,mutedIcon:n,onPress:r,showSlider:i=!0,defaultUnmutedIcon:s,defaultMutedIcon:o,requestVolume:a,requestToggleMute:l,isVolumeChangeSupported:c,muted:u,...d}=t,f=v.useCallback(async()=>{await(r==null?void 0:r()),l()},[r,l]),h=W_(!u,e,s,n,o),p=v.useMemo(()=>u?"Unmute (m)":"Mute (m)",[u]),m=v.useCallback(async g=>{a(g)},[a]);return{title:p,buttonProps:{onPress:f,children:h,...d},progressProps:{shown:c&&i,onChange:m,leftCss:{backgroundColor:"$volumeLeft"},middleCss:{backgroundColor:"$volumeMiddle"},rightCss:{backgroundColor:"$volumeRight"},thumbCss:{backgroundColor:"$volumeThumb"}}}},ott=({decentralizedSrcOrPlaybackId:t,playbackId:e,refetchPlaybackInfoInterval:n,autoUrlUpload:r,onAssetStatusChange:i})=>{const{mutate:s,status:o,progress:a}=Ket(t?{sources:[{name:t.id,url:t.url}]}:null);v.useEffect(()=>{a!=null&&a[0]&&i(a[0])},[a,i]);const{data:l,error:c}=Yet({playbackId:(t==null?void 0:t.id)??e??void 0,staleTime:1e3*60*60*24,refetchInterval:d=>d?!1:n}),u=v.useMemo(()=>c==null?void 0:c.code,[c]);return v.useEffect(()=>{r&&s&&o==="idle"&&u===404&&s()},[r,u,s,o]),l},JV="https://w3s.link",ez="https://arweave.net",att=2.5,ltt=({src:t,playbackId:e,jwt:n,refetchPlaybackInfoInterval:r,autoUrlUpload:i={fallback:!0},playbackInfo:s,screenWidth:o,accessKey:a,onAccessKeyRequest:l,playRecording:c})=>{const[u,d]=v.useState(null),f=v.useCallback(I=>{d(I)},[d]),h=v.useMemo(()=>e?XV(e)??KV(e):Array.isArray(t)?null:XV(t)??KV(t),[e,t]),p=ott({decentralizedSrcOrPlaybackId:h,playbackId:e,refetchPlaybackInfoInterval:r,autoUrlUpload:i,onAssetStatusChange:f}),m=v.useMemo(()=>s??p,[s,p]),g=v.useCallback(async()=>{var I,A;return a||(((A=(I=m==null?void 0:m.meta)==null?void 0:I.playbackPolicy)==null?void 0:A.type)==="webhook"?await(l==null?void 0:l(m.meta.playbackPolicy))??null:null)},[a,l,m]),{data:y}=Qoe({queryKey:[m,l,a],queryFn:g,enabled:!!(m||a),staleTime:1/0}),[x,S]=v.useState([]);v.useEffect(()=>{var D,O,$,R,C,P;const I=(o??1280)*att,A=c?(($=(O=(D=s??p)==null?void 0:D.meta)==null?void 0:O.dvrPlayback)==null?void 0:$.map(k=>({url:k==null?void 0:k.url,screenWidthDelta:null,isRecording:!0})))??[]:[],L=((P=(C=(R=s??p)==null?void 0:R.meta)==null?void 0:C.source)==null?void 0:P.map(k=>({url:k==null?void 0:k.url,screenWidthDelta:k!=null&&k.width?Math.abs(I-k.width):k!=null&&k.url.includes("static360p")||k!=null&&k.url.includes("low-bitrate")?Math.abs(I-480):k!=null&&k.url.includes("static720p")?Math.abs(I-1280):k!=null&&k.url.includes("static1080p")?Math.abs(I-1920):k!=null&&k.url.includes("static2160p")?Math.abs(I-3840):null})))??[],j=[...A,...L];j.length&&S(j)},[s,p,o,c]);const w=v.useMemo(()=>{if(h&&i){const I=typeof i!="boolean"?{arweaveGateway:i.arweaveGateway??ez,ipfsGateway:i.ipfsGateway??JV}:{arweaveGateway:ez,ipfsGateway:JV};if(h.url.startsWith("ar://")){const{host:A}=new URL(I.arweaveGateway);return{type:"video",mime:"video/mp4",src:`https://${A}/${h.id}`}}else if(h.url.startsWith("ipfs://")){const{host:A}=new URL(I.ipfsGateway);return{type:"video",mime:"video/mp4",src:`https://${A}/ipfs/${h.id}`}}else return{type:"video",mime:"video/mp4",src:t}}return null},[i,h,t]),[E,T]=v.useMemo(()=>{var D,O,$,R;const I=["none",null],A=x.length>0?c?x.filter(C=>C.isRecording).map(C=>C.url):x.map(C=>C.url):typeof t=="string"?[t]:t;if(!A)return I;const j=A.map(C=>{if(n){const P=new URL(C);return P.searchParams.append("jwt",n),P.toString()}if(y){const P=new URL(C);return P.searchParams.append("accessKey",y),P.toString()}return C}).map(C=>typeof C=="string"?Oie(C):null).filter(C=>C);return((D=j==null?void 0:j[0])==null?void 0:D.type)==="audio"?["audio",j.filter(C=>C.type==="audio")]:((O=j==null?void 0:j[0])==null?void 0:O.type)==="video"||(($=j==null?void 0:j[0])==null?void 0:$.type)==="hls"||((R=j==null?void 0:j[0])==null?void 0:R.type)==="webrtc"?["video",j.filter(C=>C.type==="video"||C.type==="hls"||C.type==="webrtc")]:I},[x,t,n,y,c]);return{source:v.useMemo(()=>!T&&w?[w]:E==="video"?[...T].sort((A,L)=>{if(A.type==="video"&&L.type==="video"){const j=x.find(O=>O.url===A.src),D=x.find(O=>O.url===L.src);return D!=null&&D.screenWidthDelta&&(j!=null&&j.screenWidthDelta)?j.screenWidthDelta-D.screenWidthDelta:1}else{if(A.type==="video"&&(L.type==="hls"||L.type==="webrtc"))return-1;if(A.type==="webrtc"&&L.type==="hls")return-1}return 1}):T,[T,E,w,x]),uploadStatus:u}},ctt=({autoPlay:t,children:e,controls:n,muted:r,playbackId:i,src:s,playbackInfo:o,theme:a,title:l,poster:c,loop:u,onStreamStatusChange:d,onAccessControlError:f,onError:h,onSourceUpdated:p,jwt:m,clipLength:g,onClipCreated:y,onClipError:x,onClipStarted:S,viewerId:w,refetchPlaybackInfoInterval:E=5e3,autoUrlUpload:T=!0,accessKey:_,onAccessKeyRequest:I,showLoadingSpinner:A=!0,showUploadingIndicator:L=!0,showTitle:j=!0,priority:D,aspectRatio:O="16to9",objectFit:$="contain",mediaElementRef:R,_isCurrentlyShown:C,playRecording:P,onPlaybackStatusUpdate:k,playbackStatusSelector:M,playbackFailedErrorComponent:B,streamOfflineErrorComponent:N,accessControlErrorComponent:V,onPlaybackError:H,renderChildrenOutsideContainer:W},{_screenWidth:z})=>{const[G,K]=v.useState(null),{source:Q,uploadStatus:ne}=ltt({src:s,playbackId:i,jwt:m,refetchPlaybackInfoInterval:E,autoUrlUpload:T,screenWidth:z,playbackInfo:o,accessKey:_,onAccessKeyRequest:I,playRecording:P}),[Z,re]=v.useState(null),de=v.useCallback(se=>{const pe=se?{type:kie(se)?"access-control":_Be(se)||TBe(se)?"fallback":Cie(se)?"offline":"unknown",message:(se==null?void 0:se.message)??"Error with playback."}:null;re(pe);try{pe&&console.log(pe),H==null||H(pe),se?(pe==null?void 0:pe.type)==="offline"?d==null||d(!1):(pe==null?void 0:pe.type)==="access-control"?f==null||f(new Error(pe.message)):pe!=null&&pe.message&&(h==null||h(new Error(pe.message))):d==null||d(!0)}catch(it){console.error(it)}return pe},[f,d,h,H]);v.useEffect(()=>{Q&&(p==null||p(Q),re(null))},[Q,p]);const[Ee,ke]=v.useState(!1),_e=v.useMemo(()=>D||C||Ee,[D,C,Ee]);v.useEffect(()=>{C&&!Ee&&ke(!0)},[C,Ee]);const Te=v.useMemo(()=>{var se;return Array.isArray(Q)&&((se=Q==null?void 0:Q[0])==null?void 0:se.type)!=="audio"?!0:void 0},[Q]),Oe=v.useCallback(se=>{se&&(K(se),R==null||R(se))},[R]),Qe=v.useMemo(()=>L?(ne==null?void 0:ne.phase)==="processing"&&Net(ne==null?void 0:ne.progress)?`Processing: ${(Number(ne==null?void 0:ne.progress)*100).toFixed(0)}%`:(ne==null?void 0:ne.phase)==="failed"?"Upload Failed":null:null,[ne,L]),Ct=v.useMemo(()=>({ref:Oe,autoPlay:t,playbackId:i,muted:r,poster:c,loop:u,objectFit:$,options:n,priority:D,playbackError:Z,onPlaybackError:de,isCurrentlyShown:C,viewerId:w,onPlaybackStatusUpdate:k,playbackStatusSelector:M}),[Oe,i,t,r,c,u,$,n,D,Z,de,C,w,k,M]),ot=v.useMemo(()=>({autoPlay:t,playbackId:i??void 0,muted:r,priority:D,viewerId:w,clipLength:g,onClipCreated:y,onClipError:x,onClipStarted:S}),[t,i,r,D,w,g,y,x,S]),Sn=v.useMemo(()=>({hidePosterOnPlayed:Te,showLoadingSpinner:A,loadingText:Qe,showUploadingIndicator:L,error:Z,playbackFailedErrorComponent:B,streamOfflineErrorComponent:N,accessControlErrorComponent:V}),[Te,A,Qe,L,Z,B,N,V]),Rr=v.useMemo(()=>({autoPlay:t,children:e,controls:n,playbackId:i,src:s,theme:a,title:l,poster:c,loop:u,jwt:m,refetchPlaybackInfoInterval:E,autoUrlUpload:T,showTitle:j,aspectRatio:O,objectFit:$,renderChildrenOutsideContainer:W,playbackError:Z}),[t,e,n,i,s,a,l,c,u,m,E,T,j,O,$,W,Z]),Ji=v.useMemo(()=>_e?Q:null,[_e,Q]);return{mediaElement:G,source:Ji,uploadStatus:ne,playerProps:Ct,mediaControllerProps:ot,controlsContainerProps:Sn,props:Rr}};var utt=Tt,dtt=Bt,tz=utt.RegExp,ftt=!dtt(function(){var t=!0;try{tz(".","d")}catch{t=!1}var e={},n="",r=t?"dgimsy":"gimsy",i=function(l,c){Object.defineProperty(e,l,{get:function(){return n+=c,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};t&&(s.hasIndices="d");for(var o in s)i(o,s[o]);var a=Object.getOwnPropertyDescriptor(tz.prototype,"flags").get.call(e);return a!==r||n!==r}),htt={correct:ftt},ptt=Ar,mtt=Si,gtt=k_,nz=htt,vtt=Mse,ytt=RegExp.prototype,xtt=nz.correct?function(t){return t.flags}:function(t){return!nz.correct&&gtt(ytt,t)&&!mtt(t,"flags")?ptt(vtt,t):t.flags},btt=L_.PROPER,Stt=Ro,wtt=wi,rz=$a,Ett=Bt,_tt=xtt,w4="toString",sae=RegExp.prototype,oae=sae[w4],Ttt=Ett(function(){return oae.call({source:"a",flags:"b"})!=="/a/b"}),Ctt=btt&&oae.name!==w4;(Ttt||Ctt)&&Stt(sae,w4,function(){var e=wtt(this),n=rz(e.source),r=rz(_tt(e));return"/"+n+"/"+r},{unsafe:!0});function iz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function to(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iz(Object(n),!0).forEach(function(r){rs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ie(){Ie=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(D,O,$){D[O]=$.value},i=typeof Symbol=="function"?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(D,O,$){return Object.defineProperty(D,O,{value:$,enumerable:!0,configurable:!0,writable:!0}),D[O]}try{l({},"")}catch{l=function(O,$,R){return O[$]=R}}function c(D,O,$,R){var C=O&&O.prototype instanceof f?O:f,P=Object.create(C.prototype),k=new A(R||[]);return r(P,"_invoke",{value:E(D,$,k)}),P}function u(D,O,$){try{return{type:"normal",arg:D.call(O,$)}}catch(R){return{type:"throw",arg:R}}}t.wrap=c;var d={};function f(){}function h(){}function p(){}var m={};l(m,s,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(L([])));y&&y!==e&&n.call(y,s)&&(m=y);var x=p.prototype=f.prototype=Object.create(m);function S(D){["next","throw","return"].forEach(function(O){l(D,O,function($){return this._invoke(O,$)})})}function w(D,O){function $(C,P,k,M){var B=u(D[C],D,P);if(B.type!=="throw"){var N=B.arg,V=N.value;return V&&typeof V=="object"&&n.call(V,"__await")?O.resolve(V.__await).then(function(H){$("next",H,k,M)},function(H){$("throw",H,k,M)}):O.resolve(V).then(function(H){N.value=H,k(N)},function(H){return $("throw",H,k,M)})}M(B.arg)}var R;r(this,"_invoke",{value:function(C,P){function k(){return new O(function(M,B){$(C,P,M,B)})}return R=R?R.then(k,k):k()}})}function E(D,O,$){var R="suspendedStart";return function(C,P){if(R==="executing")throw new Error("Generator is already running");if(R==="completed"){if(C==="throw")throw P;return j()}for($.method=C,$.arg=P;;){var k=$.delegate;if(k){var M=T(k,$);if(M){if(M===d)continue;return M}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(R==="suspendedStart")throw R="completed",$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);R="executing";var B=u(D,O,$);if(B.type==="normal"){if(R=$.done?"completed":"suspendedYield",B.arg===d)continue;return{value:B.arg,done:$.done}}B.type==="throw"&&(R="completed",$.method="throw",$.arg=B.arg)}}}function T(D,O){var $=O.method,R=D.iterator[$];if(R===void 0)return O.delegate=null,$==="throw"&&D.iterator.return&&(O.method="return",O.arg=void 0,T(D,O),O.method==="throw")||$!=="return"&&(O.method="throw",O.arg=new TypeError("The iterator does not provide a '"+$+"' method")),d;var C=u(R,D.iterator,O.arg);if(C.type==="throw")return O.method="throw",O.arg=C.arg,O.delegate=null,d;var P=C.arg;return P?P.done?(O[D.resultName]=P.value,O.next=D.nextLoc,O.method!=="return"&&(O.method="next",O.arg=void 0),O.delegate=null,d):P:(O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,d)}function _(D){var O={tryLoc:D[0]};1 in D&&(O.catchLoc=D[1]),2 in D&&(O.finallyLoc=D[2],O.afterLoc=D[3]),this.tryEntries.push(O)}function I(D){var O=D.completion||{};O.type="normal",delete O.arg,D.completion=O}function A(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(_,this),this.reset(!0)}function L(D){if(D){var O=D[s];if(O)return O.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var $=-1,R=function C(){for(;++$<D.length;)if(n.call(D,$))return C.value=D[$],C.done=!1,C;return C.value=void 0,C.done=!0,C};return R.next=R}}return{next:j}}function j(){return{value:void 0,done:!0}}return h.prototype=p,r(x,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(D){var O=typeof D=="function"&&D.constructor;return!!O&&(O===h||(O.displayName||O.name)==="GeneratorFunction")},t.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,p):(D.__proto__=p,l(D,a,"GeneratorFunction")),D.prototype=Object.create(x),D},t.awrap=function(D){return{__await:D}},S(w.prototype),l(w.prototype,o,function(){return this}),t.AsyncIterator=w,t.async=function(D,O,$,R,C){C===void 0&&(C=Promise);var P=new w(c(D,O,$,R),C);return t.isGeneratorFunction(O)?P:P.next().then(function(k){return k.done?k.value:P.next()})},S(x),l(x,a,"Generator"),l(x,s,function(){return this}),l(x,"toString",function(){return"[object Generator]"}),t.keys=function(D){var O=Object(D),$=[];for(var R in O)$.push(R);return $.reverse(),function C(){for(;$.length;){var P=$.pop();if(P in O)return C.value=P,C.done=!1,C}return C.done=!0,C}},t.values=L,A.prototype={constructor:A,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!D)for(var O in this)O.charAt(0)==="t"&&n.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=void 0)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var O=this;function $(B,N){return P.type="throw",P.arg=D,O.next=B,N&&(O.method="next",O.arg=void 0),!!N}for(var R=this.tryEntries.length-1;R>=0;--R){var C=this.tryEntries[R],P=C.completion;if(C.tryLoc==="root")return $("end");if(C.tryLoc<=this.prev){var k=n.call(C,"catchLoc"),M=n.call(C,"finallyLoc");if(k&&M){if(this.prev<C.catchLoc)return $(C.catchLoc,!0);if(this.prev<C.finallyLoc)return $(C.finallyLoc)}else if(k){if(this.prev<C.catchLoc)return $(C.catchLoc,!0)}else{if(!M)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return $(C.finallyLoc)}}}},abrupt:function(D,O){for(var $=this.tryEntries.length-1;$>=0;--$){var R=this.tryEntries[$];if(R.tryLoc<=this.prev&&n.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var C=R;break}}C&&(D==="break"||D==="continue")&&C.tryLoc<=O&&O<=C.finallyLoc&&(C=null);var P=C?C.completion:{};return P.type=D,P.arg=O,C?(this.method="next",this.next=C.finallyLoc,d):this.complete(P)},complete:function(D,O){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&O&&(this.next=O),d},finish:function(D){for(var O=this.tryEntries.length-1;O>=0;--O){var $=this.tryEntries[O];if($.finallyLoc===D)return this.complete($.completion,$.afterLoc),I($),d}},catch:function(D){for(var O=this.tryEntries.length-1;O>=0;--O){var $=this.tryEntries[O];if($.tryLoc===D){var R=$.completion;if(R.type==="throw"){var C=R.arg;I($)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(D,O,$){return this.delegate={iterator:L(D),resultName:O,nextLoc:$},this.method==="next"&&(this.arg=void 0),d}},t}function sz(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){n(c);return}a.done?e(l):Promise.resolve(l).then(r,i)}function Lt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){sz(s,r,i,o,a,"next",l)}function a(l){sz(s,r,i,o,a,"throw",l)}o(void 0)})}}function iR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aae(t,e){if(t){if(typeof t=="string")return iR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iR(t,e)}}function A0(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=aae(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return s=l.done,l},e:function(l){o=!0,a=l},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}var ktt=dp,E4=Array.isArray||function(e){return ktt(e)==="Array"},oz=E4,Ptt=M_,Itt=Lr,Att=an,Ltt=Att("species"),az=Array,Rtt=function(t){var e;return oz(t)&&(e=t.constructor,Ptt(e)&&(e===az||oz(e.prototype))?e=void 0:Itt(e)&&(e=e[Ltt],e===null&&(e=void 0))),e===void 0?az:e},Ott=Rtt,lae=function(t,e){return new(Ott(t))(e===0?0:e)},Dtt=ld,Mtt=Xt,$tt=T_,Ntt=sd,Ftt=ad,jtt=lae,lz=Mtt([].push),Ka=function(t){var e=t===1,n=t===2,r=t===3,i=t===4,s=t===6,o=t===7,a=t===5||s;return function(l,c,u,d){for(var f=Ntt(l),h=$tt(f),p=Ftt(h),m=Dtt(c,u),g=0,y=d||jtt,x=e?y(l,p):n||o?y(l,0):void 0,S,w;p>g;g++)if((a||g in h)&&(S=h[g],w=m(S,g,f),t))if(e)x[g]=w;else if(w)switch(t){case 3:return!0;case 5:return S;case 6:return g;case 2:lz(x,S)}else switch(t){case 4:return!1;case 7:lz(x,S)}return s?-1:r||i?i:x}},cae={forEach:Ka(0),map:Ka(1),filter:Ka(2),some:Ka(3),every:Ka(4),find:Ka(5),findIndex:Ka(6),filterReject:Ka(7)},Btt=Bt,Utt=an,Vtt=Fv,ztt=Utt("species"),G_=function(t){return Vtt>=51||!Btt(function(){var e=[],n=e.constructor={};return n[ztt]=function(){return{foo:1}},e[t](Boolean).foo!==1})},Htt=un,Wtt=cae.filter,Gtt=G_,Ktt=Gtt("filter");Htt({target:"Array",proto:!0,forced:!Ktt},{filter:function(e){return Wtt(this,e,arguments.length>1?arguments[1]:void 0)}});var qtt=un,Ytt=cae.map,Qtt=G_,Xtt=Qtt("map");qtt({target:"Array",proto:!0,forced:!Xtt},{map:function(e){return Ytt(this,e,arguments.length>1?arguments[1]:void 0)}});var uae=`	
\v\f\r \u2028\u2029\uFEFF`,Ztt=Xt,Jtt=id,ent=$a,sR=uae,cz=Ztt("".replace),tnt=RegExp("^["+sR+"]+"),nnt=RegExp("(^|[^"+sR+"])["+sR+"]+$"),nk=function(t){return function(e){var n=ent(Jtt(e));return t&1&&(n=cz(n,tnt,"")),t&2&&(n=cz(n,nnt,"$1")),n}},rnt={start:nk(1),end:nk(2),trim:nk(3)},int=L_.PROPER,snt=Bt,uz=uae,dz="",ont=function(t){return snt(function(){return!!uz[t]()||dz[t]()!==dz||int&&uz[t].name!==t})},ant=un,lnt=rnt.trim,cnt=ont;ant({target:"String",proto:!0,forced:cnt("trim")},{trim:function(){return lnt(this)}});var unt=un,dnt=Yse,fnt=E_.f,hnt=Ase,fz=$a,pnt=Eoe,mnt=id,gnt=_oe,vnt=dnt("".slice),ynt=Math.min,dae=gnt("startsWith"),xnt=!dae&&!!function(){var t=fnt(String.prototype,"startsWith");return t&&!t.writable}();unt({target:"String",proto:!0,forced:!xnt&&!dae},{startsWith:function(e){var n=fz(mnt(this));pnt(e);var r=hnt(ynt(arguments.length>1?arguments[1]:void 0,n.length)),i=fz(e);return vnt(n,r,r+i.length)===i}});var bnt=dr,Snt=Lo,wnt=$v,_4=function(t,e,n){bnt?Snt.f(t,e,wnt(0,n)):t[e]=n},Ent=un,hz=E4,_nt=M_,Tnt=Lr,pz=XM,Cnt=ad,knt=fp,Pnt=_4,Int=an,Ant=G_,Lnt=$_,Rnt=Ant("slice"),Ont=Int("species"),rk=Array,Dnt=Math.max;Ent({target:"Array",proto:!0,forced:!Rnt},{slice:function(e,n){var r=knt(this),i=Cnt(r),s=pz(e,i),o=pz(n===void 0?i:n,i),a,l,c;if(hz(r)&&(a=r.constructor,_nt(a)&&(a===rk||hz(a.prototype))?a=void 0:Tnt(a)&&(a=a[Ont],a===null&&(a=void 0)),a===rk||a===void 0))return Lnt(r,s,o);for(l=new(a===void 0?rk:a)(Dnt(o-s,0)),c=0;s<o;s++,c++)s in r&&Pnt(l,c,r[s]);return l.length=c,l}});var Mnt=Bt,$nt=!Mnt(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Nnt=Si,Fnt=bn,jnt=sd,Bnt=KM,Unt=$nt,mz=Bnt("IE_PROTO"),oR=Object,Vnt=oR.prototype,fae=Unt?oR.getPrototypeOf:function(t){var e=jnt(t);if(Nnt(e,mz))return e[mz];var n=e.constructor;return Fnt(n)&&e instanceof n?n.prototype:e instanceof oR?Vnt:null},znt=Bt,Hnt=bn,Wnt=Lr,gz=fae,Gnt=Ro,Knt=an,aR=Knt("iterator"),hae=!1,Vu,ik,sk;[].keys&&(sk=[].keys(),"next"in sk?(ik=gz(gz(sk)),ik!==Object.prototype&&(Vu=ik)):hae=!0);var qnt=!Wnt(Vu)||znt(function(){var t={};return Vu[aR].call(t)!==t});qnt&&(Vu={});Hnt(Vu[aR])||Gnt(Vu,aR,function(){return this});var pae={IteratorPrototype:Vu,BUGGY_SAFARI_ITERATORS:hae},Ynt=pae.IteratorPrototype,Qnt=R_,Xnt=$v,Znt=hp,Jnt=Vv,ert=function(){return this},mae=function(t,e,n,r){var i=e+" Iterator";return t.prototype=Qnt(Ynt,{next:Xnt(+!r,n)}),Znt(t,i,!1),Jnt[i]=ert,t},trt=un,nrt=Ar,gae=L_,rrt=bn,irt=mae,vz=fae,yz=zse,srt=hp,ort=A_,ok=Ro,art=an,lrt=Vv,vae=pae,crt=gae.PROPER,urt=gae.CONFIGURABLE,xz=vae.IteratorPrototype,b1=vae.BUGGY_SAFARI_ITERATORS,nm=art("iterator"),bz="keys",rm="values",Sz="entries",drt=function(){return this},yae=function(t,e,n,r,i,s,o){irt(n,e,r);var a=function(y){if(y===i&&f)return f;if(!b1&&y&&y in u)return u[y];switch(y){case bz:return function(){return new n(this,y)};case rm:return function(){return new n(this,y)};case Sz:return function(){return new n(this,y)}}return function(){return new n(this)}},l=e+" Iterator",c=!1,u=t.prototype,d=u[nm]||u["@@iterator"]||i&&u[i],f=!b1&&d||a(i),h=e==="Array"&&u.entries||d,p,m,g;if(h&&(p=vz(h.call(new t)),p!==Object.prototype&&p.next&&(vz(p)!==xz&&(yz?yz(p,xz):rrt(p[nm])||ok(p,nm,drt)),srt(p,l,!0))),crt&&i===rm&&d&&d.name!==rm&&(urt?ort(u,"name",rm):(c=!0,f=function(){return nrt(d,this)})),i)if(m={values:a(rm),keys:s?f:a(bz),entries:a(Sz)},o)for(g in m)(b1||c||!(g in u))&&ok(u,g,m[g]);else trt({target:e,proto:!0,forced:b1||c},m);return u[nm]!==f&&ok(u,nm,f,{name:i}),lrt[e]=f,m},T4=function(t,e){return{value:t,done:e}},frt=fp,C4=woe,wz=Vv,xae=od,hrt=Lo.f,prt=yae,S1=T4,mrt=dr,bae="Array Iterator",grt=xae.set,vrt=xae.getterFor(bae),yrt=prt(Array,"Array",function(t,e){grt(this,{type:bae,target:frt(t),index:0,kind:e})},function(){var t=vrt(this),e=t.target,n=t.index++;if(!e||n>=e.length)return t.target=null,S1(void 0,!0);switch(t.kind){case"keys":return S1(n,!1);case"values":return S1(e[n],!1)}return S1([n,e[n]],!1)},"values"),Ez=wz.Arguments=wz.Array;C4("keys");C4("values");C4("entries");if(mrt&&Ez.name!=="values")try{hrt(Ez,"name",{value:"values"})}catch{}var k4=Xt,xrt=QM,brt=$a,Srt=id,wrt=k4("".charAt),_z=k4("".charCodeAt),Ert=k4("".slice),Tz=function(t){return function(e,n){var r=brt(Srt(e)),i=xrt(n),s=r.length,o,a;return i<0||i>=s?t?"":void 0:(o=_z(r,i),o<55296||o>56319||i+1===s||(a=_z(r,i+1))<56320||a>57343?t?wrt(r,i):o:t?Ert(r,i,i+2):(o-55296<<10)+(a-56320)+65536)}},Sae={codeAt:Tz(!1),charAt:Tz(!0)},_rt=Sae.charAt,Trt=$a,wae=od,Crt=yae,Cz=T4,Eae="String Iterator",krt=wae.set,Prt=wae.getterFor(Eae);Crt(String,"String",function(t){krt(this,{type:Eae,string:Trt(t),index:0})},function(){var e=Prt(this),n=e.string,r=e.index,i;return r>=n.length?Cz(void 0,!0):(i=_rt(n,r),e.index+=i.length,Cz(i,!1))});var Irt={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Art=I_,ak=Art("span").classList,kz=ak&&ak.constructor&&ak.constructor.prototype,Lrt=kz===Object.prototype?void 0:kz,Pz=Tt,_ae=Irt,Rrt=Lrt,Im=yrt,Iz=A_,Ort=hp,Drt=an,lk=Drt("iterator"),ck=Im.values,Tae=function(t,e){if(t){if(t[lk]!==ck)try{Iz(t,lk,ck)}catch{t[lk]=ck}if(Ort(t,e,!0),_ae[e]){for(var n in Im)if(t[n]!==Im[n])try{Iz(t,n,Im[n])}catch{t[n]=Im[n]}}}};for(var uk in _ae)Tae(Pz[uk]&&Pz[uk].prototype,uk);Tae(Rrt,"DOMTokenList");var Mrt=Bt,$rt=an,Nrt=dr,Az=cHe,Frt=$rt("iterator"),Cae=!Mrt(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return t.pathname="c%20d",e.forEach(function(i,s){e.delete("b"),r+=s+i}),n.delete("a",2),n.delete("b",void 0),Az&&(!t.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!e.size&&(Az||!Nrt)||!e.sort||t.href!=="https://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[Frt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://").host!=="xn--e1aybc"||new URL("https://a#").hash!=="#%D0%B1"||r!=="a1c3"||new URL("https://x",void 0).host!=="x"}),jrt=wi,Brt=voe,Urt=function(t,e,n,r){try{return r?e(jrt(n)[0],n[1]):e(n)}catch(i){Brt(t,"throw",i)}},Vrt=ld,zrt=Ar,Hrt=sd,Wrt=Urt,Grt=goe,Krt=M_,qrt=ad,Lz=_4,Yrt=p4,Qrt=j_,Rz=Array,Xrt=function(e){var n=Hrt(e),r=Krt(this),i=arguments.length,s=i>1?arguments[1]:void 0,o=s!==void 0;o&&(s=Vrt(s,i>2?arguments[2]:void 0));var a=Qrt(n),l=0,c,u,d,f,h,p;if(a&&!(this===Rz&&Grt(a)))for(u=r?new this:[],f=Yrt(n,a),h=f.next;!(d=zrt(h,f)).done;l++)p=o?Wrt(f,s,[d.value,l],!0):d.value,Lz(u,l,p);else for(c=qrt(n),u=r?new this(c):Rz(c);c>l;l++)p=o?s(n[l],l):n[l],Lz(u,l,p);return u.length=l,u},ud=Xt,dk=2147483647,vg=36,kae=1,lR=26,Zrt=38,Jrt=700,eit=72,tit=128,nit="-",rit=/[^\0-\u007E]/,Pae=/[.\u3002\uFF0E\uFF61]/g,Oz="Overflow: input needs wider integers to process",fk=vg-kae,Dz=RangeError,iit=ud(Pae.exec),Tf=Math.floor,hk=String.fromCharCode,Mz=ud("".charCodeAt),Iae=ud([].join),Al=ud([].push),sit=ud("".replace),oit=ud("".split),ait=ud("".toLowerCase),lit=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=Mz(t,n++);if(i>=55296&&i<=56319&&n<r){var s=Mz(t,n++);(s&64512)===56320?Al(e,((i&1023)<<10)+(s&1023)+65536):(Al(e,i),n--)}else Al(e,i)}return e},$z=function(t){return t+22+75*(t<26)},cit=function(t,e,n){var r=0;for(t=n?Tf(t/Jrt):t>>1,t+=Tf(t/e);t>fk*lR>>1;)t=Tf(t/fk),r+=vg;return Tf(r+(fk+1)*t/(t+Zrt))},uit=function(t){var e=[];t=lit(t);var n=t.length,r=tit,i=0,s=eit,o,a;for(o=0;o<t.length;o++)a=t[o],a<128&&Al(e,hk(a));var l=e.length,c=l;for(l&&Al(e,nit);c<n;){var u=dk;for(o=0;o<t.length;o++)a=t[o],a>=r&&a<u&&(u=a);var d=c+1;if(u-r>Tf((dk-i)/d))throw new Dz(Oz);for(i+=(u-r)*d,r=u,o=0;o<t.length;o++){if(a=t[o],a<r&&++i>dk)throw new Dz(Oz);if(a===r){for(var f=i,h=vg;;){var p=h<=s?kae:h>=s+lR?lR:h-s;if(f<p)break;var m=f-p,g=vg-p;Al(e,hk($z(p+m%g))),f=Tf(m/g),h+=vg}Al(e,hk($z(f))),s=cit(i,d,c===l),i=0,c++}}i++,r++}return Iae(e,"")},dit=function(t){var e=[],n=oit(sit(ait(t),Pae,"."),"."),r,i;for(r=0;r<n.length;r++)i=n[r],Al(e,iit(rit,i)?"xn--"+uit(i):i);return Iae(e,".")},fit=un,hit=Xt,pit=XM,mit=RangeError,Nz=String.fromCharCode,Fz=String.fromCodePoint,git=hit([].join),vit=!!Fz&&Fz.length!==1;fit({target:"String",stat:!0,arity:1,forced:vit},{fromCodePoint:function(e){for(var n=[],r=arguments.length,i=0,s;r>i;){if(s=+arguments[i++],pit(s,1114111)!==s)throw new mit(s+" is not a valid code point");n[i]=s<65536?Nz(s):Nz(((s-=65536)>>10)+55296,s%1024+56320)}return git(n,"")}});var yit=Ro,xit=function(t,e,n){for(var r in e)yit(t,r,e[r],n);return t},jz=$_,bit=Math.floor,cR=function(t,e){var n=t.length;if(n<8)for(var r=1,i,s;r<n;){for(s=r,i=t[r];s&&e(t[s-1],i)>0;)t[s]=t[--s];s!==r++&&(t[s]=i)}else for(var o=bit(n/2),a=cR(jz(t,0,o),e),l=cR(jz(t,o),e),c=a.length,u=l.length,d=0,f=0;d<c||f<u;)t[d+f]=d<c&&f<u?e(a[d],l[f])<=0?a[d++]:l[f++]:d<c?a[d++]:l[f++];return t},Sit=cR,uR=un,Aae=Tt,P4=Jse,wit=xc,w1=Ar,Rs=Xt,yg=dr,Lae=Cae,Rae=Ro,Eit=i4,_it=xit,Tit=hp,Cit=mae,I4=od,Oae=s4,pk=bn,kit=Si,Pit=ld,Iit=Bv,Ait=wi,Dae=Lr,yr=$a,Lit=R_,Bz=$v,Uz=p4,Rit=j_,E1=T4,Rd=a4,Oit=an,Dit=Sit,Mit=Oit("iterator"),gp="URLSearchParams",Mae=gp+"Iterator",$ae=I4.set,Ri=I4.getterFor(gp),$it=I4.getterFor(Mae),Vz=P4("fetch"),kw=P4("Request"),xg=P4("Headers"),mk=kw&&kw.prototype,zz=xg&&xg.prototype,Nit=Aae.TypeError,Fit=Aae.encodeURIComponent,jit=String.fromCharCode,Bit=wit("String","fromCodePoint"),Uit=parseInt,Zx=Rs("".charAt),Hz=Rs([].join),Ll=Rs([].push),Nae=Rs("".replace),Vit=Rs([].shift),Wz=Rs([].splice),Gz=Rs("".split),Fae=Rs("".slice),zit=Rs(/./.exec),Hit=/\+/g,gk="",Wit=/^[0-9a-f]+$/i,Kz=function(t,e){var n=Fae(t,e,e+2);return zit(Wit,n)?Uit(n,16):NaN},Git=function(t){for(var e=0,n=128;n>0&&t&n;n>>=1)e++;return e},Kit=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(t[0]&31)<<6|t[1]&63;break;case 3:e=(t[0]&15)<<12|(t[1]&63)<<6|t[2]&63;break;case 4:e=(t[0]&7)<<18|(t[1]&63)<<12|(t[2]&63)<<6|t[3]&63;break}return e>1114111?null:e},qz=function(t){t=Nae(t,Hit," ");for(var e=t.length,n="",r=0;r<e;){var i=Zx(t,r);if(i==="%"){if(Zx(t,r+1)==="%"||r+3>e){n+="%",r++;continue}var s=Kz(t,r+1);if(s!==s){n+=i,r++;continue}r+=2;var o=Git(s);if(o===0)i=jit(s);else{if(o===1||o>4){n+=gk,r++;continue}for(var a=[s],l=1;l<o&&(r++,!(r+3>e||Zx(t,r)!=="%"));){var c=Kz(t,r+1);if(c!==c){r+=3;break}if(c>191||c<128)break;Ll(a,c),r+=2,l++}if(a.length!==o){n+=gk;continue}var u=Kit(a);u===null?n+=gk:i=Bit(u)}}n+=i,r++}return n},qit=/[!'()~]|%20/g,Yit={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Qit=function(t){return Yit[t]},Yz=function(t){return Nae(Fit(t),qit,Qit)},vk=Cit(function(e,n){$ae(this,{type:Mae,target:Ri(e).entries,index:0,kind:n})},gp,function(){var e=$it(this),n=e.target,r=e.index++;if(!n||r>=n.length)return e.target=null,E1(void 0,!0);var i=n[r];switch(e.kind){case"keys":return E1(i.key,!1);case"values":return E1(i.value,!1)}return E1([i.key,i.value],!1)},!0),jae=function(t){this.entries=[],this.url=null,t!==void 0&&(Dae(t)?this.parseObject(t):this.parseQuery(typeof t=="string"?Zx(t,0)==="?"?Fae(t,1):t:yr(t)))};jae.prototype={type:gp,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e=this.entries,n=Rit(t),r,i,s,o,a,l,c;if(n)for(r=Uz(t,n),i=r.next;!(s=w1(i,r)).done;){if(o=Uz(Ait(s.value)),a=o.next,(l=w1(a,o)).done||(c=w1(a,o)).done||!w1(a,o).done)throw new Nit("Expected sequence with length 2");Ll(e,{key:yr(l.value),value:yr(c.value)})}else for(var u in t)kit(t,u)&&Ll(e,{key:u,value:yr(t[u])})},parseQuery:function(t){if(t)for(var e=this.entries,n=Gz(t,"&"),r=0,i,s;r<n.length;)i=n[r++],i.length&&(s=Gz(i,"="),Ll(e,{key:qz(Vit(s)),value:qz(Hz(s,"="))}))},serialize:function(){for(var t=this.entries,e=[],n=0,r;n<t.length;)r=t[n++],Ll(e,Yz(r.key)+"="+Yz(r.value));return Hz(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var K_=function(){Oae(this,Dh);var e=arguments.length>0?arguments[0]:void 0,n=$ae(this,new jae(e));yg||(this.size=n.entries.length)},Dh=K_.prototype;_it(Dh,{append:function(e,n){var r=Ri(this);Rd(arguments.length,2),Ll(r.entries,{key:yr(e),value:yr(n)}),yg||this.length++,r.updateURL()},delete:function(t){for(var e=Ri(this),n=Rd(arguments.length,1),r=e.entries,i=yr(t),s=n<2?void 0:arguments[1],o=s===void 0?s:yr(s),a=0;a<r.length;){var l=r[a];if(l.key===i&&(o===void 0||l.value===o)){if(Wz(r,a,1),o!==void 0)break}else a++}yg||(this.size=r.length),e.updateURL()},get:function(e){var n=Ri(this).entries;Rd(arguments.length,1);for(var r=yr(e),i=0;i<n.length;i++)if(n[i].key===r)return n[i].value;return null},getAll:function(e){var n=Ri(this).entries;Rd(arguments.length,1);for(var r=yr(e),i=[],s=0;s<n.length;s++)n[s].key===r&&Ll(i,n[s].value);return i},has:function(e){for(var n=Ri(this).entries,r=Rd(arguments.length,1),i=yr(e),s=r<2?void 0:arguments[1],o=s===void 0?s:yr(s),a=0;a<n.length;){var l=n[a++];if(l.key===i&&(o===void 0||l.value===o))return!0}return!1},set:function(e,n){var r=Ri(this);Rd(arguments.length,1);for(var i=r.entries,s=!1,o=yr(e),a=yr(n),l=0,c;l<i.length;l++)c=i[l],c.key===o&&(s?Wz(i,l--,1):(s=!0,c.value=a));s||Ll(i,{key:o,value:a}),yg||(this.size=i.length),r.updateURL()},sort:function(){var e=Ri(this);Dit(e.entries,function(n,r){return n.key>r.key?1:-1}),e.updateURL()},forEach:function(e){for(var n=Ri(this).entries,r=Pit(e,arguments.length>1?arguments[1]:void 0),i=0,s;i<n.length;)s=n[i++],r(s.value,s.key,this)},keys:function(){return new vk(this,"keys")},values:function(){return new vk(this,"values")},entries:function(){return new vk(this,"entries")}},{enumerable:!0});Rae(Dh,Mit,Dh.entries,{name:"entries"});Rae(Dh,"toString",function(){return Ri(this).serialize()},{enumerable:!0});yg&&Eit(Dh,"size",{get:function(){return Ri(this).entries.length},configurable:!0,enumerable:!0});Tit(K_,gp);uR({global:!0,constructor:!0,forced:!Lae},{URLSearchParams:K_});if(!Lae&&pk(xg)){var Xit=Rs(zz.has),Zit=Rs(zz.set),Qz=function(t){if(Dae(t)){var e=t.body,n;if(Iit(e)===gp)return n=t.headers?new xg(t.headers):new xg,Xit(n,"content-type")||Zit(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Lit(t,{body:Bz(0,yr(e)),headers:Bz(0,n)})}return t};if(pk(Vz)&&uR({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return Vz(e,arguments.length>1?Qz(arguments[1]):{})}}),pk(kw)){var yk=function(e){return Oae(this,mk),new kw(e,arguments.length>1?Qz(arguments[1]):{})};mk.constructor=yk,yk.prototype=mk,uR({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:yk})}}var Jit={URLSearchParams:K_,getState:Ri},est=un,A4=dr,tst=Cae,L4=Tt,Xz=ld,Xi=Xt,Pw=Ro,Ci=i4,nst=s4,dR=Si,R4=Aoe,Od=Xrt,ts=$_,rst=Sae.codeAt,ist=dit,Uo=$a,sst=hp,ost=a4,Bae=Jit,Uae=od,ast=Uae.set,Iw=Uae.getterFor("URL"),lst=Bae.URLSearchParams,cst=Bae.getState,im=L4.URL,fR=L4.TypeError,Aw=L4.parseInt,ust=Math.floor,Zz=Math.pow,Ni=Xi("".charAt),xs=Xi(/./.exec),Am=Xi([].join),dst=Xi(1.1.toString),fst=Xi([].pop),Wd=Xi([].push),xk=Xi("".replace),hst=Xi([].shift),pst=Xi("".split),bg=Xi("".slice),Lw=Xi("".toLowerCase),mst=Xi([].unshift),gst="Invalid authority",bk="Invalid scheme",Rc="Invalid host",Jz="Invalid port",Vae=/[a-z]/i,vst=/[\d+-.a-z]/i,hR=/\d/,yst=/^0x/i,xst=/^[0-7]+$/,bst=/^\d+$/,zae=/^[\da-f]+$/i,Sst=/[\0\t\n\r #%/:<>?@[\\\]^|]/,wst=/[\0\t\n\r #/:<>?@[\\\]^|]/,Est=/^[\u0000-\u0020]+/,_st=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Tst=/[\t\n\r]/g,ki,Cst=function(t){var e=pst(t,"."),n,r,i,s,o,a,l;if(e.length&&e[e.length-1]===""&&e.length--,n=e.length,n>4)return t;for(r=[],i=0;i<n;i++){if(s=e[i],s==="")return t;if(o=10,s.length>1&&Ni(s,0)==="0"&&(o=xs(yst,s)?16:8,s=bg(s,o===8?1:2)),s==="")a=0;else{if(!xs(o===10?bst:o===8?xst:zae,s))return t;a=Aw(s,o)}Wd(r,a)}for(i=0;i<n;i++)if(a=r[i],i===n-1){if(a>=Zz(256,5-n))return null}else if(a>255)return null;for(l=fst(r),i=0;i<r.length;i++)l+=r[i]*Zz(256,3-i);return l},kst=function(t){var e=[0,0,0,0,0,0,0,0],n=0,r=null,i=0,s,o,a,l,c,u,d,f=function(){return Ni(t,i)};if(f()===":"){if(Ni(t,1)!==":")return;i+=2,n++,r=n}for(;f();){if(n===8)return;if(f()===":"){if(r!==null)return;i++,n++,r=n;continue}for(s=o=0;o<4&&xs(zae,f());)s=s*16+Aw(f(),16),i++,o++;if(f()==="."){if(o===0||(i-=o,n>6))return;for(a=0;f();){if(l=null,a>0)if(f()==="."&&a<4)i++;else return;if(!xs(hR,f()))return;for(;xs(hR,f());){if(c=Aw(f(),10),l===null)l=c;else{if(l===0)return;l=l*10+c}if(l>255)return;i++}e[n]=e[n]*256+l,a++,(a===2||a===4)&&n++}if(a!==4)return;break}else if(f()===":"){if(i++,!f())return}else if(f())return;e[n++]=s}if(r!==null)for(u=n-r,n=7;n!==0&&u>0;)d=e[n],e[n--]=e[r+u-1],e[r+--u]=d;else if(n!==8)return;return e},Pst=function(t){for(var e=null,n=1,r=null,i=0,s=0;s<8;s++)t[s]!==0?(i>n&&(e=r,n=i),r=null,i=0):(r===null&&(r=s),++i);return i>n?r:e},sm=function(t){var e,n,r,i;if(typeof t=="number"){for(e=[],n=0;n<4;n++)mst(e,t%256),t=ust(t/256);return Am(e,".")}if(typeof t=="object"){for(e="",r=Pst(t),n=0;n<8;n++)i&&t[n]===0||(i&&(i=!1),r===n?(e+=n?":":"::",i=!0):(e+=dst(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},Jx={},Hae=R4({},Jx,{" ":1,'"':1,"<":1,">":1,"`":1}),Wae=R4({},Hae,{"#":1,"?":1,"{":1,"}":1}),Sk=R4({},Wae,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),qa=function(t,e){var n=rst(t,0);return n>32&&n<127&&!dR(e,t)?t:encodeURIComponent(t)},_1={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Lm=function(t,e){var n;return t.length===2&&xs(Vae,Ni(t,0))&&((n=Ni(t,1))===":"||!e&&n==="|")},eH=function(t){var e;return t.length>1&&Lm(bg(t,0,2))&&(t.length===2||(e=Ni(t,2))==="/"||e==="\\"||e==="?"||e==="#")},Ist=function(t){return t==="."||Lw(t)==="%2e"},Ast=function(t){return t=Lw(t),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"},wk={},tH={},Ek={},nH={},rH={},_k={},iH={},sH={},T1={},C1={},Tk={},Ck={},kk={},Pk={},oH={},Ik={},Dd={},Hs={},aH={},Oc={},Mo={},O4=function(t,e,n){var r=Uo(t),i,s,o;if(e){if(s=this.parse(r),s)throw new fR(s);this.searchParams=null}else{if(n!==void 0&&(i=new O4(n,!0)),s=this.parse(r,null,i),s)throw new fR(s);o=cst(new lst),o.bindURL(this),this.searchParams=o}};O4.prototype={type:"URL",parse:function(t,e,n){var r=this,i=e||wk,s=0,o="",a=!1,l=!1,c=!1,u,d,f,h;for(t=Uo(t),e||(r.scheme="",r.username="",r.password="",r.host=null,r.port=null,r.path=[],r.query=null,r.fragment=null,r.cannotBeABaseURL=!1,t=xk(t,Est,""),t=xk(t,_st,"$1")),t=xk(t,Tst,""),u=Od(t);s<=u.length;){switch(d=u[s],i){case wk:if(d&&xs(Vae,d))o+=Lw(d),i=tH;else{if(e)return bk;i=Ek;continue}break;case tH:if(d&&(xs(vst,d)||d==="+"||d==="-"||d==="."))o+=Lw(d);else if(d===":"){if(e&&(r.isSpecial()!==dR(_1,o)||o==="file"&&(r.includesCredentials()||r.port!==null)||r.scheme==="file"&&!r.host))return;if(r.scheme=o,e){r.isSpecial()&&_1[r.scheme]===r.port&&(r.port=null);return}o="",r.scheme==="file"?i=Pk:r.isSpecial()&&n&&n.scheme===r.scheme?i=nH:r.isSpecial()?i=sH:u[s+1]==="/"?(i=rH,s++):(r.cannotBeABaseURL=!0,Wd(r.path,""),i=aH)}else{if(e)return bk;o="",i=Ek,s=0;continue}break;case Ek:if(!n||n.cannotBeABaseURL&&d!=="#")return bk;if(n.cannotBeABaseURL&&d==="#"){r.scheme=n.scheme,r.path=ts(n.path),r.query=n.query,r.fragment="",r.cannotBeABaseURL=!0,i=Mo;break}i=n.scheme==="file"?Pk:_k;continue;case nH:if(d==="/"&&u[s+1]==="/")i=T1,s++;else{i=_k;continue}break;case rH:if(d==="/"){i=C1;break}else{i=Hs;continue}case _k:if(r.scheme=n.scheme,d===ki)r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,r.path=ts(n.path),r.query=n.query;else if(d==="/"||d==="\\"&&r.isSpecial())i=iH;else if(d==="?")r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,r.path=ts(n.path),r.query="",i=Oc;else if(d==="#")r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,r.path=ts(n.path),r.query=n.query,r.fragment="",i=Mo;else{r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,r.path=ts(n.path),r.path.length--,i=Hs;continue}break;case iH:if(r.isSpecial()&&(d==="/"||d==="\\"))i=T1;else if(d==="/")i=C1;else{r.username=n.username,r.password=n.password,r.host=n.host,r.port=n.port,i=Hs;continue}break;case sH:if(i=T1,d!=="/"||Ni(o,s+1)!=="/")continue;s++;break;case T1:if(d!=="/"&&d!=="\\"){i=C1;continue}break;case C1:if(d==="@"){a&&(o="%40"+o),a=!0,f=Od(o);for(var p=0;p<f.length;p++){var m=f[p];if(m===":"&&!c){c=!0;continue}var g=qa(m,Sk);c?r.password+=g:r.username+=g}o=""}else if(d===ki||d==="/"||d==="?"||d==="#"||d==="\\"&&r.isSpecial()){if(a&&o==="")return gst;s-=Od(o).length+1,o="",i=Tk}else o+=d;break;case Tk:case Ck:if(e&&r.scheme==="file"){i=Ik;continue}else if(d===":"&&!l){if(o==="")return Rc;if(h=r.parseHost(o),h)return h;if(o="",i=kk,e===Ck)return}else if(d===ki||d==="/"||d==="?"||d==="#"||d==="\\"&&r.isSpecial()){if(r.isSpecial()&&o==="")return Rc;if(e&&o===""&&(r.includesCredentials()||r.port!==null))return;if(h=r.parseHost(o),h)return h;if(o="",i=Dd,e)return;continue}else d==="["?l=!0:d==="]"&&(l=!1),o+=d;break;case kk:if(xs(hR,d))o+=d;else if(d===ki||d==="/"||d==="?"||d==="#"||d==="\\"&&r.isSpecial()||e){if(o!==""){var y=Aw(o,10);if(y>65535)return Jz;r.port=r.isSpecial()&&y===_1[r.scheme]?null:y,o=""}if(e)return;i=Dd;continue}else return Jz;break;case Pk:if(r.scheme="file",d==="/"||d==="\\")i=oH;else if(n&&n.scheme==="file")switch(d){case ki:r.host=n.host,r.path=ts(n.path),r.query=n.query;break;case"?":r.host=n.host,r.path=ts(n.path),r.query="",i=Oc;break;case"#":r.host=n.host,r.path=ts(n.path),r.query=n.query,r.fragment="",i=Mo;break;default:eH(Am(ts(u,s),""))||(r.host=n.host,r.path=ts(n.path),r.shortenPath()),i=Hs;continue}else{i=Hs;continue}break;case oH:if(d==="/"||d==="\\"){i=Ik;break}n&&n.scheme==="file"&&!eH(Am(ts(u,s),""))&&(Lm(n.path[0],!0)?Wd(r.path,n.path[0]):r.host=n.host),i=Hs;continue;case Ik:if(d===ki||d==="/"||d==="\\"||d==="?"||d==="#"){if(!e&&Lm(o))i=Hs;else if(o===""){if(r.host="",e)return;i=Dd}else{if(h=r.parseHost(o),h)return h;if(r.host==="localhost"&&(r.host=""),e)return;o="",i=Dd}continue}else o+=d;break;case Dd:if(r.isSpecial()){if(i=Hs,d!=="/"&&d!=="\\")continue}else if(!e&&d==="?")r.query="",i=Oc;else if(!e&&d==="#")r.fragment="",i=Mo;else if(d!==ki&&(i=Hs,d!=="/"))continue;break;case Hs:if(d===ki||d==="/"||d==="\\"&&r.isSpecial()||!e&&(d==="?"||d==="#")){if(Ast(o)?(r.shortenPath(),d!=="/"&&!(d==="\\"&&r.isSpecial())&&Wd(r.path,"")):Ist(o)?d!=="/"&&!(d==="\\"&&r.isSpecial())&&Wd(r.path,""):(r.scheme==="file"&&!r.path.length&&Lm(o)&&(r.host&&(r.host=""),o=Ni(o,0)+":"),Wd(r.path,o)),o="",r.scheme==="file"&&(d===ki||d==="?"||d==="#"))for(;r.path.length>1&&r.path[0]==="";)hst(r.path);d==="?"?(r.query="",i=Oc):d==="#"&&(r.fragment="",i=Mo)}else o+=qa(d,Wae);break;case aH:d==="?"?(r.query="",i=Oc):d==="#"?(r.fragment="",i=Mo):d!==ki&&(r.path[0]+=qa(d,Jx));break;case Oc:!e&&d==="#"?(r.fragment="",i=Mo):d!==ki&&(d==="'"&&r.isSpecial()?r.query+="%27":d==="#"?r.query+="%23":r.query+=qa(d,Jx));break;case Mo:d!==ki&&(r.fragment+=qa(d,Hae));break}s++}},parseHost:function(t){var e,n,r;if(Ni(t,0)==="["){if(Ni(t,t.length-1)!=="]"||(e=kst(bg(t,1,-1)),!e))return Rc;this.host=e}else if(this.isSpecial()){if(t=ist(t),xs(Sst,t)||(e=Cst(t),e===null))return Rc;this.host=e}else{if(xs(wst,t))return Rc;for(e="",n=Od(t),r=0;r<n.length;r++)e+=qa(n[r],Jx);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return dR(_1,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;e&&(this.scheme!=="file"||e!==1||!Lm(t[0],!0))&&t.length--},serialize:function(){var t=this,e=t.scheme,n=t.username,r=t.password,i=t.host,s=t.port,o=t.path,a=t.query,l=t.fragment,c=e+":";return i!==null?(c+="//",t.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=sm(i),s!==null&&(c+=":"+s)):e==="file"&&(c+="//"),c+=t.cannotBeABaseURL?o[0]:o.length?"/"+Am(o,"/"):"",a!==null&&(c+="?"+a),l!==null&&(c+="#"+l),c},setHref:function(t){var e=this.parse(t);if(e)throw new fR(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if(t==="blob")try{return new Mh(t.path[0]).origin}catch{return"null"}return t==="file"||!this.isSpecial()?"null":t+"://"+sm(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(Uo(t)+":",wk)},getUsername:function(){return this.username},setUsername:function(t){var e=Od(Uo(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<e.length;n++)this.username+=qa(e[n],Sk)}},getPassword:function(){return this.password},setPassword:function(t){var e=Od(Uo(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<e.length;n++)this.password+=qa(e[n],Sk)}},getHost:function(){var t=this.host,e=this.port;return t===null?"":e===null?sm(t):sm(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Tk)},getHostname:function(){var t=this.host;return t===null?"":sm(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Ck)},getPort:function(){var t=this.port;return t===null?"":Uo(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(t=Uo(t),t===""?this.port=null:this.parse(t,kk))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+Am(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Dd))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){t=Uo(t),t===""?this.query=null:(Ni(t,0)==="?"&&(t=bg(t,1)),this.query="",this.parse(t,Oc)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){if(t=Uo(t),t===""){this.fragment=null;return}Ni(t,0)==="#"&&(t=bg(t,1)),this.fragment="",this.parse(t,Mo)},update:function(){this.query=this.searchParams.serialize()||null}};var Mh=function(e){var n=nst(this,pr),r=ost(arguments.length,1)>1?arguments[1]:void 0,i=ast(n,new O4(e,!1,r));A4||(n.href=i.serialize(),n.origin=i.getOrigin(),n.protocol=i.getProtocol(),n.username=i.getUsername(),n.password=i.getPassword(),n.host=i.getHost(),n.hostname=i.getHostname(),n.port=i.getPort(),n.pathname=i.getPathname(),n.search=i.getSearch(),n.searchParams=i.getSearchParams(),n.hash=i.getHash())},pr=Mh.prototype,Pi=function(t,e){return{get:function(){return Iw(this)[t]()},set:e&&function(n){return Iw(this)[e](n)},configurable:!0,enumerable:!0}};A4&&(Ci(pr,"href",Pi("serialize","setHref")),Ci(pr,"origin",Pi("getOrigin")),Ci(pr,"protocol",Pi("getProtocol","setProtocol")),Ci(pr,"username",Pi("getUsername","setUsername")),Ci(pr,"password",Pi("getPassword","setPassword")),Ci(pr,"host",Pi("getHost","setHost")),Ci(pr,"hostname",Pi("getHostname","setHostname")),Ci(pr,"port",Pi("getPort","setPort")),Ci(pr,"pathname",Pi("getPathname","setPathname")),Ci(pr,"search",Pi("getSearch","setSearch")),Ci(pr,"searchParams",Pi("getSearchParams")),Ci(pr,"hash",Pi("getHash","setHash")));Pw(pr,"toJSON",function(){return Iw(this).serialize()},{enumerable:!0});Pw(pr,"toString",function(){return Iw(this).serialize()},{enumerable:!0});if(im){var lH=im.createObjectURL,cH=im.revokeObjectURL;lH&&Pw(Mh,"createObjectURL",Xz(lH,im)),cH&&Pw(Mh,"revokeObjectURL",Xz(cH,im))}sst(Mh,"URL");est({global:!0,constructor:!0,forced:!tst,sham:!A4},{URL:Mh});var Lst=function(){var e,n,r,i,s,o,a,l,c,u,d,f;if(!cd())return!1;var h=!!((e=window)!==null&&e!==void 0&&e.RTCPeerConnection||(n=window)!==null&&n!==void 0&&n.webkitRTCPeerConnection||(r=window)!==null&&r!==void 0&&r.mozRTCPeerConnection),p=!!((i=navigator)!==null&&i!==void 0&&i.getUserMedia||(s=navigator)!==null&&s!==void 0&&(o=s.mediaDevices)!==null&&o!==void 0&&o.getUserMedia||(a=navigator)!==null&&a!==void 0&&a.webkitGetUserMedia||(l=navigator)!==null&&l!==void 0&&l.mozGetUserMedia||(c=navigator)!==null&&c!==void 0&&c.msGetUserMedia),m=!!((u=window)!==null&&u!==void 0&&u.RTCDataChannel||(d=window)!==null&&d!==void 0&&d.webkitRTCDataChannel||(f=window)!==null&&f!==void 0&&f.mozRTCDataChannel);return h&&p&&m};function Gae(){var t,e,n,r=((t=window)===null||t===void 0?void 0:t.RTCPeerConnection)||((e=window)===null||e===void 0?void 0:e.webkitRTCPeerConnection)||((n=window)===null||n===void 0?void 0:n.mozRTCPeerConnection);return r?new r:null}var Rst=1e4;function Kae(t,e,n,r){return pR.apply(this,arguments)}function pR(){return pR=Lt(Ie().mark(function t(e,n,r,i){var s,o,a,l,c,u,d;return Ie().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(e&&n&&r)){h.next=32;break}return h.next=3,Ost(n,r.sdp,i);case 3:if(s=h.sent,!s.ok){h.next=22;break}return h.next=7,s.text();case 7:return o=h.sent,h.next=10,e.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:o}));case 10:return a=s.headers.get("Link"),l=Mst(a),e.setConfiguration({iceServers:l}),h.next=15,e.createOffer();case 15:return c=h.sent,h.next=18,e.setLocalDescription(c);case 18:return u=s.headers.get("Playhead-Utc"),h.abrupt("return",{playhead:new Date(u??new Date),url:s.url});case 22:if(s.status!==406){h.next=26;break}throw new Error(Tie);case 26:return h.next=28,s.text();case 28:throw d=h.sent,new Error(d);case 30:h.next=33;break;case 32:throw new Error("Peer connection not defined.");case 33:case"end":return h.stop()}},t)})),pR.apply(this,arguments)}function qae(t){return mR.apply(this,arguments)}function mR(){return mR=Lt(Ie().mark(function t(e){var n,r;return Ie().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!e){s.next=12;break}return s.next=3,e.createOffer();case 3:return n=s.sent,s.next=6,e.setLocalDescription(n);case 6:return s.next=8,Dst(e);case 8:if(r=s.sent,r){s.next=11;break}throw Error("failed to gather ICE candidates for offer");case 11:return s.abrupt("return",r);case 12:return s.abrupt("return",null);case 13:case"end":return s.stop()}},t)})),mR.apply(this,arguments)}function Ost(t,e,n){return gR.apply(this,arguments)}function gR(){return gR=Lt(Ie().mark(function t(e,n,r){var i,s,o,a,l;return Ie().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s=new AbortController,o=setTimeout(function(){return s.abort()},(i=r==null?void 0:r.sdpTimeout)!==null&&i!==void 0?i:Rst),r!=null&&r.constant&&(a=new URL(e),a.searchParams.append("constant","true"),e=a.toString()),u.next=5,qf(e,{method:"POST",mode:"cors",headers:{"content-type":"application/sdp"},body:n,signal:s.signal});case 5:return l=u.sent,clearTimeout(o),u.abrupt("return",l);case 8:case"end":return u.stop()}},t)})),gR.apply(this,arguments)}function Dst(t){return vR.apply(this,arguments)}function vR(){return vR=Lt(Ie().mark(function t(e){return Ie().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(i){setTimeout(function(){i(e.localDescription)},5e3),e.onicegatheringstatechange=function(s){e.iceGatheringState==="complete"&&i(e.localDescription)}}));case 1:case"end":return r.stop()}},t)})),vR.apply(this,arguments)}function Mst(t){try{var e,n=t==null?void 0:t.split(", ").map(function(r){var i=r.split(";").map(function(c){return c.trim()}).filter(function(c){return c}),s={urls:""},o=A0(i),a;try{for(o.s();!(a=o.n()).done;){var l=a.value;l.startsWith("stun:")||l.startsWith("turn:")?s.urls=l:l.startsWith("username=")?s.username=l.slice(10,-1):l.startsWith("credential=")&&(s.credential=l.slice(12,-1))}}catch(c){o.e(c)}finally{o.f()}return s}).filter(function(r){return r.urls});return n&&((e=n==null?void 0:n.length)!==null&&e!==void 0?e:0)>0?n:[]}catch(r){console.error(r)}return[]}var $st=function(e,n,r,i){var s=new AbortController,o=null,a=new MediaStream,l=function(u){var d;n&&(n.srcObject=null),r==null||(d=r.onError)===null||d===void 0||d.call(r,u)};return o=Gae(),o&&(o.addTransceiver("video",{direction:"recvonly"}),o.addTransceiver("audio",{direction:"recvonly"}),o.ontrack=function(){var c=Lt(Ie().mark(function u(d){var f,h,p,m;return Ie().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(y.prev=0,!a){y.next=18;break}f=d.track,h=a.getTracks(),p=h.some(function(x){return x.kind==="video"}),m=h.some(function(x){return x.kind==="audio"}),y.t0=f.kind,y.next=y.t0==="video"?9:y.t0==="audio"?13:17;break;case 9:if(!p){y.next=11;break}return y.abrupt("break",18);case 11:return a.addTrack(f),y.abrupt("break",18);case 13:if(!m){y.next=15;break}return y.abrupt("break",18);case 15:return a.addTrack(f),y.abrupt("break",18);case 17:console.log("got unknown track "+f);case 18:y.next=23;break;case 20:y.prev=20,y.t1=y.catch(0),l(y.t1);case 23:case"end":return y.stop()}},u,null,[[0,20]])}));return function(u){return c.apply(this,arguments)}}(),o.addEventListener("connectionstatechange",function(){var c=Lt(Ie().mark(function u(d){var f,h,p;return Ie().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(g.prev=0,((f=o)===null||f===void 0?void 0:f.connectionState)!=="failed"){g.next=3;break}throw new Error("Failed to connect to peer.");case 3:((h=o)===null||h===void 0?void 0:h.connectionState)==="connected"&&!n.srcObject&&(n.srcObject=a,r==null||(p=r.onConnected)===null||p===void 0||p.call(r)),g.next=9;break;case 6:g.prev=6,g.t0=g.catch(0),l(g.t0);case 9:case"end":return g.stop()}},u,null,[[0,6]])}));return function(u){return c.apply(this,arguments)}}()),o.addEventListener("negotiationneeded",function(){var c=Lt(Ie().mark(function u(d){var f,h,p,m;return Ie().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,qae(o);case 3:return f=y.sent,y.next=6,Kae(o,e,f,i);case 6:h=y.sent,p=Date.now(),h!=null&&h.playhead&&p&&(r==null||(m=r.onPlaybackOffsetUpdated)===null||m===void 0||m.call(r,p-h.playhead.getTime())),y.next=14;break;case 11:y.prev=11,y.t0=y.catch(0),l(y.t0);case 14:case"end":return y.stop()}},u,null,[[0,11]])}));return function(u){return c.apply(this,arguments)}}())),{destroy:function(){var u,d,f;s==null||(u=s.abort)===null||u===void 0||u.call(s),n&&(n.srcObject=null),(d=o)===null||d===void 0||(f=d.close)===null||f===void 0||f.call(d)}}};function yR(t){"@babel/helpers - typeof";return yR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yR(t)}var Nst=function(e,n,r,i,s){var o=new AbortController,a=null,l=null,c=null,u=null,d=null,f=null;return a=Gae(),a&&(a.addEventListener("negotiationneeded",function(){var h=Lt(Ie().mark(function p(m){var g,y,x,S;return Ie().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,qae(a);case 3:return y=E.sent,E.next=6,Kae(a,e,y,s);case 6:x=E.sent,d=(g=x==null?void 0:x.url)!==null&&g!==void 0?g:null,E.next=13;break;case 10:E.prev=10,E.t0=E.catch(0),i==null||(S=i.onError)===null||S===void 0||S.call(i,E.t0);case 13:case"end":return E.stop()}},p,null,[[0,10]])}));return function(p){return h.apply(this,arguments)}}()),a.addEventListener("connectionstatechange",function(){var h=Lt(Ie().mark(function p(m){var g,y,x,S;return Ie().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(E.prev=0,((g=a)===null||g===void 0?void 0:g.connectionState)!=="failed"){E.next=3;break}throw new Error("Failed to connect to peer.");case 3:((y=a)===null||y===void 0?void 0:y.connectionState)==="connected"&&l&&u&&c&&(n.srcObject=l,i==null||(x=i.onConnected)===null||x===void 0||x.call(i,{stream:l,videoTransceiver:c,audioTransceiver:u})),E.next=9;break;case 6:E.prev=6,E.t0=E.catch(0),i==null||(S=i.onError)===null||S===void 0||S.call(i,E.t0);case 9:case"end":return E.stop()}},p,null,[[0,6]])}));return function(p){return h.apply(this,arguments)}}()),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(function(){var h=Lt(Ie().mark(function p(m){var g,y,x,S,w,E,T,_,I,A,L,j;return Ie().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(T=(g=m==null||(y=m.getVideoTracks)===null||y===void 0||(x=y.call(m))===null||x===void 0?void 0:x[0])!==null&&g!==void 0?g:null,_=(S=m==null||(w=m.getAudioTracks)===null||w===void 0||(E=w.call(m))===null||E===void 0?void 0:E[0])!==null&&S!==void 0?S:null,!T){O.next=6;break}return O.next=5,T.applyConstraints(Xae(r??"16to9"));case 5:c=(I=(A=a)===null||A===void 0?void 0:A.addTransceiver(T,{direction:"sendonly"}))!==null&&I!==void 0?I:null;case 6:_&&(u=(L=(j=a)===null||j===void 0?void 0:j.addTransceiver(_,{direction:"sendonly"}))!==null&&L!==void 0?L:null),l=m;case 8:case"end":return O.stop()}},p)}));return function(p){return h.apply(this,arguments)}}()).catch(function(h){var p;return i==null||(p=i.onError)===null||p===void 0?void 0:p.call(i,h)}),f=function(){d&&qf(d,{method:"DELETE",mode:"cors"}).catch(function(p){var m;return i==null||(m=i.onError)===null||m===void 0?void 0:m.call(i,p)})}),{destroy:function(){var p,m,g,y,x,S,w;(p=f)===null||p===void 0||p(),o==null||(m=o.abort)===null||m===void 0||m.call(o),n&&(n.srcObject=null),(g=a)===null||g===void 0||(y=g.close)===null||y===void 0||y.call(g);var E=(x=(S=l)===null||S===void 0||(w=S.getTracks)===null||w===void 0?void 0:w.call(S))!==null&&x!==void 0?x:[],T=A0(E),_;try{for(T.s();!(_=T.n()).done;){var I,A=_.value;A==null||(I=A.stop)===null||I===void 0||I.call(A)}}catch(L){T.e(L)}finally{T.f()}}}},Fst=function(){var t=Lt(Ie().mark(function e(n){var r,i,s,o,a,l,c,u,d,f,h,p,m,g,y,x,S,w,E,T,_,I,A,L,j;return Ie().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(m=n.newMediaStream,g=n.prevMediaStream,y=n.aspectRatio,x=n.element,S=n.onConnected,w=n.videoTransceiver,E=n.audioTransceiver,T=(r=g==null||(i=g.getVideoTracks)===null||i===void 0||(s=i.call(g))===null||s===void 0?void 0:s[0])!==null&&r!==void 0?r:null,_=(o=g==null||(a=g.getAudioTracks)===null||a===void 0||(l=a.call(g))===null||l===void 0?void 0:l[0])!==null&&o!==void 0?o:null,I=(c=m==null||(u=m.getVideoTracks)===null||u===void 0||(d=u.call(m))===null||d===void 0?void 0:d[0])!==null&&c!==void 0?c:null,A=(f=m==null||(h=m.getAudioTracks)===null||h===void 0||(p=h.call(m))===null||p===void 0?void 0:p[0])!==null&&f!==void 0?f:null,!I){O.next=11;break}return O.next=8,I.applyConstraints(Xae(y));case 8:return O.next=10,w.sender.replaceTrack(I);case 10:I.enabled=(L=T==null?void 0:T.enabled)!==null&&L!==void 0?L:!0;case 11:if(!A){O.next=15;break}return O.next=14,E.sender.replaceTrack(A);case 14:A.enabled=(j=_==null?void 0:_.enabled)!==null&&j!==void 0?j:!0;case 15:x.srcObject=m,S({stream:m,videoTransceiver:w,audioTransceiver:E});case 17:case"end":return O.stop()}},e)}));return function(n){return t.apply(this,arguments)}}(),Yae=function(){var t=Lt(Ie().mark(function e(n){var r,i,s,o,a,l,c,u;return Ie().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return r=n.source,f.prev=1,f.next=4,(i=navigator)===null||i===void 0||(s=i.mediaDevices)===null||s===void 0?void 0:s.getUserMedia(to(to({},yR(r.streamConstraints)==="object"?r.streamConstraints:{}),{},{video:to(to({},typeof((o=r.streamConstraints)===null||o===void 0?void 0:o.video)!="boolean"?(a=r.streamConstraints)===null||a===void 0?void 0:a.video:{}),r!=null&&r.videoDeviceId?{deviceId:r==null?void 0:r.videoDeviceId}:{}),audio:to(to({},typeof((l=r.streamConstraints)===null||l===void 0?void 0:l.audio)!="boolean"?(c=r.streamConstraints)===null||c===void 0?void 0:c.audio:{}),r!=null&&r.audioDeviceId?{deviceId:r==null?void 0:r.audioDeviceId}:{})}));case 4:return u=f.sent,f.abrupt("return",u??null);case 8:return f.prev=8,f.t0=f.catch(1),console.error(f.t0),f.abrupt("return",null);case 12:case"end":return f.stop()}},e,null,[[1,8]])}));return function(n){return t.apply(this,arguments)}}(),Qae=function(e){var n,r;if(typeof navigator<"u"&&(n=navigator)!==null&&n!==void 0&&(r=n.mediaDevices)!==null&&r!==void 0&&r.enumerateDevices){var i=function(){navigator.mediaDevices.enumerateDevices().then(function(o){return e(o)})};return navigator.mediaDevices.addEventListener("devicechange",i),i(),function(){navigator.mediaDevices.removeEventListener("devicechange",i)}}return function(){}},jst=function(){var t=Lt(Ie().mark(function e(n){var r,i,s;return Ie().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(typeof navigator<"u"&&(r=navigator)!==null&&r!==void 0&&(i=r.mediaDevices)!==null&&i!==void 0&&i.getDisplayMedia)){a.next=6;break}return a.next=4,navigator.mediaDevices.getDisplayMedia(n);case 4:return s=a.sent,a.abrupt("return",s);case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:return a.abrupt("return",null);case 12:case"end":return a.stop()}},e,null,[[0,8]])}));return function(n){return t.apply(this,arguments)}}(),Xae=function(e){var n={width:{ideal:1280},height:{ideal:720},aspectRatio:{ideal:e==="9to16"?.5625:e==="1to1"?1:e==="21to9"?2.3333333333333335:e==="4to5"?.8:1.7777777777777777}};return n};const Bst=(t,e,n)=>{const r=v.useContext(t);return v.useMemo(()=>{var l,c,u,d,f,h,p,m,g,y,x,S,w,E,T,_,I,A;const s=r?n?x2(r,n):x2(r):n,o=s?x2({colors:{progressLeft:((l=s.colors)==null?void 0:l.progressLeft)??((c=s.colors)==null?void 0:c.accent),progressMiddle:((u=s.colors)==null?void 0:u.progressMiddle)??((d=s.colors)==null?void 0:d.accent),progressRight:((f=s.colors)==null?void 0:f.progressRight)??((h=s.colors)==null?void 0:h.accent),volumeLeft:((p=s.colors)==null?void 0:p.volumeLeft)??((m=s.colors)==null?void 0:m.accent),volumeMiddle:((g=s.colors)==null?void 0:g.volumeMiddle)??((y=s.colors)==null?void 0:y.accent),volumeRight:((x=s.colors)==null?void 0:x.volumeRight)??((S=s.colors)==null?void 0:S.accent),progressThumb:((w=s.colors)==null?void 0:w.progressThumb)??((E=s.colors)==null?void 0:E.icon),volumeThumb:((T=s.colors)==null?void 0:T.volumeThumb)??((_=s.colors)==null?void 0:_.icon),loading:((I=s.colors)==null?void 0:I.loading)??((A=s.colors)==null?void 0:A.accent)}},s):void 0,a=o?Zae(o):void 0;return a?e(a):void 0},[n,r,e])};function Zae(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>n!=null).map(([e,n])=>[e,n===Object(n)?Zae(n):n]))}var Ust=Ma,Vst=sd,zst=T_,Hst=ad,uH=TypeError,dH="Reduce of empty array with no initial value",fH=function(t){return function(e,n,r,i){var s=Vst(e),o=zst(s),a=Hst(s);if(Ust(n),a===0&&r<2)throw new uH(dH);var l=t?a-1:0,c=t?-1:1;if(r<2)for(;;){if(l in o){i=o[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw new uH(dH)}for(;t?l>=0:a>l;l+=c)l in o&&(i=n(i,o[l],l,s));return i}},Wst={left:fH(!1),right:fH(!0)},Gst=Bt,Kst=function(t,e){var n=[][t];return!!n&&Gst(function(){n.call(null,e||function(){return 1},1)})},qst=un,Yst=Wst.left,Qst=Kst,hH=Fv,Xst=D_,Zst=!Xst&&hH>79&&hH<83,Jst=Zst||!Qst("reduce");qst({target:"Array",proto:!0,forced:Jst},{reduce:function(e){var n=arguments.length;return Yst(this,e,n,n>1?arguments[1]:void 0)}});function eot(t){if(Array.isArray(t))return iR(t)}function tot(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function not(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rot(t){return eot(t)||tot(t)||aae(t)||not()}var iot=[{requestFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",fullscreenElement:"fullscreenElement",fullscreenEnabled:"fullscreenEnabled",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"},{requestFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenElement:"webkitFullscreenElement",fullscreenEnabled:"webkitFullscreenEnabled",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"},{requestFullscreen:"webkitRequestFullScreen",exitFullscreen:"webkitCancelFullScreen",fullscreenElement:"webkitCurrentFullScreenElement",fullscreenEnabled:"webkitCancelFullScreen",fullscreenchange:"webkitfullscreenchange",fullscreenerror:"webkitfullscreenerror"},{requestFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",fullscreenElement:"mozFullScreenElement",fullscreenEnabled:"mozFullScreenEnabled",fullscreenchange:"mozfullscreenchange",fullscreenerror:"mozfullscreenerror"},{requestFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",fullscreenElement:"msFullscreenElement",fullscreenEnabled:"msFullscreenEnabled",fullscreenchange:"MSFullscreenChange",fullscreenerror:"MSFullscreenError"}],pH={requestFullscreen:"webkitEnterFullscreen",exitFullscreen:"webkitExitFullscreen",fullscreenElement:null,fullscreenEnabled:"webkitDisplayingFullscreen",fullscreenchange:"fullscreenchange",fullscreenerror:"fullscreenerror"},D4=function(e){var n=Wv(e),r=n.methods,i=n.element;return r!=null&&r.fullscreenElement?!!document[r.fullscreenElement]:(i==null?void 0:i.webkitPresentationMode)==="fullscreen"},sot=function(e){var n=Wv(e),r=n.methods,i=n.element;return r?new Promise(function(s,o){var a,l,c,u,d=r.requestFullscreen,f=function p(){$4(e,p),s()};M4(e,f);var h=r.fullscreenElement?i==null||(a=i.parentElement)===null||a===void 0||(l=a[d])===null||l===void 0?void 0:l.call(a):(c=i==null||(u=i[d])===null||u===void 0?void 0:u.call(i))!==null&&c!==void 0?c:null;if(h===null)return s();h instanceof Promise&&h.then(f).catch(o)}):!1},oot=function(e){var n=Wv(e),r=n.methods,i=n.element;return r?new Promise(function(s,o){var a,l,c,u;if(!D4(e)){s();return}var d=function h(){$4(e,h),s()};M4(e,d);var f=r.fullscreenElement?(a=document)===null||a===void 0||(l=a[r.exitFullscreen])===null||l===void 0?void 0:l.call(a):(c=i==null||(u=i[r.exitFullscreen])===null||u===void 0?void 0:u.call(i))!==null&&c!==void 0?c:null;f instanceof Promise&&f.then(d).catch(o)}):!1},M4=function(e,n){var r=Wv(e),i=r.methods,s=r.element;if(i&&s){var o,a=(o=s==null?void 0:s.parentElement)!==null&&o!==void 0?o:s;return a==null||a.addEventListener(i.fullscreenchange,n,!1),function(){$4(e,n)}}return null},$4=function(e,n){var r=Wv(e),i=r.methods,s=r.element;if(i&&s){var o,a=(o=s==null?void 0:s.parentElement)!==null&&o!==void 0?o:s;return a==null||a.removeEventListener(i.fullscreenchange,n,!1),!0}return!1},Wv=function(e){if(cd()){var n=A0(iot),r;try{for(n.s();!(r=n.n()).done;){var i=r.value,s=i.exitFullscreen;if(s in document)return{methods:i,element:e}}}catch(o){n.e(o)}finally{n.f()}if(e&&pH.requestFullscreen in e)return{methods:pH,element:e}}return{methods:null}},aot=function(e){var n=vp(e),r=n.apiType;return!!r},lot=function(e){var n=vp(e),r=n.apiType,i=n.element;if(r==="w3c"){var s;return!!(!((s=document)===null||s===void 0)&&s.pictureInPictureElement)}else if(r==="webkit")return(i==null?void 0:i.webkitPresentationMode)==="picture-in-picture";return!1},cot=function(){var t=Lt(Ie().mark(function e(n){var r,i,s,o,a;return Ie().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(r=vp(n),i=r.apiType,s=r.element,c.prev=1,i!=="w3c"){c.next=7;break}return c.next=5,s==null||(o=s.requestPictureInPicture)===null||o===void 0?void 0:o.call(s);case 5:c.next=10;break;case 7:if(i!=="webkit"){c.next=10;break}return c.next=10,s==null||(a=s.webkitSetPresentationMode)===null||a===void 0?void 0:a.call(s,"picture-in-picture");case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),console.warn(c.t0);case 15:return c.abrupt("return",null);case 16:case"end":return c.stop()}},e,null,[[1,12]])}));return function(n){return t.apply(this,arguments)}}(),uot=function(e){var n=vp(e),r=n.apiType,i=n.element;if(r==="w3c"){var s,o,a;return(s=(o=document)===null||o===void 0||(a=o.exitPictureInPicture)===null||a===void 0?void 0:a.call(o))!==null&&s!==void 0?s:null}else if(r==="webkit"){var l,c;return(l=i==null||(c=i.webkitSetPresentationMode)===null||c===void 0?void 0:c.call(i,"inline"))!==null&&l!==void 0?l:null}return null},dot=function(e,n){var r=vp(e),i=r.apiType,s=r.element;if(i==="w3c"&&s)return s.addEventListener("enterpictureinpicture",n,!1),function(){s.removeEventListener("enterpictureinpicture",n,!1)};if(i==="webkit"&&s){var o=function(l){(s==null?void 0:s.webkitPresentationMode)==="picture-in-picture"&&(n==null||n(l))};return document.addEventListener("webkitpresentationmodechanged",o,!1),function(){document.removeEventListener("webkitpresentationmodechanged",o,!1)}}return null},fot=function(e,n){var r=vp(e),i=r.apiType,s=r.element;if(i==="w3c"&&s)return s.addEventListener("leavepictureinpicture",n,!1),function(){s.removeEventListener("leavepictureinpicture",n,!1)};if(i==="webkit"&&s){var o=function(l){(s==null?void 0:s.webkitPresentationMode)==="inline"&&(n==null||n(l))};return document.addEventListener("webkitpresentationmodechanged",o,!1),function(){document.removeEventListener("webkitpresentationmodechanged",o,!1)}}return null},vp=function(e){if(cd()&&e instanceof HTMLVideoElement){var n,r;if((n=document)!==null&&n!==void 0&&n.pictureInPictureEnabled)return{apiType:"w3c",element:e};if(e!=null&&(r=e.webkitSupportsPresentationMode)!==null&&r!==void 0&&r.call(e,"picture-in-picture"))return{apiType:"webkit",element:e}}return{apiType:null}},mH="data-controller-initialized",hot=["KeyF","KeyK","KeyM","KeyI","KeyV","KeyX","Space","ArrowRight","ArrowLeft"],pot=function(e){return Math.min(Math.max(0,e&&!isNaN(e)&&isFinite(e)?e:0),1)},mot=function(e){return new Promise(function(n){var r,i=(r=e==null?void 0:e.volume)!==null&&r!==void 0?r:RM,s=.342;e.volume=s,setTimeout(function(){var o=e.volume!==1;e.volume=pot(i),n(o)})})},got=function(e){return new Promise(function(n){return setTimeout(n,e)})},vot=function(e){var n,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.hotkeys,o=s===void 0?!0:s,a=i.autohide,l=a===void 0?KBe:a,c=e==null||(n=e.getState())===null||n===void 0?void 0:n._element,u=e.getState();c&&setTimeout(function(){c&&!e.getState().muted&&e.getState().requestVolume(u.volume)},1);var d=c,f=function(){return e.getState().onCanPlay()},h=function(){e.getState().onPlay()},p=function(){e.getState().onPause()},m=function(){var H;return e.getState().onDurationChange((H=d==null?void 0:d.duration)!==null&&H!==void 0?H:0)},g=function(H){H.preventDefault(),H.stopPropagation();var W=H.code;e.getState()._updateLastInteraction(),hot.includes(W)&&(W==="Space"||W==="KeyK"?e.getState().togglePlay():W==="KeyF"?e.getState().requestToggleFullscreen():W==="KeyI"?e.getState().requestTogglePictureInPicture():W==="ArrowRight"?e.getState().requestSeekForward():W==="ArrowLeft"?e.getState().requestSeekBack():W==="KeyM"?e.getState().requestToggleMute():W==="KeyV"?e.getState().toggleVideo():W==="KeyX"&&e.getState().requestClip())},y=function(){e.getState()._updateLastInteraction()},x=function(){l&&e.getState().setHidden(!0)},S=function(){var V=Lt(Ie().mark(function H(){return Ie().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:e.getState()._updateLastInteraction();case 1:case"end":return z.stop()}},H)}));return function(){return V.apply(this,arguments)}}(),w=function(){var V=Lt(Ie().mark(function H(){return Ie().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:e.getState()._updateLastInteraction();case 1:case"end":return z.stop()}},H)}));return function(){return V.apply(this,arguments)}}(),E=function(){typeof(d==null?void 0:d.volume)<"u"&&(d==null?void 0:d.volume)!==e.getState().volume&&e.getState()._setVolume(d.volume)},T=function(){var H,W;if(e.getState().onProgress((H=d==null?void 0:d.currentTime)!==null&&H!==void 0?H:0),d&&((W=d==null?void 0:d.duration)!==null&&W!==void 0?W:0)>0){var z=d.currentTime,G=rot(Array(d.buffered.length)).reduce(function(K,Q,ne){var Z=d.buffered.start(d.buffered.length-1-ne),re=d.buffered.end(d.buffered.length-1-ne);return Z<=z&&re>=z?re:K},0);e.getState()._updateBuffered(G)}},_=0,I=function(){var V=Lt(Ie().mark(function H(W){return Ie().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return e.getState().setError(W.message),G.next=3,new Promise(function(K){return setTimeout(K,1e3*++_)});case 3:d==null||d.load();case 4:case"end":return G.stop()}},H)}));return function(W){return V.apply(this,arguments)}}(),A=function(){var V=Lt(Ie().mark(function H(){return Ie().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:e.getState().setWaiting(!0);case 1:case"end":return z.stop()}},H)}));return function(){return V.apply(this,arguments)}}(),L=function(){var V=Lt(Ie().mark(function H(){return Ie().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:e.getState().setStalled(!0);case 1:case"end":return z.stop()}},H)}));return function(){return V.apply(this,arguments)}}(),j=function(){var V=Lt(Ie().mark(function H(){return Ie().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:e.getState().setLoading(!0);case 1:case"end":return z.stop()}},H)}));return function(){return V.apply(this,arguments)}}(),D=function(){var V=Lt(Ie().mark(function H(){return Ie().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:e.getState().setSize(to(to({},d!=null&&d.videoHeight&&d!==null&&d!==void 0&&d.videoWidth?{media:{height:d.videoHeight,width:d.videoWidth}}:{}),d!=null&&d.clientHeight&&d!==null&&d!==void 0&&d.clientWidth?{container:{height:d.clientHeight,width:d.clientWidth}}:{}));case 1:case"end":return z.stop()}},H)}));return function(){return V.apply(this,arguments)}}();d&&D();var O=(r=d==null?void 0:d.parentElement)!==null&&r!==void 0?r:d;d&&(d.addEventListener("volumechange",E),d.addEventListener("loadedmetadata",f),d.addEventListener("play",h),d.addEventListener("pause",p),d.addEventListener("durationchange",m),d.addEventListener("timeupdate",T),d.addEventListener("error",I),d.addEventListener("waiting",A),d.addEventListener("stalled",L),d.addEventListener("loadstart",j),d.addEventListener("resize",D),O&&(o&&O.addEventListener("keyup",g),l&&(O.addEventListener("mouseenter",y),O.addEventListener("mouseleave",x),O.addEventListener("mousemove",S),O.addEventListener("touchstart",w),O.addEventListener("touchend",w),O.addEventListener("touchmove",w))),d.load(),mot(d).then(function(V){return e.getState().setIsVolumeChangeSupported(V)}),d.setAttribute(mH,"true"));var $=function(){e.getState().setFullscreen(D4(d))},R=function(){e.getState().setPictureInPicture(!0)},C=function(){e.getState().setPictureInPicture(!1)},P=yot(e,{autohide:l}),k=M4(d,$),M=dot(d,R),B=fot(d,C),N=function(){var H,W,z,G,K,Q,ne,Z,re,de,Ee,ke,_e,Te,Oe,Qe,Ct,ot,Sn;k==null||k(),M==null||M(),B==null||B(),d==null||(H=d.removeEventListener)===null||H===void 0||H.call(d,"volumechange",E),d==null||(W=d.removeEventListener)===null||W===void 0||W.call(d,"loadedmetadata",f),d==null||(z=d.removeEventListener)===null||z===void 0||z.call(d,"play",h),d==null||(G=d.removeEventListener)===null||G===void 0||G.call(d,"pause",p),d==null||(K=d.removeEventListener)===null||K===void 0||K.call(d,"durationchange",m),d==null||(Q=d.removeEventListener)===null||Q===void 0||Q.call(d,"timeupdate",T),d==null||(ne=d.removeEventListener)===null||ne===void 0||ne.call(d,"error",I),d==null||(Z=d.removeEventListener)===null||Z===void 0||Z.call(d,"waiting",A),d==null||(re=d.removeEventListener)===null||re===void 0||re.call(d,"stalled",L),d==null||(de=d.removeEventListener)===null||de===void 0||de.call(d,"loadstart",j),d==null||(Ee=d.removeEventListener)===null||Ee===void 0||Ee.call(d,"resize",D),O==null||(ke=O.removeEventListener)===null||ke===void 0||ke.call(O,"keyup",g),O==null||(_e=O.removeEventListener)===null||_e===void 0||_e.call(O,"mouseenter",y),O==null||(Te=O.removeEventListener)===null||Te===void 0||Te.call(O,"mouseleave",x),O==null||(Oe=O.removeEventListener)===null||Oe===void 0||Oe.call(O,"mousemove",S),O==null||(Qe=O.addEventListener)===null||Qe===void 0||Qe.call(O,"touchstart",w),O==null||(Ct=O.addEventListener)===null||Ct===void 0||Ct.call(O,"touchend",w),O==null||(ot=O.addEventListener)===null||ot===void 0||ot.call(O,"touchmove",w),P==null||P(),d==null||(Sn=d.removeAttribute)===null||Sn===void 0||Sn.call(d,mH)};return{destroy:function(){N==null||N()}}},Ya,yot=function(e,n){return e.subscribe(function(){var r=Lt(Ie().mark(function i(s,o){var a,l,c,u,d,f,h,p,m,g,y,x,S,w,E,T,_,I,A,L,j,D,O,$,R;return Ie().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(P.prev=0,!s._element){P.next=24;break}if(!Ya){P.next=11;break}return P.prev=3,P.next=6,Ya;case 6:P.next=11;break;case 8:P.prev=8,P.t0=P.catch(3),console.warn(P.t0);case 11:if(s._requestedPlayPauseLastTime!==o._requestedPlayPauseLastTime&&(s._element.paused?Ya=s._element.play():s._element.pause()),s.volume!==o.volume&&(s._element.volume=s.volume),!s.ingestUrl)s._element.muted=s.muted,s.muted!==o.muted&&s.volume===0&&(s._element.volume=RM);else{if(s.muted!==o.muted){u=(a=s==null||(l=s._mediaStream)===null||l===void 0||(c=l.getAudioTracks)===null||c===void 0?void 0:c.call(l))!==null&&a!==void 0?a:[],d=A0(u);try{for(d.s();!(f=d.n()).done;)h=f.value,h.enabled=!s.muted}catch(k){d.e(k)}finally{d.f()}}if(s.video!==o.video){y=(p=s==null||(m=s._mediaStream)===null||m===void 0||(g=m.getVideoTracks)===null||g===void 0?void 0:g.call(m))!==null&&p!==void 0?p:[],x=A0(y);try{for(x.s();!(S=x.n()).done;)w=S.value,w.enabled=!!s.video}catch(k){x.e(k)}finally{x.f()}}}if(s._requestedRangeToSeekTo!==o._requestedRangeToSeekTo&&(typeof s._element.readyState>"u"||s._element.readyState>0)&&(s._element.currentTime=s._requestedRangeToSeekTo),!(n.autohide&&s._lastInteraction!==o._lastInteraction)){P.next=21;break}return E=e.getState(),T=E.device,T.isMobile||e.getState().setHidden(!1),P.next=20,got(n.autohide);case 20:!e.getState().hidden&&s._lastInteraction===e.getState()._lastInteraction&&e.getState().setHidden(!0);case 21:s._requestedFullscreenLastTime!==o._requestedFullscreenLastTime&&(_=D4(s._element),_?Ya=oot(s._element):Ya=sot(s._element)),s._requestedClipLastTime!==o._requestedClipLastTime&&s.clipLength&&s.playbackId&&(L=s.clipLength,j=s.playbackId,D=s._requestedClipLastTime-((I=s.playbackOffsetMs)!==null&&I!==void 0?I:0),O=D-L*1e3,$=D,s==null||(A=s.onClipStarted)===null||A===void 0||A.call(s),Ya=VBe({playbackId:j,startTime:O,endTime:$}).then(function(k){if(k!=null&&k.id){var M;s==null||(M=s.onClipCreated)===null||M===void 0||M.call(s,k)}else throw new Error("returned asset was not defined")}).catch(function(k){var M;return s==null||(M=s.onClipError)===null||M===void 0?void 0:M.call(s,k)})),s._requestedPictureInPictureLastTime!==o._requestedPictureInPictureLastTime&&(R=lot(s._element),R?Ya=uot(s._element):Ya=cot(s._element));case 24:P.next=29;break;case 26:P.prev=26,P.t1=P.catch(0),console.warn(P.t1);case 29:case"end":return P.stop()}},i,null,[[0,26],[3,8]])}));return function(i,s){return r.apply(this,arguments)}}())},Jae=function(e){return{version:e,isAndroid:koe(),isIos:Coe(),isMobile:yw(),userAgent:typeof navigator<"u"?navigator.userAgent:"Node.js or unknown"}};const{useDebugValue:xot}=te,{useSyncExternalStoreWithSelector:bot}=Get;const Sot=t=>t;function wot(t,e=Sot,n){const r=bot(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return xot(r),r}var ele=v.createContext(null),q_=v.createContext(Die({element:void 0,device:Jae(os.react),storage:LM({}),mediaProps:{},opts:{}})),tle=function(e){var n=e.element,r=e.children,i=e.mediaProps,s=e.opts,o=Eot(n,s,i);return b.jsx(q_.Provider,{value:o,children:r})},Eot=function(e,n,r){var i=qJe(),s=v.useMemo(function(){return Die({device:Jae(os.react),storage:i.storage,opts:n??{},mediaProps:r})},[i==null?void 0:i.storage,n,r]);return v.useEffect(function(){e&&s.setState({_element:e})},[s,e]),v.useEffect(function(){var o=vot(s,n),a=o.destroy;return function(){a==null||a()}},[s,e,n]),s},Zt=function(e){var n=v.useContext(q_);return wot(n,e)},_ot=function(e){return Bst(ele,EXe,e)};function Tot(t){const e=H_();return Yoe(t,async n=>zBe(n),[{entity:"createStream",livepeerProvider:e}])}var Cot=TypeError,kot=9007199254740991,Pot=function(t){if(t>kot)throw Cot("Maximum allowed index exceeded");return t},Iot=un,Aot=Bt,Lot=E4,Rot=Lr,Oot=sd,Dot=ad,gH=Pot,vH=_4,Mot=lae,$ot=G_,Not=an,Fot=Fv,nle=Not("isConcatSpreadable"),jot=Fot>=51||!Aot(function(){var t=[];return t[nle]=!1,t.concat()[0]!==t}),Bot=function(t){if(!Rot(t))return!1;var e=t[nle];return e!==void 0?!!e:Lot(t)},Uot=!jot||!$ot("concat");Iot({target:"Array",proto:!0,arity:1,forced:Uot},{concat:function(e){var n=Oot(this),r=Mot(n,0),i=0,s,o,a,l,c;for(s=-1,a=arguments.length;s<a;s++)if(c=s===-1?n:arguments[s],Bot(c))for(l=Dot(c),gH(i+l),o=0;o<l;o++,i++)o in c&&vH(r,i,c[o]);else gH(i+1),vH(r,i++,c);return r.length=i,r}});function yH(t,[e,n]){return Math.min(n,Math.max(e,t))}function Sr(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function N4(t,e=[]){let n=[];function r(s,o){const a=v.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[t][l])||a,g=v.useMemo(()=>p,Object.values(p));return v.createElement(m.Provider,{value:g},h)}function u(d,f){const h=(f==null?void 0:f[t][l])||a,p=v.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=n.map(o=>v.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return v.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,Vot(i,...e)]}function Vot(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return v.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function zot(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function rle(...t){return e=>t.forEach(n=>zot(n,e))}function qr(...t){return v.useCallback(rle(...t),t)}const L0=v.forwardRef((t,e)=>{const{children:n,...r}=t,i=v.Children.toArray(n),s=i.find(Wot);if(s){const o=s.props.children,a=i.map(l=>l===s?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:l);return v.createElement(xR,be({},r,{ref:e}),v.isValidElement(o)?v.cloneElement(o,void 0,a):null)}return v.createElement(xR,be({},r,{ref:e}),n)});L0.displayName="Slot";const xR=v.forwardRef((t,e)=>{const{children:n,...r}=t;return v.isValidElement(n)?v.cloneElement(n,{...Got(r,n.props),ref:e?rle(e,n.ref):n.ref}):v.Children.count(n)>1?v.Children.only(null):null});xR.displayName="SlotClone";const Hot=({children:t})=>v.createElement(v.Fragment,null,t);function Wot(t){return v.isValidElement(t)&&t.type===Hot}function Got(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function Kot(t){const e=t+"CollectionProvider",[n,r]=N4(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:p,children:m}=h,g=te.useRef(null),y=te.useRef(new Map).current;return te.createElement(i,{scope:p,itemMap:y,collectionRef:g},m)},a=t+"CollectionSlot",l=te.forwardRef((h,p)=>{const{scope:m,children:g}=h,y=s(a,m),x=qr(p,y.collectionRef);return te.createElement(L0,{ref:x},g)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=te.forwardRef((h,p)=>{const{scope:m,children:g,...y}=h,x=te.useRef(null),S=qr(p,x),w=s(c,m);return te.useEffect(()=>(w.itemMap.set(x,{ref:x,...y}),()=>void w.itemMap.delete(x))),te.createElement(L0,{[u]:"",ref:S},g)});function f(h){const p=s(t+"CollectionConsumer",h);return te.useCallback(()=>{const g=p.collectionRef.current;if(!g)return[];const y=Array.from(g.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((w,E)=>y.indexOf(w.ref.current)-y.indexOf(E.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,r]}const qot=v.createContext(void 0);function Yot(t){const e=v.useContext(qot);return t||e||"ltr"}const Qot=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Xr=Qot.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?L0:e;return v.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),v.createElement(a,be({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Xot(t,e){t&&Yr.flushSync(()=>t.dispatchEvent(e))}function Ea(t){const e=v.useRef(t);return v.useEffect(()=>{e.current=t}),v.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function Zot(t,e=globalThis==null?void 0:globalThis.document){const n=Ea(t);v.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[n,e])}const bR="dismissableLayer.update",Jot="dismissableLayer.pointerDownOutside",eat="dismissableLayer.focusOutside";let xH;const tat=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nat=v.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=v.useContext(tat),[d,f]=v.useState(null),h=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=v.useState({}),m=qr(e,I=>f(I)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(y),S=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,E=S>=x,T=rat(I=>{const A=I.target,L=[...u.branches].some(j=>j.contains(A));!E||L||(s==null||s(I),a==null||a(I),I.defaultPrevented||l==null||l())},h),_=iat(I=>{const A=I.target;[...u.branches].some(j=>j.contains(A))||(o==null||o(I),a==null||a(I),I.defaultPrevented||l==null||l())},h);return Zot(I=>{S===u.layers.size-1&&(i==null||i(I),!I.defaultPrevented&&l&&(I.preventDefault(),l()))},h),v.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(xH=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),bH(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=xH)}},[d,h,r,u]),v.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),bH())},[d,u]),v.useEffect(()=>{const I=()=>p({});return document.addEventListener(bR,I),()=>document.removeEventListener(bR,I)},[]),v.createElement(Xr.div,be({},c,{ref:m,style:{pointerEvents:w?E?"auto":"none":void 0,...t.style},onFocusCapture:Sr(t.onFocusCapture,_.onFocusCapture),onBlurCapture:Sr(t.onBlurCapture,_.onBlurCapture),onPointerDownCapture:Sr(t.onPointerDownCapture,T.onPointerDownCapture)}))});function rat(t,e=globalThis==null?void 0:globalThis.document){const n=Ea(t),r=v.useRef(!1),i=v.useRef(()=>{});return v.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let u=function(){ile(Jot,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=u,e.addEventListener("click",i.current,{once:!0})):u()}r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function iat(t,e=globalThis==null?void 0:globalThis.document){const n=Ea(t),r=v.useRef(!1);return v.useEffect(()=>{const i=s=>{s.target&&!r.current&&ile(eat,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function bH(){const t=new CustomEvent(bR);document.dispatchEvent(t)}function ile(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Xot(i,s):i.dispatchEvent(s)}let Ak=0;function sat(){v.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:SH()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:SH()),Ak++,()=>{Ak===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ak--}},[])}function SH(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const Lk="focusScope.autoFocusOnMount",Rk="focusScope.autoFocusOnUnmount",wH={bubbles:!1,cancelable:!0},oat=v.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=v.useState(null),c=Ea(i),u=Ea(s),d=v.useRef(null),f=qr(e,m=>l(m)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let x=function(T){if(h.paused||!a)return;const _=T.target;a.contains(_)?d.current=_:nl(d.current,{select:!0})},S=function(T){if(h.paused||!a)return;const _=T.relatedTarget;_!==null&&(a.contains(_)||nl(d.current,{select:!0}))},w=function(T){const _=document.activeElement;for(const I of T)I.removedNodes.length>0&&(a!=null&&a.contains(_)||nl(a))};var m=x,g=S,y=w;document.addEventListener("focusin",x),document.addEventListener("focusout",S);const E=new MutationObserver(w);return a&&E.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",S),E.disconnect()}}},[r,a,h.paused]),v.useEffect(()=>{if(a){_H.add(h);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(Lk,wH);a.addEventListener(Lk,c),a.dispatchEvent(y),y.defaultPrevented||(aat(fat(sle(a)),{select:!0}),document.activeElement===m&&nl(a))}return()=>{a.removeEventListener(Lk,c),setTimeout(()=>{const y=new CustomEvent(Rk,wH);a.addEventListener(Rk,u),a.dispatchEvent(y),y.defaultPrevented||nl(m??document.body,{select:!0}),a.removeEventListener(Rk,u),_H.remove(h)},0)}}},[a,c,u,h]);const p=v.useCallback(m=>{if(!n&&!r||h.paused)return;const g=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(g&&y){const x=m.currentTarget,[S,w]=lat(x);S&&w?!m.shiftKey&&y===w?(m.preventDefault(),n&&nl(S,{select:!0})):m.shiftKey&&y===S&&(m.preventDefault(),n&&nl(w,{select:!0})):y===x&&m.preventDefault()}},[n,r,h.paused]);return v.createElement(Xr.div,be({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function aat(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(nl(r,{select:e}),document.activeElement!==n)return}function lat(t){const e=sle(t),n=EH(e,t),r=EH(e.reverse(),t);return[n,r]}function sle(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function EH(t,e){for(const n of t)if(!cat(n,{upTo:e}))return n}function cat(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function uat(t){return t instanceof HTMLInputElement&&"select"in t}function nl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&uat(t)&&e&&t.select()}}const _H=dat();function dat(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=TH(t,e),t.unshift(e)},remove(e){var n;t=TH(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function TH(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function fat(t){return t.filter(e=>e.tagName!=="A")}const _a=globalThis!=null&&globalThis.document?v.useLayoutEffect:()=>{},hat=Jw["useId".toString()]||(()=>{});let pat=0;function F4(t){const[e,n]=v.useState(hat());return _a(()=>{t||n(r=>r??String(pat++))},[t]),t||(e?`radix-${e}`:"")}const mat=["top","right","bottom","left"],lc=Math.min,ai=Math.max,Rw=Math.round,k1=Math.floor,wo=t=>({x:t,y:t}),gat={left:"right",right:"left",bottom:"top",top:"bottom"},vat={start:"end",end:"start"};function SR(t,e,n){return ai(t,lc(e,n))}function Ta(t,e){return typeof t=="function"?t(e):t}function Ca(t){return t.split("-")[0]}function yp(t){return t.split("-")[1]}function j4(t){return t==="x"?"y":"x"}function B4(t){return t==="y"?"height":"width"}const yat=new Set(["top","bottom"]);function fo(t){return yat.has(Ca(t))?"y":"x"}function U4(t){return j4(fo(t))}function xat(t,e,n){n===void 0&&(n=!1);const r=yp(t),i=U4(t),s=B4(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Ow(o)),[o,Ow(o)]}function bat(t){const e=Ow(t);return[wR(t),e,wR(e)]}function wR(t){return t.replace(/start|end/g,e=>vat[e])}const CH=["left","right"],kH=["right","left"],Sat=["top","bottom"],wat=["bottom","top"];function Eat(t,e,n){switch(t){case"top":case"bottom":return n?e?kH:CH:e?CH:kH;case"left":case"right":return e?Sat:wat;default:return[]}}function _at(t,e,n,r){const i=yp(t);let s=Eat(Ca(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(wR)))),s}function Ow(t){return t.replace(/left|right|bottom|top/g,e=>gat[e])}function Tat(t){return{top:0,right:0,bottom:0,left:0,...t}}function ole(t){return typeof t!="number"?Tat(t):{top:t,right:t,bottom:t,left:t}}function Dw(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function PH(t,e,n){let{reference:r,floating:i}=t;const s=fo(e),o=U4(e),a=B4(o),l=Ca(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(yp(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const Cat=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=PH(c,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x,y:S,data:w,reset:E}=await y({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,d=S??d,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(c=E.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:u,y:d}=PH(c,f,l)),m=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function R0(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Ta(e,t),p=ole(h),g=a[f?d==="floating"?"reference":"floating":d],y=Dw(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),x=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},E=Dw(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:S,strategy:l}):x);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const kat=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Ta(t,e)||{};if(c==null)return{};const d=ole(u),f={x:n,y:r},h=U4(i),p=B4(h),m=await o.getDimensions(c),g=h==="y",y=g?"top":"left",x=g?"bottom":"right",S=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-f[h]-s.floating[p],E=f[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=T?T[S]:0;(!_||!await(o.isElement==null?void 0:o.isElement(T)))&&(_=a.floating[S]||s.floating[p]);const I=w/2-E/2,A=_/2-m[p]/2-1,L=lc(d[y],A),j=lc(d[x],A),D=L,O=_-m[p]-j,$=_/2-m[p]/2+I,R=SR(D,$,O),C=!l.arrow&&yp(i)!=null&&$!==R&&s.reference[p]/2-($<D?L:j)-m[p]/2<0,P=C?$<D?$-D:$-O:0;return{[h]:f[h]+P,data:{[h]:R,centerOffset:$-R-P,...C&&{alignmentOffset:P}},reset:C}}}),Pat=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Ta(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Ca(i),x=fo(a),S=Ca(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),E=f||(S||!m?[Ow(a)]:bat(a)),T=p!=="none";!f&&T&&E.push(..._at(a,m,p,w));const _=[a,...E],I=await R0(e,g),A=[];let L=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(I[y]),d){const $=xat(i,o,w);A.push(I[$[0]],I[$[1]])}if(L=[...L,{placement:i,overflows:A}],!A.every($=>$<=0)){var j,D;const $=(((j=s.flip)==null?void 0:j.index)||0)+1,R=_[$];if(R&&(!(d==="alignment"?x!==fo(R):!1)||L.every(k=>fo(k.placement)===x?k.overflows[0]>0:!0)))return{data:{index:$,overflows:L},reset:{placement:R}};let C=(D=L.filter(P=>P.overflows[0]<=0).sort((P,k)=>P.overflows[1]-k.overflows[1])[0])==null?void 0:D.placement;if(!C)switch(h){case"bestFit":{var O;const P=(O=L.filter(k=>{if(T){const M=fo(k.placement);return M===x||M==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(M=>M>0).reduce((M,B)=>M+B,0)]).sort((k,M)=>k[1]-M[1])[0])==null?void 0:O[0];P&&(C=P);break}case"initialPlacement":C=a;break}if(i!==C)return{reset:{placement:C}}}return{}}}};function IH(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function AH(t){return mat.some(e=>t[e]>=0)}const Iat=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Ta(t,e);switch(r){case"referenceHidden":{const s=await R0(e,{...i,elementContext:"reference"}),o=IH(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:AH(o)}}}case"escaped":{const s=await R0(e,{...i,altBoundary:!0}),o=IH(s,n.floating);return{data:{escapedOffsets:o,escaped:AH(o)}}}default:return{}}}}},ale=new Set(["left","top"]);async function Aat(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ca(n),a=yp(n),l=fo(n)==="y",c=ale.has(o)?-1:1,u=s&&l?-1:1,d=Ta(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const Lat=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await Aat(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},Rat=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:x}=g;return{x:y,y:x}}},...l}=Ta(t,e),c={x:n,y:r},u=await R0(e,l),d=fo(Ca(i)),f=j4(d);let h=c[f],p=c[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",x=h+u[g],S=h-u[y];h=SR(x,h,S)}if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",x=p+u[g],S=p-u[y];p=SR(x,p,S)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[d]:o}}}}}},Oat=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Ta(t,e),u={x:n,y:r},d=fo(i),f=j4(d);let h=u[f],p=u[d];const m=Ta(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const S=f==="y"?"height":"width",w=s.reference[f]-s.floating[S]+g.mainAxis,E=s.reference[f]+s.reference[S]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(c){var y,x;const S=f==="y"?"width":"height",w=ale.has(Ca(i)),E=s.reference[d]-s.floating[S]+(w&&((y=o.offset)==null?void 0:y[d])||0)+(w?0:g.crossAxis),T=s.reference[d]+s.reference[S]+(w?0:((x=o.offset)==null?void 0:x[d])||0)-(w?g.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[f]:h,[d]:p}}}},Dat=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Ta(t,e),u=await R0(e,c),d=Ca(i),f=yp(i),h=fo(i)==="y",{width:p,height:m}=s.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const x=m-u.top-u.bottom,S=p-u.left-u.right,w=lc(m-u[g],x),E=lc(p-u[y],S),T=!e.middlewareData.shift;let _=w,I=E;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(_=x),T&&!f){const L=ai(u.left,0),j=ai(u.right,0),D=ai(u.top,0),O=ai(u.bottom,0);h?I=p-2*(L!==0||j!==0?L+j:ai(u.left,u.right)):_=m-2*(D!==0||O!==0?D+O:ai(u.top,u.bottom))}await l({...e,availableWidth:I,availableHeight:_});const A=await o.getDimensions(a.floating);return p!==A.width||m!==A.height?{reset:{rects:!0}}:{}}}};function Y_(){return typeof window<"u"}function xp(t){return lle(t)?(t.nodeName||"").toLowerCase():"#document"}function pi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Oo(t){var e;return(e=(lle(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function lle(t){return Y_()?t instanceof Node||t instanceof pi(t).Node:!1}function Os(t){return Y_()?t instanceof Element||t instanceof pi(t).Element:!1}function To(t){return Y_()?t instanceof HTMLElement||t instanceof pi(t).HTMLElement:!1}function LH(t){return!Y_()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof pi(t).ShadowRoot}const Mat=new Set(["inline","contents"]);function Gv(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ds(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Mat.has(i)}const $at=new Set(["table","td","th"]);function Nat(t){return $at.has(xp(t))}const Fat=[":popover-open",":modal"];function Q_(t){return Fat.some(e=>{try{return t.matches(e)}catch{return!1}})}const jat=["transform","translate","scale","rotate","perspective"],Bat=["transform","translate","scale","rotate","perspective","filter"],Uat=["paint","layout","strict","content"];function V4(t){const e=z4(),n=Os(t)?Ds(t):t;return jat.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Bat.some(r=>(n.willChange||"").includes(r))||Uat.some(r=>(n.contain||"").includes(r))}function Vat(t){let e=cc(t);for(;To(e)&&!$h(e);){if(V4(e))return e;if(Q_(e))return null;e=cc(e)}return null}function z4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const zat=new Set(["html","body","#document"]);function $h(t){return zat.has(xp(t))}function Ds(t){return pi(t).getComputedStyle(t)}function X_(t){return Os(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function cc(t){if(xp(t)==="html")return t;const e=t.assignedSlot||t.parentNode||LH(t)&&t.host||Oo(t);return LH(e)?e.host:e}function cle(t){const e=cc(t);return $h(e)?t.ownerDocument?t.ownerDocument.body:t.body:To(e)&&Gv(e)?e:cle(e)}function O0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=cle(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=pi(i);if(s){const a=ER(o);return e.concat(o,o.visualViewport||[],Gv(i)?i:[],a&&n?O0(a):[])}return e.concat(i,O0(i,[],n))}function ER(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ule(t){const e=Ds(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=To(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Rw(n)!==s||Rw(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function H4(t){return Os(t)?t:t.contextElement}function Xf(t){const e=H4(t);if(!To(e))return wo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=ule(e);let o=(s?Rw(n.width):n.width)/r,a=(s?Rw(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Hat=wo(0);function dle(t){const e=pi(t);return!z4()||!e.visualViewport?Hat:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Wat(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==pi(t)?!1:e}function zu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=H4(t);let o=wo(1);e&&(r?Os(r)&&(o=Xf(r)):o=Xf(t));const a=Wat(s,n,r)?dle(s):wo(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=pi(s),h=r&&Os(r)?pi(r):r;let p=f,m=ER(p);for(;m&&r&&h!==p;){const g=Xf(m),y=m.getBoundingClientRect(),x=Ds(m),S=y.left+(m.clientLeft+parseFloat(x.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(x.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,d*=g.y,l+=S,c+=w,p=pi(m),m=ER(p)}}return Dw({width:u,height:d,x:l,y:c})}function Z_(t,e){const n=X_(t).scrollLeft;return e?e.left+n:zu(Oo(t)).left+n}function fle(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-Z_(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function Gat(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=Oo(r),a=e?Q_(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=wo(1);const u=wo(0),d=To(r);if((d||!d&&!s)&&((xp(r)!=="body"||Gv(o))&&(l=X_(r)),To(r))){const h=zu(r);c=Xf(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=o&&!d&&!s?fle(o,l):wo(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Kat(t){return Array.from(t.getClientRects())}function qat(t){const e=Oo(t),n=X_(t),r=t.ownerDocument.body,i=ai(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ai(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Z_(t);const a=-n.scrollTop;return Ds(r).direction==="rtl"&&(o+=ai(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const RH=25;function Yat(t,e){const n=pi(t),r=Oo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=z4();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=Z_(r);if(c<=0){const u=r.ownerDocument,d=u.body,f=getComputedStyle(d),h=u.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,p=Math.abs(r.clientWidth-d.clientWidth-h);p<=RH&&(s-=p)}else c<=RH&&(s+=c);return{width:s,height:o,x:a,y:l}}const Qat=new Set(["absolute","fixed"]);function Xat(t,e){const n=zu(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=To(t)?Xf(t):wo(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function OH(t,e,n){let r;if(e==="viewport")r=Yat(t,n);else if(e==="document")r=qat(Oo(t));else if(Os(e))r=Xat(e,n);else{const i=dle(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Dw(r)}function hle(t,e){const n=cc(t);return n===e||!Os(n)||$h(n)?!1:Ds(n).position==="fixed"||hle(n,e)}function Zat(t,e){const n=e.get(t);if(n)return n;let r=O0(t,[],!1).filter(a=>Os(a)&&xp(a)!=="body"),i=null;const s=Ds(t).position==="fixed";let o=s?cc(t):t;for(;Os(o)&&!$h(o);){const a=Ds(o),l=V4(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&Qat.has(i.position)||Gv(o)&&!l&&hle(t,o))?r=r.filter(u=>u!==o):i=a,o=cc(o)}return e.set(t,r),r}function Jat(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Q_(e)?[]:Zat(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=OH(e,u,i);return c.top=ai(d.top,c.top),c.right=lc(d.right,c.right),c.bottom=lc(d.bottom,c.bottom),c.left=ai(d.left,c.left),c},OH(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function elt(t){const{width:e,height:n}=ule(t);return{width:e,height:n}}function tlt(t,e,n){const r=To(e),i=Oo(e),s=n==="fixed",o=zu(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=wo(0);function c(){l.x=Z_(i)}if(r||!r&&!s)if((xp(e)!=="body"||Gv(i))&&(a=X_(e)),r){const h=zu(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?fle(i,a):wo(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function Ok(t){return Ds(t).position==="static"}function DH(t,e){if(!To(t)||Ds(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Oo(t)===n&&(n=n.ownerDocument.body),n}function ple(t,e){const n=pi(t);if(Q_(t))return n;if(!To(t)){let i=cc(t);for(;i&&!$h(i);){if(Os(i)&&!Ok(i))return i;i=cc(i)}return n}let r=DH(t,e);for(;r&&Nat(r)&&Ok(r);)r=DH(r,e);return r&&$h(r)&&Ok(r)&&!V4(r)?n:r||Vat(t)||n}const nlt=async function(t){const e=this.getOffsetParent||ple,n=this.getDimensions,r=await n(t.floating);return{reference:tlt(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rlt(t){return Ds(t).direction==="rtl"}const ilt={convertOffsetParentRelativeRectToViewportRelativeRect:Gat,getDocumentElement:Oo,getClippingRect:Jat,getOffsetParent:ple,getElementRects:nlt,getClientRects:Kat,getDimensions:elt,getScale:Xf,isElement:Os,isRTL:rlt};function mle(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function slt(t,e){let n=null,r;const i=Oo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:h}=c;if(a||e(),!f||!h)return;const p=k1(d),m=k1(i.clientWidth-(u+f)),g=k1(i.clientHeight-(d+h)),y=k1(u),S={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:ai(0,lc(1,l))||1};let w=!0;function E(T){const _=T[0].intersectionRatio;if(_!==l){if(!w)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!mle(c,t.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(E,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,S)}n.observe(t)}return o(!0),s}function olt(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=H4(t),u=i||s?[...c?O0(c):[],...O0(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?slt(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[x]=y;x&&x.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var S;(S=h)==null||S.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?zu(t):null;l&&g();function g(){const y=zu(t);m&&!mle(m,y)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;u.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const alt=Lat,llt=Rat,clt=Pat,ult=Dat,dlt=Iat,MH=kat,flt=Oat,hlt=(t,e,n)=>{const r=new Map,i={platform:ilt,...n},s={...i.platform,_c:r};return Cat(t,e,{...i,platform:s})};var plt=typeof document<"u",mlt=function(){},eb=plt?v.useLayoutEffect:mlt;function Mw(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Mw(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Mw(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function gle(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function $H(t,e){const n=gle(t);return Math.round(e*n)/n}function Dk(t){const e=v.useRef(t);return eb(()=>{e.current=t}),e}function glt(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=v.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=v.useState(r);Mw(f,r)||h(r);const[p,m]=v.useState(null),[g,y]=v.useState(null),x=v.useCallback(k=>{k!==T.current&&(T.current=k,m(k))},[]),S=v.useCallback(k=>{k!==_.current&&(_.current=k,y(k))},[]),w=s||p,E=o||g,T=v.useRef(null),_=v.useRef(null),I=v.useRef(u),A=l!=null,L=Dk(l),j=Dk(i),D=Dk(c),O=v.useCallback(()=>{if(!T.current||!_.current)return;const k={placement:e,strategy:n,middleware:f};j.current&&(k.platform=j.current),hlt(T.current,_.current,k).then(M=>{const B={...M,isPositioned:D.current!==!1};$.current&&!Mw(I.current,B)&&(I.current=B,Yr.flushSync(()=>{d(B)}))})},[f,e,n,j,D]);eb(()=>{c===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(k=>({...k,isPositioned:!1})))},[c]);const $=v.useRef(!1);eb(()=>($.current=!0,()=>{$.current=!1}),[]),eb(()=>{if(w&&(T.current=w),E&&(_.current=E),w&&E){if(L.current)return L.current(w,E,O);O()}},[w,E,O,L,A]);const R=v.useMemo(()=>({reference:T,floating:_,setReference:x,setFloating:S}),[x,S]),C=v.useMemo(()=>({reference:w,floating:E}),[w,E]),P=v.useMemo(()=>{const k={position:n,left:0,top:0};if(!C.floating)return k;const M=$H(C.floating,u.x),B=$H(C.floating,u.y);return a?{...k,transform:"translate("+M+"px, "+B+"px)",...gle(C.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:B}},[n,a,C.floating,u.x,u.y]);return v.useMemo(()=>({...u,update:O,refs:R,elements:C,floatingStyles:P}),[u,O,R,C,P])}const vlt=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?MH({element:r.current,padding:i}).fn(n):{}:r?MH({element:r,padding:i}).fn(n):{}}}},ylt=(t,e)=>({...alt(t),options:[t,e]}),xlt=(t,e)=>({...llt(t),options:[t,e]}),blt=(t,e)=>({...flt(t),options:[t,e]}),Slt=(t,e)=>({...clt(t),options:[t,e]}),wlt=(t,e)=>({...ult(t),options:[t,e]}),Elt=(t,e)=>({...dlt(t),options:[t,e]}),_lt=(t,e)=>({...vlt(t),options:[t,e]});function Tlt(t){const[e,n]=v.useState(void 0);return _a(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}const vle="Popper",[yle,xle]=N4(vle),[Clt,ble]=yle(vle),klt=t=>{const{__scopePopper:e,children:n}=t,[r,i]=v.useState(null);return v.createElement(Clt,{scope:e,anchor:r,onAnchorChange:i},n)},Plt="PopperAnchor",Ilt=v.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=ble(Plt,n),o=v.useRef(null),a=qr(e,o);return v.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:v.createElement(Xr.div,be({},i,{ref:a}))}),Sle="PopperContent",[Alt,o1t]=yle(Sle),Llt=v.forwardRef((t,e)=>{var n,r,i,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:m=0,collisionBoundary:g=[],collisionPadding:y=0,sticky:x="partial",hideWhenDetached:S=!1,avoidCollisions:w=!0,onPlaced:E,...T}=t,_=ble(Sle,u),[I,A]=v.useState(null),L=qr(e,ke=>A(ke)),[j,D]=v.useState(null),O=Tlt(j),$=(n=O==null?void 0:O.width)!==null&&n!==void 0?n:0,R=(r=O==null?void 0:O.height)!==null&&r!==void 0?r:0,C=d+(h!=="center"?"-"+h:""),P=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},k=Array.isArray(g)?g:[g],M=k.length>0,B={padding:P,boundary:k.filter(Rlt),altBoundary:M},{refs:N,floatingStyles:V,placement:H,isPositioned:W,middlewareData:z}=glt({strategy:"fixed",placement:C,whileElementsMounted:olt,elements:{reference:_.anchor},middleware:[ylt({mainAxis:f+R,alignmentAxis:p}),w&&xlt({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?blt():void 0,...B}),w&&Slt({...B}),wlt({...B,apply:({elements:ke,rects:_e,availableWidth:Te,availableHeight:Oe})=>{const{width:Qe,height:Ct}=_e.reference,ot=ke.floating.style;ot.setProperty("--radix-popper-available-width",`${Te}px`),ot.setProperty("--radix-popper-available-height",`${Oe}px`),ot.setProperty("--radix-popper-anchor-width",`${Qe}px`),ot.setProperty("--radix-popper-anchor-height",`${Ct}px`)}}),j&&_lt({element:j,padding:m}),Olt({arrowWidth:$,arrowHeight:R}),S&&Elt({strategy:"referenceHidden"})]}),[G,K]=wle(H),Q=Ea(E);_a(()=>{W&&(Q==null||Q())},[W,Q]);const ne=(i=z.arrow)===null||i===void 0?void 0:i.x,Z=(s=z.arrow)===null||s===void 0?void 0:s.y,re=((o=z.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[de,Ee]=v.useState();return _a(()=>{I&&Ee(window.getComputedStyle(I).zIndex)},[I]),v.createElement("div",{ref:N.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:W?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(a=z.transformOrigin)===null||a===void 0?void 0:a.x,(l=z.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},v.createElement(Alt,{scope:u,placedSide:G,onArrowChange:D,arrowX:ne,arrowY:Z,shouldHideArrow:re},v.createElement(Xr.div,be({"data-side":G,"data-align":K},T,{ref:L,style:{...T.style,animation:W?void 0:"none",opacity:(c=z.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function Rlt(t){return t!==null}const Olt=t=>({name:"transformOrigin",options:t,fn(e){var n,r,i,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=d?0:t.arrowWidth,h=d?0:t.arrowHeight,[p,m]=wle(a),g={start:"0%",center:"50%",end:"100%"}[m],y=((r=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&r!==void 0?r:0)+f/2,x=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let S="",w="";return p==="bottom"?(S=d?g:`${y}px`,w=`${-h}px`):p==="top"?(S=d?g:`${y}px`,w=`${l.floating.height+h}px`):p==="right"?(S=`${-h}px`,w=d?g:`${x}px`):p==="left"&&(S=`${l.floating.width+h}px`,w=d?g:`${x}px`),{data:{x:S,y:w}}}});function wle(t){const[e,n="center"]=t.split("-");return[e,n]}const Dlt=klt,Mlt=Ilt,$lt=Llt,Nlt=v.forwardRef((t,e)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...i}=t;return r?XO.createPortal(v.createElement(Xr.div,be({},i,{ref:e})),r):null});function NH({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=Flt({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=Ea(n),l=v.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else i(c)},[s,t,i,a]);return[o,l]}function Flt({defaultProp:t,onChange:e}){const n=v.useState(t),[r]=n,i=v.useRef(r),s=Ea(e);return v.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}function jlt(t){const e=v.useRef({value:t,previous:t});return v.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Blt(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Ult(...t){return e=>t.forEach(n=>Blt(n,e))}const Ele=v.forwardRef((t,e)=>{const{children:n,...r}=t,i=v.Children.toArray(n),s=i.find(zlt);if(s){const o=s.props.children,a=i.map(l=>l===s?v.Children.count(o)>1?v.Children.only(null):v.isValidElement(o)?o.props.children:null:l);return v.createElement(_R,be({},r,{ref:e}),v.isValidElement(o)?v.cloneElement(o,void 0,a):null)}return v.createElement(_R,be({},r,{ref:e}),n)});Ele.displayName="Slot";const _R=v.forwardRef((t,e)=>{const{children:n,...r}=t;return v.isValidElement(n)?v.cloneElement(n,{...Hlt(r,n.props),ref:e?Ult(e,n.ref):n.ref}):v.Children.count(n)>1?v.Children.only(null):null});_R.displayName="SlotClone";const Vlt=({children:t})=>v.createElement(v.Fragment,null,t);function zlt(t){return v.isValidElement(t)&&t.type===Vlt}function Hlt(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{s(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const Wlt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Glt=Wlt.reduce((t,e)=>{const n=v.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?Ele:e;return v.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),v.createElement(a,be({},o,{ref:i}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Klt=v.forwardRef((t,e)=>v.createElement(Glt.span,be({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}})));var _le=Ore(),Mk=function(){},J_=v.forwardRef(function(t,e){var n=v.useRef(null),r=v.useState({onScrollCapture:Mk,onWheelCapture:Mk,onTouchMoveCapture:Mk}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,m=t.allowPinchZoom,g=t.as,y=g===void 0?"div":g,x=ip(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),S=f,w=Rre([n,e]),E=sr(sr({},x),i);return v.createElement(v.Fragment,null,u&&v.createElement(S,{sideCar:_le,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),o?v.cloneElement(v.Children.only(a),sr(sr({},E),{ref:w})):v.createElement(y,sr({},E,{className:l,ref:w}),a))});J_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};J_.classNames={fullWidth:pg,zeroRight:hg};var TR=!1;if(typeof window<"u")try{var P1=Object.defineProperty({},"passive",{get:function(){return TR=!0,!0}});window.addEventListener("test",P1,P1),window.removeEventListener("test",P1,P1)}catch{TR=!1}var Md=TR?{passive:!1}:!1,qlt=function(t){return t.tagName==="TEXTAREA"},Tle=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!qlt(t)&&n[e]==="visible")},Ylt=function(t){return Tle(t,"overflowY")},Qlt=function(t){return Tle(t,"overflowX")},FH=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=Cle(t,n);if(r){var i=kle(t,n),s=i[1],o=i[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Xlt=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Zlt=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Cle=function(t,e){return t==="v"?Ylt(e):Qlt(e)},kle=function(t,e){return t==="v"?Xlt(e):Zlt(e)},Jlt=function(t,e){return t==="h"&&e==="rtl"?-1:1},ect=function(t,e,n,r,i){var s=Jlt(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=kle(t,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Cle(t,a)&&(d+=y,f+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(i&&d===0||!i&&o>d)||!u&&(i&&f===0||!i&&-o>f))&&(c=!0),c},I1=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},jH=function(t){return[t.deltaX,t.deltaY]},BH=function(t){return t&&"current"in t?t.current:t},tct=function(t,e){return t[0]===e[0]&&t[1]===e[1]},nct=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},rct=0,$d=[];function ict(t){var e=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),i=v.useState(rct++)[0],s=v.useState(function(){return xM()})[0],o=v.useRef(t);v.useEffect(function(){o.current=t},[t]),v.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Vee([t.lockRef.current],(t.shards||[]).map(BH),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=v.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=I1(m),x=n.current,S="deltaX"in m?m.deltaX:x[0]-y[0],w="deltaY"in m?m.deltaY:x[1]-y[1],E,T=m.target,_=Math.abs(S)>Math.abs(w)?"h":"v";if("touches"in m&&_==="h"&&T.type==="range")return!1;var I=FH(_,T);if(!I)return!0;if(I?E=_:(E=_==="v"?"h":"v",I=FH(_,T)),!I)return!1;if(!r.current&&"changedTouches"in m&&(S||w)&&(r.current=E),!E)return!0;var A=r.current||E;return ect(A,g,m,A==="h"?S:w,!0)},[]),l=v.useCallback(function(m){var g=m;if(!(!$d.length||$d[$d.length-1]!==s)){var y="deltaY"in g?jH(g):I1(g),x=e.current.filter(function(E){return E.name===g.type&&E.target===g.target&&tct(E.delta,y)})[0];if(x&&x.should){g.cancelable&&g.preventDefault();return}if(!x){var S=(o.current.shards||[]).map(BH).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=S.length>0?a(g,S[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),c=v.useCallback(function(m,g,y,x){var S={name:m,delta:g,target:y,should:x};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(w){return w!==S})},1)},[]),u=v.useCallback(function(m){n.current=I1(m),r.current=void 0},[]),d=v.useCallback(function(m){c(m.type,jH(m),m.target,a(m,t.lockRef.current))},[]),f=v.useCallback(function(m){c(m.type,I1(m),m.target,a(m,t.lockRef.current))},[]);v.useEffect(function(){return $d.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Md),document.addEventListener("touchmove",l,Md),document.addEventListener("touchstart",u,Md),function(){$d=$d.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,Md),document.removeEventListener("touchmove",l,Md),document.removeEventListener("touchstart",u,Md)}},[]);var h=t.removeScrollBar,p=t.inert;return v.createElement(v.Fragment,null,p?v.createElement(s,{styles:nct(i)}):null,h?v.createElement(Nre,{gapMode:"margin"}):null)}const sct=Mre(_le,ict);var Ple=v.forwardRef(function(t,e){return v.createElement(J_,sr({},t,{ref:e,sideCar:sct}))});Ple.classNames=J_.classNames;const oct=Ple,act=[" ","Enter","ArrowUp","ArrowDown"],lct=[" ","Enter"],eT="Select",[tT,W4,cct]=Kot(eT),[bp,a1t]=N4(eT,[cct,xle]),G4=xle(),[uct,dd]=bp(eT),[dct,fct]=bp(eT),hct=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h}=t,p=G4(e),[m,g]=v.useState(null),[y,x]=v.useState(null),[S,w]=v.useState(!1),E=Yot(c),[T=!1,_]=NH({prop:r,defaultProp:i,onChange:s}),[I,A]=NH({prop:o,defaultProp:a,onChange:l}),L=v.useRef(null),j=m?!!m.closest("form"):!0,[D,O]=v.useState(new Set),$=Array.from(D).map(R=>R.props.value).join(";");return v.createElement(Dlt,p,v.createElement(uct,{required:h,scope:e,trigger:m,onTriggerChange:g,valueNode:y,onValueNodeChange:x,valueNodeHasChildren:S,onValueNodeHasChildrenChange:w,contentId:F4(),value:I,onValueChange:A,open:T,onOpenChange:_,dir:E,triggerPointerDownPosRef:L,disabled:f},v.createElement(tT.Provider,{scope:e},v.createElement(dct,{scope:t.__scopeSelect,onNativeOptionAdd:v.useCallback(R=>{O(C=>new Set(C).add(R))},[]),onNativeOptionRemove:v.useCallback(R=>{O(C=>{const P=new Set(C);return P.delete(R),P})},[])},n)),j?v.createElement(Lle,{key:$,"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:I,onChange:R=>A(R.target.value),disabled:f},I===void 0?v.createElement("option",{value:""}):null,Array.from(D)):null))},pct="SelectTrigger",mct=v.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=G4(n),o=dd(pct,n),a=o.disabled||r,l=qr(e,o.onTriggerChange),c=W4(n),[u,d,f]=Rle(p=>{const m=c().filter(x=>!x.disabled),g=m.find(x=>x.value===o.value),y=Ole(m,p,g);y!==void 0&&o.onValueChange(y.value)}),h=()=>{a||(o.onOpenChange(!0),f())};return v.createElement(Mlt,be({asChild:!0},s),v.createElement(Xr.button,be({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":o.value===void 0?"":void 0},i,{ref:l,onClick:Sr(i.onClick,p=>{p.currentTarget.focus()}),onPointerDown:Sr(i.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(h(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:Sr(i.onKeyDown,p=>{const m=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&act.includes(p.key)&&(h(),p.preventDefault())})})))}),gct="SelectValue",vct=v.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o,...a}=t,l=dd(gct,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=qr(e,l.onValueNodeChange);return _a(()=>{c(u)},[c,u]),v.createElement(Xr.span,be({},a,{ref:d,style:{pointerEvents:"none"}}),l.value===void 0&&o!==void 0?o:s)}),yct=v.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return v.createElement(Xr.span,be({"aria-hidden":!0},i,{ref:e}),r||"")}),xct=t=>v.createElement(Nlt,be({asChild:!0},t)),Nh="SelectContent",bct=v.forwardRef((t,e)=>{const n=dd(Nh,t.__scopeSelect),[r,i]=v.useState();if(_a(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Yr.createPortal(v.createElement(Ile,{scope:t.__scopeSelect},v.createElement(tT.Slot,{scope:t.__scopeSelect},v.createElement("div",null,t.children))),s):null}return v.createElement(Sct,be({},t,{ref:e}))}),Wo=10,[Ile,nT]=bp(Nh),Sct=v.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:g,...y}=t,x=dd(Nh,n),[S,w]=v.useState(null),[E,T]=v.useState(null),_=qr(e,K=>w(K)),[I,A]=v.useState(null),[L,j]=v.useState(null),D=W4(n),[O,$]=v.useState(!1),R=v.useRef(!1);v.useEffect(()=>{if(S)return zre(S)},[S]),sat();const C=v.useCallback(K=>{const[Q,...ne]=D().map(de=>de.ref.current),[Z]=ne.slice(-1),re=document.activeElement;for(const de of K)if(de===re||(de==null||de.scrollIntoView({block:"nearest"}),de===Q&&E&&(E.scrollTop=0),de===Z&&E&&(E.scrollTop=E.scrollHeight),de==null||de.focus(),document.activeElement!==re))return},[D,E]),P=v.useCallback(()=>C([I,S]),[C,I,S]);v.useEffect(()=>{O&&P()},[O,P]);const{onOpenChange:k,triggerPointerDownPosRef:M}=x;v.useEffect(()=>{if(S){let K={x:0,y:0};const Q=Z=>{var re,de,Ee,ke;K={x:Math.abs(Math.round(Z.pageX)-((re=(de=M.current)===null||de===void 0?void 0:de.x)!==null&&re!==void 0?re:0)),y:Math.abs(Math.round(Z.pageY)-((Ee=(ke=M.current)===null||ke===void 0?void 0:ke.y)!==null&&Ee!==void 0?Ee:0))}},ne=Z=>{K.x<=10&&K.y<=10?Z.preventDefault():S.contains(Z.target)||k(!1),document.removeEventListener("pointermove",Q),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",ne,{capture:!0})}}},[S,k,M]),v.useEffect(()=>{const K=()=>k(!1);return window.addEventListener("blur",K),window.addEventListener("resize",K),()=>{window.removeEventListener("blur",K),window.removeEventListener("resize",K)}},[k]);const[B,N]=Rle(K=>{const Q=D().filter(re=>!re.disabled),ne=Q.find(re=>re.ref.current===document.activeElement),Z=Ole(Q,K,ne);Z&&setTimeout(()=>Z.ref.current.focus())}),V=v.useCallback((K,Q,ne)=>{const Z=!R.current&&!ne;(x.value!==void 0&&x.value===Q||Z)&&(A(K),Z&&(R.current=!0))},[x.value]),H=v.useCallback(()=>S==null?void 0:S.focus(),[S]),W=v.useCallback((K,Q,ne)=>{const Z=!R.current&&!ne;(x.value!==void 0&&x.value===Q||Z)&&j(K)},[x.value]),z=r==="popper"?UH:wct,G=z===UH?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:g}:{};return v.createElement(Ile,{scope:n,content:S,viewport:E,onViewportChange:T,itemRefCallback:V,selectedItem:I,onItemLeave:H,itemTextRefCallback:W,focusSelectedItem:P,selectedItemText:L,position:r,isPositioned:O,searchRef:B},v.createElement(oct,{as:L0,allowPinchZoom:!0},v.createElement(oat,{asChild:!0,trapped:x.open,onMountAutoFocus:K=>{K.preventDefault()},onUnmountAutoFocus:Sr(i,K=>{var Q;(Q=x.trigger)===null||Q===void 0||Q.focus({preventScroll:!0}),K.preventDefault()})},v.createElement(nat,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:K=>K.preventDefault(),onDismiss:()=>x.onOpenChange(!1)},v.createElement(z,be({role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:K=>K.preventDefault()},y,G,{onPlaced:()=>$(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Sr(y.onKeyDown,K=>{const Q=K.ctrlKey||K.altKey||K.metaKey;if(K.key==="Tab"&&K.preventDefault(),!Q&&K.key.length===1&&N(K.key),["ArrowUp","ArrowDown","Home","End"].includes(K.key)){let Z=D().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(K.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(K.key)){const re=K.target,de=Z.indexOf(re);Z=Z.slice(de+1)}setTimeout(()=>C(Z)),K.preventDefault()}})}))))))}),wct=v.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=dd(Nh,n),o=nT(Nh,n),[a,l]=v.useState(null),[c,u]=v.useState(null),d=qr(e,_=>u(_)),f=W4(n),h=v.useRef(!1),p=v.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:y,focusSelectedItem:x}=o,S=v.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&g&&y){const _=s.trigger.getBoundingClientRect(),I=c.getBoundingClientRect(),A=s.valueNode.getBoundingClientRect(),L=y.getBoundingClientRect();if(s.dir!=="rtl"){const re=L.left-I.left,de=A.left-re,Ee=_.left-de,ke=_.width+Ee,_e=Math.max(ke,I.width),Te=window.innerWidth-Wo,Oe=yH(de,[Wo,Te-_e]);a.style.minWidth=ke+"px",a.style.left=Oe+"px"}else{const re=I.right-L.right,de=window.innerWidth-A.right-re,Ee=window.innerWidth-_.right-de,ke=_.width+Ee,_e=Math.max(ke,I.width),Te=window.innerWidth-Wo,Oe=yH(de,[Wo,Te-_e]);a.style.minWidth=ke+"px",a.style.right=Oe+"px"}const j=f(),D=window.innerHeight-Wo*2,O=m.scrollHeight,$=window.getComputedStyle(c),R=parseInt($.borderTopWidth,10),C=parseInt($.paddingTop,10),P=parseInt($.borderBottomWidth,10),k=parseInt($.paddingBottom,10),M=R+C+O+k+P,B=Math.min(g.offsetHeight*5,M),N=window.getComputedStyle(m),V=parseInt(N.paddingTop,10),H=parseInt(N.paddingBottom,10),W=_.top+_.height/2-Wo,z=D-W,G=g.offsetHeight/2,K=g.offsetTop+G,Q=R+C+K,ne=M-Q;if(Q<=W){const re=g===j[j.length-1].ref.current;a.style.bottom="0px";const de=c.clientHeight-m.offsetTop-m.offsetHeight,Ee=Math.max(z,G+(re?H:0)+de+P),ke=Q+Ee;a.style.height=ke+"px"}else{const re=g===j[0].ref.current;a.style.top="0px";const Ee=Math.max(W,R+m.offsetTop+(re?V:0)+G)+ne;a.style.height=Ee+"px",m.scrollTop=Q-W+m.offsetTop}a.style.margin=`${Wo}px 0`,a.style.minHeight=B+"px",a.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,g,y,s.dir,r]);_a(()=>S(),[S]);const[w,E]=v.useState();_a(()=>{c&&E(window.getComputedStyle(c).zIndex)},[c]);const T=v.useCallback(_=>{_&&p.current===!0&&(S(),x==null||x(),p.current=!1)},[S,x]);return v.createElement(Ect,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:T},v.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w}},v.createElement(Xr.div,be({},i,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),UH=v.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Wo,...s}=t,o=G4(n);return v.createElement($lt,be({},o,s,{ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Ect,_ct]=bp(Nh,{}),VH="SelectViewport",Tct=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=nT(VH,n),s=_ct(VH,n),o=qr(e,i.onViewportChange),a=v.useRef(0);return v.createElement(v.Fragment,null,v.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),v.createElement(tT.Slot,{scope:n},v.createElement(Xr.div,be({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:Sr(r.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const h=window.innerHeight-Wo*2,p=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),g=Math.max(p,m);if(g<h){const y=g+f,x=Math.min(h,y),S=y-x;u.style.height=x+"px",u.style.bottom==="0px"&&(c.scrollTop=S>0?S:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),Cct="SelectGroup",[kct,l1t]=bp(Cct),Pct=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=F4();return v.createElement(kct,{scope:n,id:i},v.createElement(Xr.div,be({role:"group","aria-labelledby":i},r,{ref:e})))}),CR="SelectItem",[Ict,Ale]=bp(CR),Act=v.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=dd(CR,n),l=nT(CR,n),c=a.value===r,[u,d]=v.useState(s??""),[f,h]=v.useState(!1),p=qr(e,y=>{var x;return(x=l.itemRefCallback)===null||x===void 0?void 0:x.call(l,y,r,i)}),m=F4(),g=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};return v.createElement(Ict,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:v.useCallback(y=>{d(x=>{var S;return x||((S=y==null?void 0:y.textContent)!==null&&S!==void 0?S:"").trim()})},[])},v.createElement(tT.ItemSlot,{scope:n,value:r,disabled:i,textValue:u},v.createElement(Xr.div,be({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},o,{ref:p,onFocus:Sr(o.onFocus,()=>h(!0)),onBlur:Sr(o.onBlur,()=>h(!1)),onPointerUp:Sr(o.onPointerUp,g),onPointerMove:Sr(o.onPointerMove,y=>{if(i){var x;(x=l.onItemLeave)===null||x===void 0||x.call(l)}else y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Sr(o.onPointerLeave,y=>{if(y.currentTarget===document.activeElement){var x;(x=l.onItemLeave)===null||x===void 0||x.call(l)}}),onKeyDown:Sr(o.onKeyDown,y=>{var x;((x=l.searchRef)===null||x===void 0?void 0:x.current)!==""&&y.key===" "||(lct.includes(y.key)&&g(),y.key===" "&&y.preventDefault())})}))))}),A1="SelectItemText",Lct=v.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=dd(A1,n),a=nT(A1,n),l=Ale(A1,n),c=fct(A1,n),[u,d]=v.useState(null),f=qr(e,y=>d(y),l.onItemTextChange,y=>{var x;return(x=a.itemTextRefCallback)===null||x===void 0?void 0:x.call(a,y,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=v.useMemo(()=>v.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},h),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=c;return _a(()=>(m(p),()=>g(p)),[m,g,p]),v.createElement(v.Fragment,null,v.createElement(Xr.span,be({id:l.textId},s,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Yr.createPortal(s.children,o.valueNode):null)}),Rct="SelectItemIndicator",Oct=v.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Ale(Rct,n).isSelected?v.createElement(Xr.span,be({"aria-hidden":!0},r,{ref:e})):null}),Lle=v.forwardRef((t,e)=>{const{value:n,...r}=t,i=v.useRef(null),s=qr(e,i),o=jlt(n);return v.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),v.createElement(Klt,{asChild:!0},v.createElement("select",be({},r,{ref:s,defaultValue:n})))});Lle.displayName="BubbleSelect";function Rle(t){const e=Ea(t),n=v.useRef(""),r=v.useRef(0),i=v.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=v.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return v.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function Ole(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Dct(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Dct(t,e){return t.map((n,r)=>t[(e+r)%t.length])}const Mct=hct,$ct=mct,Nct=vct,Fct=yct,jct=xct,Bct=bct,Uct=Tct,Vct=Pct,zH=Act,HH=Lct,WH=Oct,he=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},zct=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=Hct},Hct=Number.MAX_SAFE_INTEGER||9007199254740991;let Se=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),Y=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t}({}),F=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t}({});var We={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ge={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Nd{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Wct{constructor(e,n,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Nd(e),this.fast_=new Nd(n),this.defaultTTFB_=i,this.ttfb_=new Nd(e)}update(e,n){const{slow_:r,fast_:i,ttfb_:s}=this;r.halfLife!==e&&(this.slow_=new Nd(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==n&&(this.fast_=new Nd(n,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Nd(e,s.getEstimate(),s.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,i=e/1e3,s=r/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Gct(t,e,n){return(e=qct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vt.apply(null,arguments)}function GH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GH(Object(n),!0).forEach(function(r){Gct(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kct(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qct(t){var e=Kct(t,"string");return typeof e=="symbol"?e:e+""}class Zi{constructor(e,n){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=dl,this.debug=n.debug.bind(null,r),this.log=n.log.bind(null,r),this.warn=n.warn.bind(null,r),this.info=n.info.bind(null,r),this.error=n.error.bind(null,r)}}const dl=function(){},Yct={trace:dl,debug:dl,log:dl,warn:dl,info:dl,error:dl};function kR(){return vt({},Yct)}function Qct(t,e){const n=self.console[t];return n?n.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):dl}function KH(t,e,n){return e[t]?e[t].bind(e):Qct(t,n)}const PR=kR();function Xct(t,e,n){const r=kR();if(typeof console=="object"&&t===!0||typeof t=="object"){const i=["debug","log","info","warn","error"];i.forEach(s=>{r[s]=KH(s,t,n)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.13`)}catch{return kR()}i.forEach(s=>{PR[s]=KH(s,t)})}else vt(PR,r);return r}const dt=PR;function uc(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Zct(t){return typeof self<"u"&&t===self.ManagedMediaSource}function Dle(t,e){const n=Object.keys(t),r=Object.keys(e),i=n.length,s=r.length;return!i||!s||i===s&&!n.some(o=>r.indexOf(o)===-1)}function mi(t,e=!1){if(typeof TextDecoder<"u"){const c=new TextDecoder("utf-8").decode(t);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const n=t.length;let r,i,s,o="",a=0;for(;a<n;){if(r=t[a++],r===0&&e)return o;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:i=t[a++],o+=String.fromCharCode((r&31)<<6|i&63);break;case 14:i=t[a++],s=t[a++],o+=String.fromCharCode((r&15)<<12|(i&63)<<6|(s&63)<<0);break}}return o}function br(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}function Mle(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Jct(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $k={exports:{}},qH;function eut(){return qH||(qH=1,function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=a.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=a.normalizePath(d.path),a.buildURLFromParts(d)}var f=a.parseURL(c);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return u.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):c;var h=a.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=i.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var m={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(m.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)m.path=h.path,f.params||(m.params=h.params,f.query||(m.query=h.query));else{var g=h.path,y=g.substring(0,g.lastIndexOf("/")+1)+f.path;m.path=a.normalizePath(y)}return m.path===null&&(m.path=u.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(m)},parseURL:function(l){var c=r.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=a})()}($k)),$k.exports}var K4=eut();class q4{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var yt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class $le{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,nut(this,"stats")}setByteRange(e,n){const r=e.split("@",2);let i;r.length===1?i=(n==null?void 0:n.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[yt.AUDIO]:null,[yt.VIDEO]:null,[yt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new q4),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=K4.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[yt.AUDIO]=null,e[yt.VIDEO]=null,e[yt.AUDIOVIDEO]=null}}function pn(t){return t.sn!=="initSegment"}class Nk extends $le{constructor(e,n){super(n),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],n=this.byteRange[1];if(he(e)&&he(n))return n-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:n}=this;if(!n||n.NONE)return null;if(n.identity)this._decryptdata||(this._decryptdata=n.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const r=Object.keys(n);if(r.length===1){const i=this._decryptdata=n[r[0]]||null;i&&(this._decryptdata=i.getDecryptData(this.sn,n))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=he(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var n;const r=Object.keys(this.levelkeys),i=r.length;if(i>1||i===1&&(n=this.levelkeys[r[0]])!=null&&n.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!he(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return pn(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const n=this.levelkeys;if(n){var r;const i=n[e];i&&!((r=this._decryptdata)!=null&&r.keyId)&&(this._decryptdata=i.getDecryptData(this.sn,n))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,i,s,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:n,endPTS:r,startDTS:i,endDTS:s,partial:o};return}l.startPTS=Math.min(l.startPTS,n),l.endPTS=Math.max(l.endPTS,r),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,s)}}class tut extends $le{constructor(e,n,r,i,s){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=i;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function Nle(t,e){const n=Object.getPrototypeOf(t);if(n){const r=Object.getOwnPropertyDescriptor(n,e);return r||Nle(n,e)}}function nut(t,e){const n=Nle(t,e);n&&(n.enumerable=!0,Object.defineProperty(t,e,n))}const YH=Math.pow(2,32)-1,rut=[].push,Fle={video:1,audio:2,id3:3,text:4};function wn(t){return String.fromCharCode.apply(null,t)}function jle(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function Le(t,e){const n=Ble(t,e);return n<0?4294967296+n:n}function QH(t,e){let n=Le(t,e);return n*=Math.pow(2,32),n+=Le(t,e+4),n}function Ble(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function iut(t){const e=t.byteLength;for(let n=0;n<e;){const r=Le(t,n);if(r>8&&t[n+4]===109&&t[n+5]===111&&t[n+6]===111&&t[n+7]===102)return!0;n=r>1?n+r:e}return!1}function He(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let i=0;i<r;){const s=Le(t,i),o=wn(t.subarray(i+4,i+8)),a=s>1?i+s:r;if(o===e[0])if(e.length===1)n.push(t.subarray(i+8,a));else{const l=He(t.subarray(i+8,a),e.slice(1));l.length&&rut.apply(n,l)}i=a}return n}function sut(t){const e=[],n=t[0];let r=8;const i=Le(t,r);r+=4;let s=0,o=0;n===0?(s=Le(t,r),o=Le(t,r+4),r+=8):(s=QH(t,r),o=QH(t,r+8),r+=16),r+=2;let a=t.length+o;const l=jle(t,r);r+=2;for(let c=0;c<l;c++){let u=r;const d=Le(t,u);u+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return dt.warn("SIDX has hierarchical references (not supported)"),null;const p=Le(t,u);u+=4,e.push({referenceSize:f,subsegmentDuration:p,info:{duration:p/i,start:a,end:a+f-1}}),a+=f,u+=4,r=u}return{earliestPresentationTime:s,timescale:i,version:n,referencesCount:l,references:e}}function Ule(t){const e=[],n=He(t,["moov","trak"]);for(let i=0;i<n.length;i++){const s=n[i],o=He(s,["tkhd"])[0];if(o){let a=o[0];const l=Le(o,a===0?12:20),c=He(s,["mdia","mdhd"])[0];if(c){a=c[0];const u=Le(c,a===0?12:20),d=He(s,["mdia","hdlr"])[0];if(d){const f=wn(d.subarray(8,12)),h={soun:yt.AUDIO,vide:yt.VIDEO}[f],p=He(s,["mdia","minf","stbl","stsd"])[0],m=out(p);h?(e[l]={timescale:u,type:h,stsd:m},e[h]=ct({timescale:u,id:l},m)):e[l]={timescale:u,type:f,stsd:m}}}}}return He(t,["moov","mvex","trex"]).forEach(i=>{const s=Le(i,4),o=e[s];o&&(o.default={duration:Le(i,12),flags:Le(i,20)})}),e}function out(t){const e=t.subarray(8),n=e.subarray(8+78),r=wn(e.subarray(4,8));let i=r,s;const o=r==="enca"||r==="encv";if(o){const c=He(e,[r])[0].subarray(r==="enca"?28:78);He(c,["sinf"]).forEach(d=>{const f=He(d,["schm"])[0];if(f){const h=wn(f.subarray(4,8));if(h==="cbcs"||h==="cenc"){const p=He(d,["frma"])[0];p&&(i=wn(p))}}})}const a=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const l=He(n,["avcC"])[0];l&&l.length>3&&(i+="."+R1(l[1])+R1(l[2])+R1(l[3]),s=L1(a==="avc1"?"dva1":"dvav",n));break}case"mp4a":{const l=He(e,[r])[0],c=He(l.subarray(28),["esds"])[0];if(c&&c.length>7){let u=4;if(c[u++]!==3)break;u=Fk(c,u),u+=2;const d=c[u++];if(d&128&&(u+=2),d&64&&(u+=c[u++]),c[u++]!==4)break;u=Fk(c,u);const f=c[u++];if(f===64)i+="."+R1(f);else break;if(u+=12,c[u++]!==5)break;u=Fk(c,u);const h=c[u++];let p=(h&248)>>3;p===31&&(p+=1+((h&7)<<3)+((c[u]&224)>>5)),i+="."+p}break}case"hvc1":case"hev1":{const l=He(n,["hvcC"])[0];if(l&&l.length>12){const c=l[1],u=["","A","B","C"][c>>6],d=c&31,f=Le(l,2),h=(c&32)>>5?"H":"L",p=l[12],m=l.subarray(6,12);i+="."+u+d,i+="."+aut(f).toString(16).toUpperCase(),i+="."+h+p;let g="";for(let y=m.length;y--;){const x=m[y];(x||g)&&(g="."+x.toString(16).toUpperCase()+g)}i+=g}s=L1(a=="hev1"?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=L1(i,n)||i;break}case"vp09":{const l=He(n,["vpcC"])[0];if(l&&l.length>6){const c=l[4],u=l[5],d=l[6]>>4&15;i+="."+Xs(c)+"."+Xs(u)+"."+Xs(d)}break}case"av01":{const l=He(n,["av1C"])[0];if(l&&l.length>2){const c=l[1]>>>5,u=l[1]&31,d=l[2]>>>7?"H":"M",f=(l[2]&64)>>6,h=(l[2]&32)>>5,p=c===2&&f?h?12:10:f?10:8,m=(l[2]&16)>>4,g=(l[2]&8)>>3,y=(l[2]&4)>>2,x=l[2]&3,S=1,w=1,E=1,T=0;i+="."+c+"."+Xs(u)+d+"."+Xs(p)+"."+m+"."+g+y+x+"."+Xs(S)+"."+Xs(w)+"."+Xs(E)+"."+T,s=L1("dav1",n)}break}}return{codec:i,encrypted:o,supplemental:s}}function L1(t,e){const n=He(e,["dvvC"]),r=n.length?n[0]:He(e,["dvcC"])[0];if(r){const i=r[2]>>1&127,s=r[2]<<5&32|r[3]>>3&31;return t+"."+Xs(i)+"."+Xs(s)}}function aut(t){let e=0;for(let n=0;n<32;n++)e|=(t>>n&1)<<32-1-n;return e>>>0}function Fk(t,e){const n=e+5;for(;t[e++]&128&&e<n;);return e}function R1(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Xs(t){return(t<10?"0":"")+t}function lut(t,e){if(!t||!e)return;const n=e.keyId;n&&e.isCommonEncryption&&Vle(t,(r,i)=>{const s=r.subarray(8,24);s.some(o=>o!==0)||(dt.log(`[eme] Patching keyId in 'enc${i?"a":"v"}>sinf>>tenc' box: ${br(s)} -> ${br(n)}`),r.set(n,8))})}function cut(t){const e=[];return Vle(t,n=>e.push(n.subarray(8,24))),e}function Vle(t,e){He(t,["moov","trak"]).forEach(r=>{const i=He(r,["mdia","minf","stbl","stsd"])[0];if(!i)return;const s=i.subarray(8);let o=He(s,["enca"]);const a=o.length>0;a||(o=He(s,["encv"])),o.forEach(l=>{const c=a?l.subarray(28):l.subarray(78);He(c,["sinf"]).forEach(d=>{const f=zle(d);f&&e(f,a)})})})}function zle(t){const e=He(t,["schm"])[0];if(e){const n=wn(e.subarray(4,8));if(n==="cbcs"||n==="cenc"){const r=He(t,["schi","tenc"])[0];if(r)return r}}}function uut(t,e,n){const r={},i=He(t,["moof","traf"]);for(let s=0;s<i.length;s++){const o=i[s],a=He(o,["tfhd"])[0],l=Le(a,4),c=e[l];if(!c)continue;r[l]||(r[l]={start:NaN,duration:0,sampleCount:0,timescale:c.timescale,type:c.type});const u=r[l],d=He(o,["tfdt"])[0];if(d){const S=d[0];let w=Le(d,4);S===1&&(w===YH?n.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(w*=YH+1,w+=Le(d,8))),he(w)&&(!he(u.start)||w<u.start)&&(u.start=w)}const f=c.default,h=Le(a,0)|(f==null?void 0:f.flags);let p=(f==null?void 0:f.duration)||0;h&8&&(h&2?p=Le(a,12):p=Le(a,8));const m=He(o,["trun"]);let g=u.start||0,y=0,x=p;for(let S=0;S<m.length;S++){const w=m[S],E=Le(w,4),T=u.sampleCount;u.sampleCount+=E;const _=w[3]&1,I=w[3]&4,A=w[2]&1,L=w[2]&2,j=w[2]&4,D=w[2]&8;let O=8,$=E;for(_&&(O+=4),I&&E&&(!(w[O+1]&1)&&u.keyFrameIndex===void 0&&(u.keyFrameIndex=T),O+=4,A?(x=Le(w,O),O+=4):x=p,L&&(O+=4),D&&(O+=4),g+=x,y+=x,$--);$--;)A?(x=Le(w,O),O+=4):x=p,L&&(O+=4),j&&(w[O+1]&1||u.keyFrameIndex===void 0&&(u.keyFrameIndex=u.sampleCount-($+1),u.keyFrameStart=g),O+=4),D&&(O+=4),g+=x,y+=x;!y&&p&&(y+=p*E)}u.duration+=y}if(!Object.keys(r).some(s=>r[s].duration)){let s=1/0,o=0;const a=He(t,["sidx"]);for(let l=0;l<a.length;l++){const c=sut(a[l]);if(c!=null&&c.references){s=Math.min(s,c.earliestPresentationTime/c.timescale);const u=c.references.reduce((d,f)=>d+f.info.duration||0,0);o=Math.max(o,u+c.earliestPresentationTime/c.timescale)}}o&&he(o)&&Object.keys(r).forEach(l=>{r[l].duration||(r[l].duration=o*r[l].timescale-r[l].start)})}return r}function dut(t){const e={valid:null,remainder:null},n=He(t,["moof"]);if(n.length<2)return e.remainder=t,e;const r=n[n.length-1];return e.valid=t.slice(0,r.byteOffset-8),e.remainder=t.slice(r.byteOffset-8),e}function Qi(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function XH(t,e){const n=[],r=e.samples,i=e.timescale,s=e.id;let o=!1;return He(r,["moof"]).map(l=>{const c=l.byteOffset-8;He(l,["traf"]).map(d=>{const f=He(d,["tfdt"]).map(h=>{const p=h[0];let m=Le(h,4);return p===1&&(m*=Math.pow(2,32),m+=Le(h,8)),m/i})[0];return f!==void 0&&(t=f),He(d,["tfhd"]).map(h=>{const p=Le(h,4),m=Le(h,0)&16777215,g=(m&1)!==0,y=(m&2)!==0,x=(m&8)!==0;let S=0;const w=(m&16)!==0;let E=0;const T=(m&32)!==0;let _=8;p===s&&(g&&(_+=8),y&&(_+=4),x&&(S=Le(h,_),_+=4),w&&(E=Le(h,_),_+=4),T&&(_+=4),e.type==="video"&&(o=rT(e.codec)),He(d,["trun"]).map(I=>{const A=I[0],L=Le(I,0)&16777215,j=(L&1)!==0;let D=0;const O=(L&4)!==0,$=(L&256)!==0;let R=0;const C=(L&512)!==0;let P=0;const k=(L&1024)!==0,M=(L&2048)!==0;let B=0;const N=Le(I,4);let V=8;j&&(D=Le(I,V),V+=4),O&&(V+=4);let H=D+c;for(let W=0;W<N;W++){if($?(R=Le(I,V),V+=4):R=S,C?(P=Le(I,V),V+=4):P=E,k&&(V+=4),M&&(A===0?B=Le(I,V):B=Ble(I,V),V+=4),e.type===yt.VIDEO){let z=0;for(;z<P;){const G=Le(r,H);if(H+=4,fut(o,r[H])){const K=r.subarray(H,H+G);Y4(K,o?2:1,t+B/i,n)}H+=G,z+=G+4}}t+=R/i}}))})})}),n}function rT(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function fut(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function Y4(t,e,n,r){const i=Hle(t);let s=0;s+=e;let o=0,a=0,l=0;for(;s<i.length;){o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(l===255);a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(l===255);const c=i.length-s;let u=s;if(a<c)s+=a;else if(a>c){dt.error(`Malformed SEI payload. ${a} is too small, only ${c} bytes left to parse.`);break}if(o===4){if(i[u++]===181){const f=jle(i,u);if(u+=2,f===49){const h=Le(i,u);if(u+=4,h===1195456820){const p=i[u++];if(p===3){const m=i[u++],g=31&m,y=64&m,x=y?2+g*3:0,S=new Uint8Array(x);if(y){S[0]=m;for(let w=1;w<x;w++)S[w]=i[u++]}r.push({type:p,payloadType:o,pts:n,bytes:S})}}}}}else if(o===5&&a>16){const d=[];for(let p=0;p<16;p++){const m=i[u++].toString(16);d.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&d.push("-")}const f=a-16,h=new Uint8Array(f);for(let p=0;p<f;p++)h[p]=i[u++];r.push({payloadType:o,pts:n,uuid:d.join(""),userData:mi(h),userDataBytes:h})}}}function Hle(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const i=e-n.length,s=new Uint8Array(i);let o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),s[r]=t[o];return s}function hut(t){const e=t[0];let n="",r="",i=0,s=0,o=0,a=0,l=0,c=0;if(e===0){for(;wn(t.subarray(c,c+1))!=="\0";)n+=wn(t.subarray(c,c+1)),c+=1;for(n+=wn(t.subarray(c,c+1)),c+=1;wn(t.subarray(c,c+1))!=="\0";)r+=wn(t.subarray(c,c+1)),c+=1;r+=wn(t.subarray(c,c+1)),c+=1,i=Le(t,12),s=Le(t,16),a=Le(t,20),l=Le(t,24),c=28}else if(e===1){c+=4,i=Le(t,c),c+=4;const d=Le(t,c);c+=4;const f=Le(t,c);for(c+=4,o=2**32*d+f,zct(o)||(o=Number.MAX_SAFE_INTEGER,dt.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=Le(t,c),c+=4,l=Le(t,c),c+=4;wn(t.subarray(c,c+1))!=="\0";)n+=wn(t.subarray(c,c+1)),c+=1;for(n+=wn(t.subarray(c,c+1)),c+=1;wn(t.subarray(c,c+1))!=="\0";)r+=wn(t.subarray(c,c+1)),c+=1;r+=wn(t.subarray(c,c+1)),c+=1}const u=t.subarray(c,t.byteLength);return{schemeIdUri:n,value:r,timeScale:i,presentationTime:o,presentationTimeDelta:s,eventDuration:a,id:l,payload:u}}function put(t,...e){const n=e.length;let r=8,i=n;for(;i--;)r+=e[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(t,4),i=0,r=8;i<n;i++)s.set(e[i],r),r+=e[i].byteLength;return s}function mut(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,i;r=0,i=new Uint8Array;let s;r>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const o=new Uint8Array(4);return n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),put([112,115,115,104],new Uint8Array([r,0,0,0]),t,s,i,o,n)}function gut(t){const e=[];if(t instanceof ArrayBuffer){const n=t.byteLength;let r=0;for(;r+32<n;){const i=new DataView(t,r),s=vut(i);e.push(s),r+=s.size}}return e}function vut(t){const e=t.getUint32(0),n=t.byteOffset,r=t.byteLength;if(r<e)return{offset:n,size:r};if(t.getUint32(4)!==1886614376)return{offset:n,size:e};const s=t.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:n,size:e};const o=t.buffer,a=br(new Uint8Array(o,n+12,16));let l=null,c=null,u=0;if(s===0)u=28;else{const f=t.getUint32(28);if(!f||r<32+f*16)return{offset:n,size:e};l=[];for(let h=0;h<f;h++)l.push(new Uint8Array(o,n+32+h*16,16));u=32+f*16}if(!u)return{offset:n,size:e};const d=t.getUint32(u);return e-32<d?{offset:n,size:e}:(c=new Uint8Array(o,n+u+4,d),{version:s,systemId:a,kids:l,data:c,offset:n,size:e})}const Wle=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Fh={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Q4(t,e){const n=Fh[e];return!!n&&!!n[t.slice(0,4)]}function D0(t,e,n=!0){return!t.split(",").some(r=>!X4(r,e,n))}function X4(t,e,n=!0){var r;const i=uc(n);return(r=i==null?void 0:i.isTypeSupported(M0(t,e)))!=null?r:!1}function M0(t,e){return`${e}/mp4;codecs=${t}`}function ZH(t){if(t){const e=t.substring(0,4);return Fh.video[e]}return 2}function $w(t){const e=Wle();return t.split(",").reduce((n,r)=>{const s=e&&rT(r)?9:Fh.video[r];return s?(s*2+n)/(n?3:2):(Fh.audio[r]+n)/(n?2:1)},0)}const jk={};function yut(t,e=!0){if(jk[t])return jk[t];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let i=0;i<n.length;i++){var r;if(X4(n[i],"audio",e))return jk[t]=n[i],n[i];if(n[i]==="mp3"&&(r=uc(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return t}const xut=/flac|opus|mp4a\.40\.34/i;function Nw(t,e=!0){return t.replace(xut,n=>yut(n.toLowerCase(),e))}function but(t,e){const n=[];if(t){const r=t.split(",");for(let i=0;i<r.length;i++)Q4(r[i],"video")||n.push(r[i])}return e&&n.push(e),n.join(",")}function tb(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(JH(t,"audio")||JH(t,"video")))return t;if(e){const n=e.split(",");if(n.length>1){if(t){for(let r=n.length;r--;)if(n[r].substring(0,4)===t.substring(0,4))return n[r]}return n[0]}}return e||t}function JH(t,e){return Q4(t,e)&&X4(t,e)}function Sut(t){const e=t.split(",");for(let n=0;n<e.length;n++){const r=e[n].split(".");r.length>2&&r[0]==="avc1"&&(e[n]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function wut(t){if(t.startsWith("av01.")){const e=t.split("."),n=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=n[r-4];return e.join(".")}return t}function eW(t){const e=uc(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function IR(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const Eut={supported:!0,powerEfficient:!0,smooth:!0},_ut={supported:!1,smooth:!1,powerEfficient:!1},Gle={supported:!0,configurations:[],decodingInfoResults:[Eut]};function Kle(t,e){return{supported:!1,configurations:e,decodingInfoResults:[_ut],error:t}}function Tut(t,e,n,r,i,s){const o=t.videoCodec,a=t.audioCodec?t.audioGroups:null,l=s==null?void 0:s.audioCodec,c=s==null?void 0:s.channels,u=c?parseInt(c):l?1/0:2;let d=null;if(a!=null&&a.length)try{a.length===1&&a[0]?d=e.groups[a[0]].channels:d=a.reduce((f,h)=>{if(h){const p=e.groups[h];if(!p)throw new Error(`Audio track group ${h} not found`);Object.keys(p.channels).forEach(m=>{f[m]=(f[m]||0)+p.channels[m]})}return f},{2:0})}catch{return!0}return o!==void 0&&(o.split(",").some(f=>rT(f))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(r,30)||t.videoRange!=="SDR"&&t.videoRange!==n||t.bitrate>Math.max(i,8e6))||!!d&&he(u)&&Object.keys(d).some(f=>parseInt(f)>u)}function qle(t,e,n,r={}){const i=t.videoCodec;if(!i&&!t.audioCodec||!n)return Promise.resolve(Gle);const s=[],o=Cut(t),a=o.length,l=kut(t,e,a>0),c=l.length;for(let u=a||1*c||1;u--;){const d={type:"media-source"};if(a&&(d.video=o[u%a]),c){d.audio=l[u%c];const f=d.audio.bitrate;d.video&&f&&(d.video.bitrate-=f)}s.push(d)}if(i){const u=navigator.userAgent;if(i.split(",").some(d=>rT(d))&&Wle())return Promise.resolve(Kle(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${u})`),s))}return Promise.all(s.map(u=>{const d=Iut(u);return r[d]||(r[d]=n.decodingInfo(u))})).then(u=>({supported:!u.some(d=>!d.supported),configurations:s,decodingInfoResults:u})).catch(u=>({supported:!1,configurations:s,decodingInfoResults:[],error:u}))}function Cut(t){var e;const n=(e=t.videoCodec)==null?void 0:e.split(","),r=Yle(t),i=t.width||640,s=t.height||480,o=t.frameRate||30,a=t.videoRange.toLowerCase();return n?n.map(l=>{const c={contentType:M0(wut(l),"video"),width:i,height:s,bitrate:r,framerate:o};return a!=="sdr"&&(c.transferFunction=a),c}):[]}function kut(t,e,n){var r;const i=(r=t.audioCodec)==null?void 0:r.split(","),s=Yle(t);return i&&t.audioGroups?t.audioGroups.reduce((o,a)=>{var l;const c=a?(l=e.groups[a])==null?void 0:l.tracks:null;return c?c.reduce((u,d)=>{if(d.groupId===a){const f=parseFloat(d.channels||"");i.forEach(h=>{const p={contentType:M0(h,"audio"),bitrate:n?Put(h,s):s};f&&(p.channels=""+f),u.push(p)})}return u},o):o},[]):[]}function Put(t,e){if(e<=1)return 1;let n=128e3;return t==="ec-3"?n=768e3:t==="ac-3"&&(n=64e4),Math.min(e/2,n)}function Yle(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function Iut(t){let e="";const{audio:n,video:r}=t;if(r){const i=IR(r.contentType);e+=`${i}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(n){const i=IR(n.contentType);e+=`${r?"_":""}${i}_c${n.channels}`}return e}const AR=["NONE","TYPE-0","TYPE-1",null];function Aut(t){return AR.indexOf(t)>-1}const Fw=["SDR","PQ","HLG"];function Lut(t){return!!t&&Fw.indexOf(t)>-1}var nb={No:"",Yes:"YES",v2:"v2"};function tW(t){const{canSkipUntil:e,canSkipDateRanges:n,age:r}=t,i=r<e/2;return e&&i?n?nb.v2:nb.Yes:nb.No}class nW{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class $0{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var n;this.supplemental=e.supplemental;const r=(n=e.supplemental)==null?void 0:n.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return rW(this._audioGroups,e)}hasSubtitleGroup(e){return rW(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,n){if(n){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function rW(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function Rut(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function Out(t,e){let n=!1,r=[];if(t&&(n=t!=="SDR",r=[t]),e){r=e.allowedVideoRanges||Fw.slice(0);const i=r.join("")!=="SDR"&&!e.videoCodec;n=e.preferHDR!==void 0?e.preferHDR:i&&Rut(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const Dut=t=>{const e=new WeakSet;return(n,r)=>{if(t&&(r=t(n,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},xt=(t,e)=>JSON.stringify(t,Dut(e));function Mut(t,e,n,r,i){const s=Object.keys(t),o=r==null?void 0:r.channels,a=r==null?void 0:r.audioCodec,l=i==null?void 0:i.videoCodec,c=o&&parseInt(o)===2;let u=!1,d=!1,f=1/0,h=1/0,p=1/0,m=1/0,g=0,y=[];const{preferHDR:x,allowedVideoRanges:S}=Out(e,i);for(let I=s.length;I--;){const A=t[s[I]];u||(u=A.channels[2]>0),f=Math.min(f,A.minHeight),h=Math.min(h,A.minFramerate),p=Math.min(p,A.minBitrate),S.filter(j=>A.videoRanges[j]>0).length>0&&(d=!0)}f=he(f)?f:0,h=he(h)?h:0;const w=Math.max(1080,f),E=Math.max(30,h);p=he(p)?p:n,n=Math.max(p,n),d||(e=void 0);const T=s.length>1;return{codecSet:s.reduce((I,A)=>{const L=t[A];if(A===I)return I;if(y=d?S.filter(j=>L.videoRanges[j]>0):[],T){if(L.minBitrate>n)return Ws(A,`min bitrate of ${L.minBitrate} > current estimate of ${n}`),I;if(!L.hasDefaultAudio)return Ws(A,"no renditions with default or auto-select sound found"),I;if(a&&A.indexOf(a.substring(0,4))%5!==0)return Ws(A,`audio codec preference "${a}" not found`),I;if(o&&!c){if(!L.channels[o])return Ws(A,`no renditions with ${o} channel sound found (channels options: ${Object.keys(L.channels)})`),I}else if((!a||c)&&u&&L.channels[2]===0)return Ws(A,"no renditions with stereo sound found"),I;if(L.minHeight>w)return Ws(A,`min resolution of ${L.minHeight} > maximum of ${w}`),I;if(L.minFramerate>E)return Ws(A,`min framerate of ${L.minFramerate} > maximum of ${E}`),I;if(!y.some(j=>L.videoRanges[j]>0))return Ws(A,`no variants with VIDEO-RANGE of ${xt(y)} found`),I;if(l&&A.indexOf(l.substring(0,4))%5!==0)return Ws(A,`video codec preference "${l}" not found`),I;if(L.maxScore<g)return Ws(A,`max score of ${L.maxScore} < selected max of ${g}`),I}return I&&($w(A)>=$w(I)||L.fragmentError>t[I].fragmentError)?I:(m=L.minIndex,g=L.maxScore,A)},void 0),videoRanges:y,preferHDR:x,minFramerate:h,minBitrate:p,minIndex:m}}function Ws(t,e){dt.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function Qle(t){return t.reduce((e,n)=>{let r=e.groups[n.groupId];r||(r=e.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const i=n.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function $ut(t,e,n,r){return t.slice(n,r+1).reduce((i,s,o)=>{if(!s.codecSet)return i;const a=s.audioGroups;let l=i[s.codecSet];l||(i[s.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:o,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,s.bitrate);const c=Math.min(s.height,s.width);return l.minHeight=Math.min(l.minHeight,c),l.minFramerate=Math.min(l.minFramerate,s.frameRate),l.minIndex=Math.min(l.minIndex,o),l.maxScore=Math.max(l.maxScore,s.score),l.fragmentError+=s.fragmentError,l.videoRanges[s.videoRange]=(l.videoRanges[s.videoRange]||0)+1,a&&a.forEach(u=>{if(!u)return;const d=e.groups[u];d&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(f=>{l.channels[f]=(l.channels[f]||0)+d.channels[f]}))}),i},{})}function iW(t){if(!t)return t;const{lang:e,assocLang:n,characteristics:r,channels:i,audioCodec:s}=t;return{lang:e,assocLang:n,characteristics:r,channels:i,audioCodec:s}}function ho(t,e,n){if("attrs"in t){const r=e.indexOf(t);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(gu(t,i,n))return r}return-1}function gu(t,e,n){const{groupId:r,name:i,lang:s,assocLang:o,default:a}=t,l=t.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(s===void 0||Nut(s,e.lang))&&(s===void 0||e.assocLang===o)&&(a===void 0||e.default===a)&&(l===void 0||e.forced===l)&&(!("characteristics"in t)||Fut(t.characteristics||"",e.characteristics))&&(n===void 0||n(t,e))}function Nut(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function Fut(t,e=""){const n=t.split(","),r=e.split(",");return n.length===r.length&&!n.some(i=>r.indexOf(i)===-1)}function Gc(t,e){const{audioCodec:n,channels:r}=t;return(n===void 0||(e.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function jut(t,e,n,r,i){const s=e[r],a=e.reduce((f,h,p)=>{const m=h.uri;return(f[m]||(f[m]=[])).push(p),f},{})[s.uri];a.length>1&&(r=Math.max.apply(Math,a));const l=s.videoRange,c=s.frameRate,u=s.codecSet.substring(0,4),d=sW(e,r,f=>{if(f.videoRange!==l||f.frameRate!==c||f.codecSet.substring(0,4)!==u)return!1;const h=f.audioGroups,p=n.filter(m=>!h||h.indexOf(m.groupId)!==-1);return ho(t,p,i)>-1});return d>-1?d:sW(e,r,f=>{const h=f.audioGroups,p=n.filter(m=>!h||h.indexOf(m.groupId)!==-1);return ho(t,p,i)>-1})}function sW(t,e,n){for(let r=e;r>-1;r--)if(n(t[r]))return r;for(let r=e+1;r<t.length;r++)if(n(t[r]))return r;return-1}function jw(t,e){var n;return!!t&&t!==((n=e.loadLevelObj)==null?void 0:n.uri)}class But extends Zi{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=n=>{var r;const{fragCurrent:i,partCurrent:s,hls:o}=this,{autoLevelEnabled:a,media:l}=o;if(!i||!l)return;const c=performance.now(),u=s?s.stats:i.stats,d=s?s.duration:i.duration,f=c-u.loading.start,h=o.minAutoLevel,p=i.level,m=this._nextAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||p<=h){this.clearTimer(),this._nextAutoLevel=-1;return}if(!a)return;const g=m>-1&&m!==p,y=!!n||g;if(!y&&(l.paused||!l.playbackRate||!l.readyState))return;const x=o.mainForwardBufferInfo;if(!y&&x===null)return;const S=this.bwEstimator.getEstimateTTFB(),w=Math.abs(l.playbackRate);if(f<=Math.max(S,1e3*(d/(w*2))))return;const E=x?x.len/w:0,T=u.loading.first?u.loading.first-u.loading.start:-1,_=u.loaded&&T>-1,I=this.getBwEstimate(),A=o.levels,L=A[p],j=Math.max(u.loaded,Math.round(d*(i.bitrate||L.averageBitrate)/8));let D=_?f-T:f;D<1&&_&&(D=Math.min(f,u.loaded*8/I));const O=_?u.loaded*1e3/D:0,$=S/1e3,R=O?(j-u.loaded)/O:j*8/I+$;if(R<=E)return;const C=O?O*8:I,P=((r=(n==null?void 0:n.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,k=this.hls.config.abrBandWidthUpFactor;let M=Number.POSITIVE_INFINITY,B;for(B=p-1;B>h;B--){const W=A[B].maxBitrate,z=!A[B].details||P;if(M=this.getTimeToLoadFrag($,C,d*W,z),M<Math.min(E,d+$))break}if(M>=R||M>d*10)return;_?this.bwEstimator.sample(f-Math.min(S,T),u.loaded):this.bwEstimator.sampleTTFB(f);const N=A[B].maxBitrate;this.getBwEstimate()*k>N&&this.resetEstimator(N);const V=this.findBestLevel(N,h,B,0,E,1,1);V>-1&&(B=V),this.warn(`Fragment ${i.sn}${s?" part "+s.index:""} of level ${p} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${E.toFixed(3)} s
      Estimated load time for current fragment: ${R.toFixed(3)} s
      Estimated load time for down switch fragment: ${M.toFixed(3)} s
      TTFB estimate: ${T|0} ms
      Current BW estimate: ${he(I)?I|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${B} @ ${N|0} bps`),o.nextLoadLevel=o.nextAutoLevel=B,this.clearTimer();const H=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===B&&B>0){const W=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${B>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${W.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,B>h){let z=this.findBestLevel(this.hls.levels[h].bitrate,h,B,0,W,1,1);z===-1&&(z=h),this.hls.nextLoadLevel=this.hls.nextAutoLevel=z,this.resetEstimator(this.hls.levels[z].bitrate)}}};g||R>M*2?H():this.timer=self.setInterval(H,M*1e3),o.trigger(F.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:s,stats:u})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Wct(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.FRAG_LOADING,this.onFragLoading,this),e.on(F.FRAG_LOADED,this.onFragLoaded,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this),e.on(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(F.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.FRAG_LOADING,this.onFragLoading,this),e.off(F.FRAG_LOADED,this.onFragLoaded,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this),e.off(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(F.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(F.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=n.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,n){this.clearTimer()}onError(e,n){if(!n.fatal)switch(n.details){case Y.BUFFER_ADD_CODEC_ERROR:case Y.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Y.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:i,partCurrent:s}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const o=performance.now(),a=s?s.stats:r.stats,l=o-a.loading.start,c=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,c),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,n,r,i){const s=e+r/n,o=i?e+this.lastLevelLoadSec:0;return s+o}onLevelLoaded(e,n){const r=this.hls.config,{loading:i}=n.stats,s=i.end-i.first;he(s)&&(this.lastLevelLoadSec=s/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(n.levelInfo)}onFragLoaded(e,{frag:n,part:r}){const i=r?r.stats:n.stats;if(n.type===ge.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=r?r.duration:n.duration,o=this.hls.levels[n.level],a=(o.loaded?o.loaded.bytes:0)+i.loaded,l=(o.loaded?o.loaded.duration:0)+s;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(n.bitrateTest){const s={stats:i,frag:n,part:r,id:n.type};this.onFragBuffered(F.FRAG_BUFFERED,s),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(e,n){const{frag:r,part:i}=n,s=i!=null&&i.stats.loaded?i.stats:r.stats;if(s.aborted||this.ignoreFragment(r))return;const o=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,s.loaded),s.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ge.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(r,n,e,0,i,1,1);if(s>-1)return s;const o=this.hls.firstLevel,a=Math.min(Math.max(o,n),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${o} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const o=this.hls.levels;if(o.length>Math.max(e,s)&&o[e].loadError<=o[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:i,config:s,minAutoLevel:o}=r,a=n?n.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(c){const g=this.findBestLevel(l,o,i,c,0,u,d);if(g>=0)return this.rebufferNotice=-1,g}let f=a?Math.min(a,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const g=this.bitrateTestDelay;g&&(f=(a?Math.min(a,s.maxLoadingDelay):s.maxLoadingDelay)-g,this.info(`bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),u=d=1)}const h=this.findBestLevel(l,o,i,c,f,u,d);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const p=r.levels[o],m=r.loadLevelObj;return m&&(p==null?void 0:p.bitrate)<m.bitrate?o:r.loadLevel}getStarvationDelay(){const e=this.hls,n=e.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,n,r,i,s,o,a){var l;const c=i+s,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:f,partCurrent:h}=this,{levels:p,allAudioTracks:m,loadLevel:g,config:y}=this.hls;if(p.length===1)return 0;const x=p[d],S=!!((l=this.hls.latestLevelDetails)!=null&&l.live),w=g===-1||u===-1;let E,T="SDR",_=(x==null?void 0:x.frameRate)||0;const{audioPreference:I,videoPreference:A}=y,L=this.audioTracksByGroup||(this.audioTracksByGroup=Qle(m));let j=-1;if(w){if(this.firstSelection!==-1)return this.firstSelection;const C=this.codecTiers||(this.codecTiers=$ut(p,L,n,r)),P=Mut(C,T,e,I,A),{codecSet:k,videoRanges:M,minFramerate:B,minBitrate:N,minIndex:V,preferHDR:H}=P;j=V,E=k,T=H?M[M.length-1]:M[0],_=B,e=Math.max(e,N),this.log(`picked start tier ${xt(P)}`)}else E=x==null?void 0:x.codecSet,T=x==null?void 0:x.videoRange;const D=h?h.duration:f?f.duration:0,O=this.bwEstimator.getEstimateTTFB()/1e3,$=[];for(let C=r;C>=n;C--){var R;const P=p[C],k=C>d;if(!P)continue;if(y.useMediaCapabilities&&!P.supportedResult&&!P.supportedPromise){const z=navigator.mediaCapabilities;typeof(z==null?void 0:z.decodingInfo)=="function"&&Tut(P,L,T,_,e,I)?(P.supportedPromise=qle(P,L,z,this.supportedCache),P.supportedPromise.then(G=>{if(!this.hls)return;P.supportedResult=G;const K=this.hls.levels,Q=K.indexOf(P);G.error?this.warn(`MediaCapabilities decodingInfo error: "${G.error}" for level ${Q} ${xt(G)}`):G.supported?G.decodingInfoResults.some(ne=>ne.smooth===!1||ne.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Q} not smooth or powerEfficient: ${xt(G)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Q} ${xt(G)}`),Q>-1&&K.length>1&&(this.log(`Removing unsupported level ${Q}`),this.hls.removeLevel(Q),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(G=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${G}`)})):P.supportedResult=Gle}if((E&&P.codecSet!==E||T&&P.videoRange!==T||k&&_>P.frameRate||!k&&_>0&&_<P.frameRate||(R=P.supportedResult)!=null&&(R=R.decodingInfoResults)!=null&&R.some(z=>z.smooth===!1))&&(!w||C!==j)){$.push(C);continue}const M=P.details,B=(h?M==null?void 0:M.partTarget:M==null?void 0:M.averagetargetduration)||D;let N;k?N=a*e:N=o*e;const V=D&&i>=D*2&&s===0?P.averageBitrate:P.maxBitrate,H=this.getTimeToLoadFrag(O,N,V*B,M===void 0);if(N>=V&&(C===u||P.loadError===0&&P.fragmentError===0)&&(H<=O||!he(H)||S&&!this.bitrateTestDelay||H<c)){const z=this.forcedAutoLevel;return C!==g&&(z===-1||z!==g)&&($.length&&this.trace(`Skipped level(s) ${$.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${p[$[0]].codecs}" ${p[$[0]].videoRange}; not compatible with "${E}" ${T}`),this.info(`switch candidate:${d}->${C} adjustedbw(${Math.round(N)})-bitrate=${Math.round(N-V)} ttfb:${O.toFixed(1)} avgDuration:${B.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${H.toFixed(1)} firstSelection:${w} codecSet:${P.codecSet} videoRange:${P.videoRange} hls.loadLevel:${g}`)),w&&(this.firstSelection=C),C}}return-1}set nextAutoLevel(e){const n=this.deriveNextAutoLevel(e);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n)}deriveNextAutoLevel(e){const{maxAutoLevel:n,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),n)}}const Xle={search:function(t,e){let n=0,r=t.length-1,i=null,s=null;for(;n<=r;){i=(n+r)/2|0,s=t[i];const o=e(s);if(o>0)n=i+1;else if(o<0)r=i-1;else return s}return null}};function Uut(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!he(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const i=t[t.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let s=0;s<t.length;++s){const o=t[s];if(zut(e,n,o))return o}return null}function Hu(t,e,n=0,r=0,i=.005){let s=null;if(t){s=e[1+t.sn-e[0].sn]||null;const a=t.endDTS-n;a>0&&a<15e-7&&(n+=15e-7),s&&t.level!==s.level&&s.end<=t.end&&(s=e[2+t.sn-e[0].sn]||null)}else n===0&&e[0].start===0&&(s=e[0]);if(s&&((!t||t.level===s.level)&&oW(n,r,s)===0||Vut(s,t,Math.min(i,r))))return s;const o=Xle.search(e,oW.bind(null,n,r));return o&&(o!==t||!s)?o:s}function Vut(t,e,n){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),n);return t.start<=r}return!1}function oW(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function zut(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function Zle(t,e,n){if(t&&t.startCC<=e&&t.endCC>=e){let r=t.fragments;const{fragmentHint:i}=t;i&&(r=r.concat(i));let s;return Xle.search(r,o=>o.cc<e?1:o.cc>e?-1:(s=o,o.end<=n?1:o.start>n?-1:0)),s||null}return null}function Bw(t){switch(t.details){case Y.FRAG_LOAD_TIMEOUT:case Y.KEY_LOAD_TIMEOUT:case Y.LEVEL_LOAD_TIMEOUT:case Y.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Jle(t){return t.details.startsWith("key")}function ece(t){return Jle(t)&&!!t.frag&&!t.frag.decryptdata}function aW(t,e){const n=Bw(e);return t.default[`${n?"timeout":"error"}Retry`]}function Z4(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function lW(t){return ct(ct({},t),{errorRetry:null,timeoutRetry:null})}function Uw(t,e,n,r){if(!t)return!1;const i=r==null?void 0:r.code,s=e<t.maxNumRetry&&(Hut(i)||!!n);return t.shouldRetry?t.shouldRetry(t,e,n,r,s):s}function Hut(t){return LR(t)||!!t&&(t<400||t>499)}function LR(t){return t===0&&navigator.onLine===!1}var Vn={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},ri={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4,SwitchToSDR:8};class Wut extends Zi{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(F.ERROR,this.onError,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(F.ERROR,this.onError,this),e.off(F.ERROR,this.onErrorOut,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===ge.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const n=this.hls,r=n.currentLevel;return(e=n.loadLevelObj)!=null&&e.details||r===-1?n.loadLevel:r}variantHasKey(e,n){if(e){var r;if((r=e.details)!=null&&r.hasKey(n))return!0;const i=e.audioGroups;if(i)return this.hls.allAudioTracks.filter(o=>i.indexOf(o.groupId)>=0).some(o=>{var a;return(a=o.details)==null?void 0:a.hasKey(n)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,n){var r;if(n.fatal)return;const i=this.hls,s=n.context;switch(n.details){case Y.FRAG_LOAD_ERROR:case Y.FRAG_LOAD_TIMEOUT:case Y.KEY_LOAD_ERROR:case Y.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case Y.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction=Zf();return}case Y.FRAG_GAP:case Y.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=Vn.SendAlternateToPenaltyBox;return}case Y.LEVEL_EMPTY_ERROR:case Y.LEVEL_PARSING_ERROR:{var o;const l=n.parent===ge.MAIN?n.level:i.loadLevel;n.details===Y.LEVEL_EMPTY_ERROR&&((o=n.context)!=null&&(o=o.levelDetails)!=null&&o.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,l):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,l))}return;case Y.LEVEL_LOAD_ERROR:case Y.LEVEL_LOAD_TIMEOUT:typeof(s==null?void 0:s.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,s.level));return;case Y.AUDIO_TRACK_LOAD_ERROR:case Y.AUDIO_TRACK_LOAD_TIMEOUT:case Y.SUBTITLE_LOAD_ERROR:case Y.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const l=i.loadLevelObj;if(l&&(s.type===We.AUDIO_TRACK&&l.hasAudioGroup(s.groupId)||s.type===We.SUBTITLE_TRACK&&l.hasSubtitleGroup(s.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,i.loadLevel),n.errorAction.action=Vn.SendAlternateToPenaltyBox,n.errorAction.flags=ri.MoveAllAlternatesMatchingHost;return}}return;case Y.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:n.errorAction={action:Vn.SendAlternateToPenaltyBox,flags:ri.MoveAllAlternatesMatchingHDCP};return;case Y.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Y.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Y.KEY_SYSTEM_NO_SESSION:n.errorAction={action:Vn.SendAlternateToPenaltyBox,flags:ri.MoveAllAlternatesMatchingKey};return;case Y.BUFFER_ADD_CODEC_ERROR:case Y.REMUX_ALLOC_ERROR:case Y.BUFFER_APPEND_ERROR:if(!n.errorAction){var a;n.errorAction=this.getLevelSwitchAction(n,(a=n.level)!=null?a:i.loadLevel)}return;case Y.INTERNAL_EXCEPTION:case Y.BUFFER_APPENDING_ERROR:case Y.BUFFER_FULL_ERROR:case Y.LEVEL_SWITCH_ERROR:case Y.BUFFER_STALLED_ERROR:case Y.BUFFER_SEEK_OVER_HOLE:case Y.BUFFER_NUDGE_ON_STALL:n.errorAction=Zf();return}n.type===Se.KEY_SYSTEM_ERROR&&(n.levelRetry=!1,n.errorAction=Zf())}getPlaylistRetryOrSwitchAction(e,n){const r=this.hls,i=aW(r.config.playlistLoadPolicy,e),s=this.playlistError++;if(Uw(i,s,Bw(e),e.response))return{action:Vn.RetryRequest,flags:ri.None,retryConfig:i,retryCount:s};const a=this.getLevelSwitchAction(e,n);return i&&(a.retryConfig=i,a.retryCount=s),a}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),i=n.levels[r],{fragLoadPolicy:s,keyLoadPolicy:o}=n.config,a=aW(Jle(e)?o:s,e),l=n.levels.reduce((u,d)=>u+d.fragmentError,0);if(i&&(e.details!==Y.FRAG_GAP&&i.fragmentError++,!ece(e)&&Uw(a,l,Bw(e),e.response)))return{action:Vn.RetryRequest,flags:ri.None,retryConfig:a,retryCount:l};const c=this.getLevelSwitchAction(e,r);return a&&(c.retryConfig=a,c.retryCount=l),c}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const i=this.hls.levels[n];if(i){var s,o;const c=e.details;i.loadError++,c===Y.BUFFER_APPEND_ERROR&&i.fragmentError++;let u=-1;const{levels:d,loadLevel:f,minAutoLevel:h,maxAutoLevel:p}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const m=(s=e.frag)==null?void 0:s.type,y=(m===ge.AUDIO&&c===Y.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===Y.BUFFER_ADD_CODEC_ERROR||c===Y.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:T})=>i.audioCodec!==T),S=e.sourceBufferName==="video"&&(c===Y.BUFFER_ADD_CODEC_ERROR||c===Y.BUFFER_APPEND_ERROR)&&d.some(({codecSet:T,audioCodec:_})=>i.codecSet!==T&&i.audioCodec===_),{type:w,groupId:E}=(o=e.context)!=null?o:{};for(let T=d.length;T--;){const _=(T+f)%d.length;if(_!==f&&_>=h&&_<=p&&d[_].loadError===0){var a,l;const I=d[_];if(c===Y.FRAG_GAP&&m===ge.MAIN&&e.frag){const A=d[_].details;if(A){const L=Hu(e.frag,A.fragments,e.frag.start);if(L!=null&&L.gap)continue}}else{if(w===We.AUDIO_TRACK&&I.hasAudioGroup(E)||w===We.SUBTITLE_TRACK&&I.hasSubtitleGroup(E))continue;if(m===ge.AUDIO&&(a=i.audioGroups)!=null&&a.some(A=>I.hasAudioGroup(A))||m===ge.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(A=>I.hasSubtitleGroup(A))||y&&i.audioCodec===I.audioCodec||S&&i.codecSet===I.codecSet||!y&&i.codecSet!==I.codecSet)continue}u=_;break}}if(u>-1&&r.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:Vn.SendAlternateToPenaltyBox,flags:ri.None,nextAutoLevel:u}}return{action:Vn.SendAlternateToPenaltyBox,flags:ri.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case Vn.DoNothing:break;case Vn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==Y.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:i}=r,s=r.nextAutoLevel;switch(i){case ri.None:this.switchLevel(e,s);break;case ri.MoveAllAlternatesMatchingHDCP:{const l=this.getVariantLevelIndex(e.frag),c=n.levels[l],u=c==null?void 0:c.attrs["HDCP-LEVEL"];if(r.hdcpLevel=u,u==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(u){n.maxHdcpLevel=AR[AR.indexOf(u)-1],r.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}}case ri.MoveAllAlternatesMatchingKey:{const l=e.decryptdata;if(l){const c=this.hls.levels,u=c.length;for(let f=u;f--;)if(this.variantHasKey(c[f],l)){var o,a;this.log(`Banned key found in level ${f} (${c[f].bitrate}bps) or audio group "${(o=c[f].audioGroups)==null?void 0:o.join(",")}" (${(a=e.frag)==null?void 0:a.type} fragment) ${br(l.keyId||[])}`),c[f].fragmentError++,c[f].loadError++,this.log(`Removing level ${f} with key error (${e.error})`),this.hls.removeLevel(f)}const d=e.frag;if(this.hls.levels.length<u)r.resolved=!0;else if(d&&d.type!==ge.MAIN){const f=d.decryptdata;f&&!l.matches(f)&&(r.resolved=!0)}}break}}r.resolved||this.switchLevel(e,s)}switchLevel(e,n){if(n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Y.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=IR(e.mimeType),i=this.hls.levels;for(let s=i.length;s--;)i[s][`${e.sourceBufferName}Codec`]===r&&(this.log(`Removing level ${s} for ${e.details} ("${r}" not supported)`),this.hls.removeLevel(s))}}}function Zf(t){const e={action:Vn.DoNothing,flags:ri.None};return t&&(e.resolved=!0),e}var _n={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Gut{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.BUFFER_APPENDED,this.onBufferAppended,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this),e.on(F.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.BUFFER_APPENDED,this.onBufferAppended,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this),e.off(F.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let i=r.length;i--;){const s=r[i];if(!s)break;if(s.start<=e&&e<=s.end&&s.loaded)return s}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){return this.getFragAtPos(e,n,!0)}getFragAtPos(e,n,r){const{fragments:i}=this,s=Object.keys(i);for(let o=s.length;o--;){const a=i[s[o]];if((a==null?void 0:a.body.type)===n&&(!r||a.buffered)){const l=a.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,n,r,i,s){this.timeRanges&&(this.timeRanges[e]=n);const o=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const l=this.fragments[a];if(!l||o>=l.body.sn)return;if(!l.buffered&&(!l.loaded||s)){l.body.type===r&&this.removeFragment(l.body);return}const c=l.range[e];if(c){if(c.time.length===0){this.removeFragment(l.body);return}c.time.some(u=>{const d=!this.isTimeBuffered(u.startPTS,u.endPTS,n);return d&&this.removeFragment(l.body),d})}})}detectPartialFragments(e){const n=this.timeRanges;if(!n||e.frag.sn==="initSegment")return;const r=e.frag,i=Fd(r),s=this.fragments[i];if(!s||s.buffered&&r.gap)return;const o=!r.relurl;Object.keys(n).forEach(a=>{const l=r.elementaryStreams[a];if(!l)return;const c=n[a],u=o||l.partial===!0;s.range[a]=this.getBufferedTimes(r,e.part,u,c)}),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,(s.body.endList=r.endList||s.body.endList)&&(this.endListFragments[s.body.type]=s),O1(s)||this.removeParts(r.sn-1,r.type)):this.removeFragment(s.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=cW(r,i=>i.fragment.sn>=e))}fragBuffered(e,n){const r=Fd(e);let i=this.fragments[r];!i&&n&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,n,r,i){const s={time:[],partial:r},o=e.start,a=e.end,l=e.minEndPTS||a,c=e.maxStartPTS||o;for(let u=0;u<i.length;u++){const d=i.start(u)-this.bufferPadding,f=i.end(u)+this.bufferPadding;if(c>=d&&l<=f){s.time.push({startPTS:Math.max(o,i.start(u)),endPTS:Math.min(a,i.end(u))});break}else if(o<f&&a>d){const h=Math.max(o,i.start(u)),p=Math.min(a,i.end(u));p>h&&(s.partial=!0,s.time.push({startPTS:h,endPTS:p}))}else if(a<=d)break}return s}getPartialFragment(e){let n=null,r,i,s,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&O1(u)&&(i=u.body.start-a,s=u.body.end+a,e>=i&&e<=s&&(r=Math.min(e-i,s-e),o<=r&&(n=u.body,o=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||O1(n))}getState(e){const n=Fd(e),r=this.fragments[n];return r?r.buffered?O1(r)?_n.PARTIAL:_n.OK:_n.APPENDING:_n.NOT_LOADED}isTimeBuffered(e,n,r){let i,s;for(let o=0;o<r.length;o++){if(i=r.start(o)-this.bufferPadding,s=r.end(o)+this.bufferPadding,e>=i&&n<=s)return!0;if(n<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,n){if(n.frag.sn==="initSegment"||n.frag.bitrateTest)return;const r=n.frag,i=n.part?null:n,s=Fd(r);this.fragments[s]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:i,timeRanges:s,type:o}=n;if(r.sn==="initSegment")return;const a=r.type;if(i){let c=this.activePartLists[a];c||(this.activePartLists[a]=c=[]),c.push(i)}this.timeRanges=s;const l=s[o];this.detectEvictedFragments(o,l,a,i)}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=Fd(e);return!!this.fragments[n]}hasFragments(e){const{fragments:n}=this,r=Object.keys(n);if(!e)return r.length>0;for(let i=r.length;i--;){const s=n[r[i]];if((s==null?void 0:s.body.type)===e)return!0}return!1}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==r||i&&!l.gap||l.start<n&&l.end>e&&(a.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const n=Fd(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=cW(r,s=>s.fragment.sn!==i)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const n=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;n&&n.forEach(r=>r.clearElementaryStreamInfo())}}function O1(t){var e,n,r;return t.buffered&&!!(t.body.gap||(e=t.range.video)!=null&&e.partial||(n=t.range.audio)!=null&&n.partial||(r=t.range.audiovideo)!=null&&r.partial)}function Fd(t){return`${t.type}_${t.level}_${t.sn}`}function cW(t,e){return t.filter(n=>{const r=e(n);return r||n.clearElementaryStreamInfo(),r})}var dc={cbc:0,ctr:1};class Kut{constructor(e,n,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=n,this.aesMode=r}decrypt(e,n){switch(this.aesMode){case dc.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e);case dc.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},n,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function qut(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?t.slice(0,e-n):t}class Yut{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=n.getUint32(i*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,i=r[0],s=r[1],o=r[2],a=r[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],f=l[3],h=new Uint32Array(256);let p=0,m=0,g=0;for(g=0;g<256;g++)g<128?h[g]=g<<1:h[g]=g<<1^283;for(g=0;g<256;g++){let y=m^m<<1^m<<2^m<<3^m<<4;y=y>>>8^y&255^99,e[p]=y,n[y]=p;const x=h[p],S=h[x],w=h[S];let E=h[y]*257^y*16843008;i[p]=E<<24|E>>>8,s[p]=E<<16|E>>>16,o[p]=E<<8|E>>>24,a[p]=E,E=w*16843009^S*65537^x*257^p*16843008,c[y]=E<<24|E>>>8,u[y]=E<<16|E>>>16,d[y]=E<<8|E>>>24,f[y]=E,p?(p=x^h[h[h[w^x]]],m^=h[h[m]]):p=m=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<n.length&&r;)r=n[i]===this.key[i],i++;if(r)return;this.key=n;const s=this.keySize=n.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const o=this.ksRows=(s+6+1)*4;let a,l;const c=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),d=this.sBox,f=this.rcon,h=this.invSubMix,p=h[0],m=h[1],g=h[2],y=h[3];let x,S;for(a=0;a<o;a++){if(a<s){x=c[a]=n[a];continue}S=x,a%s===0?(S=S<<8|S>>>24,S=d[S>>>24]<<24|d[S>>>16&255]<<16|d[S>>>8&255]<<8|d[S&255],S^=f[a/s|0]<<24):s>6&&a%s===4&&(S=d[S>>>24]<<24|d[S>>>16&255]<<16|d[S>>>8&255]<<8|d[S&255]),c[a]=x=(c[a-s]^S)>>>0}for(l=0;l<o;l++)a=o-l,l&3?S=c[a]:S=c[a-4],l<4||a<=4?u[l]=S:u[l]=p[d[S>>>24]]^m[d[S>>>16&255]]^g[d[S>>>8&255]]^y[d[S&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const i=this.keySize+6,s=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],c=a[1],u=a[2],d=a[3],f=this.uint8ArrayToUint32Array_(r);let h=f[0],p=f[1],m=f[2],g=f[3];const y=new Int32Array(e),x=new Int32Array(y.length);let S,w,E,T,_,I,A,L,j,D,O,$,R,C;const P=this.networkToHostOrderSwap;for(;n<y.length;){for(j=P(y[n]),D=P(y[n+1]),O=P(y[n+2]),$=P(y[n+3]),_=j^s[0],I=$^s[1],A=O^s[2],L=D^s[3],R=4,C=1;C<i;C++)S=l[_>>>24]^c[I>>16&255]^u[A>>8&255]^d[L&255]^s[R],w=l[I>>>24]^c[A>>16&255]^u[L>>8&255]^d[_&255]^s[R+1],E=l[A>>>24]^c[L>>16&255]^u[_>>8&255]^d[I&255]^s[R+2],T=l[L>>>24]^c[_>>16&255]^u[I>>8&255]^d[A&255]^s[R+3],_=S,I=w,A=E,L=T,R=R+4;S=o[_>>>24]<<24^o[I>>16&255]<<16^o[A>>8&255]<<8^o[L&255]^s[R],w=o[I>>>24]<<24^o[A>>16&255]<<16^o[L>>8&255]<<8^o[_&255]^s[R+1],E=o[A>>>24]<<24^o[L>>16&255]<<16^o[_>>8&255]<<8^o[I&255]^s[R+2],T=o[L>>>24]<<24^o[_>>16&255]<<16^o[I>>8&255]<<8^o[A&255]^s[R+3],x[n]=P(S^h),x[n+1]=P(T^p),x[n+2]=P(E^m),x[n+3]=P(w^g),h=j,p=D,m=O,g=$,n=n+4}return x.buffer}}class Qut{constructor(e,n,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=n,this.aesMode=r}expandKey(){const e=Xut(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function Xut(t){switch(t){case dc.cbc:return"AES-CBC";case dc.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const Zut=16;class J4{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?qut(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r,i){return this.useSoftware?new Promise((s,o)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,n,r,i);const l=this.flush();l?s(l.buffer):o(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r,i)}softwareDecrypt(e,n,r,i){const{currentIV:s,currentResult:o,remainderData:a}=this;if(i!==dc.cbc||n.byteLength!==16)return dt.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=Qi(a,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;s&&(r=s);let c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new Yut),c.expandKey(n);const u=o;return this.currentResult=c.decrypt(l.buffer,0,r),this.currentIV=l.slice(-16).buffer,u||null}webCryptoDecrypt(e,n,r,i){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,n,r,i));this.key=n,this.fastAesKey=new Qut(this.subtle,n,i)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Kut(this.subtle,new Uint8Array(r),i).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(dt.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,n,r,i)))}onWebCryptoError(e,n,r,i){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r,i);const o=this.flush();if(o)return o.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%Zut;return r!==e.length&&(n=e.slice(0,r),this.remainderData=e.slice(r)),n}logOnce(e){this.logEnabled&&(dt.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const uW=Math.pow(2,17);class Jut{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new Go({type:Se.NETWORK_ERROR,details:Y.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,o=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){l(fW(e));return}else e.gap=!1;const c=this.loader=s?new s(i):new o(i),u=dW(e);e.loader=c;const d=lW(i.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:uW};e.stats=c.stats;const h={onSuccess:(p,m,g,y)=>{this.resetLoader(e,c);let x=p.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(x.slice(0,16)),x=x.slice(16)),a({frag:e,part:null,payload:x,networkDetails:y})},onError:(p,m,g,y)=>{this.resetLoader(e,c),l(new Go({type:Se.NETWORK_ERROR,details:Y.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:ct({url:r,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:g,stats:y}))},onAbort:(p,m,g)=>{this.resetLoader(e,c),l(new Go({type:Se.NETWORK_ERROR,details:Y.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:p}))},onTimeout:(p,m,g)=>{this.resetLoader(e,c),l(new Go({type:Se.NETWORK_ERROR,details:Y.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:p}))}};n&&(h.onProgress=(p,m,g,y)=>n({frag:e,part:null,payload:g,networkDetails:y})),c.load(u,f,h)})}loadPart(e,n,r){this.abort();const i=this.config,s=i.fLoader,o=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){l(fW(e,n));return}const c=this.loader=s?new s(i):new o(i),u=dW(e,n);e.loader=c;const d=lW(i.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:uW};n.stats=c.stats,c.load(u,f,{onSuccess:(h,p,m,g)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,n);const y={frag:e,part:n,payload:h.data,networkDetails:g};r(y),a(y)},onError:(h,p,m,g)=>{this.resetLoader(e,c),l(new Go({type:Se.NETWORK_ERROR,details:Y.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:ct({url:u.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:m,stats:g}))},onAbort:(h,p,m)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,c),l(new Go({type:Se.NETWORK_ERROR,details:Y.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:m,stats:h}))},onTimeout:(h,p,m)=>{this.resetLoader(e,c),l(new Go({type:Se.NETWORK_ERROR,details:Y.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:m,stats:h}))}})})}updateStatsFromPart(e,n){const r=e.stats,i=n.stats,s=i.total;if(r.loaded+=i.loaded,s){const l=Math.round(e.duration/n.duration),c=Math.min(Math.round(r.loaded/s),l),d=(l-c)*Math.round(r.loaded/c);r.total=r.loaded+d}else r.total=Math.max(r.loaded,r.total);const o=r.loading,a=i.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function dW(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},i=n.byteRangeStartOffset,s=n.byteRangeEndOffset;if(he(i)&&he(s)){var o;let a=i,l=s;if(t.sn==="initSegment"&&edt((o=t.decryptdata)==null?void 0:o.method)){const c=s-i;c%16&&(l=s+(16-c%16)),i!==0&&(r.resetIV=!0,a=i-16)}r.rangeStart=a,r.rangeEnd=l}return r}function fW(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:Se.MEDIA_ERROR,details:Y.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new Go(r)}function edt(t){return t==="AES-128"||t==="AES-256"}class Go extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class tce extends Zi{constructor(e,n){super(e,n),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class e5{constructor(e,n,r,i=0,s=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=D1(),this.buffering={audio:D1(),video:D1(),audiovideo:D1()},this.level=e,this.sn=n,this.id=r,this.size=i,this.part=s,this.partial=o}}function D1(){return{start:0,executeStart:0,executeEnd:0,end:0}}const hW={length:0,start:()=>0,end:()=>0};class Re{static isBuffered(e,n){if(e){const r=Re.getBuffered(e);for(let i=r.length;i--;)if(n>=r.start(i)&&n<=r.end(i))return!0}return!1}static bufferedRanges(e){if(e){const n=Re.getBuffered(e);return Re.timeRangesToArray(n)}return[]}static timeRangesToArray(e){const n=[];for(let r=0;r<e.length;r++)n.push({start:e.start(r),end:e.end(r)});return n}static bufferInfo(e,n,r){if(e){const i=Re.bufferedRanges(e);if(i.length)return Re.bufferedInfo(i,n,r)}return{len:0,start:n,end:n,bufferedIndex:-1}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.length>1&&e.sort((u,d)=>u.start-d.start||d.end-u.end);let i=-1,s=[];if(r)for(let u=0;u<e.length;u++){n>=e[u].start&&n<=e[u].end&&(i=u);const d=s.length;if(d){const f=s[d-1].end;e[u].start-f<r?e[u].end>f&&(s[d-1].end=e[u].end):s.push(e[u])}else s.push(e[u])}else s=e;let o=0,a,l=n,c=n;for(let u=0;u<s.length;u++){const d=s[u].start,f=s[u].end;if(i===-1&&n>=d&&n<=f&&(i=u),n+r>=d&&n<f)l=d,c=f,o=c-n;else if(n+r<d){a=d;break}}return{len:o,start:l||0,end:c||0,nextStart:a,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||hW}catch(n){return dt.log("failed to get media.buffered",n),hW}}}const nce=/\{\$([a-zA-Z0-9-_]+)\}/g;function pW(t){return nce.test(t)}function RR(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(nce,r=>{const i=r.substring(2,r.length-1),s=n==null?void 0:n[i];return s===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):s})}return e}function mW(t,e,n){let r=t.variableList;r||(t.variableList=r={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const o=new self.URL(n).searchParams;if(o.has(i))s=o.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${n}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else i=e.NAME,s=e.VALUE;i in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=s||""}function tdt(t,e,n){const r=e.IMPORT;if(n&&r in n){let i=t.variableList;i||(t.variableList=i={}),i[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const ndt=/^(\d+)x(\d+)$/,gW=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Vt{constructor(e,n){typeof e=="string"&&(e=Vt.parseAttrList(e,n)),vt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let i=0;i<n.length/2;i++)r[i]=parseInt(n.slice(i*2,i*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}enumeratedStringList(e,n){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((i,s)=>(i[s.toLowerCase()]=!0,i),n)}bool(e){return this[e]==="YES"}decimalResolution(e){const n=ndt.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e,n){let r;const i={},s='"';for(gW.lastIndex=0;(r=gW.exec(e))!==null;){const o=r[1].trim();let a=r[2];const l=a.indexOf(s)===0&&a.lastIndexOf(s)===a.length-1;let c=!1;if(l)a=a.slice(1,-1);else switch(o){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":c=!0}if(n&&(l||c))a=RR(n,a);else if(!c&&!l)switch(o){case"CLOSED-CAPTIONS":if(a==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":dt.warn(`${e}: attribute ${o} is missing quotes`)}i[o]=a}return i}}const rdt="com.apple.hls.interstitial";function idt(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function sdt(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class rce{constructor(e,n,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(n==null?void 0:n.tagAnchor)||null,this.tagOrder=(i=n==null?void 0:n.tagOrder)!=null?i:r,n){const s=n.attr;for(const o in s)if(Object.prototype.hasOwnProperty.call(e,o)&&e[o]!==s[o]){dt.warn(`DATERANGE tag attribute: "${o}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=o;break}e=vt(new Vt({}),s,e)}if(this.attr=e,n?(this._startDate=n._startDate,this._cue=n._cue,this._endDate=n._endDate,this._dateAtEnd=n._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=(n==null?void 0:n.endDate)||new Date(this.attr["END-DATE"]);he(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(dt.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const n=this.duration;return n!==null?this._dateAtEnd=new Date(this._startDate.getTime()+n*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(he(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===rdt}get isValid(){return!!this.id&&!this._badValueForSameId&&he(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const odt=10;class adt{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(n=>{let r=n.decryptdata;return r||(n.setKeyFormat(e.keyFormat),r=n.decryptdata),!!r&&e.matches(r)})}get hasProgramDateTime(){return this.fragments.length?he(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||odt}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const n=this.lastPartIndex;if(n!==-1){for(let r=e.length;r--;)if(e[r].index>n)return e[r].index;return n}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function Vw(t,e){return t.length===e.length?!t.some((n,r)=>n!==e[r]):!1}function vW(t,e){return!t&&!e?!0:!t||!e?!1:Vw(t,e)}function Jf(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function t5(t){switch(t){case"AES-128":case"AES-256":return dc.cbc;case"AES-256-CTR":return dc.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function n5(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function OR(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function ldt(t){const e=OR(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function ice(t){const e=function(r,i,s){const o=r[i];r[i]=r[s],r[s]=o};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function sce(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const s=i[0]==="base64",o=i[1];s?(r.splice(-1,1),n=n5(o)):n=ldt(o)}}return n}const zw=typeof self<"u"?self:void 0;var Gt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Hn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function rb(t){switch(t){case Hn.FAIRPLAY:return Gt.FAIRPLAY;case Hn.PLAYREADY:return Gt.PLAYREADY;case Hn.WIDEVINE:return Gt.WIDEVINE;case Hn.CLEARKEY:return Gt.CLEARKEY}}function Bk(t){switch(t){case Gt.FAIRPLAY:return Hn.FAIRPLAY;case Gt.PLAYREADY:return Hn.PLAYREADY;case Gt.WIDEVINE:return Hn.WIDEVINE;case Gt.CLEARKEY:return Hn.CLEARKEY}}function Rm(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[Gt.FAIRPLAY,Gt.WIDEVINE,Gt.PLAYREADY,Gt.CLEARKEY].filter(i=>!!e[i]):[];return!r[Gt.WIDEVINE]&&n&&r.push(Gt.WIDEVINE),r}const oce=function(t){return zw!=null&&(t=zw.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function cdt(t,e,n,r){let i;switch(t){case Gt.FAIRPLAY:i=["cenc","sinf"];break;case Gt.WIDEVINE:case Gt.PLAYREADY:i=["cenc"];break;case Gt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return udt(i,e,n,r)}function udt(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function ddt(t){var e;return!!t&&(t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(n=>n==="persistent-license")))}function ace(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),n=String.fromCharCode.apply(null,Array.from(e)),r=n.substring(n.indexOf("<"),n.length),o=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(o){const a=o.childNodes[0]?o.childNodes[0].nodeValue:o.getAttribute("VALUE");if(a){const l=n5(a).subarray(0,16);return ice(l),l}}return null}let M1={};class vu{static clearKeyUriToKeyIdMap(){M1={}}static setKeyIdForUri(e,n){M1[e]=n}constructor(e,n,r,i=[1],s=null,o){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!Jf(e),o!=null&&o.startsWith("0x")&&(this.keyId=new Uint8Array(Mle(o)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&Vw(e.keyFormatVersions,this.keyFormatVersions)&&vW(e.iv,this.iv)&&vW(e.keyId,this.keyId)}isSupported(){if(this.method){if(Jf(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Hn.FAIRPLAY:case Hn.WIDEVINE:case Hn.PLAYREADY:case Hn.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,n){if(!this.encrypted||!this.uri)return null;if(Jf(this.method)){let s=this.iv;return s||(typeof e!="number"&&(dt.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),s=hdt(e)),new vu(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.keyId){const s=M1[this.uri];if(s&&!Vw(this.keyId,s)&&vu.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const r=sce(this.uri);if(r)switch(this.keyFormat){case Hn.WIDEVINE:if(this.pssh=r,!this.keyId){const s=gut(r.buffer);if(s.length){var i;const o=s[0];this.keyId=(i=o.kids)!=null&&i.length?o.kids[0]:null}}this.keyId||(this.keyId=yW(n));break;case Hn.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=mut(s,null,r),this.keyId=ace(r);break}default:{let s=r.subarray(0,16);if(s.length!==16){const o=new Uint8Array(16);o.set(s,16-s.length),s=o}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s;s=fdt(n),s||(s=yW(n),s||(s=M1[this.uri])),s&&(this.keyId=s,vu.setKeyIdForUri(this.uri,s))}return this}}function fdt(t){const e=t==null?void 0:t[Hn.WIDEVINE];return e?e.keyId:null}function yW(t){const e=t==null?void 0:t[Hn.PLAYREADY];if(e){const n=sce(e.uri);if(n)return ace(n)}return null}function hdt(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const xW=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,bW=/#EXT-X-MEDIA:(.*)/g,pdt=/^#EXT(?:INF|-X-TARGETDURATION):/m,Uk=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),mdt=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class po{static findGroup(e,n){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===n)return i}}static resolve(e,n){return K4.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return pdt.test(e)}static parseMasterPlaylist(e,n){const r=pW(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},s=[];if(xW.lastIndex=0,!e.startsWith("#EXTM3U"))return i.playlistParsingError=new Error("no EXTM3U delimiter"),i;let o;for(;(o=xW.exec(e))!=null;)if(o[1]){var a;const c=new Vt(o[1],i),u=RR(i,o[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:po.resolve(u,n)},f=c.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),EW(c.CODECS,d);const h=c["SUPPLEMENTAL-CODECS"];h&&(d.supplemental={},EW(h,d.supplemental)),(a=d.unknownCodecs)!=null&&a.length||s.push(d),i.levels.push(d)}else if(o[3]){const c=o[3],u=o[4];switch(c){case"SESSION-DATA":{const d=new Vt(u,i),f=d["DATA-ID"];f&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[f]=d);break}case"SESSION-KEY":{const d=SW(u,n,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):dt.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new Vt(u,i);mW(i,d,n)}break}case"CONTENT-STEERING":{const d=new Vt(u,i);i.contentSteering={uri:po.resolve(d["SERVER-URI"],n),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=wW(u);break}}}const l=s.length>0&&s.length<i.levels.length;return i.levels=l?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,n,r){let i;const s={},o=r.levels,a={AUDIO:o.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:o.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(bW.lastIndex=0;(i=bW.exec(e))!==null;){const c=new Vt(i[1],r),u=c.TYPE;if(u){const d=a[u],f=s[u]||[];s[u]=f;const h=c.LANGUAGE,p=c["ASSOC-LANGUAGE"],m=c.CHANNELS,g=c.CHARACTERISTICS,y=c["INSTREAM-ID"],x={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||h||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:h,url:c.URI?po.resolve(c.URI,n):""};if(p&&(x.assocLang=p),m&&(x.channels=m),g&&(x.characteristics=g),y&&(x.instreamId=y),d!=null&&d.length){const S=po.findGroup(d,x.groupId)||d[0];_W(x,S,"audioCodec"),_W(x,S,"textCodec")}f.push(x)}}return s}static parseLevelPlaylist(e,n,r,i,s,o){var a;const l={url:n},c=new adt(n),u=c.fragments,d=[];let f=null,h=0,p=0,m=0,g=0,y=0,x=null,S=new Nk(i,l),w,E,T,_=-1,I=!1,A=null,L;if(Uk.lastIndex=0,c.m3u8=e,c.hasVariableRefs=pW(e),((a=Uk.exec(e))==null?void 0:a[0])!=="#EXTM3U")return c.playlistParsingError=new Error("Missing format identifier #EXTM3U"),c;for(;(w=Uk.exec(e))!==null;){I&&(I=!1,S=new Nk(i,l),S.playlistOffset=m,S.setStart(m),S.sn=h,S.cc=g,y&&(S.bitrate=y),S.level=r,f&&(S.initSegment=f,f.rawProgramDateTime&&(S.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null),A&&(S.setByteRange(A),A=null)));const $=w[1];if($){S.duration=parseFloat($);const R=(" "+w[2]).slice(1);S.title=R||null,S.tagList.push(R?["INF",$,R]:["INF",$])}else if(w[3]){if(he(S.duration)){S.playlistOffset=m,S.setStart(m),T&&CW(S,T,c),S.sn=h,S.level=r,S.cc=g,u.push(S);const R=(" "+w[3]).slice(1);S.relurl=RR(c,R),DR(S,x,d),x=S,m+=S.duration,h++,p=0,I=!0}}else{if(w=w[0].match(mdt),!w){dt.warn("No matches on slow regex match for level playlist!");continue}for(E=1;E<w.length&&w[E]===void 0;E++);const R=(" "+w[E]).slice(1),C=(" "+w[E+1]).slice(1),P=w[E+2]?(" "+w[E+2]).slice(1):null;switch(R){case"BYTERANGE":x?S.setByteRange(C,x):S.setByteRange(C);break;case"PROGRAM-DATE-TIME":S.rawProgramDateTime=C,S.tagList.push(["PROGRAM-DATE-TIME",C]),_===-1&&(_=u.length);break;case"PLAYLIST-TYPE":c.type&&$o(c,R,w),c.type=C.toUpperCase();break;case"MEDIA-SEQUENCE":c.startSN!==0?$o(c,R,w):u.length>0&&kW(c,R,w),h=c.startSN=parseInt(C);break;case"SKIP":{c.skippedSegments&&$o(c,R,w);const k=new Vt(C,c),M=k.decimalInteger("SKIPPED-SEGMENTS");if(he(M)){c.skippedSegments+=M;for(let N=M;N--;)u.push(null);h+=M}const B=k.enumeratedString("RECENTLY-REMOVED-DATERANGES");B&&(c.recentlyRemovedDateranges=(c.recentlyRemovedDateranges||[]).concat(B.split("	")));break}case"TARGETDURATION":c.targetduration!==0&&$o(c,R,w),c.targetduration=Math.max(parseInt(C),1);break;case"VERSION":c.version!==null&&$o(c,R,w),c.version=parseInt(C);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":c.live||$o(c,R,w),c.live=!1;break;case"#":(C||P)&&S.tagList.push(P?[C,P]:[C]);break;case"DISCONTINUITY":g++,S.tagList.push(["DIS"]);break;case"GAP":S.gap=!0,S.tagList.push([R]);break;case"BITRATE":S.tagList.push([R,C]),y=parseInt(C)*1e3,he(y)?S.bitrate=y:y=0;break;case"DATERANGE":{const k=new Vt(C,c),M=new rce(k,c.dateRanges[k.ID],c.dateRangeTagCount);c.dateRangeTagCount++,M.isValid||c.skippedSegments?c.dateRanges[M.id]=M:dt.warn(`Ignoring invalid DATERANGE tag: "${C}"`),S.tagList.push(["EXT-X-DATERANGE",C]);break}case"DEFINE":{{const k=new Vt(C,c);"IMPORT"in k?tdt(c,k,o):mW(c,k,n)}break}case"DISCONTINUITY-SEQUENCE":c.startCC!==0?$o(c,R,w):u.length>0&&kW(c,R,w),c.startCC=g=parseInt(C);break;case"KEY":{const k=SW(C,n,c);if(k.isSupported()){if(k.method==="NONE"){T=void 0;break}T||(T={});const M=T[k.keyFormat];M!=null&&M.matches(k)||(M&&(T=vt({},T)),T[k.keyFormat]=k)}else dt.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${C}"`);break}case"START":c.startTimeOffset=wW(C);break;case"MAP":{const k=new Vt(C,c);if(S.duration){const M=new Nk(i,l);TW(M,k,r,T),f=M,S.initSegment=f,f.rawProgramDateTime&&!S.rawProgramDateTime&&(S.rawProgramDateTime=f.rawProgramDateTime)}else{const M=S.byteRangeEndOffset;if(M){const B=S.byteRangeStartOffset;A=`${M-B}@${B}`}else A=null;TW(S,k,r,T),f=S,I=!0}f.cc=g;break}case"SERVER-CONTROL":{L&&$o(c,R,w),L=new Vt(C),c.canBlockReload=L.bool("CAN-BLOCK-RELOAD"),c.canSkipUntil=L.optionalFloat("CAN-SKIP-UNTIL",0),c.canSkipDateRanges=c.canSkipUntil>0&&L.bool("CAN-SKIP-DATERANGES"),c.partHoldBack=L.optionalFloat("PART-HOLD-BACK",0),c.holdBack=L.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{c.partTarget&&$o(c,R,w);const k=new Vt(C);c.partTarget=k.decimalFloatingPoint("PART-TARGET");break}case"PART":{let k=c.partList;k||(k=c.partList=[]);const M=p>0?k[k.length-1]:void 0,B=p++,N=new Vt(C,c),V=new tut(N,S,l,B,M);k.push(V),S.duration+=V.duration;break}case"PRELOAD-HINT":{const k=new Vt(C,c);c.preloadHint=k;break}case"RENDITION-REPORT":{const k=new Vt(C,c);c.renditionReports=c.renditionReports||[],c.renditionReports.push(k);break}default:dt.warn(`line parsed but not handled: ${w}`);break}}}x&&!x.relurl?(u.pop(),m-=x.duration,c.partList&&(c.fragmentHint=x)):c.partList&&(DR(S,x,d),S.cc=g,c.fragmentHint=S,T&&CW(S,T,c)),c.targetduration||(c.playlistParsingError=new Error("Missing Target Duration"));const j=u.length,D=u[0],O=u[j-1];if(m+=c.skippedSegments*c.targetduration,m>0&&j&&O){c.averagetargetduration=m/j;const $=O.sn;c.endSN=$!=="initSegment"?$:0,c.live||(O.endList=!0),_>0&&(vdt(u,_),D&&d.unshift(D))}return c.fragmentHint&&(m+=c.fragmentHint.duration),c.totalduration=m,d.length&&c.dateRangeTagCount&&D&&lce(d,c),c.endCC=g,c}}function lce(t,e){let n=t.length;if(!n)if(e.hasProgramDateTime){const a=e.fragments[e.fragments.length-1];t.push(a),n++}else return;const r=t[n-1],i=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let a=s.length;a--;){const l=e.dateRanges[s[a]],c=l.startDate.getTime();l.tagAnchor=r.ref;for(let u=n;u--;){var o;if(((o=t[u])==null?void 0:o.sn)<e.startSN)break;const d=gdt(e,c,t,u,i);if(d!==-1){l.tagAnchor=e.fragments[d].ref;break}}}}function gdt(t,e,n,r,i){const s=n[r];if(s){const a=s.programDateTime;if(e>=a||r===0){var o;const l=(((o=n[r+1])==null?void 0:o.start)||i)-s.start;if(e<=a+l*1e3){const c=n[r].sn-t.startSN;if(c<0)return-1;const u=t.fragments;if(u.length>n.length){const f=(n[r+1]||u[u.length-1]).sn-t.startSN;for(let h=f;h>c;h--){const p=u[h].programDateTime;if(e>=p&&e<p+u[h].duration*1e3)return h}}return c}}}return-1}function SW(t,e,n){var r,i;const s=new Vt(t,n),o=(r=s.METHOD)!=null?r:"",a=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=(i=s.KEYFORMAT)!=null?i:"identity";a&&s.IV&&!l&&dt.error(`Invalid IV: ${s.IV}`);const d=a?po.resolve(a,e):"",f=(c||"1").split("/").map(Number).filter(Number.isFinite);return new vu(o,d,u,f,l,s.KEYID)}function wW(t){const n=new Vt(t).decimalFloatingPoint("TIME-OFFSET");return he(n)?n:null}function EW(t,e){let n=(t||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=n.filter(s=>Q4(s,r));i.length&&(e[`${r}Codec`]=i.map(s=>s.split("/")[0]).join(","),n=n.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=n}function _W(t,e,n){const r=e[n];r&&(t[n]=r)}function vdt(t,e){let n=t[e];for(let r=e;r--;){const i=t[r];if(!i)return;i.programDateTime=n.programDateTime-i.duration*1e3,n=i}}function DR(t,e,n){t.rawProgramDateTime?n.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function TW(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function CW(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(t)}function $o(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${n[0]})`)}function kW(t,e,n){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${n[0]})`)}function Vk(t,e){const n=e.startPTS;if(he(n)){let r=0,i;e.sn>t.sn?(r=n-t.start,i=t):(r=t.start-n,i=e),i.duration!==r&&i.setDuration(r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function cce(t,e,n,r,i,s,o){r-n<=0&&(o.warn("Fragment should have a positive duration",e),r=n+e.duration,s=i+e.duration);let l=n,c=r;const u=e.startPTS,d=e.endPTS;if(he(u)){const y=Math.abs(u-n);t&&y>t.totalduration?o.warn(`media timestamps and playlist times differ by ${y}s for level ${e.level} ${t.url}`):he(e.deltaPTS)?e.deltaPTS=Math.max(y,e.deltaPTS):e.deltaPTS=y,l=Math.max(n,u),n=Math.min(n,u),i=e.startDTS!==void 0?Math.min(i,e.startDTS):i,c=Math.min(r,d),r=Math.max(r,d),s=e.endDTS!==void 0?Math.max(s,e.endDTS):s}const f=n-e.start;e.start!==0&&e.setStart(n),e.setDuration(r-e.start),e.startPTS=n,e.maxStartPTS=l,e.startDTS=i,e.endPTS=r,e.minEndPTS=c,e.endDTS=s;const h=e.sn;if(!t||h<t.startSN||h>t.endSN)return 0;let p;const m=h-t.startSN,g=t.fragments;for(g[m]=e,p=m;p>0;p--)Vk(g[p],g[p-1]);for(p=m;p<g.length-1;p++)Vk(g[p],g[p+1]);return t.fragmentHint&&Vk(g[g.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,f}function ydt(t,e,n){if(t===e)return;let r=null;const i=t.fragments;for(let u=i.length-1;u>=0;u--){const d=i[u].initSegment;if(d){r=d;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s;Sdt(t,e,(u,d,f,h)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==u.cc){const p=u.cc-d.cc;for(let m=f;m<h.length;m++)h[m].cc+=p;e.endCC=h[h.length-1].cc}he(u.startPTS)&&he(u.endPTS)&&(d.setStart(d.startPTS=u.startPTS),d.startDTS=u.startDTS,d.maxStartPTS=u.maxStartPTS,d.endPTS=u.endPTS,d.endDTS=u.endDTS,d.minEndPTS=u.minEndPTS,d.setDuration(u.endPTS-u.startPTS),d.duration&&(s=d),e.PTSKnown=e.alignedSliding=!0),u.hasStreams&&(d.elementaryStreams=u.elementaryStreams),d.loader=u.loader,u.hasStats&&(d.stats=u.stats),u.initSegment&&(d.initSegment=u.initSegment,r=u.initSegment)});const o=e.fragments,a=e.fragmentHint?o.concat(e.fragmentHint):o;if(r&&a.forEach(u=>{var d;u&&(!u.initSegment||u.initSegment.relurl===((d=r)==null?void 0:d.relurl))&&(u.initSegment=r)}),e.skippedSegments){if(e.deltaUpdateFailed=o.some(u=>!u),e.deltaUpdateFailed){n.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)o.shift();e.startSN=o[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=xdt(t.dateRanges,e,n));const u=t.fragments.filter(d=>d.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<a.length;d++)a[d].programDateTime===null&&DR(a[d],a[d-1],u);lce(u,e)}e.endCC=o[o.length-1].cc}if(!e.startCC){var l;const u=fce(t,e.startSN-1);e.startCC=(l=u==null?void 0:u.cc)!=null?l:o[0].cc}bdt(t.partList,e.partList,(u,d)=>{d.elementaryStreams=u.elementaryStreams,d.stats=u.stats}),s?cce(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,n):uce(t,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const c=e.advancedDateTime;if(e.advanced&&c){const u=e.edge;e.driftStart||(e.driftStartTime=c,e.driftStart=u),e.driftEndTime=c,e.driftEnd=u}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function xdt(t,e,n){const{dateRanges:r,recentlyRemovedDateranges:i}=e,s=vt({},t);i&&i.forEach(l=>{delete s[l]});const a=Object.keys(s).length;return a?(Object.keys(r).forEach(l=>{const c=s[l],u=new rce(r[l].attr,c);u.isValid?(s[l]=u,c||(u.tagOrder+=a)):n.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${xt(r[l].attr)}"`)}),s):r}function bdt(t,e,n){if(t&&e){let r=0;for(let i=0,s=t.length;i<=s;i++){const o=t[i],a=e[i+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}function Sdt(t,e,n){const r=e.skippedSegments,i=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let c=i;c<=s;c++){const u=l[o+c];let d=a[c];if(r&&!d&&u&&(d=e.fragments[c]=u),u&&d){n(u,d,c,a);const f=u.relurl,h=d.relurl;if(f&&wdt(f,h)){e.playlistParsingError=PW(`media sequence mismatch ${d.sn}:`,t,e,u,d);return}else if(u.cc!==d.cc){e.playlistParsingError=PW(`discontinuity sequence mismatch (${u.cc}!=${d.cc})`,t,e,u,d);return}}}}function PW(t,e,n,r,i){return new Error(`${t} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${n.startSN}
${n.m3u8}`)}function uce(t,e,n=!0){const r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments,s=r>=0;let o=0;if(s&&r<i.length)o=i[r].start;else if(s&&e.startSN===t.endSN+1)o=t.fragmentEnd;else if(s&&n)o=t.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)o=t.fragmentStart;else return;MR(e,o)}function MR(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function dce(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments,i=4;if(r.length&&n*i>e){const s=r[r.length-1].duration*1e3;s<n&&(n=s)}}else n/=2;return Math.round(n)}function fce(t,e,n){if(!t)return null;let r=t.fragments[e-t.startSN];return r||(r=t.fragmentHint,r&&r.sn===e)?r:e<t.startSN&&n&&n.sn===e?n:null}function IW(t,e,n){return t?hce(t.partList,e,n):null}function hce(t,e,n){if(t)for(let r=t.length;r--;){const i=t[r];if(i.index===n&&i.fragment.sn===e)return i}return null}function pce(t){t.forEach((e,n)=>{var r;(r=e.details)==null||r.fragments.forEach(i=>{i.level=n,i.initSegment&&(i.initSegment.level=n)})})}function wdt(t,e){return t!==e&&e?AW(t)!==AW(e):!1}function AW(t){return t.replace(/\?[^?]*$/,"")}function Sg(t,e){for(let r=0,i=t.length;r<i;r++){var n;if(((n=t[r])==null?void 0:n.cc)===e)return t[r]}return null}function Edt(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function LW(t,e){const n=t.start+e;t.startPTS=n,t.setStart(n),t.endPTS=n+t.duration}function mce(t,e){const n=e.fragments;for(let r=0,i=n.length;r<i;r++)LW(n[r],t);e.fragmentHint&&LW(e.fragmentHint,t),e.alignedSliding=!0}function _dt(t,e){t&&(gce(e,t),e.alignedSliding||Hw(e,t),!e.alignedSliding&&!e.skippedSegments&&uce(t,e,!1))}function gce(t,e){if(!Edt(e,t))return;const n=Math.min(e.endCC,t.endCC),r=Sg(e.fragments,n),i=Sg(t.fragments,n);if(!r||!i)return;dt.log(`Aligning playlist at start of dicontinuity sequence ${n}`);const s=r.start-i.start;mce(s,t)}function Hw(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;let i,s;const o=Math.min(e.endCC,t.endCC);e.startCC<o&&t.startCC<o&&(i=Sg(r,o),s=Sg(n,o)),(!i||!s)&&(i=r[Math.floor(r.length/2)],s=Sg(n,i.cc)||n[Math.floor(n.length/2)]);const a=i.programDateTime,l=s.programDateTime;if(!a||!l)return;const c=(l-a)/1e3-(s.start-i.start);mce(c,t)}function Er(t,e,n){Vr(t,e,n),t.addEventListener(e,n)}function Vr(t,e,n){t.removeEventListener(e,n)}const Tdt={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},ee={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class r5 extends tce{constructor(e,n,r,i,s){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ee.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:o,fragCurrent:a,media:l,mediaBuffer:c,state:u}=this,d=l?l.currentTime:0,f=Re.bufferInfo(c||l,d,o.maxBufferHole),h=!f.len;if(this.log(`Media seeking to ${he(d)?d.toFixed(3):d}, state: ${u}, ${h?"out of":"in"} buffer`),this.state===ee.ENDED)this.resetLoadingState();else if(a){const p=o.maxFragLookUpTolerance,m=a.start-p,g=a.start+a.duration+p;if(h||g<f.start||m>f.end){const y=d>g;(d<m||y)&&(y&&a.loader&&(this.log(`Cancelling fragment load for seek (sn: ${a.sn})`),a.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const p=this.lastCurrentTime;if(d>p&&(this.lastCurrentTime=d),!this.loadingParts){const m=Math.max(f.end,d),g=this.shouldLoadParts(this.getLevelDetails(),m);g&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${m.toFixed(2)}`),this.loadingParts=g)}}this.hls.hasEnoughToStart||(this.log(`Setting ${h?"startPosition":"nextLoadPosition"} to ${d} for seek without enough to start`),this.nextLoadPosition=d,h&&(this.startPosition=d)),h&&this.state===ee.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new Jut(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new J4(e.config)}registerListeners(){const{hls:e}=this;e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(F.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===ee.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ee.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:n}=this;return n===-1&&e?e:n}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,n){if(n.live||!this.media)return!1;const r=e.end||0,i=this.config.timelineOffset||0;if(r<=i)return!1;const s=e.buffered;this.config.maxBufferHole&&s&&s.length>1&&(e=Re.bufferedInfo(s,e.start,0));const o=e.nextStart;if(o&&o>i&&o<n.edge||this.media.currentTime<e.start)return!1;const l=n.partList;if(l!=null&&l.length){const u=l[l.length-1];return Re.isBuffered(this.media,u.start+u.duration/2)}const c=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(c)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var n;return((n=this.getLevelDetails())==null?void 0:n.appliedTimelineOffset)||e}return 0}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;Er(r,"seeking",this.onMediaSeeking),Er(r,"ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===ee.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,n){const r=!!n.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Vr(i,"seeking",this.onMediaSeeking),Vr(i,"ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,n){}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=ee.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this.startFragRequested=!0,this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const i=s=>{const o=s.frag;if(this.fragContextChanged(o)){this.warn(`${o.type} sn: ${o.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(o,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(o);return}o.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,n,r,i).then(s=>{if(!s)return;const o=this.state,a=s.frag;if(this.fragContextChanged(a)){(o===ee.FRAG_LOADING||!this.fragCurrent&&o===ee.PARSING)&&(this.fragmentTracker.removeFragment(a),this.state=ee.IDLE);return}"payload"in s&&(this.log(`Loaded ${a.type} sn: ${a.sn} of ${this.playlistLabel()} ${a.level}`),this.hls.trigger(F.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===ee.STOPPED||this.state===ee.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===_n.APPENDING){const s=e.type,o=this.getFwdBufferInfo(this.mediaBuffer,s),a=Math.max(e.duration,o?o.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===_n.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const n=e.details;return(n==null?void 0:n.live)&&n.type!=="EVENT"&&(this.levelLastLoaded!==e||n.expired)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const i={startOffset:e,endOffset:n,type:r};this.hls.trigger(F.BUFFER_FLUSHING,i)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{const i=r==null?void 0:r.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{frag:s,payload:o}=r,a=s.decryptdata;if(o&&o.byteLength>0&&a!=null&&a.key&&a.iv&&Jf(a.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(o),a.key.buffer,a.iv.buffer,t5(a.method)).catch(c=>{throw i.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:s}),c}).then(c=>{const u=self.performance.now();return i.trigger(F.FRAG_DECRYPTED,{frag:s,payload:c,stats:{tstart:l,tdecrypt:u}}),r.payload=c,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===ee.STOPPED||this.state===ee.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==ee.STOPPED&&(this.state=ee.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,n){var r,i;const s=e.tracks;if(s&&!n.encrypted&&((r=s.audio)!=null&&r.encrypted||(i=s.video)!=null&&i.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const o=this.media,a=new Error(`Encrypted track with no key in ${this.fragInfo(n)} (media ${o?"attached mediaKeys: "+o.mediaKeys:"detached"})`);return this.warn(a.message),!o||o.mediaKeys?!1:(this.hls.trigger(F.ERROR,{type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_KEYS,fatal:!1,error:a,frag:n}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.sn!==n.sn||e.level!==n.level}fragBufferedComplete(e,n){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)} > buffer:${r?Tdt.toString(Re.getBuffered(r)):"(detached)"})`),pn(e)){var i;if(e.type!==ge.SUBTITLE){const o=e.elementaryStreams;if(!Object.keys(o).some(a=>!!o[a])){this.state=ee.IDLE;return}}const s=(i=this.levels)==null?void 0:i[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=ee.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:i,partsLoaded:s}=e,o=!s||s.length===0||s.some(l=>!l),a=new e5(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!o);n.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,i){var s;this.fragCurrent=e;const o=n.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)){if(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=ee.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(f=>{if(!this.fragContextChanged(f.frag))return this.hls.trigger(F.KEY_LOADED,f),this.state===ee.KEY_LOADING&&(this.state=ee.IDLE),f}),this.hls.trigger(F.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(a=this.keyLoader.loadClear(e,o.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(pn(e)&&(!l||e.sn!==l.sn)){const f=this.shouldLoadParts(n.details,e.end);f!==this.loadingParts&&(this.log(`LL-Part loading ${f?"ON":"OFF"} loading sn ${l==null?void 0:l.sn}->${e.sn}`),this.loadingParts=f)}if(r=Math.max(e.start,r||0),this.loadingParts&&pn(e)){const f=o.partList;if(f&&i){r>o.fragmentEnd&&o.fragmentHint&&(e=o.fragmentHint);const h=this.getNextPart(f,e,r);if(h>-1){const p=f[h];e=this.fragCurrent=p.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${p.index} (${h}/${f.length-1}) of ${this.fragInfo(e,!1,p)}) cc: ${e.cc} [${o.startSN}-${o.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=p.start+p.duration,this.state=ee.FRAG_LOADING;let m;return a?m=a.then(g=>!g||this.fragContextChanged(g.frag)?null:this.doFragPartsLoad(e,p,n,i)).catch(g=>this.handleFragLoadError(g)):m=this.doFragPartsLoad(e,p,n,i).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(F.FRAG_LOADING,{frag:e,part:p,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}else if(!e.url||this.loadedEndOfParts(f,r))return Promise.resolve(null)}}if(pn(e)&&this.loadingParts){var c;this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(c=o.partList)==null?void 0:c.filter(f=>f.loaded).map(f=>`[${f.start}-${f.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+o.startSN+"-"+o.endSN+"]"}, target: ${parseFloat(r.toFixed(3))}`),he(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ee.FRAG_LOADING;const u=this.config.progressive;let d;return u&&a?d=a.then(f=>!f||this.fragContextChanged(f.frag)?null:this.fragmentLoader.load(e,i)).catch(f=>this.handleFragLoadError(f)):d=Promise.all([this.fragmentLoader.load(e,u?i:void 0),a]).then(([f])=>(!u&&i&&i(f),f)).catch(f=>this.handleFragLoadError(f)),this.hls.trigger(F.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,n,r,i){return new Promise((s,o)=>{var a;const l=[],c=(a=r.details)==null?void 0:a.partList,u=d=>{this.fragmentLoader.loadPart(e,d,i).then(f=>{l[d.index]=f;const h=f.part;this.hls.trigger(F.FRAG_LOADED,f);const p=IW(r.details,e.sn,d.index+1)||hce(c,e.sn,d.index+1);if(p)u(p);else return s({frag:e,part:h,partsLoaded:l})}).catch(o)};u(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;n.frag&&n.details===Y.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):n.frag&&n.type===Se.KEY_SYSTEM_ERROR?(n.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(n.frag)):this.hls.trigger(F.ERROR,n)}else this.hls.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==ee.PARSING){!this.fragCurrent&&this.state!==ee.STOPPED&&this.state!==ee.ERROR&&(this.state=ee.IDLE);return}const{frag:r,part:i,level:s}=n,o=self.performance.now();r.stats.parsing.end=o,i&&(i.stats.parsing.end=o);const a=this.getLevelDetails(),c=a&&r.sn>a.endSN||this.shouldLoadParts(a,r.end);c!==this.loadingParts&&(this.log(`LL-Part loading ${c?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=c),this.updateLevelTiming(r,i,s,e.partial)}shouldLoadParts(e,n){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var r;const s=e.partList[0];if(s.fragment.type===ge.SUBTITLE)return!1;const o=s.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(n>=o){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:i,sn:s,part:o}=e;if(!(n!=null&&n[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const a=n[i],l=a.details,c=o>-1?IW(l,s,o):null,u=c?c.fragment:fce(l,s,r);return u?(r&&r!==u&&(u.stats=r.stats),{frag:u,part:c,level:a}):null}bufferFragmentData(e,n,r,i,s){if(this.state!==ee.PARSING)return;const{data1:o,data2:a}=e;let l=o;if(a&&(l=Qi(o,a)),!l.length)return;const c=this.initPTS[n.cc],u=c?-c.baseTime/c.timescale:void 0,d={type:e.type,frag:n,part:r,chunkMeta:i,offset:u,parent:n.type,data:l};if(this.hls.trigger(F.BUFFER_APPENDING,d),e.dropped&&e.independent&&!r){if(s)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!Re.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,i=Re.bufferInfo(n,r,0),s=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),a=Math.max(Math.min(e.start-o,i.end-o),r+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,n){var r;const i=this.getLoadPosition();if(!he(i))return null;const o=this.lastCurrentTime>i||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,n,o)}getFwdBufferInfoAtPos(e,n,r,i){const s=Re.bufferInfo(e,n,i);if(s.len===0&&s.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(n,r);if(o&&(s.nextStart<=o.end||o.gap)){const a=Math.max(Math.min(s.nextStart,o.end)-n,i);return Re.bufferInfo(e,n,a)}}return s}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e,n){const r=this.config,i=Math.max(Math.min(e-n,r.maxBufferLength),n),s=Math.max(e-n*3,r.maxMaxBufferLength/2,i);return s>=i?(r.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,n=ge.MAIN){const r=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,n):null;return r&&"fragment"in r?r.fragment:r}getNextFragment(e,n){const r=n.fragments,i=r.length;if(!i)return null;const{config:s}=this,o=r[0].start,a=s.lowLatencyMode&&!!n.partList;let l=null;if(n.live){const d=s.initialLiveManifestSize;if(i<d)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${d})`),null;if(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<o){var c;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(n);const f=this.hls.startPosition,h=this.hls.liveSyncPosition,p=l?(f!==-1&&f>=o?f:h)||l.start:e;this.log(`Setting startPosition to ${p} to match start frag at live edge. mainStart: ${f} liveSyncPosition: ${h} frag.start: ${(c=l)==null?void 0:c.start}`),this.startPosition=this.nextLoadPosition=p}}else e<=o&&(l=r[0]);if(!l){const d=this.loadingParts?n.partEnd:n.fragmentEnd;l=this.getFragmentAtPosition(e,d,n)}let u=this.filterReplacedPrimary(l,n);if(!u&&l){const d=l.sn-n.startSN;u=this.filterReplacedPrimary(r[d+1]||null,n)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===_n.OK||r===_n.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,i,s){let o=null;if(e.gap&&(o=this.getNextFragment(this.nextLoadPosition,n),o&&!o.gap&&r.nextStart)){const a=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i,0);if(a!==null&&r.len+a.len>=s){const l=o.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,o}get primaryPrefetch(){if(RW(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,n){if(!e)return e;if(RW(this.config)&&e.type!==ge.SUBTITLE){const r=this.hls.interstitialsManager,i=r==null?void 0:r.bufferingItem;if(i){const o=i.event;if(o){if(o.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(n==null?void 0:n.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const s=r==null?void 0:r.playerQueue;if(s)for(let o=s.length;o--;){const a=s[o].interstitial;if(a.appendInPlace&&e.start>=a.startTime&&e.end<=a.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let i=-1,s=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(o=o&&!c.independent,i>-1&&r<c.start)break;const u=c.loaded;u?i=-1:(s||(c.independent||o)&&c.fragment===n)&&(c.fragment!==n&&this.warn(`Need buffer at ${r} but next unloaded part starts at ${c.start}`),i=a),s=u}return i}loadedEndOfParts(e,n){let r;for(let i=e.length;i--;){if(r=e[i],!r.loaded)return!1;if(n>r.start)return!0}return!1}getInitialLiveFragment(e){const n=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=Uut(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=r.sn+1;if(s>=e.startSN&&s<=e.endSN){const o=n[s-e.startSN];r.cc===o.cc&&(i=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=Zle(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,n,r){const{config:i}=this;let{fragPrevious:s}=this,{fragments:o,endSN:a}=r;const{fragmentHint:l}=r,{maxFragLookUpTolerance:c}=i,u=r.partList,d=!!(this.loadingParts&&u!=null&&u.length&&l);d&&!this.bitrateTest&&u[u.length-1].fragment.sn===l.sn&&(o=o.concat(l),a=l.sn);let f;if(e<n){var h;const m=e<this.lastCurrentTime||e>n-c||(h=this.media)!=null&&h.paused||!this.startFragRequested?0:c;f=Hu(s,o,e,m)}else f=o[o.length-1];if(f){const p=f.sn-r.startSN,m=this.fragmentTracker.getState(f);if((m===_n.OK||m===_n.PARTIAL&&f.gap)&&(s=f),s&&f.sn===s.sn&&(!d||u[0].fragment.sn>f.sn||!r.live)&&f.level===s.level){const y=o[p+1];f.sn<a&&this.fragmentTracker.getState(y)!==_n.OK?f=y:f=null}}return f}alignPlaylists(e,n,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,o=!n,a=e.alignedSliding&&he(s);if(o||!a&&!s){_dt(r,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} fragments: ${i}`),l}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;r<n&&(r=-1);const i=this.timelineOffset;if(r===-1){const s=this.startTimeOffset!==null,o=s?this.startTimeOffset:e.startTimeOffset;o!==null&&he(o)?(r=n+o,o<0&&(r+=e.edge),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${o} found in ${s?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||n,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:n}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&n?r=n.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,n){this.transmuxer&&e.type===this.playlistType&&pn(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${n?" part "+n.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ee.FRAG_LOADING_WAITING_RETRY)&&(this.state=ee.IDLE)}onFragmentOrKeyLoadError(e,n){var r;if(n.chunkMeta&&!n.frag){const y=this.getCurrentContext(n.chunkMeta);y&&(n.frag=y.frag)}const i=n.frag;if(!i||i.type!==e||!this.levels)return;if(this.fragContextChanged(i)){var s;this.warn(`Frag load error must match current frag to retry ${i.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const o=n.details===Y.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(i,!0);const a=n.errorAction;if(!a){this.state=ee.ERROR;return}const{action:l,flags:c,retryCount:u=0,retryConfig:d}=a,f=!!d,h=f&&l===Vn.RetryRequest,p=f&&!a.resolved&&c===ri.MoveAllAlternatesMatchingHost,m=(r=this.hls.latestLevelDetails)==null?void 0:r.live;if(!h&&p&&pn(i)&&!i.endList&&m&&!ece(n))this.resetFragmentErrors(e),this.treatAsGap(i),a.resolved=!0;else if((h||p)&&u<d.maxNumRetry){var g;const y=LR((g=n.response)==null?void 0:g.code),x=Z4(d,u);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+x,this.state=ee.FRAG_LOADING_WAITING_RETRY,a.resolved=!0,y){this.log("Waiting for connection (offline)"),this.retryDate=1/0,n.reason="offline";return}this.warn(`Fragment ${i.sn} of ${e} ${i.level} errored with ${n.details}, retrying loading ${u+1}/${d.maxNumRetry} in ${x}ms`)}else if(d)if(this.resetFragmentErrors(e),u<d.maxNumRetry)!o&&l!==Vn.RemoveAlternatePermanently&&(a.resolved=!0);else{this.warn(`${n.details} reached or exceeded max retry (${u})`);return}else l===Vn.SendAlternateToPenaltyBox?this.state=ee.WAITING_LEVEL:this.state=ee.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),n=this.retryDate,r=n===1/0;(!n||e>=n||r&&!LR(0))&&(r&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=ee.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===ee.PARSING||this.state===ee.PARSED){const n=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,(n==null?void 0:n.duration)||10);const o=!s;return o&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${r} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),o}return!1}resetFragmentErrors(e){e===ge.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==ee.STOPPED&&(this.state=ee.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const i=Re.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,i,r),this.state===ee.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==ee.STOPPED&&(this.state=ee.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,n=e?e.details:null;n!=null&&n.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(n,n.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,i){const s=r.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const d=u.endPTS-u.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),l||!1;const f=i?0:cce(s,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS,this);return this.hls.trigger(F.LEVEL_PTS_UPDATED,{details:s,level:r,drift:f,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)){var a;if(r.fragmentError===0&&this.treatAsGap(e,r),((a=this.transmuxer)==null?void 0:a.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=ee.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.fragInfo(e,!1,n)})`),this.hls.trigger(F.FRAG_PARSED,{frag:e,part:n})}playlistLabel(){return this.playlistType===ge.MAIN?"level":"track"}fragInfo(e,n=!0,r){var i,s;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((i=n&&!r?e.startPTS:(r||e).start)!=null?i:NaN).toFixed(3)}-${((s=n&&!r?e.endPTS:(r||e).end)!=null?s:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,n){n&&n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}function RW(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class vce{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=Cdt(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function Cdt(t,e){const n=new Uint8Array(e);let r=0;for(let i=0;i<t.length;i++){const s=t[i];n.set(s,r),r+=s.length}return n}var zk={exports:{}},OW;function kdt(){return OW||(OW=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||l,f),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,f,h,p){var m=n?n+c:c;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,x,S;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,f),!0;case 5:return g.fn.call(g.context,u,d,f,h),!0;case 6:return g.fn.call(g.context,u,d,f,h,p),!0}for(S=1,x=new Array(y-1);S<y;S++)x[S-1]=arguments[S];g.fn.apply(g.context,x)}else{var w=g.length,E;for(S=0;S<w;S++)switch(g[S].once&&this.removeListener(c,g[S].fn,void 0,!0),y){case 1:g[S].fn.call(g[S].context);break;case 2:g[S].fn.call(g[S].context,u);break;case 3:g[S].fn.call(g[S].context,u,d);break;case 4:g[S].fn.call(g[S].context,u,d,f);break;default:if(!x)for(E=1,x=new Array(y-1);E<y;E++)x[E-1]=arguments[E];g[S].fn.apply(g[S].context,x)}}return!0},a.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,f){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==u||f&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(zk)),zk.exports}var Pdt=kdt(),i5=Jct(Pdt);const N0="1.6.13",jh={};function Idt(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Adt(){const t=jh[N0];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(e),i={worker:new self.Worker(n),objectURL:n,clientCount:1};return jh[N0]=i,i}function Ldt(t){const e=jh[t];if(e)return e.clientCount++,e;const n=new self.URL(t,self.location.href).href,i={worker:new self.Worker(n),scriptURL:n,clientCount:1};return jh[t]=i,i}function Rdt(t){const e=jh[t||N0];if(e&&e.clientCount--===1){const{worker:r,objectURL:i}=e;delete jh[t||N0],i&&self.URL.revokeObjectURL(i),r.terminate()}}function yce(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function s5(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function iT(t,e){let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n}function F0(t,e){const n=e;let r=0;for(;s5(t,e);){r+=10;const i=iT(t,e+6);r+=i,yce(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)}function Odt(t,e,n,r){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[n+2],o=s>>2&15;if(o>12){const h=new Error(`invalid ADTS sampling index:${o}`);t.emit(F.ERROR,F.ERROR,{type:Se.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}const a=(s>>6&3)+1,l=e[n+3]>>6&3|(s&1)<<2,c="mp4a.40."+a,u=i[o];let d=o;(a===5||a===29)&&(d-=3);const f=[a<<3|(d&14)>>1,(d&1)<<7|l<<3];return dt.log(`manifest codec:${r}, parsed codec:${c}, channels:${l}, rate:${u} (ADTS object type:${a} sampling index:${o})`),{config:f,samplerate:u,channelCount:l,codec:c,parsedCodec:c,manifestCodec:r}}function xce(t,e){return t[e]===255&&(t[e+1]&246)===240}function bce(t,e){return t[e+1]&1?7:9}function o5(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function Ddt(t,e){return e+5<t.length}function Ww(t,e){return e+1<t.length&&xce(t,e)}function Mdt(t,e){return Ddt(t,e)&&xce(t,e)&&o5(t,e)<=t.length-e}function $dt(t,e){if(Ww(t,e)){const n=bce(t,e);if(e+n>=t.length)return!1;const r=o5(t,e);if(r<=n)return!1;const i=e+r;return i===t.length||Ww(t,i)}return!1}function Sce(t,e,n,r,i){if(!t.samplerate){const s=Odt(e,n,r,i);if(!s)return;vt(t,s)}}function wce(t){return 1024*9e4/t}function Ndt(t,e){const n=bce(t,e);if(e+n<=t.length){const r=o5(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function Ece(t,e,n,r,i){const s=wce(t.samplerate),o=r+i*s,a=Ndt(e,n);let l;if(a){const{frameLength:d,headerLength:f}=a,h=f+d,p=Math.max(0,n+h-e.length);p?(l=new Uint8Array(h-f),l.set(e.subarray(n+f,e.length),0)):l=e.subarray(n+f,n+h);const m={unit:l,pts:o};return p||t.samples.push(m),{sample:m,length:h,missing:p}}const c=e.length-n;return l=new Uint8Array(c),l.set(e.subarray(n,e.length),0),{sample:{unit:l,pts:o},length:c,missing:-1}}function Fdt(t,e){return s5(t,e)&&iT(t,e+6)+10<=t.length-e}function jdt(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function Hk(t,e=0,n=1/0){return Bdt(t,e,n,Uint8Array)}function Bdt(t,e,n,r){const i=Udt(t);let s=1;"BYTES_PER_ELEMENT"in r&&(s=r.BYTES_PER_ELEMENT);const o=Vdt(t)?t.byteOffset:0,a=(o+t.byteLength)/s,l=(o+e)/s,c=Math.floor(Math.max(0,Math.min(l,a))),u=Math.floor(Math.min(c+Math.max(n,0),a));return new r(i,c,u-c)}function Udt(t){return t instanceof ArrayBuffer?t:t.buffer}function Vdt(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function zdt(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},n=3;if(t.size<2)return;if(t.data[0]!==n){console.log("Ignore frame with unrecognized character encoding");return}const r=t.data.subarray(1).indexOf(0);if(r===-1)return;const i=mi(Hk(t.data,1,r)),s=t.data[2+r],o=t.data.subarray(3+r).indexOf(0);if(o===-1)return;const a=mi(Hk(t.data,3+r,o));let l;return i==="-->"?l=mi(Hk(t.data,4+r+o)):l=jdt(t.data.subarray(4+r+o)),e.mimeType=i,e.pictureType=s,e.description=a,e.data=l,e}function Hdt(t){if(t.size<2)return;const e=mi(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}}function Wdt(t){if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=mi(t.data.subarray(n),!0);n+=r.length+1;const i=mi(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=mi(t.data.subarray(1));return{key:t.type,info:"",data:e}}function Gdt(t){if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=mi(t.data.subarray(n),!0);n+=r.length+1;const i=mi(t.data.subarray(n));return{key:t.type,info:r,data:i}}const e=mi(t.data);return{key:t.type,info:"",data:e}}function Kdt(t){return t.type==="PRIV"?Hdt(t):t.type[0]==="W"?Gdt(t):t.type==="APIC"?zdt(t):Wdt(t)}function qdt(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=iT(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}}const $1=10,Ydt=10;function _ce(t){let e=0;const n=[];for(;s5(t,e);){const r=iT(t,e+6);t[e+5]>>6&1&&(e+=$1),e+=$1;const i=e+r;for(;e+Ydt<i;){const s=qdt(t.subarray(e)),o=Kdt(s);o&&n.push(o),e+=s.size+$1}yce(t,e)&&(e+=$1)}return n}function Tce(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function Qdt(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}}function a5(t){const e=_ce(t);for(let n=0;n<e.length;n++){const r=e[n];if(Tce(r))return Qdt(r)}}let li=function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t}({});function no(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class l5{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=Qi(this.cachedData,e),this.cachedData=null);let r=F0(e,0),i=r?r.length:0,s;const o=this._audioTrack,a=this._id3Track,l=r?a5(r):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&he(l))&&(this.basePTS=Xdt(l,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:li.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(e,i)){const u=this.appendFrame(o,e,i);u?(this.frameIndex++,this.lastPTS=u.sample.pts,i+=u.length,s=i):i=c}else Fdt(e,i)?(r=F0(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:li.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,s=i):i++;if(i===c&&s!==c){const u=e.slice(s);this.cachedData?this.cachedData=Qi(this.cachedData,u):this.cachedData=u}}return{audioTrack:o,videoTrack:no(),id3Track:a,textTrack:no()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:no(),id3Track:this._id3Track,textTrack:no()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Xdt=(t,e,n)=>{if(he(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};let N1=null;const Zdt=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Jdt=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],eft=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],tft=[0,1,1,4];function Cce(t,e,n,r,i){if(n+24>e.length)return;const s=kce(e,n);if(s&&n+s.frameLength<=e.length){const o=s.samplesPerFrame*9e4/s.sampleRate,a=r+i*o,l={unit:e.subarray(n,n+s.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function kce(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,i=t[e+2]>>4&15,s=t[e+2]>>2&3;if(n!==1&&i!==0&&i!==15&&s!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,l=n===3?3-r:r===3?3:4,c=Zdt[l*14+i-1]*1e3,d=Jdt[(n===3?0:n===2?1:2)*3+s],f=a===3?1:2,h=eft[n][r],p=tft[r],m=h*8*p,g=Math.floor(h*c/d+o)*p;if(N1===null){const S=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);N1=S?parseInt(S[1]):0}return!!N1&&N1<=87&&r===2&&c>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:f,frameLength:g,samplesPerFrame:m}}}function c5(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function Pce(t,e){return e+1<t.length&&c5(t,e)}function nft(t,e){return c5(t,e)&&4<=t.length-e}function Ice(t,e){if(e+1<t.length&&c5(t,e)){const r=kce(t,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const s=e+i;return s===t.length||Pce(t,s)}return!1}class rft extends l5{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,n){if(!e)return!1;const r=F0(e,0);let i=(r==null?void 0:r.length)||0;if(Ice(e,i))return!1;for(let s=e.length;i<s;i++)if($dt(e,i))return n.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return Mdt(e,n)}appendFrame(e,n,r){Sce(e,this.observer,n,r,e.manifestCodec);const i=Ece(e,n,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const Ace=(t,e)=>{let n=0,r=5;e+=r;const i=new Uint32Array(1),s=new Uint32Array(1),o=new Uint8Array(1);for(;r>0;){o[0]=t[e];const a=Math.min(r,8),l=8-a;s[0]=4278190080>>>24+l<<l,i[0]=(o[0]&s[0])>>l,n=n?n<<a|i[0]:i[0],e+=1,r-=a}return n};class ift extends l5{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,n){return n+64<e.length}appendFrame(e,n,r){const i=Lce(e,n,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const n=F0(e,0);if(!n)return!1;const r=n.length;return e[r]===11&&e[r+1]===119&&a5(n)!==void 0&&Ace(e,r)<16}}function Lce(t,e,n,r,i){if(n+8>e.length||e[n]!==11||e[n+1]!==119)return-1;const s=e[n+4]>>6;if(s>=3)return-1;const a=[48e3,44100,32e3][s],l=e[n+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(n+u>e.length)return-1;const d=e[n+6]>>5;let f=0;d===2?f+=2:(d&1&&d!==1&&(f+=2),d&4&&(f+=2));const h=(e[n+6]<<8|e[n+7])>>12-f&1,m=[2,1,2,3,3,4,4,5][d]+h,g=e[n+5]>>3,y=e[n+5]&7,x=new Uint8Array([s<<6|g<<1|y>>2,(y&3)<<6|d<<3|h<<2|l>>4,l<<4&224]),S=1536/a*9e4,w=r+i*S,E=e.subarray(n,n+u);return t.config=x,t.channelCount=m,t.samplerate=a,t.samples.push({unit:E,pts:w}),u}class sft extends l5{resetInitSegment(e,n,r,i){super.resetInitSegment(e,n,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const n=F0(e,0);let r=(n==null?void 0:n.length)||0;if(n&&e[r]===11&&e[r+1]===119&&a5(n)!==void 0&&Ace(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(Ice(e,r))return dt.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return nft(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return Cce(e,n,r,this.basePTS,this.frameIndex)}}const oft=/\/emsg[-/]ID3/i;class aft{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,i){const s=this.videoTrack=no("video",1),o=this.audioTrack=no("audio",1),a=this.txtTrack=no("text",1);if(this.id3Track=no("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=Ule(e);if(l.video){const{id:c,timescale:u,codec:d,supplemental:f}=l.video;s.id=c,s.timescale=a.timescale=u,s.codec=d,s.supplemental=f}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;o.id=c,o.timescale=u,o.codec=d}a.id=Fle.text,s.sampleDuration=0,s.duration=o.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return iut(e)}demux(e,n){this.timeOffset=n;let r=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=Qi(this.remainderData,e));const a=dut(r);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=r;const o=this.extractID3Track(i,n);return s.samples=XH(n,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(n,this.timeOffset);return r.samples=XH(e,n),{videoTrack:n,audioTrack:no(),id3Track:i,textTrack:no()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const i=He(e.samples,["emsg"]);i&&i.forEach(s=>{const o=hut(s);if(oft.test(o.schemeIdUri)){const a=DW(o,n);let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=o.payload;r.samples.push({data:c,len:c.byteLength,dts:a,pts:a,type:li.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&o.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const a=DW(o,n);r.samples.push({data:o.payload,len:o.payload.byteLength,dts:a,pts:a,type:li.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function DW(t,e){return he(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class lft{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new J4(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,dc.cbc)}decryptAacSample(e,n,r){const i=e[n].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),o=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)}).catch(r)}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)r.set(e.subarray(s,s+16),i);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(r.subarray(i,i+16),s);return e}decryptAvcSample(e,n,r,i,s){const o=Hle(s.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,i)}).catch(i)}decryptAvcSamples(e,n,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){i();return}const s=e[n].units;for(;!(r>=s.length);r++){const o=s[r];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,n,r,i,o),!this.decrypter.isSync()))return}}}}class Rce{constructor(){this.VideoSample=null}createVideoSample(e,n,r){return{key:e,frame:!1,pts:n,dts:r,units:[],length:0}}getLastNalUnit(e){var n;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const s=r.units;i=s[s.length-1]}return i}pushAccessUnit(e,n){if(e.units.length&&e.frame){if(e.pts===void 0){const r=n.samples,i=r.length;if(i){const s=r[i-1];e.pts=s.pts,e.dts=s.dts}else{n.dropped++;return}}n.samples.push(e)}}parseNALu(e,n,r){const i=n.byteLength;let s=e.naluState||0;const o=s,a=[];let l=0,c,u,d,f=-1,h=0;for(s===-1&&(f=0,h=this.getNALuType(n,0),s=0,l=1);l<i;){if(c=n[l++],!s){s=c?0:1;continue}if(s===1){s=c?0:2;continue}if(!c)s=3;else if(c===1){if(u=l-s-1,f>=0){const p={data:n.subarray(f,u),type:h};a.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(o&&l<=4-o&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-o)),u>0&&(p.data=Qi(p.data,n.subarray(0,u)),p.state=0))}l<i?(d=this.getNALuType(n,l),f=l,h=d,s=0):s=-1}else s=0}if(f>=0&&s>=0){const p={data:n.subarray(f,i),type:h,state:s};a.push(p)}if(a.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=Qi(p.data,n))}return e.naluState=s,a}}class wg{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,i=new Uint8Array(4),s=Math.min(4,n);if(s===0)throw new Error("no bytes available");i.set(e.subarray(r,r+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&dt.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class cft extends Rce{parsePES(e,n,r,i){const s=this.parseNALu(e,r.data,i);let o=this.VideoSample,a,l=!1;r.data=null,o&&s.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),s.forEach(c=>{var u,d;switch(c.type){case 1:{let m=!1;a=!0;const g=c.data;if(l&&g.length>4){const y=this.readSliceType(g);(y===2||y===4||y===7||y===9)&&(m=!0)}if(m){var f;(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.frame=!0,o.key=m;break}case 5:a=!0,(u=o)!=null&&u.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.key=!0,o.frame=!0;break;case 6:{a=!0,Y4(c.data,1,r.pts,n.samples);break}case 7:{var h,p;a=!0,l=!0;const m=c.data,g=this.readSPS(m);if(!e.sps||e.width!==g.width||e.height!==g.height||((h=e.pixelRatio)==null?void 0:h[0])!==g.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==g.pixelRatio[1]){e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.sps=[m];const y=m.subarray(1,4);let x="avc1.";for(let S=0;S<3;S++){let w=y[S].toString(16);w.length<2&&(w="0"+w),x+=w}e.codec=x}break}case 8:a=!0,e.pps=[c.data];break;case 9:a=!0,e.audFound=!0,(d=o)!=null&&d.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:a=!0;break;default:a=!1;break}o&&a&&o.units.push(c)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}getNALuType(e,n){return e[n]&31}readSliceType(e){const n=new wg(e);return n.readUByte(),n.readUEG(),n.readUEG()}skipScalingList(e,n){let r=8,i=8,s;for(let o=0;o<e;o++)i!==0&&(s=n.readEG(),i=(r+s+256)%256),r=i===0?r:i}readSPS(e){const n=new wg(e);let r=0,i=0,s=0,o=0,a,l,c;const u=n.readUByte.bind(n),d=n.readBits.bind(n),f=n.readUEG.bind(n),h=n.readBoolean.bind(n),p=n.skipBits.bind(n),m=n.skipEG.bind(n),g=n.skipUEG.bind(n),y=this.skipScalingList.bind(this);u();const x=u();if(d(5),p(3),u(),g(),x===100||x===110||x===122||x===244||x===44||x===83||x===86||x===118||x===128){const I=f();if(I===3&&p(1),g(),g(),p(1),h())for(l=I!==3?8:12,c=0;c<l;c++)h()&&(c<6?y(16,n):y(64,n))}g();const S=f();if(S===0)f();else if(S===1)for(p(1),m(),m(),a=f(),c=0;c<a;c++)m();g(),p(1);const w=f(),E=f(),T=d(1);T===0&&p(1),p(1),h()&&(r=f(),i=f(),s=f(),o=f());let _=[1,1];if(h()&&h())switch(u()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:{_=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((w+1)*16-r*2-i*2),height:(2-T)*(E+1)*16-(T?2:4)*(s+o),pixelRatio:_}}}class uft extends Rce{constructor(...e){super(...e),this.initVPS=null}parsePES(e,n,r,i){const s=this.parseNALu(e,r.data,i);let o=this.VideoSample,a,l=!1;r.data=null,o&&s.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),s.forEach(c=>{var u,d;switch(c.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:o||(o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:if(a=!0,l){var f;(f=o)!=null&&f.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.key=!0,o.frame=!0;break;case 19:case 20:a=!0,(u=o)!=null&&u.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.key=!0,o.frame=!0;break;case 39:a=!0,Y4(c.data,2,r.pts,n.samples);break;case 32:a=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=vt(e.params,this.readVPS(c.data)),this.initVPS=c.data),e.vps=[c.data];break;case 33:if(a=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],c.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const h=this.readSPS(c.data);e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.codec=h.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const p in h.params)e.params[p]=h.params[p]}this.pushParameterSet(e.sps,c.data,e.vps),o||(o=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),o.key=!0;break;case 34:if(a=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const h=this.readPPS(c.data);for(const p in h)e.params[p]=h[p]}this.pushParameterSet(e.pps,c.data,e.vps)}break;case 35:a=!0,e.audFound=!0,(d=o)!=null&&d.frame&&(this.pushAccessUnit(o,e),o=null),o||(o=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:a=!1;break}o&&a&&o.units.push(c)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}pushParameterSet(e,n,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(n)}getNALuType(e,n){return(e[n]&126)>>>1}ebsp2rbsp(e){const n=new Uint8Array(e.byteLength);let r=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(n[r]=e[i],r++);return new Uint8Array(n.buffer,0,r)}pushAccessUnit(e,n){super.pushAccessUnit(e,n),this.initVPS&&(this.initVPS=null)}readVPS(e){const n=new wg(e);n.readUByte(),n.readUByte(),n.readBits(4),n.skipBits(2),n.readBits(6);const r=n.readBits(3),i=n.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:i}}readSPS(e){const n=new wg(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.readBits(4);const r=n.readBits(3);n.readBoolean();const i=n.readBits(2),s=n.readBoolean(),o=n.readBits(5),a=n.readUByte(),l=n.readUByte(),c=n.readUByte(),u=n.readUByte(),d=n.readUByte(),f=n.readUByte(),h=n.readUByte(),p=n.readUByte(),m=n.readUByte(),g=n.readUByte(),y=n.readUByte(),x=[],S=[];for(let Te=0;Te<r;Te++)x.push(n.readBoolean()),S.push(n.readBoolean());if(r>0)for(let Te=r;Te<8;Te++)n.readBits(2);for(let Te=0;Te<r;Te++)x[Te]&&(n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte()),S[Te]&&n.readUByte();n.readUEG();const w=n.readUEG();w==3&&n.skipBits(1);const E=n.readUEG(),T=n.readUEG(),_=n.readBoolean();let I=0,A=0,L=0,j=0;_&&(I+=n.readUEG(),A+=n.readUEG(),L+=n.readUEG(),j+=n.readUEG());const D=n.readUEG(),O=n.readUEG(),$=n.readUEG(),R=n.readBoolean();for(let Te=R?0:r;Te<=r;Te++)n.skipUEG(),n.skipUEG(),n.skipUEG();if(n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.readBoolean()&&n.readBoolean())for(let Oe=0;Oe<4;Oe++)for(let Qe=0;Qe<(Oe===3?2:6);Qe++)if(!n.readBoolean())n.readUEG();else{const ot=Math.min(64,1<<4+(Oe<<1));Oe>1&&n.readEG();for(let Sn=0;Sn<ot;Sn++)n.readEG()}n.readBoolean(),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.skipUEG(),n.skipUEG(),n.readBoolean());const k=n.readUEG();let M=0;for(let Te=0;Te<k;Te++){let Oe=!1;if(Te!==0&&(Oe=n.readBoolean()),Oe){Te===k&&n.readUEG(),n.readBoolean(),n.readUEG();let Qe=0;for(let Ct=0;Ct<=M;Ct++){const ot=n.readBoolean();let Sn=!1;ot||(Sn=n.readBoolean()),(ot||Sn)&&Qe++}M=Qe}else{const Qe=n.readUEG(),Ct=n.readUEG();M=Qe+Ct;for(let ot=0;ot<Qe;ot++)n.readUEG(),n.readBoolean();for(let ot=0;ot<Ct;ot++)n.readUEG(),n.readBoolean()}}if(n.readBoolean()){const Te=n.readUEG();for(let Oe=0;Oe<Te;Oe++){for(let Qe=0;Qe<$+4;Qe++)n.readBits(1);n.readBits(1)}}let N=0,V=1,H=1,W=!0,z=1,G=0;n.readBoolean(),n.readBoolean();let K=!1;if(n.readBoolean()){if(n.readBoolean()){const Rr=n.readUByte(),Ji=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],se=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Rr>0&&Rr<16?(V=Ji[Rr-1],H=se[Rr-1]):Rr===255&&(V=n.readBits(16),H=n.readBits(16))}if(n.readBoolean()&&n.readBoolean(),n.readBoolean()&&(n.readBits(3),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.readUByte(),n.readUByte())),n.readBoolean()&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean(),K=n.readBoolean(),K&&(n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG()),n.readBoolean()&&(z=n.readBits(32),G=n.readBits(32),n.readBoolean()&&n.readUEG(),n.readBoolean())){const se=n.readBoolean(),pe=n.readBoolean();let it=!1;(se||pe)&&(it=n.readBoolean(),it&&(n.readUByte(),n.readBits(5),n.readBoolean(),n.readBits(5)),n.readBits(4),n.readBits(4),it&&n.readBits(4),n.readBits(5),n.readBits(5),n.readBits(5));for(let bt=0;bt<=r;bt++){W=n.readBoolean();const Pn=W||n.readBoolean();let Zr=!1;Pn?n.readEG():Zr=n.readBoolean();const Ei=Zr?1:n.readUEG()+1;if(se)for(let Or=0;Or<Ei;Or++)n.readUEG(),n.readUEG(),it&&(n.readUEG(),n.readUEG()),n.skipBits(1);if(pe)for(let Or=0;Or<Ei;Or++)n.readUEG(),n.readUEG(),it&&(n.readUEG(),n.readUEG()),n.skipBits(1)}}n.readBoolean()&&(n.readBoolean(),n.readBoolean(),n.readBoolean(),N=n.readUEG())}let ne=E,Z=T;if(_){let Te=1,Oe=1;w===1?Te=Oe=2:w==2&&(Te=2),ne=E-Te*A-Te*I,Z=T-Oe*j-Oe*L}const re=i?["A","B","C"][i]:"",de=a<<24|l<<16|c<<8|u;let Ee=0;for(let Te=0;Te<32;Te++)Ee=(Ee|(de>>Te&1)<<31-Te)>>>0;let ke=Ee.toString(16);return o===1&&ke==="2"&&(ke="6"),{codecString:`hvc1.${re}${o}.${ke}.${s?"H":"L"}${y}.B0`,params:{general_tier_flag:s,general_profile_idc:o,general_profile_space:i,general_profile_compatibility_flags:[a,l,c,u],general_constraint_indicator_flags:[d,f,h,p,m,g],general_level_idc:y,bit_depth:D+8,bit_depth_luma_minus8:D,bit_depth_chroma_minus8:O,min_spatial_segmentation_idc:N,chroma_format_idc:w,frame_rate:{fixed:W,fps:G/z}},width:ne,height:Z,pixelRatio:[V,H]}}readPPS(e){const n=new wg(this.ebsp2rbsp(e));n.readUByte(),n.readUByte(),n.skipUEG(),n.skipUEG(),n.skipBits(2),n.skipBits(3),n.skipBits(2),n.skipUEG(),n.skipUEG(),n.skipEG(),n.skipBits(2),n.readBoolean()&&n.skipUEG(),n.skipEG(),n.skipEG(),n.skipBits(4);const i=n.readBoolean(),s=n.readBoolean();let o=1;return s&&i?o=0:s?o=3:i&&(o=2),{parallelismType:o}}matchSPS(e,n){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,n).substr(3)}}const In=188;class fl{constructor(e,n,r,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.logger=i,this.videoParser=null}static probe(e,n){const r=fl.syncOffset(e);return r>0&&n.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const n=e.length;let r=Math.min(In*5,n-In)+1,i=0;for(;i<r;){let s=!1,o=-1,a=0;for(let l=i;l<n;l+=In)if(e[l]===71&&(n-l===In||e[l+In]===71)){if(a++,o===-1&&(o=l,o!==0&&(r=Math.min(o+In*99,e.length-In)+1)),s||(s=$R(e,l)===0),s&&a>1&&(o===0&&a>2||l+In>r))return o}else{if(a)return-1;break}i++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:Fle[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=fl.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=fl.createTrack("audio",i),this._id3Track=fl.createTrack("id3"),this._txtTrack=fl.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,n,r=!1,i=!1){r||(this.sampleAes=null);let s;const o=this._videoTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=o.pid,d=o.pesData,f=a.pid,h=l.pid,p=a.pesData,m=l.pesData,g=null,y=this.pmtParsed,x=this._pmtId,S=e.length;if(this.remainderData&&(e=Qi(this.remainderData,e),S=e.length,this.remainderData=null),S<In&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};const w=Math.max(0,fl.syncOffset(e));S-=(S-w)%In,S<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,S,e.buffer.byteLength-S));let E=0;for(let _=w;_<S;_+=In)if(e[_]===71){const I=!!(e[_+1]&64),A=$R(e,_),L=(e[_+3]&48)>>4;let j;if(L>1){if(j=_+5+e[_+4],j===_+In)continue}else j=_+4;switch(A){case u:I&&(d&&(s=jd(d,this.logger))&&(this.readyVideoParser(o.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(o,c,s,!1)),d={data:[],size:0}),d&&(d.data.push(e.subarray(j,_+In)),d.size+=_+In-j);break;case f:if(I){if(p&&(s=jd(p,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,s);break;case"mp3":this.parseMPEGPES(a,s);break;case"ac3":this.parseAC3PES(a,s);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(j,_+In)),p.size+=_+In-j);break;case h:I&&(m&&(s=jd(m,this.logger))&&this.parseID3PES(l,s),m={data:[],size:0}),m&&(m.data.push(e.subarray(j,_+In)),m.size+=_+In-j);break;case 0:I&&(j+=e[j]+1),x=this._pmtId=dft(e,j);break;case x:{I&&(j+=e[j]+1);const D=fft(e,j,this.typeSupported,r,this.observer,this.logger);u=D.videoPid,u>0&&(o.pid=u,o.segmentCodec=D.segmentVideoCodec),f=D.audioPid,f>0&&(a.pid=f,a.segmentCodec=D.segmentAudioCodec),h=D.id3Pid,h>0&&(l.pid=h),g!==null&&!y&&(this.logger.warn(`MPEG-TS PMT found at ${_} after unknown PID '${g}'. Backtracking to sync byte @${w} to parse all TS packets.`),g=null,_=w-188),y=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=A;break}}else E++;E>0&&NR(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),o.pesData=d,a.pesData=p,l.pesData=m;const T={audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};return i&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:i,textTrack:s}=e,o=r.pesData,a=n.pesData,l=i.pesData;let c;if(o&&(c=jd(o,this.logger))?(this.readyVideoParser(r.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(r,s,c,!0),r.pesData=null)):r.pesData=o,a&&(c=jd(a,this.logger))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,c);break;case"mp3":this.parseMPEGPES(n,c);break;case"ac3":this.parseAC3PES(n,c);break}n.pesData=null}else a!=null&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=a;l&&(c=jd(l,this.logger))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=l}demuxSampleAes(e,n,r){const i=this.demux(e,r,!0,!this.config.progressive),s=this.sampleAes=new lft(this.observer,this.config,n);return this.decrypt(i,s)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new cft:e==="hevc"&&(this.videoParser=new uft))}decrypt(e,n){return new Promise(r=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?n.decryptAacSamples(i.samples,0,()=>{s.samples?n.decryptAvcSamples(s.samples,0,0,()=>{r(e)}):r(e)}):s.samples&&n.decryptAvcSamples(s.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,n){let r=0;const i=this.aacOverFlow;let s=n.data;if(i){this.aacOverFlow=null;const d=i.missing,f=i.sample.unit.byteLength;if(d===-1)s=Qi(i.sample.unit,s);else{const h=f-d;i.sample.unit.set(s.subarray(0,d),h),e.samples.push(i.sample),r=i.missing}}let o,a;for(o=r,a=s.length;o<a-1&&!Ww(s,o);o++);if(o!==r){let d;const f=o<a-1;if(f?d=`AAC PES did not start with ADTS header,offset:${o}`:d="No ADTS header found in AAC PES",NR(this.observer,new Error(d),f,this.logger),!f)return}Sce(e,this.observer,s,o,this.audioCodec);let l;if(n.pts!==void 0)l=n.pts;else if(i){const d=wce(e.samplerate);l=i.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;o<a;)if(u=Ece(e,s,o,l,c),o+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;o<a-1&&!Ww(s,o);o++);}parseMPEGPES(e,n){const r=n.data,i=r.length;let s=0,o=0;const a=n.pts;if(a===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<i;)if(Pce(r,o)){const l=Cce(e,r,o,a,s);if(l)o+=l.length,s++;else break}else o++}parseAC3PES(e,n){{const r=n.data,i=n.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=r.length;let o=0,a=0,l;for(;a<s&&(l=Lce(e,r,a,i,o++))>0;)a+=l}}parseID3PES(e,n){if(n.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=vt({},n,{type:this._videoTrack?li.emsg:li.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function $R(t,e){return((t[e+1]&31)<<8)+t[e+2]}function dft(t,e){return(t[e+10]&31)<<8|t[e+11]}function fft(t,e,n,r,i,s){const o={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(t[e+1]&15)<<8|t[e+2],l=e+3+a-4,c=(t[e+10]&15)<<8|t[e+11];for(e+=12+c;e<l;){const u=$R(t,e),d=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!r){Wk("ADTS AAC",s);break}case 15:o.audioPid===-1&&(o.audioPid=u);break;case 21:o.id3Pid===-1&&(o.id3Pid=u);break;case 219:if(!r){Wk("H.264",s);break}case 27:o.videoPid===-1&&(o.videoPid=u);break;case 3:case 4:!n.mpeg&&!n.mp3?s.log("MPEG audio found, not supported in this browser"):o.audioPid===-1&&(o.audioPid=u,o.segmentAudioCodec="mp3");break;case 193:if(!r){Wk("AC-3",s);break}case 129:n.ac3?o.audioPid===-1&&(o.audioPid=u,o.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(o.audioPid===-1&&d>0){let f=e+5,h=d;for(;h>2;){switch(t[f]){case 106:n.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(o.audioPid=u,o.segmentAudioCodec="ac3");break}const m=t[f+1]+2;f+=m,h-=m}}break;case 194:case 135:return NR(i,new Error("Unsupported EC-3 in M2TS found"),void 0,s),o;case 36:o.videoPid===-1&&(o.videoPid=u,o.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=d+5}return o}function NR(t,e,n,r){r.warn(`parsing error: ${e.message}`),t.emit(F.ERROR,F.ERROR,{type:Se.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:e,reason:e.message})}function Wk(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function jd(t,e){let n=0,r,i,s,o,a;const l=t.data;if(!t||t.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Qi(l[0],l[1]),l.splice(1,1);if(r=l[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(i=(r[4]<<8)+r[5],i&&i>t.size-6)return null;const u=r[7];u&192&&(o=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,u&64?(a=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,o-a>60*9e4&&(e.warn(`${Math.round((o-a)/9e4)}s delta between PTS and DTS, align them`),o=a)):a=o),s=r[8];let d=s+9;if(t.size<=d)return null;t.size-=d;const f=new Uint8Array(t.size);for(let h=0,p=l.length;h<p;h++){r=l[h];let m=r.byteLength;if(d)if(d>m){d-=m;continue}else r=r.subarray(d),m-=d,d=0;f.set(r,n),n+=m}return i&&(i-=s+3),{data:f,pts:o,dts:a,len:i}}return null}class hft{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Qa=Math.pow(2,32)-1;class q{static init(){q.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in q.types)q.types.hasOwnProperty(e)&&(q.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);q.HDLR_TYPES={video:n,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);q.STTS=q.STSC=q.STCO=s,q.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),q.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),q.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),q.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);q.FTYP=q.box(q.types.ftyp,o,l,o,a),q.DINF=q.box(q.types.dinf,q.box(q.types.dref,i))}static box(e,...n){let r=8,i=n.length;const s=i;for(;i--;)r+=n[i].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(e,4),i=0,r=8;i<s;i++)o.set(n[i],r),r+=n[i].byteLength;return o}static hdlr(e){return q.box(q.types.hdlr,q.HDLR_TYPES[e])}static mdat(e){return q.box(q.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(Qa+1)),i=Math.floor(n%(Qa+1));return q.box(q.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return q.box(q.types.mdia,q.mdhd(e.timescale||0,e.duration||0),q.hdlr(e.type),q.minf(e))}static mfhd(e){return q.box(q.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?q.box(q.types.minf,q.box(q.types.smhd,q.SMHD),q.DINF,q.stbl(e)):q.box(q.types.minf,q.box(q.types.vmhd,q.VMHD),q.DINF,q.stbl(e))}static moof(e,n,r){return q.box(q.types.moof,q.mfhd(e),q.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=q.trak(e[n]);return q.box.apply(null,[q.types.moov,q.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(q.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=q.trex(e[n]);return q.box.apply(null,[q.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(Qa+1)),i=Math.floor(n%(Qa+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return q.box(q.types.mvhd,s)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let i,s;for(i=0;i<n.length;i++)s=n[i].flags,r[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return q.box(q.types.sdtp,r)}static stbl(e){return q.box(q.types.stbl,q.stsd(e),q.box(q.types.stts,q.STTS),q.box(q.types.stsc,q.STSC),q.box(q.types.stsz,q.STSZ),q.box(q.types.stco,q.STCO))}static avc1(e){let n=[],r=[],i,s,o;for(i=0;i<e.sps.length;i++)s=e.sps[i],o=s.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],o=s.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(s));const a=q.box(q.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return q.box(q.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,q.box(q.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),q.box(q.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const n=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...n,6,1,2])}static audioStsd(e){const n=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(e){return q.box(q.types.mp4a,q.audioStsd(e),q.box(q.types.esds,q.esds(e)))}static mp3(e){return q.box(q.types[".mp3"],q.audioStsd(e))}static ac3(e){return q.box(q.types["ac-3"],q.audioStsd(e),q.box(q.types.dac3,e.config))}static stsd(e){const{segmentCodec:n}=e;if(e.type==="audio"){if(n==="aac")return q.box(q.types.stsd,q.STSD,q.mp4a(e));if(n==="ac3"&&e.config)return q.box(q.types.stsd,q.STSD,q.ac3(e));if(n==="mp3"&&e.codec==="mp3")return q.box(q.types.stsd,q.STSD,q.mp3(e))}else if(e.pps&&e.sps){if(n==="avc")return q.box(q.types.stsd,q.STSD,q.avc1(e));if(n==="hevc"&&e.vps)return q.box(q.types.stsd,q.STSD,q.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${n}/${e.codec})`)}static tkhd(e){const n=e.id,r=(e.duration||0)*(e.timescale||0),i=e.width||0,s=e.height||0,o=Math.floor(r/(Qa+1)),a=Math.floor(r%(Qa+1));return q.box(q.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,n){const r=q.sdtp(e),i=e.id,s=Math.floor(n/(Qa+1)),o=Math.floor(n%(Qa+1));return q.box(q.types.traf,q.box(q.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),q.box(q.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,o>>24,o>>16&255,o>>8&255,o&255])),q.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,q.box(q.types.trak,q.tkhd(e),q.mdia(e))}static trex(e){const n=e.id;return q.box(q.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],i=r.length,s=12+16*i,o=new Uint8Array(s);let a,l,c,u,d,f;for(n+=8+s,o.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),a=0;a<i;a++)l=r[a],c=l.duration,u=l.size,d=l.flags,f=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return q.box(q.types.trun,o)}static initSegment(e){q.types||q.init();const n=q.moov(e);return Qi(q.FTYP,n)}static hvc1(e){const n=e.params,r=[e.vps,e.sps,e.pps],i=4,s=new Uint8Array([1,n.general_profile_space<<6|(n.general_tier_flag?32:0)|n.general_profile_idc,n.general_profile_compatibility_flags[0],n.general_profile_compatibility_flags[1],n.general_profile_compatibility_flags[2],n.general_profile_compatibility_flags[3],n.general_constraint_indicator_flags[0],n.general_constraint_indicator_flags[1],n.general_constraint_indicator_flags[2],n.general_constraint_indicator_flags[3],n.general_constraint_indicator_flags[4],n.general_constraint_indicator_flags[5],n.general_level_idc,240|n.min_spatial_segmentation_idc>>8,255&n.min_spatial_segmentation_idc,252|n.parallelismType,252|n.chroma_format_idc,248|n.bit_depth_luma_minus8,248|n.bit_depth_chroma_minus8,0,parseInt(n.frame_rate.fps),i-1|n.temporal_id_nested<<2|n.num_temporal_layers<<3|(n.frame_rate.fixed?64:0),r.length]);let o=s.length;for(let p=0;p<r.length;p+=1){o+=3;for(let m=0;m<r[p].length;m+=1)o+=2+r[p][m].length}const a=new Uint8Array(o);a.set(s,0),o=s.length;const l=r.length-1;for(let p=0;p<r.length;p+=1){a.set(new Uint8Array([32+p|(p===l?128:0),0,r[p].length]),o),o+=3;for(let m=0;m<r[p].length;m+=1)a.set(new Uint8Array([r[p][m].length>>8,r[p][m].length&255]),o),o+=2,a.set(r[p][m],o),o+=r[p][m].length}const c=q.box(q.types.hvcC,a),u=e.width,d=e.height,f=e.pixelRatio[0],h=e.pixelRatio[1];return q.box(q.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,q.box(q.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),q.box(q.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,h>>24,h>>16&255,h>>8&255,h&255])))}}q.types=void 0;q.HDLR_TYPES=void 0;q.STTS=void 0;q.STSC=void 0;q.STCO=void 0;q.STSZ=void 0;q.VMHD=void 0;q.SMHD=void 0;q.STSD=void 0;q.FTYP=void 0;q.DINF=void 0;const Oce=9e4;function u5(t,e,n=1,r=!1){const i=t*e*n;return r?Math.round(i):i}function pft(t,e,n=1,r=!1){return u5(t,e,1/n,r)}function om(t,e=!1){return u5(t,1e3,1/Oce,e)}function mft(t,e=1){return u5(t,Oce,1/e)}function MW(t){const{baseTime:e,timescale:n,trackId:r}=t;return`${e/n} (${e}/${n}) trackId: ${r}`}const gft=10*1e3,vft=1024,yft=1152,xft=1536;let Bd=null,Gk=null;function $W(t,e,n,r){return{duration:e,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class ib extends Zi{constructor(e,n,r,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,Bd===null){const o=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Bd=o?parseInt(o[1]):0}if(Gk===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);Gk=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const n=this._initPTS;(!n||!e||e.trackId!==n.trackId||e.baseTime!==n.baseTime||e.timescale!==n.timescale)&&this.log(`Reset initPTS: ${n&&MW(n)} > ${e&&MW(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let n=!1;const r=e[0].pts,i=e.reduce((s,o)=>{let a=o.pts,l=a-s;return l<-4294967296&&(n=!0,a=ii(a,r),l=a-s),l>0?s:a},r);return n&&this.debug("PTS rollover detected"),i}remux(e,n,r,i,s,o,a,l){let c,u,d,f,h,p,m=s,g=s;const y=e.pid>-1,x=n.pid>-1,S=n.samples.length,w=e.samples.length>0,E=a&&S>0||S>1;if((!y||w)&&(!x||E)||this.ISGenerated||a){if(this.ISGenerated){var _,I,A,L;const $=this.videoTrackConfig;($&&(n.width!==$.width||n.height!==$.height||((_=n.pixelRatio)==null?void 0:_[0])!==((I=$.pixelRatio)==null?void 0:I[0])||((A=n.pixelRatio)==null?void 0:A[1])!==((L=$.pixelRatio)==null?void 0:L[1]))||!$&&E||this.nextAudioTs===null&&w)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,n,s,o));const j=this.isVideoContiguous;let D=-1,O;if(E&&(D=bft(n.samples),!j&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,D>0){this.warn(`Dropped ${D} out of ${S} video samples due to a missing keyframe`);const $=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(D),n.dropped+=D,g+=(n.samples[0].pts-$)/n.inputTimeScale,O=g}else D===-1&&(this.warn(`No keyframe found out of ${S} video samples`),p=!1);if(this.ISGenerated){if(w&&E){const $=this.getVideoStartPts(n.samples),C=(ii(e.samples[0].pts,$)-$)/n.inputTimeScale;m+=Math.max(0,C),g+=Math.max(0,-C)}if(w){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,n,s,o)),u=this.remuxAudio(e,m,this.isAudioContiguous,o,x||E||l===ge.AUDIO?g:void 0),E){const $=u?u.endPTS-u.startPTS:0;n.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,n,s,o)),c=this.remuxVideo(n,g,j,$)}}else E&&(c=this.remuxVideo(n,g,j,0));c&&(c.firstKeyFrame=D,c.independent=D!==-1,c.firstKeyFramePTS=O)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=Dce(r,s,this._initPTS,this._initDTS)),i.samples.length&&(f=Mce(i,s,this._initPTS))),{audio:u,video:c,initSegment:d,independent:p,text:f,id3:h}}computeInitPts(e,n,r,i){const s=Math.round(r*n);let o=ii(e,s);if(o<s+n)for(this.log(`Adjusting PTS for rollover in timeline near ${(s-o)/n} ${i}`);o<s+n;)o+=8589934592;return o-s}generateIS(e,n,r,i){const s=e.samples,o=n.samples,a=this.typeSupported,l={},c=this._initPTS;let u=!c||i,d="audio/mp4",f,h,p,m=-1;if(u&&(f=h=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(d="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):q.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(m=e.id,p=e.inputTimeScale,!c||p!==c.timescale?f=h=this.computeInitPts(s[0].pts,p,r,"audio"):u=!1)}if(n.sps&&n.pps&&o.length){if(n.timescale=n.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:q.initSegment([n]),metadata:{width:n.width,height:n.height}},u)if(m=n.id,p=n.inputTimeScale,!c||p!==c.timescale){const g=this.getVideoStartPts(o),y=ii(o[0].dts,g),x=this.computeInitPts(y,p,r,"video"),S=this.computeInitPts(g,p,r,"video");h=Math.min(h,x),f=Math.min(f,S)}else u=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(c&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${r} ${f/p} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${f/p} (${f}/${p}) trackId: ${m}`),this._initPTS={baseTime:f,timescale:p,trackId:m},this._initDTS={baseTime:h,timescale:p,trackId:m}):f=p=void 0,{tracks:l,initPTS:f,timescale:p,trackId:m}}remuxVideo(e,n,r,i){const s=e.inputTimeScale,o=e.samples,a=[],l=o.length,c=this._initPTS,u=c.baseTime*s/c.timescale;let d=this.nextVideoTs,f=8,h=this.videoSampleDuration,p,m,g=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,x=!1;if(!r||d===null){const N=u+n*s,V=o[0].pts-ii(o[0].dts,o[0].pts);Bd&&d!==null&&Math.abs(N-V-(d+u))<15e3?r=!0:d=N-V-u}const S=d+u;for(let N=0;N<l;N++){const V=o[N];V.pts=ii(V.pts,S),V.dts=ii(V.dts,S),V.dts<o[N>0?N-1:N].dts&&(x=!0)}x&&o.sort(function(N,V){const H=N.dts-V.dts,W=N.pts-V.pts;return H||W}),p=o[0].dts,m=o[o.length-1].dts;const w=m-p,E=w?Math.round(w/(l-1)):h||e.inputTimeScale/30;if(r){const N=p-S,V=N>E,H=N<-1;if((V||H)&&(V?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${om(N,!0)} ms (${N}dts) hole between fragments detected at ${n.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${om(-N,!0)} ms (${N}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!H||S>=o[0].pts||Bd)){p=S;const W=o[0].pts-N;if(V)o[0].dts=p,o[0].pts=W;else{let z=!0;for(let G=0;G<o.length&&!(o[G].dts>W&&z);G++){const K=o[G].pts;if(o[G].dts-=N,o[G].pts-=N,G<o.length-1){const Q=o[G+1].pts,ne=o[G].pts,Z=Q<=ne,re=Q<=K;z=Z==re}}}this.log(`Video: Initial PTS/DTS adjusted: ${om(W,!0)}/${om(p,!0)}, delta: ${om(N,!0)} ms`)}}p=Math.max(0,p);let T=0,_=0,I=p;for(let N=0;N<l;N++){const V=o[N],H=V.units,W=H.length;let z=0;for(let G=0;G<W;G++)z+=H[G].data.length;_+=z,T+=W,V.length=z,V.dts<I?(V.dts=I,I+=E/4|0||1):I=V.dts,g=Math.min(V.pts,g),y=Math.max(V.pts,y)}m=o[l-1].dts;const A=_+4*T+8;let L;try{L=new Uint8Array(A)}catch(N){this.observer.emit(F.ERROR,F.ERROR,{type:Se.MUX_ERROR,details:Y.REMUX_ALLOC_ERROR,fatal:!1,error:N,bytes:A,reason:`fail allocating video mdat ${A}`});return}const j=new DataView(L.buffer);j.setUint32(0,A),L.set(q.types.mdat,4);let D=!1,O=Number.POSITIVE_INFINITY,$=Number.POSITIVE_INFINITY,R=Number.NEGATIVE_INFINITY,C=Number.NEGATIVE_INFINITY;for(let N=0;N<l;N++){const V=o[N],H=V.units;let W=0;for(let K=0,Q=H.length;K<Q;K++){const ne=H[K],Z=ne.data,re=ne.data.byteLength;j.setUint32(f,re),f+=4,L.set(Z,f),f+=re,W+=4+re}let z;if(N<l-1)h=o[N+1].dts-V.dts,z=o[N+1].pts-V.pts;else{const K=this.config,Q=N>0?V.dts-o[N-1].dts:E;if(z=N>0?V.pts-o[N-1].pts:E,K.stretchShortVideoTrack&&this.nextAudioTs!==null){const ne=Math.floor(K.maxBufferHole*s),Z=(i?g+i*s:this.nextAudioTs+u)-V.pts;Z>ne?(h=Z-Q,h<0?h=Q:D=!0,this.log(`It is approximately ${Z/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=Q}else h=Q}const G=Math.round(V.pts-V.dts);O=Math.min(O,h),R=Math.max(R,h),$=Math.min($,z),C=Math.max(C,z),a.push($W(V.key,h,W,G))}if(a.length){if(Bd){if(Bd<70){const N=a[0].flags;N.dependsOn=2,N.isNonSync=0}}else if(Gk&&C-$<R-O&&E/R<.025&&a[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let N=p;for(let V=0,H=a.length;V<H;V++){const W=N+a[V].duration,z=N+a[V].cts;if(V<H-1){const G=W+a[V+1].cts;a[V].duration=G-z}else a[V].duration=V?a[V-1].duration:E;a[V].cts=0,N=W}}}h=D||!h?E:h;const P=m+h;this.nextVideoTs=d=P-u,this.videoSampleDuration=h,this.isVideoContiguous=!0;const k=q.moof(e.sequenceNumber++,p,vt(e,{samples:a})),M="video",B={data1:k,data2:L,startPTS:(g-u)/s,endPTS:(y+h-u)/s,startDTS:(p-u)/s,endDTS:d/s,type:M,hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,B}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return yft;case"ac3":return xft;default:return vft}}remuxAudio(e,n,r,i,s){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,c=this.getSamplesPerFrame(e),u=c*l,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],p=s!==void 0;let m=e.samples,g=f?0:8,y=this.nextAudioTs||-1;const x=d.baseTime*o/d.timescale,S=x+n*o;if(this.isAudioContiguous=r=r||m.length&&y>0&&(i&&Math.abs(S-(y+x))<9e3||Math.abs(ii(m[0].pts,S)-(y+x))<20*u),m.forEach(function(C){C.pts=ii(C.pts,S)}),!r||y<0){const C=m.length;if(m=m.filter(P=>P.pts>=0),C!==m.length&&this.warn(`Removed ${m.length-C} of ${C} samples (initPTS ${x} / ${o})`),!m.length)return;s===0?y=0:i&&!p?y=Math.max(0,S-x):y=m[0].pts-x}if(e.segmentCodec==="aac"){const C=this.config.maxAudioFramesDrift;for(let P=0,k=y+x;P<m.length;P++){const M=m[P],B=M.pts,N=B-k,V=Math.abs(1e3*N/o);if(N<=-C*u&&p)P===0&&(this.warn(`Audio frame @ ${(B/o).toFixed(3)}s overlaps marker by ${Math.round(1e3*N/o)} ms.`),this.nextAudioTs=y=B-x,k=B);else if(N>=C*u&&V<gft&&p){let H=Math.round(N/u);for(k=B-H*u;k<0&&H&&u;)H--,k+=u;P===0&&(this.nextAudioTs=y=k-x),this.warn(`Injecting ${H} audio frames @ ${((k-x)/o).toFixed(3)}s due to ${Math.round(1e3*N/o)} ms gap.`);for(let W=0;W<H;W++){let z=hft.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);z||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),z=M.unit.subarray()),m.splice(P,0,{unit:z,pts:k}),k+=u,P++}}M.pts=k,k+=u}}let w=null,E=null,T,_=0,I=m.length;for(;I--;)_+=m[I].unit.byteLength;for(let C=0,P=m.length;C<P;C++){const k=m[C],M=k.unit;let B=k.pts;if(E!==null){const V=h[C-1];V.duration=Math.round((B-E)/l)}else if(r&&e.segmentCodec==="aac"&&(B=y+x),w=B,_>0){_+=g;try{T=new Uint8Array(_)}catch(V){this.observer.emit(F.ERROR,F.ERROR,{type:Se.MUX_ERROR,details:Y.REMUX_ALLOC_ERROR,fatal:!1,error:V,bytes:_,reason:`fail allocating audio mdat ${_}`});return}f||(new DataView(T.buffer).setUint32(0,_),T.set(q.types.mdat,4))}else return;T.set(M,g);const N=M.byteLength;g+=N,h.push($W(!0,c,N,0)),E=B}const A=h.length;if(!A)return;const L=h[h.length-1];y=E-x,this.nextAudioTs=y+l*L.duration;const j=f?new Uint8Array(0):q.moof(e.sequenceNumber++,w/l,vt({},e,{samples:h}));e.samples=[];const D=(w-x)/o,O=y/o,R={data1:j,data2:T,startPTS:D,endPTS:O,startDTS:D,endDTS:O,type:"audio",hasAudio:!0,hasVideo:!1,nb:A};return this.isAudioContiguous=!0,R}}function ii(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function bft(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function Dce(t,e,n,r){const i=t.samples.length;if(!i)return;const s=t.inputTimeScale;for(let a=0;a<i;a++){const l=t.samples[a];l.pts=ii(l.pts-n.baseTime*s/n.timescale,e*s)/s,l.dts=ii(l.dts-r.baseTime*s/r.timescale,e*s)/s}const o=t.samples;return t.samples=[],{samples:o}}function Mce(t,e,n){const r=t.samples.length;if(!r)return;const i=t.inputTimeScale;for(let o=0;o<r;o++){const a=t.samples[o];a.pts=ii(a.pts-n.baseTime*i/n.timescale,e*i)/i}t.samples.sort((o,a)=>o.pts-a.pts);const s=t.samples;return t.samples=[],{samples:s}}class Sft extends Zi{constructor(e,n,r,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const n=this.initPTS;n&&e&&n.baseTime===e.baseTime&&n.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,n,r,i){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(e,i),this.emitInitSegment=!0}generateInitSegment(e,n){let{audioCodec:r,videoCodec:i}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:s,video:o}=this.initData=Ule(e);if(n)lut(e,n);else{const l=s||o;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}s&&(r=NW(s,yt.AUDIO,this)),o&&(i=NW(o,yt.VIDEO,this));const a={};s&&o?a.audiovideo={container:"video/mp4",codec:r+","+i,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:s?a.audio={container:"audio/mp4",codec:r,encrypted:s.encrypted,initSegment:e,id:"audio"}:o?a.video={container:"video/mp4",codec:i,supplemental:o.supplemental,encrypted:o.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=a}remux(e,n,r,i,s,o){var a,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};he(u)||(u=this.lastEndTime=s||0);const f=n.samples;if(!f.length)return d;const h={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(f),p=this.initData),!((l=p)!=null&&l.length))return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const m=uut(f,p,this),g=p.audio?m[p.audio.id]:null,y=p.video?m[p.video.id]:null,x=F1(y,1/0),S=F1(g,1/0),w=F1(y,0,!0),E=F1(g,0,!0);let T=s,_=0;const I=g&&(!y||!c&&S<x||c&&c.trackId===p.audio.id),A=I?g:y;if(A){const k=A.timescale,M=A.start-s*k,B=I?p.audio.id:p.video.id;T=A.start/k,_=I?E-S:w-x,(o||!c)&&(wft(c,T,s,_)||k!==c.timescale)&&(c&&this.warn(`Timestamps at playlist time: ${o?"":"~"}${s} ${M/k} != initPTS: ${c.baseTime/c.timescale} (${c.baseTime}/${c.timescale}) trackId: ${c.trackId}`),this.log(`Found initPTS at playlist time: ${s} offset: ${T-s} (${M}/${k}) trackId: ${B}`),c=null,h.initPTS=M,h.timescale=k,h.trackId=B)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${s}`);c?(h.initPTS=c.baseTime,h.timescale=c.timescale,h.trackId=c.trackId):((!h.timescale||h.trackId===void 0||h.initPTS===void 0)&&(this.warn("Could not set initPTS"),h.initPTS=T,h.timescale=1,h.trackId=-1),this.initPTS=c={baseTime:h.initPTS,timescale:h.timescale,trackId:h.trackId});const L=T-c.baseTime/c.timescale,j=L+_;_>0?this.lastEndTime=j:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const D=!!p.audio,O=!!p.video;let $="";D&&($+="audio"),O&&($+="video");const R=(p.audio?p.audio.encrypted:!1)||(p.video?p.video.encrypted:!1),C={data1:f,startPTS:L,startDTS:L,endPTS:j,endDTS:j,type:$,hasAudio:D,hasVideo:O,nb:1,dropped:0,encrypted:R};d.audio=D&&!O?C:void 0,d.video=O?C:void 0;const P=y==null?void 0:y.sampleCount;if(P){const k=y.keyFrameIndex,M=k!==-1;C.nb=P,C.dropped=k===0||this.isVideoContiguous?0:M?k:P,C.independent=M,C.firstKeyFrame=k,M&&y.keyFrameStart&&(C.firstKeyFramePTS=(y.keyFrameStart-c.baseTime)/c.timescale),this.isVideoContiguous||(d.independent=M),this.isVideoContiguous||(this.isVideoContiguous=M),C.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${k}/${P} dropped: ${C.dropped} start: ${C.firstKeyFramePTS||"NA"}`)}return d.initSegment=h,d.id3=Dce(r,s,c,c),i.samples.length&&(d.text=Mce(i,s,c)),d}}function F1(t,e,n=!1){return(t==null?void 0:t.start)!==void 0?(t.start+(n?t.duration:0))/t.timescale:e}function wft(t,e,n,r){if(t===null)return!0;const i=Math.max(r,1),s=e-t.baseTime/t.timescale;return Math.abs(s-n)>i}function NW(t,e,n){const r=t.codec;return r&&r.length>4?r:e===yt.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?Nw(r,!1):(n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let Ko;try{Ko=self.performance.now.bind(self.performance)}catch{Ko=Date.now}const sb=[{demux:aft,remux:Sft},{demux:fl,remux:ib},{demux:rft,remux:ib},{demux:sft,remux:ib}];sb.splice(2,0,{demux:ift,remux:ib});class FW{constructor(e,n,r,i,s,o){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.id=s,this.logger=o}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,i){const s=r.transmuxing;s.executeStart=Ko();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:f,timeOffset:h,initSegmentChange:p}=i||a,{audioCodec:m,videoCodec:g,defaultInitPts:y,duration:x,initSegmentData:S}=l,w=Eft(o,n);if(w&&Jf(w.method)){const I=this.getDecrypter(),A=t5(w.method);if(I.isSync()){let L=I.softwareDecrypt(o,w.key.buffer,w.iv.buffer,A);if(r.part>-1){const D=I.flush();L=D&&D.buffer}if(!L)return s.executeEnd=Ko(),Kk(r);o=new Uint8Array(L)}else return this.asyncResult=!0,this.decryptionPromise=I.webCryptoDecrypt(o,w.key.buffer,w.iv.buffer,A).then(L=>{const j=this.push(L,null,r);return this.decryptionPromise=null,j}),this.decryptionPromise}const E=this.needsProbing(u,d);if(E){const I=this.configureTransmuxer(o);if(I)return this.logger.warn(`[transmuxer] ${I.message}`),this.observer.emit(F.ERROR,F.ERROR,{type:Se.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,fatal:!1,error:I,reason:I.message}),s.executeEnd=Ko(),Kk(r)}(u||d||p||E)&&this.resetInitSegment(S,m,g,x,n),(u||p||E)&&this.resetInitialTimestamp(y),c||this.resetContiguity();const T=this.transmux(o,w,h,f,r);this.asyncResult=j0(T);const _=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,s.executeEnd=Ko(),T}flush(e){const n=e.transmuxing;n.executeStart=Ko();const{decrypter:r,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const o=[],{timeOffset:a}=i;if(r){const d=r.flush();d&&o.push(this.push(d.buffer,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c){n.executeEnd=Ko();const d=[Kk(e)];return this.asyncResult?Promise.resolve(d):d}const u=l.flush(a);return j0(u)?(this.asyncResult=!0,u.then(d=>(this.flushRemux(o,d,e),o))):(this.flushRemux(o,u,e),this.asyncResult?Promise.resolve(o):o)}flushRemux(e,n,r){const{audioTrack:i,videoTrack:s,id3Track:o,textTrack:a}=n,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===ge.MAIN?"level":"track"} ${r.level}`);const u=this.remuxer.remux(i,s,o,a,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:r}),r.transmuxing.executeEnd=Ko()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,i,s){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,n,r,i),a.resetInitSegment(e,n,r,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,i,s){let o;return n&&n.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,n,r,i,s):o=this.transmuxUnencrypted(e,r,i,s),o}transmuxUnencrypted(e,n,r,i){const{audioTrack:s,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,o,a,l,n,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,n,r,i,s){return this.demuxer.demuxSampleAes(e,n,r).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,r,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:i}=this;let s;for(let d=0,f=sb.length;d<f;d++){var o;if((o=sb[d].demux)!=null&&o.probe(e,this.logger)){s=sb[d];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,l=this.remuxer,c=s.remux,u=s.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(r,n,i,this.logger)),(!a||!(a instanceof u))&&(this.demuxer=new u(r,n,i,this.logger),this.probe=u.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new J4(this.config)),e}}function Eft(t,e){let n=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const Kk=t=>({remuxResult:{},chunkMeta:t});function j0(t){return"then"in t&&t.then instanceof Function}class _ft{constructor(e,n,r,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=i,this.defaultInitPts=s||null}}class Tft{constructor(e,n,r,i,s,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=o}}let jW=0;class $ce{constructor(e,n,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=jW++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const c=l.data,u=this.hls;if(!(!u||!(c!=null&&c.event)||c.instanceNo!==this.instanceNo))switch(c.event){case"init":{var d;const f=(d=this.workerContext)==null?void 0:d.objectURL;f&&self.URL.revokeObjectURL(f);break}case"transmuxComplete":{this.handleTransmuxComplete(c.data);break}case"flush":{this.onFlush(c.data);break}case"workerLog":{u.logger[c.data.logType]&&u.logger[c.data.logType](c.data.message);break}default:{c.data=c.data||{},c.data.frag=this.frag,c.data.part=this.part,c.data.id=this.id,u.trigger(c.event,c.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const c=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:c})};const s=e.config;this.hls=e,this.id=n,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const o=(l,c)=>{c=c||{},c.frag=this.frag||void 0,l===F.ERROR&&(c=c,c.parent=this.id,c.part=this.part,this.error=c.error),this.hls.trigger(l,c)};this.observer=new i5,this.observer.on(F.FRAG_DECRYPTED,o),this.observer.on(F.ERROR,o);const a=eW(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(s.workerPath||Idt()){try{s.workerPath?(l.log(`loading Web Worker ${s.workerPath} for "${n}"`),this.workerContext=Ldt(s.workerPath)):(l.log(`injecting Web Worker for "${n}"`),this.workerContext=Adt());const{worker:u}=this.workerContext;u.addEventListener("message",this.onWorkerMessage),u.addEventListener("error",this.onWorkerError),u.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:n,config:xt(s)})}catch(u){l.warn(`Error setting up "${n}" Web Worker, fallback to inline`,u),this.terminateWorker(),this.error=null,this.transmuxer=new FW(this.observer,a,s,"",n,e.logger)}return}}this.transmuxer=new FW(this.observer,a,s,"",n,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=jW++;const n=this.hls.config,r=eW(n.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:xt(n)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),Rdt(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,n,r,i,s,o,a,l,c,u){var d,f;c.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:p}=this,m=o?o.start:s.start,g=s.decryptdata,y=this.frag,x=!(y&&s.cc===y.cc),S=!(y&&c.level===y.level),w=y?c.sn-y.sn:-1,E=this.part?c.part-this.part.index:-1,T=w===0&&c.id>1&&c.id===(y==null?void 0:y.stats.chunkCount),_=!S&&(w===1||w===0&&(E===1||T&&E<=0)),I=self.performance.now();(S||w||s.stats.parsing.start===0)&&(s.stats.parsing.start=I),o&&(E||!_)&&(o.stats.parsing.start=I);const A=!(y&&((d=s.initSegment)==null?void 0:d.url)===((f=y.initSegment)==null?void 0:f.url)),L=new Tft(x,_,l,S,m,A);if(!_||x||A){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${c.sn}${c.part>-1?" part: "+c.part:""} ${this.id===ge.MAIN?"level":"track"}: ${c.level} id: ${c.id}
        discontinuity: ${x}
        trackSwitch: ${S}
        contiguous: ${_}
        accurateTimeOffset: ${l}
        timeOffset: ${m}
        initSegmentChange: ${A}`);const j=new _ft(r,i,n,a,u);this.configureTransmuxer(j)}if(this.frag=s,this.part=o,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:g,chunkMeta:c,state:L},e instanceof ArrayBuffer?[e]:[]);else if(p){const j=p.push(e,g,c,L);j0(j)?j.then(D=>{this.handleTransmuxComplete(D)}).catch(D=>{this.transmuxerError(D,c,"transmuxer-interface push error")}):this.handleTransmuxComplete(j)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:n,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:n,cmd:"flush",chunkMeta:e});else if(r){const i=r.flush(e);j0(i)?i.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}configureTransmuxer(e){const{instanceNo:n,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:n,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const BW=100;class Cft extends r5{constructor(e,n,r){super(e,n,r,"audio-stream-controller",ge.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(F.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(F.BUFFER_RESET,this.onBufferReset,this),e.on(F.BUFFER_CREATED,this.onBufferCreated,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(F.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(F.FRAG_LOADING,this.onFragLoading,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(F.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(F.BUFFER_RESET,this.onBufferReset,this),e.off(F.BUFFER_CREATED,this.onBufferCreated,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(F.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(F.FRAG_LOADING,this.onFragLoading,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:s,trackId:o}){if(r===ge.MAIN){const a=n.cc,l=this.fragCurrent;if(this.initPTS[a]={baseTime:i,timescale:s,trackId:o},this.log(`InitPTS for cc: ${a} found from main: ${i/s} (${i}/${s}) trackId: ${o}`),this.mainAnchor=n,this.state===ee.WAITING_INIT_PTS){const c=this.waitingData;(!c&&!this.loadingParts||c&&c.frag.cc!==a)&&this.syncWithAnchor(n,c==null?void 0:c.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==a?(l.abortRequests(),this.syncWithAnchor(n,l)):this.state===ee.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,n){var r;const i=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(n&&(i==null?void 0:i.cc)===n.cc)return;const s=(i||e).cc,o=this.getLevelDetails(),a=this.getLoadPosition(),l=Zle(o,s,a);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===ee.IDLE&&this.doTickIdle())}startLoad(e,n){if(!this.levels){this.startPosition=e,this.state=ee.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(BW),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=ee.IDLE):this.state=ee.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}doTick(){switch(this.state){case ee.IDLE:this.doTickIdle();break;case ee.WAITING_TRACK:{const{levels:e,trackId:n}=this,r=e==null?void 0:e[n],i=r==null?void 0:r.details;if(i&&!this.waitForLive(r)){if(this.waitForCdnTuneIn(i))break;this.state=ee.WAITING_INIT_PTS}break}case ee.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case ee.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:n,part:r,cache:i,complete:s}=e,o=this.mainAnchor;if(this.initPTS[n.cc]!==void 0){this.waitingData=null,this.state=ee.FRAG_LOADING;const a=i.flush().buffer,l={frag:n,part:r,payload:a,networkDetails:null};this._handleFragmentLoadProgress(l),s&&super._handleFragmentLoadComplete(l)}else o&&o.cc!==e.frag.cc&&this.syncWithAnchor(o,e.frag)}else this.state=ee.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:n,levels:r,media:i,trackId:s}=this,o=n.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!o.startFragPrefetch)||!(r!=null&&r[s]))return;const a=r[s],l=a.details;if(!l||this.waitForLive(a)||this.waitForCdnTuneIn(l)){this.state=ee.WAITING_TRACK,this.startFragRequested=!1;return}const c=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&c&&(this.bufferFlushed=!1,this.afterBufferFlushed(c,yt.AUDIO,ge.AUDIO));const u=this.getFwdBufferInfo(c,ge.AUDIO);if(u===null)return;if(!this.switchingTrack&&this._streamEnded(u,l)){n.trigger(F.BUFFER_EOS,{type:"audio"}),this.state=ee.ENDED;return}const d=u.len,f=n.maxBufferLength,h=l.fragments,p=h[0].start,m=this.getLoadPosition(),g=this.flushing?m:u.end;if(this.switchingTrack&&i){const S=m;l.PTSKnown&&S<p&&(u.end>p||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=p+.05)}if(d>=f&&!this.switchingTrack&&g<h[h.length-1].start)return;let y=this.getNextFragment(g,l);if(y&&this.isLoopLoading(y,g)&&(y=this.getNextFragmentLoopLoading(y,l,u,ge.MAIN,f)),!y){this.bufferFlushed=!0;return}let x=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&x&&pn(y)&&!y.endList&&(!l.live||!this.loadingParts&&g<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(x)===_n.OK&&(this.mainFragLoading=x=null),x&&pn(x))){if(y.start>x.end){const w=this.fragmentTracker.getFragAtPos(g,ge.MAIN);w&&w.end>x.end&&(x=w,this.mainFragLoading={frag:w,targetBufferTime:null})}if(y.start>x.end)return}this.loadFragment(y,a,g)}onMediaDetaching(e,n){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,n)}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new $0(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?(this.switchingTrack=n,this.flushAudioIfNeeded(n),this.state!==ee.STOPPED&&(this.setInterval(BW),this.state=ee.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=n,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,n){this.mainDetails=n.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(F.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,n){var r;const{levels:i}=this,{details:s,id:o,groupId:a,track:l}=n;if(!i){this.warn(`Audio tracks reset while loading track ${o} "${l.name}" of "${a}"`);return}const c=this.mainDetails;if(!c||s.endCC>c.endCC||c.expired){this.cachedTrackLoadedData=n,this.state!==ee.STOPPED&&(this.state=ee.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${o} "${l.name}" of "${a}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const u=i[o];let d=0;if(s.live||(r=u.details)!=null&&r.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(u.details){var f;d=this.alignPlaylists(s,u.details,(f=this.levelLastLoaded)==null?void 0:f.details)}s.alignedSliding||(gce(s,c),s.alignedSliding||Hw(s,c),d=s.fragmentStart)}u.details=s,this.levelLastLoaded=u,this.startFragRequested||this.setStartPosition(c,d),this.hls.trigger(F.AUDIO_TRACK_UPDATED,{details:s,id:o,groupId:n.groupId}),this.state===ee.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=ee.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:i,payload:s}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const c=l[a];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const d=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new $ce(this.hls,ge.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[r.cc],p=(n=r.initSegment)==null?void 0:n.data;if(h!==void 0){const g=i?i.index:-1,y=g!==-1,x=new e5(r.level,r.sn,r.stats.chunkCount,s.byteLength,g,y);f.push(s,p,d,"",r,i,u.totalduration,!1,x,h)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${u.startSN} ,${u.endSN}],track ${a}`);const{cache:m}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new vce,complete:!1};m.push(new Uint8Array(s)),this.state!==ee.STOPPED&&(this.state=ee.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,n){this.bufferFlushed=this.flushing=!1;const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,n){!this.audioOnly&&n.frag.type===ge.MAIN&&pn(n.frag)&&(this.mainFragLoading=n,this.state===ee.IDLE&&this.tick())}onFragBuffered(e,n){const{frag:r,part:i}=n;if(r.type!==ge.AUDIO){!this.audioOnly&&r.type===ge.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(pn(r)){this.fragPrevious=r;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(F.AUDIO_TRACK_SWITCHED,ct({},s)))}this.fragBufferedComplete(r,i),this.media&&this.tick()}onError(e,n){var r;if(n.fatal){this.state=ee.ERROR;return}switch(n.details){case Y.FRAG_GAP:case Y.FRAG_PARSING_ERROR:case Y.FRAG_DECRYPT_ERROR:case Y.FRAG_LOAD_ERROR:case Y.FRAG_LOAD_TIMEOUT:case Y.KEY_LOAD_ERROR:case Y.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ge.AUDIO,n);break;case Y.AUDIO_TRACK_LOAD_ERROR:case Y.AUDIO_TRACK_LOAD_TIMEOUT:case Y.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===ee.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===We.AUDIO_TRACK&&(this.state=ee.IDLE);break;case Y.BUFFER_ADD_CODEC_ERROR:case Y.BUFFER_APPEND_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)||this.resetLoadingState();break;case Y.BUFFER_FULL_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Y.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(e,{type:n}){n!==yt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:n}){if(n!==yt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ee.ENDED&&(this.state=ee.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,ge.AUDIO),this.tick())}}_handleTransmuxComplete(e){var n;const r="audio",{hls:i}=this,{remuxResult:s,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{details:d}=u,{audio:f,text:h,id3:p,initSegment:m}=s;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=ee.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const g=l.initSegment||l;if(this.unhandledEncryptionError(m,l))return;this._bufferInitSegment(u,m.tracks,g,o),i.trigger(F.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:r,tracks:m.tracks})}if(f){const{startPTS:g,endPTS:y,startDTS:x,endDTS:S}=f;c&&(c.elementaryStreams[yt.AUDIO]={startPTS:g,endPTS:y,startDTS:x,endDTS:S}),l.setElementaryStreamInfo(yt.AUDIO,g,y,x,S),this.bufferFragmentData(f,l,c,o)}if(p!=null&&(n=p.samples)!=null&&n.length){const g=vt({id:r,frag:l,details:d},p);i.trigger(F.FRAG_PARSING_METADATA,g)}if(h){const g=vt({id:r,frag:l,details:d},h);i.trigger(F.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,n,r,i){if(this.state!==ee.PARSING||(n.video&&delete n.video,n.audiovideo&&delete n.audiovideo,!n.audio))return;const s=n.audio;s.id=ge.AUDIO;const o=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${o}/${s.codec}]`),o&&o.split(",").length===1&&(s.levelCodec=o),this.hls.trigger(F.BUFFER_CODECS,n);const a=s.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:a};this.hls.trigger(F.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===_n.NOT_LOADED||i===_n.PARTIAL){var s;if(!pn(e))this._loadInitSegment(e,n);else if((s=n.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ee.WAITING_INIT_PTS;const o=this.mainDetails;o&&o.fragmentStart!==n.details.fragmentStart&&Hw(n.details,o)}else super.loadFragment(e,n,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:n,lang:r,assocLang:i,characteristics:s,audioCodec:o,channels:a}=this.bufferedTrack;gu({name:n,lang:r,assocLang:i,characteristics:s,audioCodec:o,channels:a},e,Gc)||(jw(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:n}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(F.AUDIO_TRACK_SWITCHED,ct({},e))}}class d5 extends Zi{constructor(e,n){super(n,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n,r){const i=n==null?void 0:n.renditionReports;if(i){let s=-1;for(let o=0;o<i.length;o++){const a=i[o];let l;try{l=new self.URL(a.URI,n.url).href}catch(c){this.warn(`Could not construct new URL for Rendition Report: ${c}`),l=a.URI||""}if(l===e){s=o;break}else l===e.substring(0,l.length)&&(s=o)}if(s!==-1){const o=i[s],a=parseInt(o["LAST-MSN"])||n.lastPartSn;let l=parseInt(o["LAST-PART"])||n.lastPartIndex;if(this.hls.config.lowLatencyMode){const u=Math.min(n.age-n.partTarget,n.targetduration);l>=0&&u>n.partTarget&&(l+=1)}const c=r&&tW(r);return new nW(a,l>=0?l:void 0,c)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,n){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,n){if(n)try{return n.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,n,r){const{details:i,stats:s}=n,o=self.performance.now(),a=s.loading.first?Math.max(0,o-s.loading.first):0;i.advancedDateTime=Date.now()-a;const l=this.hls.config.timelineOffset;if(l!==i.appliedTimelineOffset){const u=Math.max(l||0,0);i.appliedTimelineOffset=u,i.fragments.forEach(d=>{d.setStart(d.playlistOffset+u)})}if(i.live||r!=null&&r.live){const u="levelInfo"in n?n.levelInfo:n.track;if(i.reloaded(r),r&&i.fragments.length>0){ydt(r,i,this);const x=i.playlistParsingError;if(x){this.warn(x);const S=this.hls;if(!S.config.ignorePlaylistParsingErrors){var c;const{networkDetails:w}=n;S.trigger(F.ERROR,{type:Se.NETWORK_ERROR,details:Y.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:x,reason:x.message,level:n.level||void 0,parent:(c=i.fragments[0])==null?void 0:c.type,networkDetails:w,stats:s});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=s.loading.start);const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,h=(i.edge-f)*1e3,p=dce(i,h);if(i.requestScheduled+p<o?i.requestScheduled=o:i.requestScheduled+=p,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let m,g,y;if(i.canBlockReload&&i.endSN&&i.advanced){const x=this.hls.config.lowLatencyMode,S=i.lastPartSn,w=i.endSN,E=i.lastPartIndex,T=E!==-1,_=S===w;T?_?(g=w+1,y=x?0:E):(g=S,y=x?E+1:i.maxPartIndex):g=w+1;const I=i.age,A=I+i.ageHeader;let L=Math.min(A-i.partTarget,i.targetduration*1.5);if(L>0){if(A>i.targetduration*3)this.log(`Playlist last advanced ${I.toFixed(2)}s ago. Omitting segment and part directives.`),g=void 0,y=void 0;else if(r!=null&&r.tuneInGoal&&A-i.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${L} with playlist age: ${i.age}`),L=0;else{const j=Math.floor(L/i.targetduration);if(g+=j,y!==void 0){const D=Math.round(L%i.targetduration/i.partTarget);y+=D}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${I.toFixed(2)}s goal: ${L} skip sn ${j} to part ${y}`)}i.tuneInGoal=L}if(m=this.getDeliveryDirectives(i,n.deliveryDirectives,g,y),x||!_){i.requestScheduled=o,this.loadingPlaylist(u,m);return}}else(i.canBlockReload||i.canSkipUntil)&&(m=this.getDeliveryDirectives(i,n.deliveryDirectives,g,y));m&&g!==void 0&&i.canBlockReload&&(i.requestScheduled=s.loading.first+Math.max(p-a*2,p/2)),this.scheduleLoading(u,m,i)}else this.clearTimer()}scheduleLoading(e,n,r){const i=r||e.details;if(!i){this.loadingPlaylist(e,n);return}const s=self.performance.now(),o=i.requestScheduled;if(s>=o){this.loadingPlaylist(e,n);return}const a=o-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,n),a)}getDeliveryDirectives(e,n,r,i){let s=tW(e);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,i=n.part,s=nb.No),new nW(r,i,s)}checkRetry(e){const n=e.details,r=Bw(e),i=e.errorAction,{action:s,retryCount:o=0,retryConfig:a}=i||{},l=!!i&&!!a&&(s===Vn.RetryRequest||!i.resolved&&s===Vn.SendAlternateToPenaltyBox);if(l){var c;if(o>=a.maxNumRetry)return!1;if(r&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const u=Z4(a,o);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" in ${u}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}function Nce(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!B0(t[n].attrs,e[n].attrs))return!1;return!0}function B0(t,e,n){const r=t["STABLE-RENDITION-ID"];return r&&!n?r===e["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>t[i]!==e[i])}function FR(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class kft extends d5{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.LEVEL_LOADING,this.onLevelLoading,this),e.on(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(F.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.LEVEL_LOADING,this.onLevelLoading,this),e.off(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(F.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(F.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:i,details:s}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Audio track ${r} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(f=>!r||r.indexOf(f.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(f=>f.default)&&(this.selectDefaultTrack=!1),a.forEach((f,h)=>{f.id=h});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!s&&l){const f=ho(l,a,Gc);if(f>-1)s=a[f];else{const h=ho(l,this.tracks);s=this.tracks[h]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const u={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(F.AUDIO_TRACKS_UPDATED,u);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(a.length&&d===-1){var o;const f=new Error(`No audio track selected for current audio group-ID(s): ${(o=this.groupIds)==null?void 0:o.join(",")} track count: ${a.length}`);this.warn(f.message),this.hls.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}}onError(e,n){n.fatal||!n.context||n.context.type===We.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const n=this.hls;if(n.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&gu(e,i,Gc))return i;const s=ho(e,this.tracksInGroup,Gc);if(s>-1){const o=this.tracksInGroup[s];return this.setAudioTrack(s),o}else if(i){let o=n.loadLevel;o===-1&&(o=n.firstAutoLevel);const a=jut(e,n.levels,r,o,Gc);if(a===-1)return null;n.nextLoadLevel=a}if(e.channels||e.audioCodec){const o=ho(e,r);if(o>-1)return r[o]}}}return null}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===r&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(F.AUDIO_TRACK_SWITCHING,ct({},i)),s))return;const o=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(o)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||gu(e,i,Gc)))return r}if(e){const{name:r,lang:i,assocLang:s,characteristics:o,audioCodec:a,channels:l}=e;for(let c=0;c<n.length;c++){const u=n[c];if(gu({name:r,lang:i,assocLang:s,characteristics:o,audioCodec:a,channels:l},u,Gc))return c}for(let c=0;c<n.length;c++){const u=n[c];if(B0(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<n.length;c++){const u=n[c];if(B0(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){super.loadPlaylist();const n=this.currentTrack;this.shouldLoadPlaylist(n)&&jw(n.url,this.hls)&&this.scheduleLoading(n,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,n),o=e.details,a=o==null?void 0:o.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${s}`),this.hls.trigger(F.AUDIO_TRACK_LOADING,{url:s,id:r,groupId:i,deliveryDirectives:n||null,track:e})}}class Pft{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,n,r){if(this.queues===null||this.tracks===null)return;const i=this.queues[n];i.push(e),i.length===1&&!r&&this.executeNext(n)}appendBlocker(e){return new Promise(n=>{const r={label:"async-blocker",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(n=>{if(this.queues){const r={label:"async-blocker-prepend",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var n;const r=(n=e[0])==null?void 0:n.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const n=this.queues[e];if(n.length){const i=n[0];try{i.execute()}catch(s){var r;if(i.onError(s),this.queues===null||this.tracks===null)return;const o=(r=this.tracks[e])==null?void 0:r.buffer;o!=null&&o.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var n;return((n=this.queues)==null?void 0:n[e][0])||null}toString(){const{queues:e,tracks:n}=this;return e===null||n===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var n,r;return(n=this.queues)!=null&&n[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var n;const r=(n=this.tracks)==null?void 0:n[e],i=r==null?void 0:r.buffer;return i?`SourceBuffer${i.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var n;return((n=this.queues)==null?void 0:n[e].map(r=>r.label).join(", "))||""}}const UW=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Fce="HlsJsTrackRemovedError";class Ift extends Error{constructor(e){super(e),this.name=Fce}}class Aft extends Zi{constructor(e,n){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:i,mediaSource:s}=this;r&&this.log("Media source opened"),!(!i||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(F.MEDIA_ATTACHED,{media:i,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e,this.fragmentTracker=n,this.appendSource=Zct(uc(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.BUFFER_RESET,this.onBufferReset,this),e.on(F.BUFFER_APPENDING,this.onBufferAppending,this),e.on(F.BUFFER_CODECS,this.onBufferCodecs,this),e.on(F.BUFFER_EOS,this.onBufferEos,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(F.FRAG_PARSED,this.onFragParsed,this),e.on(F.FRAG_CHANGED,this.onFragChanged,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.BUFFER_RESET,this.onBufferReset,this),e.off(F.BUFFER_APPENDING,this.onBufferAppending,this),e.off(F.BUFFER_CODECS,this.onBufferCodecs,this),e.off(F.BUFFER_EOS,this.onBufferEos,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(F.FRAG_PARSED,this.onFragParsed,this),e.off(F.FRAG_CHANGED,this.onFragChanged,this),e.off(F.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:n}=this;if(!e)return null;const r={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const o=this.isQueued();(s||o)&&this.warn(`Transfering MediaSource with${o?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===n?vt(r,i.tracks):this.sourceBuffers.forEach(s=>{const[o]=s;o&&(r[o]=vt({},this.tracks[o]),this.removeBuffer(o)),s[0]=s[1]=null}),{media:e,mediaSource:n,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){var r;let i=2;(n.audio&&!n.video||!n.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,n){const r=this.media=n.media;this.transferData=this.overrides=void 0;const i=uc(this.appendSource);if(i){const s=!!n.mediaSource;(s||n.overrides)&&(this.transferData=n,this.overrides=n.overrides);const o=this.mediaSource=n.mediaSource||new i;if(this.assignMediaSource(o),s)this._objectUrl=r.src,this.attachTransferred();else{const a=this._objectUrl=self.URL.createObjectURL(o);if(this.appendSource)try{r.removeAttribute("src");const l=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||l&&o instanceof l,VW(r),Lft(r,a),r.load()}catch{r.src=a}else r.src=a}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var n,r;this.log(`${((n=this.transferData)==null?void 0:n.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,n=this.transferData;if(!n||!e)return;const r=this.tracks,i=n.tracks,s=i?Object.keys(i):null,o=s?s.length:0,a=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&s&&o){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${xt(r,(l,c)=>l==="initSegment"?void 0:c)};
transfer tracks: ${xt(i,(l,c)=>l==="initSegment"?void 0:c)}}`),!Dle(i,r)){n.mediaSource=null,n.tracks=void 0;const l=e.currentTime,c=this.details,u=Math.max(l,(c==null?void 0:c.fragments[0].start)||0);if(u-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${u}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(r)}") start time: ${u} currentTime: ${l}`),this.onMediaDetaching(F.MEDIA_DETACHING,{}),this.onMediaAttaching(F.MEDIA_ATTACHING,n),e.currentTime=u;return}this.transferData=void 0,s.forEach(l=>{const c=l,u=i[c];if(u){const d=u.buffer;if(d){const f=this.fragmentTracker,h=u.id;if(f.hasFragments(h)||f.hasParts(h)){const g=Re.getBuffered(d);f.detectEvictedFragments(c,g,h,null,!0)}const p=qk(c),m=[c,d];this.sourceBuffers[p]=m,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(c),this.trackSourceBuffer(c,u)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const n=(e=this.mediaSource)==null?void 0:e.readyState;return n==="open"||n==="ended"}onMediaDetaching(e,n){const r=!!n.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:s,_objectUrl:o}=this;if(s){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([a])=>{a&&this.removeBuffer(a)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const a=s.readyState==="open";try{const l=s.sourceBuffers;for(let c=l.length;c--;)a&&l[c].abort(),s.removeSourceBuffer(l[c]);a&&s.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),r||(o&&self.URL.revokeObjectURL(o),this.mediaSrc===o?(i.removeAttribute("src"),this.appendSource&&VW(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(F.MEDIA_DETACHED,n)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var n;const r=(n=this.tracks[e])==null?void 0:n.buffer;if(this.removeBuffer(e),r)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[qk(e)]=[null,null];const n=this.tracks[e];n&&(n.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new Pft(this.tracks)}onBufferCodecs(e,n){var r;const i=this.tracks,s=Object.keys(n);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const o="audiovideo"in n&&(i.audio||i.video)||i.audiovideo&&("audio"in n||"video"in n),a=!o&&this.sourceBufferCount&&this.media&&s.some(l=>!i[l]);if(o||a){this.warn(`Unsupported transition between "${Object.keys(i)}" and "${s}" SourceBuffers`);return}s.forEach(l=>{var c,u;const d=n[l],{id:f,codec:h,levelCodec:p,container:m,metadata:g,supplemental:y}=d;let x=i[l];const S=(c=this.transferData)==null||(c=c.tracks)==null?void 0:c[l],w=S!=null&&S.buffer?S:x,E=(w==null?void 0:w.pendingCodec)||(w==null?void 0:w.codec),T=w==null?void 0:w.levelCodec;x||(x=i[l]={buffer:void 0,listeners:[],codec:h,supplemental:y,container:m,levelCodec:p,metadata:g,id:f});const _=tb(E,T),I=_==null?void 0:_.replace(UW,"$1");let A=tb(h,p);const L=(u=A)==null?void 0:u.replace(UW,"$1");A&&_&&I!==L&&(l.slice(0,5)==="audio"&&(A=Nw(A,this.appendSource)),this.log(`switching codec ${E} to ${A}`),A!==(x.pendingCodec||x.codec)&&(x.pendingCodec=A),x.container=m,this.appendChangeType(l,m,A))}),(this.tracksReady||this.sourceBufferCount)&&(n.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!n.video&&((r=n.audio)==null?void 0:r.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,n)=>{const r=this.tracks[n];return e[n]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,n,r){const i=`${n};codecs=${r}`,s={label:`change-type=${i}`,execute:()=>{const o=this.tracks[e];if(o){const a=o.buffer;a!=null&&a.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),a.changeType(i),o.codec=r,o.container=n)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn(`Failed to change ${e} SourceBuffer type`,o)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var n;const r=e.start,i=r+e.duration*.05;if(((n=this.fragmentTracker.getAppendedFrag(r,ge.MAIN))==null?void 0:n.gap)===!0)return;const o={label:"block-audio",execute:()=>{var a;const l=this.tracks.video;(this.lastVideoAppendEnd>i||l!=null&&l.buffer&&Re.isBuffered(l.buffer,i)||((a=this.fragmentTracker.getAppendedFrag(i,ge.MAIN))==null?void 0:a.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn("Error executing block-audio operation",a)}};this.blockedAudioAppend={op:o,frag:e},this.append(o,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:n}=this;e&&n&&(this.blockedAudioAppend=null,n.unblockAudio(e.op))}onBufferAppending(e,n){const{tracks:r}=this,{data:i,type:s,parent:o,frag:a,part:l,chunkMeta:c,offset:u}=n,d=c.buffering[s],{sn:f,cc:h}=a,p=self.performance.now();d.start=p;const m=a.stats.buffering,g=l?l.stats.buffering:null;m.start===0&&(m.start=p),g&&g.start===0&&(g.start=p);const y=r.audio;let x=!1;s==="audio"&&(y==null?void 0:y.container)==="audio/mpeg"&&(x=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);const S=r.video,w=S==null?void 0:S.buffer;if(w&&f!=="initSegment"){const _=l||a,I=this.blockedAudioAppend;if(s==="audio"&&o!=="main"&&!this.blockedAudioAppend&&!(S.ending||S.ended)){const L=_.start+_.duration*.05,j=w.buffered,D=this.currentOp("video");!j.length&&!D?this.blockAudio(_):!D&&!Re.isBuffered(w,L)&&this.lastVideoAppendEnd<L&&this.blockAudio(_)}else if(s==="video"){const A=_.end;if(I){const L=I.frag.start;(A>L||A<this.lastVideoAppendEnd||Re.isBuffered(w,L))&&this.unblockAudio()}this.lastVideoAppendEnd=A}}const E=(l||a).start,T={label:`append-${s}`,execute:()=>{var _;d.executeStart=self.performance.now();const I=(_=this.tracks[s])==null?void 0:_.buffer;I&&(x?this.updateTimestampOffset(I,E,.1,s,f,h):u!==void 0&&he(u)&&this.updateTimestampOffset(I,u,1e-6,s,f,h)),this.appendExecutor(i,s)},onStart:()=>{},onComplete:()=>{const _=self.performance.now();d.executeEnd=d.end=_,m.first===0&&(m.first=_),g&&g.first===0&&(g.first=_);const I={};this.sourceBuffers.forEach(([A,L])=>{A&&(I[A]=Re.getBuffered(L))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(F.BUFFER_APPENDED,{type:s,frag:a,part:l,chunkMeta:c,parent:a.type,timeRanges:I})},onError:_=>{var I;const A={type:Se.MEDIA_ERROR,parent:a.type,details:Y.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:a,part:l,chunkMeta:c,error:_,err:_,fatal:!1},L=(I=this.media)==null?void 0:I.error;if(_.code===DOMException.QUOTA_EXCEEDED_ERR||_.name=="QuotaExceededError"||"quota"in _)A.details=Y.BUFFER_FULL_ERROR;else if(_.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!L)A.errorAction=Zf(!0);else if(_.name===Fce&&this.sourceBufferCount===0)A.errorAction=Zf(!0);else{const j=++this.appendErrors[s];this.warn(`Failed ${j}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${L||"no media error"})`),(j>=this.hls.config.appendErrorMaxRetry||L)&&(A.fatal=!0)}this.hls.trigger(F.ERROR,A)}};this.log(`queuing "${s}" append sn: ${f}${l?" p: "+l.index:""} of ${a.type===ge.MAIN?"level":"track"} ${a.level} cc: ${h}`),this.append(T,s,this.isPending(this.tracks[s]))}getFlushOp(e,n,r){return this.log(`queuing "${e}" remove ${n}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,n,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(F.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${n}-${r} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,n){const{type:r,startOffset:i,endOffset:s}=n;r?this.append(this.getFlushOp(r,i,s),r):this.sourceBuffers.forEach(([o])=>{o&&this.append(this.getFlushOp(o,i,s),o)})}onFragParsed(e,n){const{frag:r,part:i}=n,s=[],o=i?i.elementaryStreams:r.elementaryStreams;o[yt.AUDIOVIDEO]?s.push("audiovideo"):(o[yt.AUDIO]&&s.push("audio"),o[yt.VIDEO]&&s.push("video"));const a=()=>{const l=self.performance.now();r.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const c=i?i.stats:r.stats;this.hls.trigger(F.FRAG_BUFFERED,{frag:r,part:i,stats:c,id:r.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(a,s).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,n){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const n=this.tracks[e];if(n)return!n.ended||n.ending}return!1})}onBufferEos(e,n){var r;this.sourceBuffers.forEach(([o])=>{if(o){const a=this.tracks[o];(!n.type||n.type===o)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${o} buffer reached EOS`)))}});const i=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([o])=>{var a;return o&&!((a=this.tracks[o])!=null&&a.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:o}=this;if(!o||o.readyState!=="open"){o&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${o.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),o.endOfStream(),this.hls.trigger(F.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(F.BUFFERED_TO_END,void 0)):n.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const n=this.tracks[e];n&&(n.ending=!1)}})}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,n){if(n.details===Y.BUFFER_APPEND_ERROR&&n.frag){var r;const i=(r=n.errorAction)==null?void 0:r.nextAutoLevel;he(i)&&i!==n.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:n,media:r}=this;if(!r||n===null||!this.sourceBufferCount)return;const i=e.config,s=r.currentTime,o=n.levelTargetDuration,a=n.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(he(a)&&a>=0){const c=Math.max(a,o),u=Math.floor(s/o)*o-c;this.flushBackBuffer(s,o,u)}const l=i.frontBufferFlushThreshold;if(he(l)&&l>0){const c=Math.max(i.maxBufferLength,l),u=Math.max(c,o),d=Math.floor(s/o)*o+u;this.flushFrontBuffer(s,o,d)}}flushBackBuffer(e,n,r){this.sourceBuffers.forEach(([i,s])=>{if(s){const a=Re.getBuffered(s);if(a.length>0&&r>a.start(0)){var o;this.hls.trigger(F.BACK_BUFFER_REACHED,{bufferEnd:r});const l=this.tracks[i];if((o=this.details)!=null&&o.live)this.hls.trigger(F.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(l!=null&&l.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(F.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:i})}}})}flushFrontBuffer(e,n,r){this.sourceBuffers.forEach(([i,s])=>{if(s){const o=Re.getBuffered(s),a=o.length;if(a<2)return;const l=o.start(a-1),c=o.end(a-1);if(r>l||e>=l&&e<=c)return;this.hls.trigger(F.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:n,mediaSource:r}=this;if(!n||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const i=n.edge;if(n.live&&this.hls.config.liveDurationInfinity){if(n.fragments.length&&r.setLiveSeekableRange){const c=Math.max(0,n.fragmentStart),u=Math.max(c,i);return{duration:1/0,start:c,end:u}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return he(s)?{duration:s}:null;const o=this.media.duration,a=he(r.duration)?r.duration:0;return i>a&&i>o||!he(o)?{duration:i}:null}updateMediaSource({duration:e,start:n,end:r}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(he(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),n!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${n}-${r}.`),i.setLiveSeekableRange(n,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:n,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${n} codec events expected: ${e}) ${xt(r)}`),this.tracksReady){var i;const s=(i=this.transferData)==null?void 0:i.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([n,r])=>{if(n){const i=this.tracks[n];e[n]={buffer:r,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(F.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([n])=>{this.executeNext(n)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:n,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const o=s,a=e[o];if(this.isPending(a)){const l=this.getTrackCodec(a,o),c=`${a.container};codecs=${l}`;a.codec=l,this.log(`creating sourceBuffer(${c})${this.currentOp(o)?" Queued":""} ${xt(a)}`);try{const u=r.addSourceBuffer(c),d=qk(o),f=[o,u];n[d]=f,a.buffer=u}catch(u){var i;this.error(`error while trying to add sourceBuffer: ${u.message}`),this.shiftAndExecuteNext(o),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[o],this.hls.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:o,mimeType:c,parent:a.id});return}this.trackSourceBuffer(o,a)}}this.bufferCreated()}getTrackCodec(e,n){const r=e.supplemental;let i=e.codec;r&&(n==="video"||n==="audiovideo")&&D0(r,"video")&&(i=but(i,r));const s=tb(i,e.levelCodec);return s?n.slice(0,5)==="audio"?Nw(s,this.appendSource):s:""}trackSourceBuffer(e,n){const r=n.buffer;if(!r)return;const i=this.getTrackCodec(n,e);this.tracks[e]={buffer:r,codec:i,container:n.container,levelCodec:n.levelCodec,supplemental:n.supplemental,metadata:n.metadata,id:n.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,o)=>{const a=o.removedRanges;a!=null&&a.length&&this.hls.trigger(F.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,n;const r=((e=this.media)==null||(n=e.querySelector)==null?void 0:n.call(e,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(e){const n=this.currentOp(e);n&&n.onStart()}onSBUpdateEnd(e){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,n){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,n),this.hls.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.currentOp(e);s&&s.onError(i)}updateTimestampOffset(e,n,r,i,s,o){const a=n-e.timestampOffset;Math.abs(a)>=r&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${n} (sn: ${s} cc: ${o})`),e.timestampOffset=n)}removeExecutor(e,n,r){const{media:i,mediaSource:s}=this,o=this.tracks[e],a=o==null?void 0:o.buffer;if(!i||!s||!a){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=he(i.duration)?i.duration:1/0,c=he(s.duration)?s.duration:1/0,u=Math.max(0,n),d=Math.min(r,l,c);d>u&&(!o.ending||o.ended)?(o.ended=!1,this.log(`Removing [${u},${d}] from the ${e} SourceBuffer`),a.remove(u,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,n){const r=this.tracks[n],i=r==null?void 0:r.buffer;if(!i)throw new Ift(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(n=>{this.warn(`SourceBuffer blocked callback ${n}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(n){this.warn(`Callback run without blocking ${this.operationQueue} ${n}`)}}isUpdating(){return this.sourceBuffers.some(([e,n])=>e&&n.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,n=this.sourceBufferTypes){if(!n.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,i=n.map(o=>this.appendBlocker(o));return n.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(o=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(n=>{var r;const i=(r=this.tracks[n])==null?void 0:r.buffer;!i||i.updating||this.shiftAndExecuteNext(n)})}append(e,n,r){this.operationQueue&&this.operationQueue.append(e,n,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,n)=>e+(this.isPending(this.tracks[n])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[n])=>e+(n?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,n,r){const i=this.tracks[e];if(!i)return;const s=i.buffer;if(!s)return;const o=r.bind(this,e);i.listeners.push({event:n,listener:o}),s.addEventListener(n,o)}removeBufferListeners(e){const n=this.tracks[e];if(!n)return;const r=n.buffer;r&&(n.listeners.forEach(i=>{r.removeEventListener(i.event,i.listener)}),n.listeners.length=0)}}function VW(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(n=>{t.removeChild(n)})}function Lft(t,e){const n=self.document.createElement("source");n.type="video/mp4",n.src=e,t.appendChild(n)}function qk(t){return t==="audio"?1:0}class f5{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(F.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(F.BUFFER_CODECS,this.onBufferCodecs,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(F.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(F.BUFFER_CODECS,this.onBufferCodecs,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(e,n){this.timer&&he(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const n=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&n.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelEnabled&&n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,f5.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const i=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let s=e.length-1;const o=Math.max(n,r);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=o||l.height>=o)&&i(l,e[a+1])){s=a;break}}return s}}const Rft={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Mr=Rft,Oft={HLS:"h"},Dft=Oft;class Co{constructor(e,n){Array.isArray(e)&&(e=e.map(r=>r instanceof Co?r:new Co(r))),this.value=e,this.params=n}}const Mft="Dict";function $ft(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function Nft(t,e,n,r){return new Error(`failed to ${t} "${$ft(e)}" as ${n}`,{cause:r})}function ko(t,e,n){return Nft("serialize",t,e,n)}class jce{constructor(e){this.description=e}}const zW="Bare Item",Fft="Boolean";function jft(t){if(typeof t!="boolean")throw ko(t,Fft);return t?"?1":"?0"}function Bft(t){return btoa(String.fromCharCode(...t))}const Uft="Byte Sequence";function Vft(t){if(ArrayBuffer.isView(t)===!1)throw ko(t,Uft);return`:${Bft(t)}:`}const zft="Integer";function Hft(t){return t<-999999999999999||999999999999999<t}function Bce(t){if(Hft(t))throw ko(t,zft);return t.toString()}function Wft(t){return`@${Bce(t.getTime()/1e3)}`}function Uce(t,e){if(t<0)return-Uce(-t,e);const n=Math.pow(10,e);if(Math.abs(t*n%1-.5)<Number.EPSILON){const i=Math.floor(t*n);return(i%2===0?i:i+1)/n}else return Math.round(t*n)/n}const Gft="Decimal";function Kft(t){const e=Uce(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw ko(t,Gft);const n=e.toString();return n.includes(".")?n:`${n}.0`}const qft="String",Yft=/[\x00-\x1f\x7f]+/;function Qft(t){if(Yft.test(t))throw ko(t,qft);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Xft(t){return t.description||t.toString().slice(7,-1)}const Zft="Token";function HW(t){const e=Xft(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw ko(e,Zft);return e}function jR(t){switch(typeof t){case"number":if(!he(t))throw ko(t,zW);return Number.isInteger(t)?Bce(t):Kft(t);case"string":return Qft(t);case"symbol":return HW(t);case"boolean":return jft(t);case"object":if(t instanceof Date)return Wft(t);if(t instanceof Uint8Array)return Vft(t);if(t instanceof jce)return HW(t);default:throw ko(t,zW)}}const Jft="Key";function BR(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw ko(t,Jft);return t}function h5(t){return t==null?"":Object.entries(t).map(([e,n])=>n===!0?`;${BR(e)}`:`;${BR(e)}=${jR(n)}`).join("")}function Vce(t){return t instanceof Co?`${jR(t.value)}${h5(t.params)}`:jR(t)}function eht(t){return`(${t.value.map(Vce).join(" ")})${h5(t.params)}`}function tht(t,e={whitespace:!0}){if(typeof t!="object"||t==null)throw ko(t,Mft);const n=t instanceof Map?t.entries():Object.entries(t),r=e!=null&&e.whitespace?" ":"";return Array.from(n).map(([i,s])=>{s instanceof Co||(s=new Co(s));let o=BR(i);return s.value===!0?o+=h5(s.params):(o+="=",Array.isArray(s.value)?o+=eht(s):o+=Vce(s)),o}).join(`,${r}`)}function zce(t,e){return tht(t,e)}const Gs="CMCD-Object",Jt="CMCD-Request",Dc="CMCD-Session",Xa="CMCD-Status",nht={br:Gs,ab:Gs,d:Gs,ot:Gs,tb:Gs,tpb:Gs,lb:Gs,tab:Gs,lab:Gs,url:Gs,pb:Jt,bl:Jt,tbl:Jt,dl:Jt,ltc:Jt,mtp:Jt,nor:Jt,nrr:Jt,rc:Jt,sn:Jt,sta:Jt,su:Jt,ttfb:Jt,ttfbb:Jt,ttlb:Jt,cmsdd:Jt,cmsds:Jt,smrt:Jt,df:Jt,cs:Jt,ts:Jt,cid:Dc,pr:Dc,sf:Dc,sid:Dc,st:Dc,v:Dc,msd:Dc,bs:Xa,bsd:Xa,cdn:Xa,rtp:Xa,bg:Xa,pt:Xa,ec:Xa,e:Xa},rht={REQUEST:Jt};function iht(t){return Object.keys(t).reduce((e,n)=>{var r;return(r=t[n])===null||r===void 0||r.forEach(i=>e[i]=n),e},{})}function sht(t,e){const n={};if(!t)return n;const r=Object.keys(t),i=e?iht(e):{};return r.reduce((s,o)=>{var a;const l=nht[o]||i[o]||rht.REQUEST,c=(a=s[l])!==null&&a!==void 0?a:s[l]={};return c[o]=t[o],s},n)}function oht(t){return["ot","sf","st","e","sta"].includes(t)}function aht(t){return typeof t=="number"?he(t):t!=null&&t!==""&&t!==!1}const Hce="event";function lht(t,e){const n=new URL(t),r=new URL(e);if(n.origin!==r.origin)return t;const i=n.pathname.split("/").slice(1),s=r.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")+n.search+n.hash}const ob=t=>Math.round(t),UR=(t,e)=>Array.isArray(t)?t.map(n=>UR(n,e)):t instanceof Co&&typeof t.value=="string"?new Co(UR(t.value,e),t.params):(e.baseUrl&&(t=lht(t,e.baseUrl)),e.version===1?encodeURIComponent(t):t),j1=t=>ob(t/100)*100,cht=(t,e)=>{let n=t;return e.version>=2&&(t instanceof Co&&typeof t.value=="string"?n=new Co([t]):typeof t=="string"&&(n=[t])),UR(n,e)},uht={br:ob,d:ob,bl:j1,dl:j1,mtp:j1,nor:cht,rtp:j1,tb:ob},Wce="request",Gce="response",p5=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],dht=["e"],fht=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function sT(t){return fht.test(t)}function hht(t){return p5.includes(t)||dht.includes(t)||sT(t)}const Kce=["d","dl","nor","ot","rtp","su"];function pht(t){return p5.includes(t)||Kce.includes(t)||sT(t)}const mht=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function ght(t){return p5.includes(t)||Kce.includes(t)||mht.includes(t)||sT(t)}const vht=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function yht(t){return vht.includes(t)||sT(t)}const xht={[Gce]:ght,[Hce]:hht,[Wce]:pht};function qce(t,e={}){const n={};if(t==null||typeof t!="object")return n;const r=e.version||t.v||1,i=e.reportingMode||Wce,s=r===1?yht:xht[i];let o=Object.keys(t).filter(s);const a=e.filter;typeof a=="function"&&(o=o.filter(a));const l=i===Gce||i===Hce;l&&!o.includes("ts")&&o.push("ts"),r>1&&!o.includes("v")&&o.push("v");const c=vt({},uht,e.formatters),u={version:r,reportingMode:i,baseUrl:e.baseUrl};return o.sort().forEach(d=>{let f=t[d];const h=c[d];if(typeof h=="function"&&(f=h(f,u)),d==="v"){if(r===1)return;f=r}d=="pr"&&f===1||(l&&d==="ts"&&!he(f)&&(f=Date.now()),aht(f)&&(oht(d)&&typeof f=="string"&&(f=new jce(f)),n[d]=f))}),n}function bht(t,e={}){const n={};if(!t)return n;const r=qce(t,e),i=sht(r,e==null?void 0:e.customHeaderMap);return Object.entries(i).reduce((s,[o,a])=>{const l=zce(a,{whitespace:!1});return l&&(s[o]=l),s},n)}function Sht(t,e,n){return vt(t,bht(e,n))}const wht="CMCD";function Eht(t,e={}){return t?zce(qce(t,e),{whitespace:!1}):""}function _ht(t,e={}){if(!t)return"";const n=Eht(t,e);return encodeURIComponent(n)}function Tht(t,e={}){if(!t)return"";const n=_ht(t,e);return`${wht}=${n}`}const WW=/CMCD=[^&#]+/;function Cht(t,e,n){const r=Tht(e,n);if(!r)return t;if(WW.test(t))return t.replace(WW,r);const i=t.includes("?")?"&":"?";return`${t}${i}${r}`}class kht{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Mr.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const{frag:s,part:o}=i,a=this.hls.levels[s.level],l=this.getObjectType(s),c={d:(o||s).duration*1e3,ot:l};(l===Mr.VIDEO||l===Mr.AUDIO||l==Mr.MUXED)&&(c.br=a.bitrate/1e3,c.tb=this.getTopBandwidth(l)/1e3,c.bl=this.getBufferLength(l));const u=o?this.getNextPart(o):this.getNextFrag(s);u!=null&&u.url&&u.url!==s.url&&(c.nor=u.url),this.apply(i,c)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHED,this.onMediaDetached,this),e.on(F.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHED,this.onMediaDetached,this),e.off(F.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,i;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=n.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:Dft.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){vt(n,this.createData());const r=n.ot===Mr.INIT||n.ot===Mr.VIDEO||n.ot===Mr.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:i}=this;i&&(n=Object.keys(n).reduce((o,a)=>(i.includes(a)&&(o[a]=n[a]),o),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),Sht(e.headers,n,s)):e.url=Cht(e.url,n,s)}getNextFrag(e){var n;const r=(n=this.hls.levels[e.level])==null?void 0:n.details;if(r){const i=e.sn-r.startSN;return r.fragments[i+1]}}getNextPart(e){var n;const{index:r,fragment:i}=e,s=(n=this.hls.levels[i.level])==null||(n=n.details)==null?void 0:n.partList;if(s){const{sn:o}=i;for(let a=s.length-1;a>=0;a--){const l=s[a];if(l.index===r&&l.fragment.sn===o)return s[a+1]}}}getObjectType(e){const{type:n}=e;if(n==="subtitle")return Mr.TIMED_TEXT;if(e.sn==="initSegment")return Mr.INIT;if(n==="audio")return Mr.AUDIO;if(n==="main")return this.hls.audioTracks.length?Mr.VIDEO:Mr.MUXED}getTopBandwidth(e){let n=0,r;const i=this.hls;if(e===Mr.AUDIO)r=i.audioTracks;else{const s=i.maxAutoLevel,o=s>-1?s+1:i.levels.length;r=i.levels.slice(0,o)}return r.forEach(s=>{s.bitrate>n&&(n=s.bitrate)}),n>0?n:NaN}getBufferLength(e){const n=this.media,r=e===Mr.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:Re.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){n(s),this.loader.load(s,o,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,o,a){n(s),this.loader.load(s,o,a)}}}}const Pht=3e5;class Iht extends Zi{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,n)=>(e.indexOf(n.pathwayId)===-1&&e.push(n.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===Vn.SendAlternateToPenaltyBox&&r.flags===ri.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this._pathwayPriority,o=this.pathwayId;if(n.context){const{groupId:a,pathwayId:l,type:c}=n.context;a&&i?o=this.getPathwayForGroupId(a,c,o):l&&(o=l)}o in this.penalizedPathways||(this.penalizedPathways[o]=performance.now()),!s&&i&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),r.resolved=this.pathwayId!==o),n.details===Y.BUFFER_APPEND_ERROR&&!n.fatal?r.resolved=!0:r.resolved||this.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${o} levels: ${i&&i.length} priorities: ${xt(s)} penalized: ${xt(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length&&this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let n;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(s=>{i-r[s]>Pht&&delete r[s]});for(let s=0;s<e.length;s++){const o=e[s];if(o in r)continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(n=this.getLevelsForPathway(o),n.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,pce(n),this.hls.trigger(F.LEVELS_UPDATED,{levels:n});const c=this.hls.levels[a];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,n,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(n===We.AUDIO_TRACK&&i[s].hasAudioGroup(e)||n===We.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return r}clonePathways(e){const n=this.levels;if(!n)return;const r={},i={};e.forEach(s=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=s;if(n.some(u=>u.pathwayId===o))return;const c=this.getLevelsForPathway(a).map(u=>{const d=new Vt(u.attrs);d["PATHWAY-ID"]=o;const f=d.AUDIO&&`${d.AUDIO}_clone_${o}`,h=d.SUBTITLES&&`${d.SUBTITLES}_clone_${o}`;f&&(r[d.AUDIO]=f,d.AUDIO=f),h&&(i[d.SUBTITLES]=h,d.SUBTITLES=h);const p=Yce(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),m=new $0({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:p,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let g=1;g<u.audioGroups.length;g++)m.addGroupId("audio",`${u.audioGroups[g]}_clone_${o}`);if(u.subtitleGroups)for(let g=1;g<u.subtitleGroups.length;g++)m.addGroupId("text",`${u.subtitleGroups[g]}_clone_${o}`);return m});n.push(...c),GW(this.audioTracks,r,l,o),GW(this.subtitleTracks,i,l,o)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+u)}const s={responseType:"json",url:i.href},o=n.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(u,d,f,h)=>{this.log(`Loaded steering manifest: "${i}"`);const p=u.data;if((p==null?void 0:p.VERSION)!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":g,"PATHWAY-PRIORITY":y}=p;if(m)try{this.uri=new self.URL(m,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||f.url),g&&this.clonePathways(g);const x={steeringManifest:p,url:i.toString()};this.hls.trigger(F.STEERING_MANIFEST_LOADED,x),y&&this.updatePathwayPriority(y)},onError:(u,d,f,h)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){const m=this.loader;if(typeof(m==null?void 0:m.getResponseHeader)=="function"){const g=m.getResponseHeader("Retry-After");g&&(p=parseFloat(g)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(u,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,l,c)}scheduleRefresh(e,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},n)}}function GW(t,e,n,r){t&&Object.keys(e).forEach(i=>{const s=t.filter(o=>o.groupId===i).map(o=>{const a=vt({},o);return a.details=void 0,a.attrs=new Vt(a.attrs),a.url=a.attrs.URI=Yce(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=e[i],a.attrs["PATHWAY-ID"]=r,a});t.push(...s)})}function Yce(t,e,n,r){const{HOST:i,PARAMS:s,[n]:o}=r;let a;e&&(a=o==null?void 0:o[e],a&&(t=a));const l=new self.URL(t);return i&&!a&&(l.host=i),s&&Object.keys(s).sort().forEach(c=>{c&&l.searchParams.set(c,s[c])}),l.href}class eh extends Zi{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=eh.CDMCleanupPromise?[eh.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=n=>{const{initDataType:r,initData:i}=n,s=`"${n.type}" event: init data type: "${r}"`;if(this.debug(s),i!==null){if(!this.keyFormatPromise){let o=Object.keys(this.keySystemAccessPromises);o.length||(o=Rm(this.config));const a=o.map(Bk).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(o=>{const a=rb(o);if(r!=="sinf"||a!==Gt.FAIRPLAY){this.log(`Ignoring "${n.type}" event with init data type: "${r}" for selected key-system ${a}`);return}let l;try{const h=wn(new Uint8Array(i)),p=n5(JSON.parse(h).sinf),m=zle(p);if(!m)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(m.subarray(8,24))}catch(h){this.warn(`${s} Failed to parse sinf: ${h}`);return}const c=br(l),{keyIdToKeySessionPromise:u,mediaKeySessions:d}=this;let f=u[c];for(let h=0;h<d.length;h++){const p=d[h],m=p.decryptdata;if(!m.keyId)continue;const g=br(m.keyId);if(Vw(l,m.keyId)||m.uri.replace(/-/g,"").indexOf(c)!==-1){if(f=u[g],!f)continue;if(m.pssh)break;delete u[g],m.pssh=new Uint8Array(i),m.keyId=l,f=u[c]=f.then(()=>this.generateRequestWithPreferredKeySession(p,r,i,"encrypted-event-key-match")),f.catch(y=>this.handleError(y));break}}f||this.handleError(new Error(`Key ID ${c} not encountered in playlist. Key-system sessions ${d.length}.`))}).catch(o=>this.handleError(o))}},this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(F.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(F.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(F.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(F.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(F.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(F.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,i=n==null?void 0:n[e];if(i)return i.licenseUrl;if(e===Gt.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const n=this.getLicenseServerUrl(e);if(n===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return n}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n==null?void 0:n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(o,a,l)=>!!o&&l.indexOf(o)===a,i=n.map(o=>o.audioCodec).filter(r),s=n.map(o=>o.videoCodec).filter(r);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((o,a)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,i,s).then(d=>o({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof ei?a(d):a(new ei({type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return oce===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,n)}getMediaKeysPromise(e,n,r){var i;const s=cdt(e,n,r,this.config.drmSystemOptions||{});let o=this.keySystemAccessPromises[e],a=(i=o)==null?void 0:i.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${xt(s)}`),a=this.requestMediaKeySystemAccess(e,s);const l=o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(c=>{this.log(`Failed to obtain access to key-system "${e}": ${c}`)}),a.then(c=>{this.log(`Access for key-system "${c.keySystem}" obtained`);const u=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const d=l.mediaKeys=c.createMediaKeys().then(f=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,u.then(h=>h?this.setMediaKeysServerCertificate(f,e,h):f)));return d.catch(f=>{this.error(`Failed to create media-keys for "${e}"}: ${f}`)}),d})}return a.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${br(e.keyId||[])} keyUri: ${e.uri}`);const i=r.createSession(),s={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),i=B1(n),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,s,n.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,n){const r=e.mediaKeysSession;return this.log(`Updating key-session "${r.sessionId}" for keyId ${br(e.decryptdata.keyId||[])}
      } (data length: ${n.byteLength})`),r.update(n)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Bk(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:n,mediaKeys:r})=>this.attemptSetMediaKeys(n,r))}selectKeySystem(e){return new Promise((n,r)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const s=Bk(i);s?n(s):r(new Error(`Unable to find format for key-system "${i}"`))}).catch(r)})}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){const n=Rm(this.config),r=e.map(rb).filter(i=>!!i&&n.indexOf(i)!==-1);return this.selectKeySystem(r)}getKeyStatus(e){const{mediaKeySessions:n}=this;for(let r=0;r<n.length;r++){const i=Aht(e,n[r]);if(i)return i}}loadKey(e){const n=e.keyInfo.decryptdata,r=B1(n),i=this.bannedKeyIds[r];if(i||this.getKeyStatus(n)==="internal-error"){const a=KW(i||"internal-error",n);return this.handleError(a,e.frag),Promise.reject(a)}const s=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${s}`);const o=this.keyIdToKeySessionPromise[r];if(!o){const a=this.getKeySystemForKeyPromise(n).then(({keySystem:l,mediaKeys:c})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(l,c).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:c,decryptdata:n}))))).then(l=>{const c="cenc",u=n.pssh?n.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,c,u,"playlist-key")});return a.catch(l=>this.handleError(l,e.frag)),this.keyIdToKeySessionPromise[r]=a,a}return o.catch(a=>{if(a instanceof ei){const l=ct({},a.data);this.getKeyStatus(n)==="internal-error"&&(l.decryptdata=n);const c=new ei(l,a.message);this.handleError(c,e.frag)}}),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,n){if(this.hls)if(e instanceof ei){n&&(e.data.frag=n);const r=e.data.decryptdata;this.error(`${e.message}${r?` (${br(r.keyId||[])})`:""}`),this.hls.trigger(F.ERROR,e.data)}else this.error(e.message),this.hls.trigger(F.ERROR,{type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const n=B1(e),r=this.keyIdToKeySessionPromise[n];if(!r){const i=rb(e.keyFormat),s=i?[i]:Rm(this.config);return this.attemptKeySystemAccess(s)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=Rm(this.config)),e.length===0)throw new ei({type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${xt({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,n){if(this.mediaKeys===n)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.mediaKeys=n,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>r.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,n,r,i){var s;const o=(s=this.config.drmSystems)==null||(s=s[e.keySystem])==null?void 0:s.generateRequest;if(o)try{const p=o.call(this.hls,n,r,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");n=p.initDataType,r=p.initData?p.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(p){if(this.warn(p.message),this.hls&&this.hls.config.debug)throw p}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const a=B1(e.decryptdata),l=e.decryptdata.uri;this.log(`Generating key-session request for "${i}" keyId: ${a} URI: ${l} (init data type: ${n} length: ${r.byteLength})`);const c=new i5,u=e._onmessage=p=>{const m=e.mediaKeysSession;if(!m){c.emit("error",new Error("invalid state"));return}const{messageType:g,message:y}=p;this.log(`"${g}" message event for session "${m.sessionId}" message size: ${y.byteLength}`),g==="license-request"||g==="license-renewal"?this.renewLicense(e,y).catch(x=>{c.eventNames().length?c.emit("error",x):this.handleError(x)}):g==="license-release"?e.keySystem===Gt.FAIRPLAY&&this.updateKeySession(e,OR("acknowledged")).then(()=>this.removeSession(e)).catch(x=>this.handleError(x)):this.warn(`unhandled media key message type "${g}"`)},d=(p,m)=>{m.keyStatus=p;let g;p.startsWith("usable")?c.emit("resolved"):p==="internal-error"||p==="output-restricted"||p==="output-downscaled"?g=KW(p,m.decryptdata):p==="expired"?g=new Error(`key expired (keyId: ${a})`):p==="released"?g=new Error("key released"):p==="status-pending"||this.warn(`unhandled key status change "${p}" (keyId: ${a})`),g&&(c.eventNames().length?c.emit("error",g):this.handleError(g))},f=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){c.emit("error",new Error("invalid state"));return}const g=this.getKeyStatuses(e);if(!Object.keys(g).some(w=>g[w]!=="status-pending"))return;if(g[a]==="expired"){this.log(`Expired key ${xt(g)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let x=g[a];if(x)d(x,e);else{var S;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(S=e.keyStatusTimeouts)[a]||(S[a]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const E=this.getKeyStatus(e.decryptdata);if(E&&E!=="status-pending")return this.log(`No status for keyId ${a} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${E} from other session.`),d(E,e);this.log(`key status for ${a} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),x="internal-error",d(x,e)},1e3)),this.log(`No status for keyId ${a} (${xt(g)}).`)}};Er(e.mediaKeysSession,"message",u),Er(e.mediaKeysSession,"keystatuseschange",f);const h=new Promise((p,m)=>{c.on("error",m),c.on("resolved",p)});return e.mediaKeysSession.generateRequest(n,r).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${a} URI: ${l}`)}).catch(p=>{throw new ei({type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_NO_SESSION,error:p,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>h).catch(p=>(c.removeAllListeners(),this.removeSession(e).then(()=>{throw p}))).then(()=>(c.removeAllListeners(),e))}getKeyStatuses(e){const n={};return e.mediaKeysSession.keyStatuses.forEach((r,i)=>{if(typeof i=="string"&&typeof r=="object"){const a=i;i=r,r=a}const s="buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i);e.keySystem===Gt.PLAYREADY&&s.length===16&&ice(s);const o=br(s);r==="internal-error"&&(this.bannedKeyIds[o]=r),this.log(`key status change "${r}" for keyStatuses keyId: ${o} key-session "${e.mediaKeysSession.sessionId}"`),n[o]=r}),n}fetchServerCertificate(e){const n=this.config,r=n.loader,i=new r(n),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:s},c=n.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,m)=>{o(f.data)},onError:(f,h,p,m)=>{a(new ei({type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:ct({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${s}). Status: ${f.code} (${f.text})`))},onTimeout:(f,h,p)=>{a(new ei({type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(f,h,p)=>{a(new Error("aborted"))}};i.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((i,s)=>{e.setServerCertificate(r).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${r.byteLength}) on "${n}"`),i(e)}).catch(o=>{s(new ei({type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new ei({type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:i,fatal:!1},i.message)}))}unpackPlayReadyKeyMessage(e,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const i=new DOMParser().parseFromString(r,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let u;for(let d=0,f=s.length;d<f;d++){var o,a;u=s[d];const h=(o=u.querySelector("name"))==null?void 0:o.textContent,p=(a=u.querySelector("value"))==null?void 0:a.textContent;h&&p&&e.setRequestHeader(h,p)}}const l=i.querySelector("Challenge"),c=l==null?void 0:l.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return OR(atob(c))}setupLicenseXHR(e,n,r,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,n,r,i)}).catch(o=>{if(!r.decryptdata)throw o;return e.open("POST",n,!0),s.call(this.hls,e,n,r,i)}).then(o=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:o||i})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const o=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,a,o,e)}catch(u){this.error(u)}i(l)}else{const l=r.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||a.status>=400&&a.status<500)s(new ei({type:Se.KEY_SYSTEM_ERROR,details:Y.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,n).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,n).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==Gt.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)}).catch(s)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,Er(r,"encrypted",this.onMediaEncrypted),Er(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Vr(e,"encrypted",this.onMediaEncrypted),Vr(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,vu.clearKeyUriToKeyIdMap();const i=r.length;eh.CDMCleanupPromise=Promise.all(r.map(s=>this.removeSession(s)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(s=>{this.log(`Could not clear media keys: ${s}`),this.hls&&this.hls.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${s}`)})}))||Promise.resolve())).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}`),this.hls&&this.hls.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${s}`)})}).then(()=>{i&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r,decryptdata:i}=e;if(n){this.log(`Remove licenses and keys and close session "${n.sessionId}" keyId: ${br((i==null?void 0:i.keyId)||[])}`),e._onmessage&&(n.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{keyStatusTimeouts:o}=e;o&&Object.keys(o).forEach(c=>self.clearTimeout(o[c]));const{drmSystemOptions:a}=this.config;return(ddt(a)?new Promise((c,u)=>{self.setTimeout(()=>u(new Error("MediaKeySession.remove() timeout")),8e3),n.remove().then(c).catch(u)}):Promise.resolve()).catch(c=>{this.log(`Could not remove session: ${c}`),this.hls&&this.hls.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${c}`)})}).then(()=>n.close()).catch(c=>{this.log(`Could not close session: ${c}`),this.hls&&this.hls.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${c}`)})})}return Promise.resolve()}}eh.CDMCleanupPromise=void 0;function B1(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return br(t.keyId)}function Aht(t,e){if(t.keyId&&e.mediaKeysSession.keyStatuses.has(t.keyId))return e.mediaKeysSession.keyStatuses.get(t.keyId);if(t.matches(e.decryptdata))return e.keyStatus}class ei extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}function KW(t,e){const n=t==="output-restricted",r=n?Y.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Y.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new ei({type:Se.KEY_SYSTEM_ERROR,details:r,fatal:!1,decryptdata:e},n?"HDCP level output restricted":`key status changed to "${t}"`)}class Lht{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(F.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(F.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,n,r){const i=performance.now();if(n){if(this.lastTime){const s=i-this.lastTime,o=r-this.lastDroppedFrames,a=n-this.lastDecodedFrames,l=1e3*o/s,c=this.hls;if(c.trigger(F.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){let u=c.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(F.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function Qce(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function Xce(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){dt.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}catch(i){dt.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}n==="disabled"&&(t.mode=n)}function Cf(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues)for(let r=t.cues.length;r--;)e&&t.cues[r].removeEventListener("enter",e),t.removeCue(t.cues[r]);n==="disabled"&&(t.mode=n)}function VR(t,e,n,r){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=Oht(t.cues,e,n);for(let o=0;o<s.length;o++)(!r||r(s[o]))&&t.removeCue(s[o])}i==="disabled"&&(t.mode=i)}function Rht(t,e){if(e<=t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,i=n,s;for(;r<=i;)if(s=Math.floor((i+r)/2),e<t[s].startTime)i=s-1;else if(e>t[s].startTime&&r<n)r=s+1;else return s;return t[r].startTime-e<e-t[i].startTime?r:i}function Oht(t,e,n){const r=[],i=Rht(t,e);if(i>-1)for(let s=i,o=t.length;s<o;s++){const a=t[s];if(a.startTime>=e&&a.endTime<=n)r.push(a);else if(a.startTime>n)return r}return r}function ab(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}class Dht extends d5{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=ab(this.media.textTracks);for(let s=0;s<r.length;s++)if(r[s].mode==="hidden")n=r[s];else if(r[s].mode==="showing"){n=r[s];break}const i=this.findTrackForTextTrack(n);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.LEVEL_LOADING,this.onLevelLoading,this),e.on(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(F.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(F.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.LEVEL_LOADING,this.onLevelLoading,this),e.off(F.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(F.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(F.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,n){const r=this.media;if(!r)return;const i=!!n.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;ab(r.textTracks).forEach(o=>{Cf(o)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,groupId:i,details:s}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${o==null?void 0:o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`Subtitle track ${r} "${o.name}" lang:${o.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!n)return;const r=n.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(o=>(i==null?void 0:i.indexOf(o))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(u=>!r||r.indexOf(u.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(u=>u.default)&&(this.selectDefaultTrack=!1),o.forEach((u,d)=>{u.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const a=this.hls.config.subtitlePreference;if(!s&&a){this.selectDefaultTrack=!1;const u=ho(a,o);if(u>-1)s=o[u];else{const d=ho(a,this.tracks);s=this.tracks[d]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const c={subtitleTracks:o};this.log(`Updating subtitle tracks, ${o.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(F.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<n.length;i++){const s=n[i];if(!(r&&!s.default||!r&&!e)&&(!e||gu(s,e)))return i}if(e){for(let i=0;i<n.length;i++){const s=n[i];if(B0(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<n.length;i++){const s=n[i];if(B0(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const i=n[r];if(FR(i,e))return r}}return-1}onError(e,n){n.fatal||!n.context||n.context.type===We.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&gu(e,r))return r;const i=ho(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(r)return null;{const s=ho(e,n);if(s>-1)return n[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=e.id,i=e.groupId,s=this.getUrlWithDirectives(e.url,n),o=e.details,a=o==null?void 0:o.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${s}`),this.hls.trigger(F.SUBTITLE_TRACK_LOADING,{url:s,id:r,groupId:i,deliveryDirectives:n||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const n=ab(e.textTracks),r=this.currentTrack;let i;if(r&&(i=n.filter(s=>FR(r,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=n.length||!he(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=n[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(F.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:o,groupId:a="",name:l,type:c,url:u}=i;this.hls.trigger(F.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:c,url:u});const d=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(d)}}function Mht(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(i=="x"?s:s&3|8).toString(16)})}}}function Eg(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0).toString()}const th=.025;let Gw=function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t}({});function $ht(t,e,n){return`${t.identifier}-${n+1}-${Eg(e)}`}class Nht{constructor(e,n){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=n,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var n;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((n=this.assetList[e])==null?void 0:n.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const n=this.dateRange.tagAnchor;if(n)return Yk(e,n)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const n=this.dateRange.startTime,r=Yk(n,e);return n-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,n=he(e)?e:this.duration;return this.cumulativeDuration+n}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const n=this.resumeAnchor;if(n)return Yk(e,n)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<th))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let n;return this._duration!==null?n=this._duration:this.dateRange.duration?n=this.dateRange.duration:n=this.dateRange.plannedDuration||0,!isNaN(e)&&e<n&&(n=e),n}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Gw.Range:Gw.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return Fht(this)}}function Yk(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<th)?e.start:e.start+e.duration}function Zce(t,e,n){const r=new self.URL(t,n);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function Qk(t,e){for(;(n=t.assetList[++e])!=null&&n.error;)var n;return e}function Fht(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function Gd(t){const e=t.timelineStart,n=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+n).toFixed(2)}]`}class jht{constructor(e,n,r,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(F.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(n);this.interstitial=r,this.assetItem=i;const o=()=>{this.hasDetails=!0};s.once(F.LEVEL_LOADED,o),s.once(F.AUDIO_TRACK_LOADED,o),s.once(F.SUBTITLE_TRACK_LOADED,o),s.on(F.MEDIA_ATTACHING,(a,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(F.BUFFER_APPENDED,()=>{const u=this.bufferedEnd;this.reachedPlayout(u)&&(this._bufferedEosTime=u,s.trigger(F.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let n=this.assetItem.uri;try{n=Zce(n,e.config.primarySessionId||"").href}catch{}e.loadSource(n)}}bufferedInPlaceToEnd(e){var n;if(!this.appendInPlace)return!1;if((n=this.hls)!=null&&n.bufferedToEnd)return!0;if(!e)return!1;const r=Math.min(this._bufferedEosTime||1/0,this.duration),i=this.timelineOffset,s=Re.bufferInfo(e,i,0);return this.getAssetTime(s.end)>=r-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const n=Re.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(n.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const n=this.interstitial.playoutLimit;if(n){const r=n-this.startOffset;if(r>0&&r<e)return r}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const n=this.timelineOffset;if(e!==n){const r=e-n;if(Math.abs(r)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const n=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-n),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var n;this.loadSource(),(n=this.hls)==null||n.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const n=r=>delete r.details;e.levels.forEach(n),e.allAudioTracks.forEach(n),e.allSubtitleTracks.forEach(n),this.hasDetails=!1}}on(e,n,r){var i;(i=this.hls)==null||i.on(e,n)}once(e,n,r){var i;(i=this.hls)==null||i.once(e,n)}off(e,n,r){var i;(i=this.hls)==null||i.off(e,n)}toString(){var e;return`HlsAssetPlayer: ${Gd(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const qW=.033;class Bht extends Zi{constructor(e,n){super("interstitials-sched",n),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,n){return this.events?this.events.reduce((r,i)=>e<=i.startOffset&&n>i.startOffset?(delete i.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,n){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[r]||(n===void 0&&(n=e.start),r=this.findItemIndexAtTime(n));r>=0&&(s=i[r])!=null&&s.event;){var s;r--}return r}findItemIndexAtTime(e,n){const r=this.items;if(r)for(let i=0;i<r.length;i++){let s=r[i];if(n&&n!=="primary"&&(s=s[n]),e===s.start||e>s.start&&e<s.end)return i}return-1}findJumpRestrictedIndex(e,n){const r=this.items;if(r)for(let i=e;i<=n&&r[i];i++){const s=r[i].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return i}return-1}findEventIndex(e){const n=this.items;if(n)for(let i=n.length;i--;){var r;if(((r=n[i].event)==null?void 0:r.identifier)===e)return i}return-1}findAssetIndex(e,n){const r=e.assetList,i=r.length;if(i>1)for(let s=0;s<i;s++){const o=r[s];if(!o.error){const a=o.timelineStart;if(n===a||n>a&&(n<a+(o.duration||0)||s===i-1))return s}}return 0}get assetIdAtEnd(){var e;const n=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(n){const r=n.assetList,i=r[r.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,n){const r=e.main.details,{dateRanges:i}=r,s=this.events,o=this.parseDateRanges(i,{url:r.url},n),a=Object.keys(i),l=s?s.filter(c=>!a.includes(c.identifier)):[];o.length&&o.sort((c,u)=>{const d=c.cue.pre,f=c.cue.post,h=u.cue.pre,p=u.cue.post;if(d&&!h)return-1;if(h&&!d||f&&!p)return 1;if(p&&!f)return-1;if(!d&&!h&&!f&&!p){const m=c.startTime,g=u.startTime;if(m!==g)return m-g}return c.dateRange.tagOrder-u.dateRange.tagOrder}),this.events=o,l.forEach(c=>{this.removeEvent(c)}),this.updateSchedule(e,l)}updateSchedule(e,n=[],r=!1){const i=this.events||[];if(i.length||n.length||this.length<2){const s=this.items,o=this.parseSchedule(i,e);(r||n.length||(s==null?void 0:s.length)!==o.length||o.some((l,c)=>Math.abs(l.playout.start-s[c].playout.start)>.005||Math.abs(l.playout.end-s[c].playout.end)>.005))&&(this.items=o,this.onScheduleUpdate(n,s))}}parseDateRanges(e,n,r){const i=[],s=Object.keys(e);for(let o=0;o<s.length;o++){const a=s[o],l=e[a];if(l.isInterstitial){let c=this.eventMap[a];c?c.setDateRange(l):(c=new Nht(l,n),this.eventMap[a]=c,r===!1&&(c.appendInPlace=r)),i.push(c)}}return i}parseSchedule(e,n){const r=[],i=n.main.details,s=i.live?1/0:i.edge;let o=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,n);let l=0,c=0;if(e.forEach((u,d)=>{const f=u.cue.pre,h=u.cue.post,p=e[d-1]||null,m=u.appendInPlace,g=h?s:u.startOffset,y=u.duration,x=u.timelineOccupancy===Gw.Range?y:0,S=u.resumptionOffset,w=(p==null?void 0:p.startTime)===g,E=g+u.cumulativeDuration;let T=m?E+y:g+S;if(f||!h&&g<=0){const I=c;c+=x,u.timelineStart=E;const A=o;o+=y,r.push({event:u,start:E,end:T,playout:{start:A,end:o},integrated:{start:I,end:c}})}else if(g<=s){if(!w){const L=g-l;if(L>qW){const j=l,D=c;c+=L;const O=o;o+=L;const $={previousEvent:e[d-1]||null,nextEvent:u,start:j,end:j+L,playout:{start:O,end:o},integrated:{start:D,end:c}};r.push($)}else L>0&&p&&(p.cumulativeDuration+=L,r[r.length-1].end=g)}h&&(T=E),u.timelineStart=E;const I=c;c+=x;const A=o;o+=y,r.push({event:u,start:E,end:T,playout:{start:A,end:o},integrated:{start:I,end:c}})}else return;const _=u.resumeTime;h||_>s?l=s:l=_}),l<s){var a;const u=l,d=c,f=s-l;c+=f;const h=o;o+=f,r.push({previousEvent:((a=r[r.length-1])==null?void 0:a.event)||null,nextEvent:null,start:l,end:u+f,playout:{start:h,end:o},integrated:{start:d,end:c}})}this.setDurations(s,o,c)}else r.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return r}setDurations(e,n,r){this.durations={primary:e,playout:n,integrated:r}}resolveOffsets(e,n){const r=n.main.details,i=r.live?1/0:r.edge;let s=0,o=-1;e.forEach((a,l)=>{const c=a.cue.pre,u=a.cue.post,d=c?0:u?i:a.startTime;this.updateAssetDurations(a),o===d?a.cumulativeDuration=s:(s=0,o=d),!u&&a.snapOptions.in&&(a.resumeAnchor=Hu(null,r.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(a,n)||(a.appendInPlace=!1)),!a.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<qW&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`));const h=he(a.resumeOffset)?a.resumeOffset:a.duration;s+=h})}primaryCanResumeInPlaceAt(e,n){const r=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(r-i)>th?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${i}`),!1):!Object.keys(n).some(o=>{const a=n[o].details,l=a.edge;if(r>=l)return this.log(`"${e.identifier}" resumption ${r} past ${o} playlist end ${l}`),!1;const c=Hu(null,a.fragments,r);if(!c)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${o} playlist (${a.fragStart}-${a.fragmentEnd})`),!0;const u=o==="audio"?.175:0;return Math.abs(c.start-r)<th+u||Math.abs(c.end-r)<th+u?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${o} fragment bounds (${c.start}-${c.end} sn: ${c.sn} cc: ${c.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const n=e.timelineStart;let r=0,i=!1,s=!1;for(let o=0;o<e.assetList.length;o++){const a=e.assetList[o],l=n+r;a.startOffset=r,a.timelineStart=l,i||(i=a.duration===null),s||(s=!!a.error);const c=a.error?0:a.duration||0;r+=c}i&&!s?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function ns(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class Uht{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,n){const r=e.assetListUrl;let i;try{i=Zce(r,this.hls.sessionId,e.baseUrl)}catch(f){const h=this.assignAssetListError(e,Y.ASSET_LIST_LOAD_ERROR,f,r);this.hls.trigger(F.ERROR,h);return}n&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+n);const s=this.hls.config,o=s.loader,a=new o(s),l={responseType:"json",url:i.href},c=s.interstitialAssetListLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,m)=>{const g=f.data,y=g==null?void 0:g.ASSETS;if(!Array.isArray(y)){const x=this.assignAssetListError(e,Y.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),p.url,h,m);this.hls.trigger(F.ERROR,x);return}e.assetListResponse=g,this.hls.trigger(F.ASSET_LIST_LOADED,{event:e,assetListResponse:g,networkDetails:m})},onError:(f,h,p,m)=>{const g=this.assignAssetListError(e,Y.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${f.code} ${f.text} (${h.url})`),h.url,m,p);this.hls.trigger(F.ERROR,g)},onTimeout:(f,h,p)=>{const m=this.assignAssetListError(e,Y.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${h.url})`),h.url,f,p);this.hls.trigger(F.ERROR,m)}};return a.load(l,u,d),this.hls.trigger(F.ASSET_LIST_LOADING,{event:e}),a}assignAssetListError(e,n,r,i,s,o){return e.error=r,{type:Se.NETWORK_ERROR,details:n,fatal:!1,interstitial:e,url:i,error:r,networkDetails:o,stats:s}}}function YW(t){t==null||t.play().catch(()=>{})}function U1(t,e){return`[${t}] Advancing timeline position to ${e}`}class Vht extends Zi{constructor(e,n){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled||!this.schedule)return;const i=r-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const o=i<=-.01;this.timelinePos=r,this.bufferedPos=r;const a=this.playingItem;if(!a){this.checkBuffer();return}if(o&&this.schedule.resetErrorsInRange(r,r-i)&&this.updateSchedule(!0),this.checkBuffer(),o&&r<a.start||r>=a.end){var l;const h=this.findItemIndex(a);let p=this.schedule.findItemIndexAtTime(r);if(p===-1&&(p=h+(o?-1:1),this.log(`seeked ${o?"back ":""}to position not covered by schedule ${r} (resolving from ${h} to ${p})`)),!this.isInterstitial(a)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!o&&p>h){const m=this.schedule.findJumpRestrictedIndex(h+1,p);if(m>h){this.setSchedulePosition(m);return}}this.setSchedulePosition(p);return}const c=this.playingAsset;if(!c){if(this.playingLastItem&&this.isInterstitial(a)){const h=a.event.assetList[0];h&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,h))}return}const u=c.timelineStart,d=c.duration||0;if(o&&r<u||r>=u+d){var f;(f=a.event)!=null&&f.appendInPlace&&(this.clearInterstitial(a.event,a),this.flushFrontBuffer(r)),this.setScheduleToAssetAtTime(r,c)}},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(r>=i.end){this.timelinePos=i.end;const a=this.findItemIndex(i);this.setSchedulePosition(a+1)}const s=this.playingAsset;if(!s)return;const o=s.timelineStart+(s.duration||0);r>=o&&this.setScheduleToAssetAtTime(r,s)},this.onScheduleUpdate=(r,i)=>{const s=this.schedule;if(!s)return;const o=this.playingItem,a=s.events||[],l=s.items||[],c=s.durations,u=r.map(m=>m.identifier),d=!!(a.length||u.length);(d||i)&&this.log(`INTERSTITIALS_UPDATED (${a.length}): ${a}
Schedule: ${l.map(m=>ns(m))} pos: ${this.timelinePos}`),u.length&&this.log(`Removed events ${u}`);let f=null,h=null;o&&(f=this.updateItem(o,this.timelinePos),this.itemsMatch(o,f)?this.playingItem=f:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const p=this.bufferingItem;if(p&&(h=this.updateItem(p,this.bufferedPos),this.itemsMatch(p,h)?this.bufferingItem=h:p.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(p.event,null))),r.forEach(m=>{m.assetList.forEach(g=>{this.clearAssetPlayer(g.identifier,null)})}),this.playerQueue.forEach(m=>{if(m.interstitial.appendInPlace){const g=m.assetItem.timelineStart,y=m.timelineOffset-g;if(y)try{m.timelineOffset=g}catch(x){Math.abs(y)>th&&this.warn(`${x} ("${m.assetId}" ${m.timelineOffset}->${g})`)}}}),d||i){if(this.hls.trigger(F.INTERSTITIALS_UPDATED,{events:a.slice(0),schedule:l.slice(0),durations:c,removedIds:u}),this.isInterstitial(o)&&u.includes(o.event.identifier)){this.warn(`Interstitial "${o.event.identifier}" removed while playing`),this.primaryFallback(o.event);return}o&&this.trimInPlace(f,o),p&&h!==f&&this.trimInPlace(h,p),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=n,this.assetListLoader=new Uht(e),this.schedule=new Bht(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(F.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(F.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(F.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(F.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(F.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(F.BUFFER_APPENDED,this.onBufferAppended,this),e.on(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(F.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(F.MEDIA_ENDED,this.onMediaEnded,this),e.on(F.ERROR,this.onError,this),e.on(F.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(F.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(F.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(F.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(F.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(F.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(F.BUFFER_CODECS,this.onBufferCodecs,this),e.off(F.BUFFER_APPENDED,this.onBufferAppended,this),e.off(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(F.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(F.MEDIA_ENDED,this.onMediaEnded,this),e.off(F.ERROR,this.onError,this),e.off(F.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Vr(e,"play",this.onPlay),Vr(e,"pause",this.onPause),Vr(e,"seeking",this.onSeeking),Vr(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,n){const r=this.media=n.media;Er(r,"seeking",this.onSeeking),Er(r,"timeupdate",this.onTimeupdate),Er(r,"play",this.onPlay),Er(r,"pause",this.onPause)}onMediaAttached(e,n){const r=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!i){this.clearScheduleState();const s=this.findItemIndex(r);this.setSchedulePosition(s)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,n){const r=!!n.transferMedia,i=this.media;if(this.media=null,!r&&(i&&this.removeMediaListeners(i),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.log(`Removing schedule state for detachedData and ${s}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,n=()=>e.bufferingItem||e.waitingItem,r=d=>d&&e.getAssetPlayer(d.identifier),i=(d,f,h,p,m)=>{if(d){let g=d[f].start;const y=d.event;if(y){if(f==="playout"||y.timelineOccupancy!==Gw.Point){const x=r(h);(x==null?void 0:x.interstitial)===y&&(g+=x.assetItem.startOffset+x[m])}}else{const x=p==="bufferedPos"?o():e[p];g+=x-d.start}return g}return 0},s=(d,f)=>{var h;if(d!==0&&f!=="primary"&&(h=e.schedule)!=null&&h.length){var p;const m=e.schedule.findItemIndexAtTime(d),g=(p=e.schedule.items)==null?void 0:p[m];if(g){const y=g[f].start-g.start;return d+y}}return d},o=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?a("primary"):Math.max(d,0)},a=d=>{var f,h;return(f=e.primaryDetails)!=null&&f.live?e.primaryDetails.edge:((h=e.schedule)==null?void 0:h.durations[d])||0},l=(d,f)=>{var h,p;const m=e.effectivePlayingItem;if(m!=null&&(h=m.event)!=null&&h.restrictions.skip||!e.schedule)return;e.log(`seek to ${d} "${f}"`);const g=e.effectivePlayingItem,y=e.schedule.findItemIndexAtTime(d,f),x=(p=e.schedule.items)==null?void 0:p[y],S=e.getBufferingPlayer(),w=S==null?void 0:S.interstitial,E=w==null?void 0:w.appendInPlace,T=g&&e.itemsMatch(g,x);if(g&&(E||T)){const _=r(e.playingAsset),I=(_==null?void 0:_.media)||e.primaryMedia;if(I){const A=f==="primary"?I.currentTime:i(g,f,e.playingAsset,"timelinePos","currentTime"),L=d-A,j=(E?A:I.currentTime)+L;if(j>=0&&(!_||E||j<=_.duration)){I.currentTime=j;return}}}if(x){let _=d;if(f!=="primary"){const A=x[f].start,L=d-A;_=x.start+L}const I=!e.isInterstitial(x);if((!e.isInterstitial(g)||g.event.appendInPlace)&&(I||x.event.appendInPlace)){const A=e.media||(E?S==null?void 0:S.media:null);A&&(A.currentTime=_)}else if(g){const A=e.findItemIndex(g);if(y>A){const j=e.schedule.findJumpRestrictedIndex(A+1,y);if(j>A){e.setSchedulePosition(j);return}}let L=0;if(I)e.timelinePos=_,e.checkBuffer();else{const j=x.event.assetList,D=d-(x[f]||x).start;for(let O=j.length;O--;){const $=j[O];if($.duration&&D>=$.startOffset&&D<$.startOffset+$.duration){L=O;break}}}e.setSchedulePosition(y,L)}}},c=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const f=n();return e.isInterstitial(f)?f:null},u={get bufferedEnd(){const d=n(),f=e.bufferingItem;if(f&&f===d){var h;return i(f,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-f.playout.start||((h=e.bufferingAsset)==null?void 0:h.startOffset)||0}return 0},get currentTime(){const d=c(),f=e.effectivePlayingItem;return f&&f===d?i(f,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-f.playout.start:0},set currentTime(d){const f=c(),h=e.effectivePlayingItem;h&&h===f&&l(d+h.playout.start,"playout")},get duration(){const d=c();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const f=(d=c())==null?void 0:d.event.assetList;return f?f.map(h=>e.getAssetPlayer(h.identifier)):[]},get playingIndex(){var d;const f=(d=c())==null?void 0:d.event;return f&&e.effectivePlayingAsset?f.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return c()}};return this.manager={get events(){var d;return((d=e.schedule)==null||(d=d.events)==null?void 0:d.slice(0))||[]},get schedule(){var d;return((d=e.schedule)==null||(d=d.items)==null?void 0:d.slice(0))||[]},get interstitialPlayer(){return c()?u:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return n()},get bufferingIndex(){const d=n();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return o()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){l(d,"primary")},get duration(){return a("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(n(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){l(d,"integrated")},get duration(){return a("integrated")},get seekableStart(){var d;return s(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,f=d==null?void 0:d.event;if(f&&!f.restrictions.skip){const h=e.findItemIndex(d);if(f.appendInPlace){const p=d.playout.start+d.event.duration;l(p+.001,"playout")}else e.advanceAfterAssetEnded(f,h,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const n=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!n||!r?!1:this.findItemIndex(n)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,n;if(this.mediaSelection===null)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const s=(n=i)==null?void 0:n.currentTime;if(!(s===void 0||!he(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,n){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,n)}transferMediaFromPlayer(e,n){const r=e.interstitial.appendInPlace,i=e.media;if(r&&i===this.primaryMedia){if(this.bufferingAsset=null,(!n||this.isInterstitial(n)&&!n.event.appendInPlace)&&n&&i){this.detachedData={media:i};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${xt(s)}`),this.detachedData=s}else n&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,n){var r,i;if(e.media===n)return;let s=null;const o=this.hls,a=e!==o,l=a&&e.interstitial.appendInPlace,c=(r=this.detachedData)==null?void 0:r.mediaSource;let u;if(o.media)l&&(s=o.transferMedia(),this.detachedData=s),u="Primary";else if(c){const p=this.getBufferingPlayer();p?(s=p.transferMedia(),u=`${p}`):u="detached MediaSource"}else u="detached media";if(!s){if(c)s=this.detachedData,this.log(`using detachedData: MediaSource ${xt(s)}`);else if(!this.detachedData||o.media===n){const p=this.playerQueue;p.length>1&&p.forEach(m=>{if(a&&m.interstitial.appendInPlace!==l){const g=m.interstitial;this.clearInterstitial(m.interstitial,null),g.appendInPlace=!1,g.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${g}`)}}),this.hls.detachMedia(),this.detachedData={media:n}}}const d=s&&"mediaSource"in s&&((i=s.mediaSource)==null?void 0:i.readyState)!=="closed",f=d&&s?s:n;this.log(`${d?"transfering MediaSource":"attaching media"} to ${a?e:"Primary"} from ${u} (media.currentTime: ${n.currentTime})`);const h=this.schedule;if(f===s&&h){const p=a&&e.assetId===h.assetIdAtEnd;f.overrides={duration:h.duration,endOfStream:!a||p,cueRemoval:!a}}e.attachMedia(f)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,n=e==null?void 0:e.events;if(!n||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,i=this.effectivePlayingItem;if(r===-1){const s=this.hls.startPosition;if(this.log(U1("checkStart",s)),this.timelinePos=s,n.length&&n[0].cue.pre){const o=e.findEventIndex(n[0].identifier);this.setSchedulePosition(o)}else if(s>=0||!this.primaryLive){const o=this.timelinePos=s>0?s:0,a=e.findItemIndexAtTime(o);this.setSchedulePosition(a)}}else if(i&&!this.playingItem){const s=e.findItemIndex(i);this.setSchedulePosition(s)}}advanceAssetBuffering(e,n){const r=e.event,i=r.findAssetIndex(n),s=Qk(r,i);if(!r.isAssetPastPlayoutLimit(s))this.bufferedToEvent(e,s);else if(this.schedule){var o;const a=(o=this.schedule.items)==null?void 0:o[this.findItemIndex(e)+1];a&&this.bufferedToItem(a)}}advanceAfterAssetEnded(e,n,r){const i=Qk(e,r);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const s=this.schedule.items;if(s){const o=n+1,a=s.length;if(o>=a){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.log(U1("advanceAfterAssetEnded",l)),this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(o)}}}else{if(e.appendInPlace){const s=e.assetList[i];s&&this.advanceInPlace(s.timelineStart)}this.setSchedulePosition(n,i)}}setScheduleToAssetAtTime(e,n){const r=this.schedule;if(!r)return;const i=n.parentIdentifier,s=r.getEvent(i);if(s){const o=r.findEventIndex(i),a=r.findAssetIndex(s,e);this.advanceAfterAssetEnded(s,o,a-1)}}setSchedulePosition(e,n){var r;const i=(r=this.schedule)==null?void 0:r.items;if(!i||this.playbackDisabled)return;const s=e>=0?i[e]:null;this.log(`setSchedulePosition ${e}, ${n} (${s&&ns(s)}) pos: ${this.timelinePos}`);const o=this.waitingItem||this.playingItem,a=this.playingLastItem;if(this.isInterstitial(o)){const u=o.event,d=this.playingAsset,f=d==null?void 0:d.identifier,h=f?this.getAssetPlayer(f):null;if(h&&f&&(!this.eventItemsMatch(o,s)||n!==void 0&&f!==u.assetList[n].identifier)){var l;const p=u.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${p+1}/${u.assetList.length} ${Gd(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(F.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:p,event:u,schedule:i.slice(0),scheduleIndex:e,player:h}),o!==this.playingItem){this.itemsMatch(o,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(u,this.findItemIndex(this.playingItem),p);return}this.retreiveMediaSource(f,s),h.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&h.detachMedia()}if(!this.eventItemsMatch(o,s)&&(this.endedItem=o,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${u} ${ns(o)}`),u.hasPlayed=!0,this.hls.trigger(F.INTERSTITIAL_ENDED,{event:u,schedule:i.slice(0),scheduleIndex:e}),u.cue.once)){var c;this.updateSchedule();const p=(c=this.schedule)==null?void 0:c.items;if(s&&p){const m=this.findItemIndex(s);this.advanceSchedule(m,p,n,o,a)}return}}this.advanceSchedule(e,i,n,o,a)}advanceSchedule(e,n,r,i,s){const o=this.schedule;if(!o)return;const a=n[e]||null,l=this.primaryMedia,c=this.playerQueue;if(c.length&&c.forEach(u=>{const d=u.interstitial,f=o.findEventIndex(d.identifier);(f<e||f>e+1)&&this.clearInterstitial(d,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const u=a.event;if(r===void 0){r=o.findAssetIndex(u,this.timelinePos);const p=Qk(u,r-1);if(u.isAssetPastPlayoutLimit(p)||u.appendInPlace&&this.timelinePos===a.end){this.advanceAfterAssetEnded(u,e,r);return}r=p}const d=this.waitingItem;this.assetsBuffered(a,l)||this.setBufferingItem(a);let f=this.preloadAssets(u,r);if(this.eventItemsMatch(a,d||i)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${ns(a)} ${u.appendInPlace?"append in place":""}`),this.hls.trigger(F.INTERSTITIAL_STARTED,{event:u,schedule:n.slice(0),scheduleIndex:e})),!u.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${u}`);return}if(u.assetListLoader&&(u.assetListLoader.destroy(),u.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${u}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;const h=u.assetList[r];if(!h){this.advanceAfterAssetEnded(u,e,r||0);return}if(f||(f=this.getAssetPlayer(h.identifier)),f===null||f.destroyed){const p=u.assetList.length;this.warn(`asset ${r+1}/${p} player destroyed ${u}`),f=this.createAssetPlayer(u,h,r),f.loadSource()}if(!this.eventItemsMatch(a,this.bufferingItem)&&u.appendInPlace&&this.isAssetBuffered(h))return;this.startAssetPlayer(f,r,n,e,l),this.shouldPlay&&YW(f.media)}else a?(this.resumePrimary(a,e,i),this.shouldPlay&&YW(this.hls.media)):s&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(o.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,n,r){var i,s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${ns(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let a=this.timelinePos;(a<e.start||a>=e.end)&&(a=this.getPrimaryResumption(e,n),this.log(U1("resumePrimary",a)),this.timelinePos=a),this.attachPrimary(a,e)}if(!r)return;const o=(s=this.schedule)==null?void 0:s.items;o&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${ns(e)}`),this.hls.trigger(F.INTERSTITIALS_PRIMARY_RESUMED,{schedule:o.slice(0),scheduleIndex:n}),this.checkBuffer())}getPrimaryResumption(e,n){const r=e.start;if(this.primaryLive){const i=this.primaryDetails;if(n===0)return this.hls.startPosition;if(i&&(r<i.fragmentStart||r>i.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const n=this.getAssetPlayer(e.identifier);return n!=null&&n.hls?n.hls.bufferedToEnd:Re.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,n,r){n?this.setBufferingItem(n):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,i),r&&this.startLoadingPrimaryAt(e,r)),r||(this.log(U1("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,n){var r;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((r=i.mainForwardBufferInfo)==null?void 0:r.start)||i.media.currentTime)-e)>.5?i.startLoad(e,n):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(F.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(F.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,n){if(n.level===-1||!this.schedule)return;const r=this.hls.levels[n.level];if(!r.details)return;const i=ct(ct({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,n){const r=this.hls.audioTracks[n.id],i=this.mediaSelection;if(!i){this.altSelection=ct(ct({},this.altSelection),{},{audio:r});return}const s=ct(ct({},i),{},{audio:r});this.mediaSelection=s}onSubtitleTrackUpdated(e,n){const r=this.hls.subtitleTracks[n.id],i=this.mediaSelection;if(!i){this.altSelection=ct(ct({},this.altSelection),{},{subtitles:r});return}const s=ct(ct({},i),{},{subtitles:r});this.mediaSelection=s}onAudioTrackSwitching(e,n){const r=iW(n);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(n)||i.setAudioOption(r)))}onSubtitleTrackSwitch(e,n){const r=iW(n);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(n)||n.id!==-1&&i.setSubtitleOption(r)))}onBufferCodecs(e,n){const r=n.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,n){this.checkBuffer()}onBufferFlushed(e,n){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const n=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&n){for(let i=0;i<n.length;i++){const s=n[i];if(s.cue.post){var r;const o=this.schedule.findEventIndex(s.identifier),a=(r=this.schedule.items)==null?void 0:r[o];this.isInterstitial(a)&&this.eventItemsMatch(a,this.bufferingItem)&&this.bufferedToItem(a,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const n=this.playingItem;if(!this.playingLastItem&&n){const r=this.findItemIndex(n);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,n){var r;const i=(r=this.schedule)==null?void 0:r.items;if(e&&i){const s=this.findItemIndex(e,n);return i[s]||null}return null}trimInPlace(e,n){if(this.isInterstitial(e)&&e.event.appendInPlace&&n.end-e.end>.25){e.event.assetList.forEach((s,o)=>{e.event.isAssetPastPlayoutLimit(o)&&this.clearAssetPlayer(s.identifier,null)});const r=e.end+.25,i=Re.bufferInfo(this.primaryMedia,r,0);if(i.end>r||(i.nextStart||0)>r){this.log(`trim buffered interstitial ${ns(e)} (was ${ns(n)})`);const s=!0;this.attachPrimary(r,null,s),this.flushFrontBuffer(r)}}}itemsMatch(e,n){return!!n&&(e===n||e.event&&n.event&&this.eventItemsMatch(e,n)||!e.event&&!n.event&&this.findItemIndex(e)===this.findItemIndex(n))}eventItemsMatch(e,n){var r;return!!n&&(e===n||e.event.identifier===((r=n.event)==null?void 0:r.identifier))}findItemIndex(e,n){return e&&this.schedule?this.schedule.findItemIndex(e,n):-1}updateSchedule(e=!1){var n;const r=this.mediaSelection;r&&((n=this.schedule)==null||n.updateSchedule(r,[],e))}checkBuffer(e){var n;const r=(n=this.schedule)==null?void 0:n.items;if(!r)return;const i=Re.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,r,e)}updateBufferedPos(e,n,r){const i=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(n.length===1&&this.itemsMatch(n[0],s)){this.bufferedPos=e;return}const o=this.playingItem,a=this.findItemIndex(o);let l=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var c;const u=this.findItemIndex(s),d=Math.min(u+1,n.length-1),f=n[d];if((l===-1&&s&&e>=s.end||(c=f.event)!=null&&c.appendInPlace&&e+.01>=f.start)&&(l=d),this.isInterstitial(s)){const h=s.event;if(d-a>1&&h.appendInPlace===!1||h.assetList.length===0&&h.assetListLoader)return}if(this.bufferedPos=e,l>u&&l>a)this.bufferedToItem(f);else{const h=this.primaryDetails;this.primaryLive&&h&&e>h.edge-h.targetduration&&f.start<h.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else r&&o&&!this.itemsMatch(o,s)&&(l===a?this.bufferedToItem(o):l===a+1&&this.bufferedToItem(n[l]))}assetsBuffered(e,n){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const s=this.getAssetPlayer(i.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(n))})}setBufferingItem(e){const n=this.bufferingItem,r=this.schedule;if(!this.itemsMatch(e,n)&&r){const{items:i,events:s}=r;if(!i||!s)return n;const o=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=a?a.remaining:n?n.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${ns(e)}`+(n?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(o){const c=r.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((u,d)=>{const f=this.getAssetPlayer(u.identifier);f&&(d===c&&f.loadSource(),f.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(c=>c.pauseBuffering());this.hls.trigger(F.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return n}bufferedToItem(e,n=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,n);else if(r!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const n=this.findItemIndex(e),r=this.getPrimaryResumption(e,n);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,n){const r=e.event,i=r.assetList.length===0&&!r.assetListLoader,s=r.cue.once;if(i||!s){const o=this.preloadAssets(r,n);if(o!=null&&o.interstitial.appendInPlace){const a=this.primaryMedia;a&&this.bufferAssetPlayer(o,a)}}}preloadAssets(e,n){const r=e.assetUrl,i=e.assetList.length,s=i===0&&!e.assetListLoader,o=e.cue.once;if(s){const l=e.timelineStart;if(e.appendInPlace){var a;const f=this.playingItem;!this.isInterstitial(f)&&(f==null||(a=f.nextEvent)==null?void 0:a.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let c,u=0;if(!this.playingItem&&this.primaryLive&&(u=this.hls.startPosition,u===-1&&(u=this.hls.liveSyncPosition||0)),u&&!(e.cue.pre||e.cue.post)){const f=u-l;f>0&&(c=Math.round(f*1e3)/1e3)}if(this.log(`Load interstitial asset ${n+1}/${r?1:i} ${e}${c?` live-start: ${u} start-offset: ${c}`:""}`),r)return this.createAsset(e,0,0,l,e.duration,r);const d=this.assetListLoader.loadAssetList(e,c);d&&(e.assetListLoader=d)}else if(!o&&i){for(let c=n;c<i;c++){const u=e.assetList[c],d=this.getAssetPlayerQueueIndex(u.identifier);(d===-1||this.playerQueue[d].destroyed)&&!u.error&&this.createAssetPlayer(e,u,c)}const l=e.assetList[n];if(l){const c=this.getAssetPlayer(l.identifier);return c&&c.loadSource(),c}}return null}flushFrontBuffer(e){const n=this.requiredTracks;if(!n)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(n).forEach(i=>{this.hls.trigger(F.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const n=this.playerQueue;for(let r=0;r<n.length;r++)if(e===n[r].assetId)return r;return-1}getAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);return this.playerQueue[n]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:n}=this;if(n){for(let r=0;r<e.length;r++)if(e[r].media===n)return e[r]}return null}createAsset(e,n,r,i,s,o){const a={parentIdentifier:e.identifier,identifier:$ht(e,o,n),duration:s,startOffset:r,timelineStart:i,uri:o};return this.createAssetPlayer(e,a,n)}createAssetPlayer(e,n,r){const i=this.hls,s=i.userConfig;let o=s.videoPreference;const a=i.loadLevelObj||i.levels[i.currentLevel];(o||a)&&(o=vt({},o),a.videoCodec&&(o.videoCodec=a.videoCodec),a.videoRange&&(o.allowedVideoRanges=[a.videoRange]));const l=i.audioTracks[i.audioTrack],c=i.subtitleTracks[i.subtitleTrack];let u=0;if(this.primaryLive||e.appendInPlace){const w=this.timelinePos-n.timelineStart;if(w>1){const E=n.duration;E&&w<E&&(u=w)}}const d=n.identifier,f=ct(ct({},s),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:u,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:o,audioPreference:l||s.audioPreference,subtitlePreference:c||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,n.timelineStart&&(f.timelineOffset=n.timelineStart));const h=f.cmcd;h!=null&&h.sessionId&&h.contentId&&(f.cmcd=vt({},h,{contentId:Eg(n.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const p=new jht(this.HlsPlayerClass,f,e,n);this.playerQueue.push(p),e.assetList[r]=n;let m=!0;const g=w=>{if(w.live){var E;const I=new Error(`Interstitials MUST be VOD assets ${e}`),A={fatal:!0,type:Se.OTHER_ERROR,details:Y.INTERSTITIAL_ASSET_ITEM_ERROR,error:I},L=((E=this.schedule)==null?void 0:E.findEventIndex(e.identifier))||-1;this.handleAssetItemError(A,e,L,r,I.message);return}const T=w.edge-w.fragmentStart,_=n.duration;(m||_===null||T>_)&&(m=!1,this.log(`Interstitial asset "${d}" duration change ${_} > ${T}`),n.duration=T,this.updateSchedule())};p.on(F.LEVEL_UPDATED,(w,{details:E})=>g(E)),p.on(F.LEVEL_PTS_UPDATED,(w,{details:E})=>g(E)),p.on(F.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const y=(w,E)=>{const T=this.getAssetPlayer(d);if(T&&E.tracks){T.off(F.BUFFER_CODECS,y),T.tracks=E.tracks;const _=this.primaryMedia;this.bufferingAsset===T.assetItem&&_&&!T.media&&this.bufferAssetPlayer(T,_)}};p.on(F.BUFFER_CODECS,y);const x=()=>{var w;const E=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${E}`),!E||!this.schedule)return;const T=this.schedule.findEventIndex(e.identifier),_=(w=this.schedule.items)==null?void 0:w[T];this.isInterstitial(_)&&this.advanceAssetBuffering(_,n)};p.on(F.BUFFERED_TO_END,x);const S=w=>()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;this.shouldPlay=!0;const T=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,T,w)};return p.once(F.MEDIA_ENDED,S(r)),p.once(F.PLAYOUT_LIMIT_REACHED,S(1/0)),p.on(F.ERROR,(w,E)=>{if(!this.schedule)return;const T=this.getAssetPlayer(d);if(E.details===Y.BUFFER_STALLED_ERROR){if(T!=null&&T.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(E,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${E.error} ${e}`)}),p.on(F.DESTROYING,()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;const E=new Error(`Asset player destroyed unexpectedly ${d}`),T={fatal:!0,type:Se.OTHER_ERROR,details:Y.INTERSTITIAL_ASSET_ITEM_ERROR,error:E};this.handleAssetItemError(T,e,this.schedule.findEventIndex(e.identifier),r,E.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Gd(n)}`),this.hls.trigger(F.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:n,assetListIndex:r,event:e,player:p}),p}clearInterstitial(e,n){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,n)}),e.reset()}resetAssetPlayer(e){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[n];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,n){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){const i=this.playerQueue[r];this.log(`clear ${i} toSegment: ${n&&ns(n)}`),this.transferMediaFromPlayer(i,n),this.playerQueue.splice(r,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,n,r,i,s){const{interstitial:o,assetItem:a,assetId:l}=e,c=o.assetList.length,u=this.playingAsset;this.endedAsset=null,this.playingAsset=a,(!u||u.identifier!==l)&&(u&&(this.clearAssetPlayer(u.identifier,r[i]),delete u.error),this.log(`INTERSTITIAL_ASSET_STARTED ${n+1}/${c} ${Gd(a)}`),this.hls.trigger(F.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:n,event:o,schedule:r.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,n){var r,i;if(!this.schedule)return;const{interstitial:s,assetItem:o}=e,a=this.schedule.findEventIndex(s.identifier),l=(r=this.schedule.items)==null?void 0:r[a];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=o;const c=this.getBufferingPlayer();if(c===e)return;const u=s.appendInPlace;if(u&&(c==null?void 0:c.interstitial.appendInPlace)===!1)return;const d=(c==null?void 0:c.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(u&&o!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(d&&!Dle(d,e.tracks)){const f=new Error(`Asset ${Gd(o)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),h={fatal:!0,type:Se.OTHER_ERROR,details:Y.INTERSTITIAL_ASSET_ITEM_ERROR,error:f},p=s.findAssetIndex(o);this.handleAssetItemError(h,s,a,p,f.message);return}}this.transferMediaTo(e,n)}handleInPlaceStall(e){const n=this.schedule,r=this.primaryMedia;if(!n||!r)return;const i=r.currentTime,s=n.findAssetIndex(e,i),o=e.assetList[s];if(o){const a=this.getAssetPlayer(o.identifier);if(a){const l=a.currentTime||i-o.timelineStart,c=a.duration-l;if(this.warn(`Stalled at ${l} of ${l+c} in ${a} ${e} (media.currentTime: ${i})`),l&&(c/r.playbackRate<.5||a.bufferedInPlaceToEnd(r))&&a.hls){const u=n.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,u,s)}}}}advanceInPlace(e){const n=this.primaryMedia;n&&n.currentTime<e&&(n.currentTime=e)}handleAssetItemError(e,n,r,i,s){if(e.details===Y.BUFFER_STALLED_ERROR)return;const o=n.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${o&&Gd(o)} ${e.error}`),!this.schedule)return;const a=(o==null?void 0:o.identifier)||"",l=this.getAssetPlayerQueueIndex(a),c=this.playerQueue[l]||null,u=this.schedule.items,d=vt({},e,{fatal:!1,errorAction:Zf(!0),asset:o,assetListIndex:i,event:n,schedule:u,scheduleIndex:r,player:c});if(this.hls.trigger(F.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const f=this.playingAsset,h=this.bufferingAsset,p=new Error(s);if(o&&(this.clearAssetPlayer(a,null),o.error=p),!n.assetList.some(m=>!m.error))n.error=p;else for(let m=i;m<n.assetList.length;m++)this.resetAssetPlayer(n.assetList[m].identifier);this.updateSchedule(!0),n.error?this.primaryFallback(n):f&&f.identifier===a?this.advanceAfterAssetEnded(n,r,i):h&&h.identifier===a&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,h)}primaryFallback(e){const n=e.timelineStart,r=this.effectivePlayingItem;if(r){this.log(`Fallback to primary from event "${e.identifier}" start: ${n} pos: ${this.timelinePos} playing: ${ns(r)} error: ${e.error}`);let i=this.timelinePos;i===-1&&(i=this.hls.startPosition);const s=this.updateItem(r,i);if(this.itemsMatch(r,s)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(n,null),this.flushFrontBuffer(n)),!this.schedule)return;const o=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(o)}else this.checkStart()}onAssetListLoaded(e,n){var r,i;const s=n.event,o=s.identifier,a=n.assetListResponse.ASSETS;if(!((r=this.schedule)!=null&&r.hasEvent(o)))return;const l=s.timelineStart,c=s.duration;let u=0;a.forEach((m,g)=>{const y=parseFloat(m.DURATION);this.createAsset(s,g,u,l+u,y,m.URI),u+=y}),s.duration=u,this.log(`Loaded asset-list with duration: ${u} (was: ${c}) ${s}`);const d=this.waitingItem,f=(d==null?void 0:d.event.identifier)===o;this.updateSchedule();const h=(i=this.bufferingItem)==null?void 0:i.event;if(f){var p;const m=this.schedule.findEventIndex(o),g=(p=this.schedule.items)==null?void 0:p[m];if(g){if(!this.playingItem&&this.timelinePos>g.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==m){s.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${s}`),this.updateSchedule(!0),this.primaryFallback(s);return}this.setBufferingItem(g)}this.setSchedulePosition(m)}else if((h==null?void 0:h.identifier)===o){const m=s.assetList[0];if(m){const g=this.getAssetPlayer(m.identifier);if(h.appendInPlace){const y=this.primaryMedia;g&&y&&this.bufferAssetPlayer(g,y)}else g&&g.loadSource()}}}onError(e,n){if(this.schedule)switch(n.details){case Y.ASSET_LIST_PARSING_ERROR:case Y.ASSET_LIST_LOAD_ERROR:case Y.ASSET_LIST_LOAD_TIMEOUT:{const r=n.interstitial;r&&(this.updateSchedule(!0),this.primaryFallback(r));break}case Y.BUFFER_STALLED_ERROR:{const r=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&r.event.appendInPlace){this.handleInPlaceStall(r.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const QW=500;class zht extends r5{constructor(e,n,r){super(e,n,r,"subtitle-stream-controller",ge.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(F.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(F.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(F.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(F.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(F.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(F.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,n){this.stopLoad(),this.state=ee.IDLE,this.setInterval(QW),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,n){this.tracksBuffered=[],super.onMediaDetaching(e,n)}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:i}=n;if(this.fragContextChanged(r)||(pn(r)&&(this.fragPrevious=r),this.state=ee.IDLE),!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let o;const a=r.start;for(let c=0;c<s.length;c++)if(a>=s[c].start&&a<=s[c].end){o=s[c];break}const l=r.start+r.duration;o?o.end=l:(o={start:a,end:l},s.push(o)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,n){const{startOffset:r,endOffset:i}=n;if(r===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;n.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=s){o.shift();continue}else if(o[a].start<s)o[a].start=s;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(r,s,ge.SUBTITLE)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===ge.SUBTITLE&&(n.details===Y.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ee.STOPPED&&(this.state=ee.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(this.levels&&Nce(this.levels,n)){this.levels=n.map(r=>new $0(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const i=new $0(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ge.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==ee.STOPPED&&this.setInterval(QW)}onSubtitleTrackLoaded(e,n){var r;const{currentTrackId:i,levels:s}=this,{details:o,id:a}=n;if(!s){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=s[a];if(a>=s.length||!l)return;this.log(`Subtitle track ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(o.live||(r=l.details)!=null&&r.live){if(o.deltaUpdateFailed)return;const d=this.mainDetails;if(!d){this.startFragRequested=!1;return}const f=d.fragments[0];if(!l.details)o.hasProgramDateTime&&d.hasProgramDateTime?(Hw(o,d),c=o.fragmentStart):f&&(c=f.start,MR(o,c));else{var u;c=this.alignPlaylists(o,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&f&&(c=f.start,MR(o,c))}d&&!this.startFragRequested&&this.setStartPosition(d,c)}l.details=o,this.levelLastLoaded=l,a===i&&(this.hls.trigger(F.SUBTITLE_TRACK_UPDATED,{details:o,id:a,groupId:n.groupId}),this.tick(),o.live&&!this.fragCurrent&&this.media&&this.state===ee.IDLE&&(Hu(null,o.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,i=n.decryptdata,s=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&Jf(i.method)){const o=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,t5(i.method)).catch(a=>{throw s.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:n}),a}).then(a=>{const l=performance.now();s.trigger(F.FRAG_DECRYPTED,{frag:n,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=ee.IDLE})}}doTick(){if(!this.media){this.state=ee.IDLE;return}if(this.state===ee.IDLE){const{currentTrackId:e,levels:n}=this,r=n==null?void 0:n[e];if(!r||!n.length||!r.details||this.waitForLive(r))return;const{config:i}=this,s=this.getLoadPosition(),o=Re.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:a,len:l}=o,c=r.details,u=this.hls.maxBufferLength+c.levelTargetDuration;if(l>u)return;const d=c.fragments,f=d.length,h=c.edge;let p=null;const m=this.fragPrevious;if(a<h){const x=i.maxFragLookUpTolerance,S=a>h-x?0:x;p=Hu(m,d,Math.max(d[0].start,a),S),!p&&m&&m.start<d[0].start&&(p=d[0])}else p=d[f-1];if(p=this.filterReplacedPrimary(p,r.details),!p)return;const g=p.sn-c.startSN,y=d[g-1];if(y&&y.cc===p.cc&&this.fragmentTracker.getState(y)===_n.NOT_LOADED&&(p=y),this.fragmentTracker.getState(p)===_n.NOT_LOADED){const x=this.mapToInitFragWhenRequired(p);x&&this.loadFragment(x,r,a)}}}loadFragment(e,n,r){pn(e)?super.loadFragment(e,n,r):this._loadInitSegment(e,n)}get mediaBufferTimeRanges(){return new Hht(this.tracksBuffered[this.currentTrackId]||[])}}class Hht{constructor(e){this.buffered=void 0;const n=(r,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}const Wht={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Jce=t=>String.fromCharCode(Wht[t]||t),as=15,No=100,Ght={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Kht={17:2,18:4,21:6,22:8,23:10,19:13,20:15},qht={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Yht={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Qht=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Xht{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;dt.log(`${this.time} [${e}] ${r}`)}}}const Mc=function(e){const n=[];for(let r=0;r<e.length;r++)n.push(e[r].toString(16));return n};class eue{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const i=n[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Zht{constructor(){this.uchar=" ",this.penState=new eue}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Jht{constructor(e){this.chars=[],this.pos=0,this.currPenState=new eue,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<No;n++)this.chars.push(new Zht);this.logger=e}equals(e){for(let n=0;n<No;n++)if(!this.chars[n].equals(e.chars[n]))return!1;return!0}copy(e){for(let n=0;n<No;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<No;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>No&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=No)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=Jce(e);if(this.pos>=No){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<No;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<No;r++){const i=this.chars[r].uchar;i!==" "&&(n=!1),e.push(i)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Xk{constructor(e){this.rows=[],this.currRow=as-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<as;n++)this.rows.push(new Jht(e));this.logger=e}reset(){for(let e=0;e<as;e++)this.rows[e].clear();this.currRow=as-1}equals(e){let n=!0;for(let r=0;r<as;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<as;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<as;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+xt(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let a=0;a<as;a++)this.rows[a].clear();const s=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[s].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[n-this.nrRollUpRows+c+1].copy(o.rows[s+c])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,o=Math.max(s-1,0);r.setCursor(e.indent),e.color=r.chars[o].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+xt(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",i=-1;for(let s=0;s<as;s++){const o=this.rows[s].getTextString();o&&(i=s+1,e?n.push("Row "+i+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class XW{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new Xk(r),this.nonDisplayedMemory=new Xk(r),this.lastOutputScreen=new Xk(r),this.currRollUpRow=this.displayedMemory.rows[as-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[as-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=i[r]}this.logger.log(2,"MIDROW: "+xt(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class ZW{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=tpt(),this.logger=void 0;const i=this.logger=new Xht;this.channels=[null,new XW(e,n,i),new XW(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){this.logger.time=e;for(let r=0;r<n.length;r+=2){const i=n[r]&127,s=n[r+1]&127;let o=!1,a=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+Mc([n[r],n[r+1]])+"] -> ("+Mc([i,s])+")");const l=this.cmdHistory;if(i>=16&&i<=31){if(ept(i,s,l)){V1(null,null,l),this.logger.log(3,()=>"Repeated command ("+Mc([i,s])+") is dropped");continue}V1(i,s,this.cmdHistory),o=this.parseCmd(i,s),o||(o=this.parseMidrow(i,s)),o||(o=this.parsePAC(i,s)),o||(o=this.parseBackgroundAttributes(i,s))}else V1(null,null,l);if(!o&&(a=this.parseChars(i,s),a)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!o&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+Mc([i,s])+" orig: "+Mc([n[r],n[r+1]]))}}parseCmd(e,n){const r=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=33&&n<=35;if(!(r||i))return!1;const s=e===20||e===21||e===23?1:2,o=this.channels[s];return e===20||e===21||e===28||e===29?n===32?o.ccRCL():n===33?o.ccBS():n===34?o.ccAOF():n===35?o.ccAON():n===36?o.ccDER():n===37?o.ccRU(2):n===38?o.ccRU(3):n===39?o.ccRU(4):n===40?o.ccFON():n===41?o.ccRDC():n===42?o.ccTR():n===43?o.ccRTD():n===44?o.ccEDM():n===45?o.ccCR():n===46?o.ccENM():n===47&&o.ccEOC():o.ccTO(n-32),this.currentChannel=s,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+Mc([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const i=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,s=(e===16||e===24)&&n>=64&&n<=95;if(!(i||s))return!1;const o=e<=23?1:2;n>=64&&n<=95?r=o===1?Ght[e]:qht[e]:r=o===1?Kht[e]:Yht[e];const a=this.channels[o];return a?(a.setPAC(this.interpretPAC(r,n)),this.currentChannel=o,!0):!1}interpretPAC(e,n){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,n){let r,i=null,s=null;if(e>=25?(r=2,s=e-8):(r=1,s=e),s>=17&&s<=19){let o;s===17?o=n+80:s===18?o=n+112:o=n+144,this.logger.log(2,()=>"Special char '"+Jce(o)+"' in channel "+r),i=[o]}else e>=32&&e<=127&&(i=n===0?[e]:[e,n]);return i&&this.logger.log(3,()=>"Char codes =  "+Mc(i).join(",")),i}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=45&&n<=47;if(!(r||i))return!1;let s;const o={};e===16||e===24?(s=Math.floor((n-32)/2),o.background=Qht[s],n%2===1&&(o.background=o.background+"_semi")):n===45?o.background="transparent":(o.foreground="black",n===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}V1(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function V1(t,e,n){n.a=t,n.b=e}function ept(t,e,n){return n.a===t&&n.b===e}function tpt(){return{a:null,b:null}}var m5=function(){if(zw!=null&&zw.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const c=l.toLowerCase();return~a.indexOf(c)?c:!1}function r(a){return n(t,a)}function i(a){return n(e,a)}function s(a,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)a[d]=u[d]}return a}function o(a,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let f="",h=!1,p=a,m=l,g=c,y=null,x="",S=!0,w="auto",E="start",T=50,_="middle",I=50,A="middle";Object.defineProperty(u,"id",s({},d,{get:function(){return f},set:function(L){f=""+L}})),Object.defineProperty(u,"pauseOnExit",s({},d,{get:function(){return h},set:function(L){h=!!L}})),Object.defineProperty(u,"startTime",s({},d,{get:function(){return p},set:function(L){if(typeof L!="number")throw new TypeError("Start time must be set to a number.");p=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},d,{get:function(){return m},set:function(L){if(typeof L!="number")throw new TypeError("End time must be set to a number.");m=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},d,{get:function(){return g},set:function(L){g=""+L,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},d,{get:function(){return y},set:function(L){y=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},d,{get:function(){return x},set:function(L){const j=r(L);if(j===!1)throw new SyntaxError("An invalid or illegal string was specified.");x=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},d,{get:function(){return S},set:function(L){S=!!L,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},d,{get:function(){return w},set:function(L){if(typeof L!="number"&&L!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");w=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},d,{get:function(){return E},set:function(L){const j=i(L);if(!j)throw new SyntaxError("An invalid or illegal string was specified.");E=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},d,{get:function(){return T},set:function(L){if(L<0||L>100)throw new Error("Position must be between 0 and 100.");T=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},d,{get:function(){return _},set:function(L){const j=i(L);if(!j)throw new SyntaxError("An invalid or illegal string was specified.");_=j,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},d,{get:function(){return I},set:function(L){if(L<0||L>100)throw new Error("Size must be between 0 and 100.");I=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},d,{get:function(){return A},set:function(L){const j=i(L);if(!j)throw new SyntaxError("An invalid or illegal string was specified.");A=j,this.hasBeenReset=!0}})),u.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class npt{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function tue(t){function e(r,i,s,o){return(r|0)*3600+(i|0)*60+(s|0)+parseFloat(o||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class rpt{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let i=0;i<r.length;++i)if(n===r[i]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function nue(t,e,n,r){const i=r?t.split(r):[t];for(const s in i){if(typeof i[s]!="string")continue;const o=i[s].split(n);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const zR=new m5(0,0,""),z1=zR.align==="middle"?"middle":"center";function ipt(t,e,n){const r=t;function i(){const a=tue(t);if(a===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function s(a,l){const c=new rpt;nue(a,function(f,h){let p;switch(f){case"region":for(let m=n.length-1;m>=0;m--)if(n[m].id===h){c.set(f,n[m].region);break}break;case"vertical":c.alt(f,h,["rl","lr"]);break;case"line":p=h.split(","),c.integer(f,p[0]),c.percent(f,p[0])&&c.set("snapToLines",!1),c.alt(f,p[0],["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start",z1,"end"]);break;case"position":p=h.split(","),c.percent(f,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start",z1,"end","line-left","line-right","auto"]);break;case"size":c.percent(f,h);break;case"align":c.alt(f,h,["start",z1,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&zR.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",z1);let d=c.get("position","auto");d==="auto"&&zR.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=i(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),o(),e.endTime=i(),o(),s(t,e)}function rue(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class spt{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new npt,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let s=n.buffer,o=0;for(s=rue(s);o<s.length&&s[o]!=="\r"&&s[o]!==`
`;)++o;const a=s.slice(0,o);return s[o]==="\r"&&++o,s[o]===`
`&&++o,n.buffer=s.slice(o),a}function i(s){nue(s,function(o,a){},/:/)}try{let s="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;s=r();const a=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let o=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:s=r(),n.state){case"HEADER":/:/.test(s)?i(s):s||(n.state="ID");continue;case"NOTE":s||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){n.state="NOTE";break}if(!s)continue;if(n.cue=new m5(0,0,""),n.state="CUE",s.indexOf("-->")===-1){n.cue.id=s;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{ipt(s,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const a=s.indexOf("-->")!==-1;if(!s||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=s}continue;case"BADCUE":s||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const opt=/\r\n|\n\r|\n|\r/g,Zk=function(e,n,r=0){return e.slice(r,r+n.length)===n},apt=function(e){let n=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!he(n)||!he(r)||!he(i)||!he(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return n+=1e3*r,n+=60*1e3*i,n+=60*60*1e3*s,n};function g5(t,e,n){return Eg(t.toString())+Eg(e.toString())+Eg(n)}const lpt=function(e,n,r){let i=e[n],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(o=s)!=null&&o.new;){var o;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=r};function cpt(t,e,n,r,i,s,o){const a=new spt,l=mi(new Uint8Array(t)).trim().replace(opt,`
`).split(`
`),c=[],u=e?mft(e.baseTime,e.timescale):0;let d="00:00.000",f=0,h=0,p,m=!0;a.oncue=function(g){const y=n[r];let x=n.ccOffset;const S=(f-u)/9e4;if(y!=null&&y.new&&(h!==void 0?x=n.ccOffset=y.start:lpt(n,r,S)),S){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}x=S-n.presentationOffset}const w=g.endTime-g.startTime,E=ii((g.startTime+x-h)*9e4,i*9e4)/9e4;g.startTime=Math.max(E,0),g.endTime=Math.max(E+w,0);const T=g.text.trim();g.text=decodeURIComponent(encodeURIComponent(T)),g.id||(g.id=g5(g.startTime,g.endTime,T)),g.endTime>0&&c.push(g)},a.onparsingerror=function(g){p=g},a.onflush=function(){if(p){o(p);return}s(c)},l.forEach(g=>{if(m)if(Zk(g,"X-TIMESTAMP-MAP=")){m=!1,g.slice(16).split(",").forEach(y=>{Zk(y,"LOCAL:")?d=y.slice(6):Zk(y,"MPEGTS:")&&(f=parseInt(y.slice(7)))});try{h=apt(d)/1e3}catch(y){p=y}return}else g===""&&(m=!1);a.parse(g+`
`)}),a.flush()}const Jk="stpp.ttml.im1t",iue=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,sue=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,upt={left:"start",center:"center",right:"end",start:"start",end:"end"};function JW(t,e,n,r){const i=He(new Uint8Array(t),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(a=>mi(a)),o=pft(e.baseTime,1,e.timescale);try{s.forEach(a=>n(dpt(a,o)))}catch(a){r(a)}}function dpt(t,e){const i=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},o=Object.keys(s).reduce((d,f)=>(d[f]=i.getAttribute(`ttp:${f}`)||s[f],d),{}),a=i.getAttribute("xml:space")!=="preserve",l=eG(eP(i,"styling","style")),c=eG(eP(i,"layout","region")),u=eP(i,"body","[begin]");return[].map.call(u,d=>{const f=oue(d,a);if(!f||!d.hasAttribute("begin"))return null;const h=nP(d.getAttribute("begin"),o),p=nP(d.getAttribute("dur"),o);let m=nP(d.getAttribute("end"),o);if(h===null)throw tG(d);if(m===null){if(p===null)throw tG(d);m=h+p}const g=new m5(h-e,m-e,f);g.id=g5(g.startTime,g.endTime,g.text);const y=c[d.getAttribute("region")],x=l[d.getAttribute("style")],S=fpt(y,x,l),{textAlign:w}=S;if(w){const E=upt[w];E&&(g.lineAlign=E),g.align=w}return vt(g,S),g}).filter(d=>d!==null)}function eP(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function eG(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function oue(t,e){return[].slice.call(t.childNodes).reduce((n,r,i)=>{var s;return r.nodeName==="br"&&i?n+`
`:(s=r.childNodes)!=null&&s.length?oue(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function fpt(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(i=n[o]),s.reduce((a,l)=>{const c=tP(e,r,l)||tP(t,r,l)||tP(i,r,l);return c&&(a[l]=c),a},{})}function tP(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function tG(t){return new Error(`Could not parse ttml timestamp ${t}`)}function nP(t,e){if(!t)return null;let n=tue(t);return n===null&&(iue.test(t)?n=hpt(t,e):sue.test(t)&&(n=ppt(t,e))),n}function hpt(t,e){const n=iue.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function ppt(t,e){const n=sue.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class H1{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class mpt{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=rG(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(F.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(F.FRAG_LOADING,this.onFragLoading,this),e.on(F.FRAG_LOADED,this.onFragLoaded,this),e.on(F.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(F.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(F.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(F.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(F.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(F.FRAG_LOADING,this.onFragLoading,this),e.off(F.FRAG_LOADED,this.onFragLoaded,this),e.off(F.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(F.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(F.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(F.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new H1(this,"textTrack1"),n=new H1(this,"textTrack2"),r=new H1(this,"textTrack3"),i=new H1(this,"textTrack4");this.cea608Parser1=new ZW(1,e,n),this.cea608Parser2=new ZW(3,r,i)}addCues(e,n,r,i,s){let o=!1;for(let a=s.length;a--;){const l=s[a],c=gpt(l[0],l[1],n,r);if(c>=0&&(l[0]=Math.min(l[0],n),l[1]=Math.max(l[1],r),o=!0,c/(r-n)>.5))return}if(o||s.push([n,r]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,n,r,i)}else{const a=this.Cues.newCue(null,n,r,i);this.hls.trigger(F.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:i,timescale:s,trackId:o}){const{unparsedVttFrags:a}=this;r===ge.MAIN&&(this.initPTS[n.cc]={baseTime:i,timescale:s,trackId:o}),a.length&&(this.unparsedVttFrags=[],a.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(F.FRAG_LOADED,l):this.hls.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,n){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const s=r.textTracks[i];if(nG(s,{name:e,lang:n,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:i}=this,{label:s,languageCode:o}=n[e],a=this.getExistingTrack(s,o);if(a)r[e]=a,Cf(r[e]),Qce(r[e],i);else{const l=this.createTextTrack("captions",s,o);l&&(l[e]=!0,r[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,i={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(F.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,n,r){const i=this.media;if(i)return i.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,n.mediaSource||this._cleanTracks()}onMediaDetaching(e,n){const r=!!n.transferMedia;if(this.media=null,r)return;const{captionsTracks:i}=this;Object.keys(i).forEach(s=>{Cf(i[s]),delete i[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=rG(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)Cf(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],i=r.some(s=>s.textCodec===Jk);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(Nce(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const o=this.media,a=o?ab(o.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(a){let d=null;for(let f=0;f<a.length;f++)if(a[f]&&nG(a[f],l)){d=a[f],a[f]=null;break}d&&(u=d)}if(u)Cf(u);else{const d=aue(l);u=this.createTextTrack(d,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),a!=null&&a.length){const l=a.filter(c=>c!==null).map(c=>c.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const o=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(F.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:o})}}}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const s=`textTrack${i[1]}`,o=this.captionsProperties[s];o&&(o.label=r.name,r.lang&&(o.languageCode=r.lang),o.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){if(this.enabled&&n.frag.type===ge.MAIN){var r,i;const{cea608Parser1:s,cea608Parser2:o,lastSn:a}=this,{cc:l,sn:c}=n.frag,u=(r=(i=n.part)==null?void 0:i.index)!=null?r:-1;s&&o&&(c!==a+1||c===a&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),o.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,n){const{frag:r,payload:i}=n;if(r.type===ge.SUBTITLE)if(i.byteLength){const s=r.decryptdata,o="stats"in n;if(s==null||!s.encrypted||o){const a=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),a&&a.textCodec===Jk?this._parseIMSC1(r,i):this._parseVTTs(n)}}else this.hls.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;JW(n,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{r.logger.log(`Failed to parse IMSC1: ${i}`),r.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var n;const{frag:r,payload:i}=e,{initPTS:s,unparsedVttFrags:o}=this,a=s.length-1;if(!s[r.cc]&&a===-1){o.push(e);return}const l=this.hls,c=(n=r.initSegment)!=null&&n.data?Qi(r.initSegment.data,new Uint8Array(i)).buffer:i;cpt(c,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,u=>{this._appendCues(u,r.level),l.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?o.push(e):this._fallbackToIMSC1(r,i),l.logger.log(`Failed to parse VTT cue: ${u}`),!(d&&a>r.cc)&&l.trigger(F.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:u})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||JW(n,this.initPTS[e.cc],()=>{r.textCodec=Jk,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[n];if(!i||i.mode==="disabled")return;e.forEach(s=>Xce(i,s))}else{const i=this.tracks[n];if(!i)return;const s=i.default?"default":"subtitles"+n;r.trigger(F.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===ge.SUBTITLE&&this.onFragLoaded(F.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:i}=n;if(!(r.type===ge.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let s=0;s<i.length;s++){const o=i[s].bytes;if(o){this.cea608Parser1||this.initCea608Parsers();const a=this.extractCea608Data(o);this.cea608Parser1.addData(i[s].pts,a[0]),this.cea608Parser2.addData(i[s].pts,a[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:i,type:s}){const{media:o}=this;if(!(!o||o.currentTime<r)){if(!s||s==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>VR(a[l],n,r))}if(this.config.renderTextTracksNatively&&n===0&&i!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>VR(a[l],n,i))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let i=2;for(let s=0;s<r;s++){const o=e[i++],a=127&e[i++],l=127&e[i++];if(a===0&&l===0)continue;if((4&o)!==0){const u=3&o;(u===0||u===1)&&(n[u].push(a),n[u].push(l))}}return n}}function aue(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function nG(t,e){return!!t&&t.kind===aue(e)&&FR(e,t)}function gpt(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function rG(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const vpt=/\s/,ypt={newCue(t,e,n,r){const i=[];let s,o,a,l,c;const u=self.VTTCue||self.TextTrackCue;for(let f=0;f<r.rows.length;f++)if(s=r.rows[f],a=!0,l=0,c="",!s.isEmpty()){var d;for(let m=0;m<s.chars.length;m++)vpt.test(s.chars[m].uchar)&&a?l++:(c+=s.chars[m].uchar,a=!1);s.cueStartTime=e,e===n&&(n+=1e-4),l>=16?l--:l++;const h=rue(c.trim()),p=g5(e,n,h);t!=null&&(d=t.cues)!=null&&d.getCueById(p)||(o=new u(e,n,h),o.id=p,o.line=f+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(o))}return t&&i.length&&(i.sort((f,h)=>f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line),i.forEach(f=>Xce(t,f))),i}};function xpt(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const bpt=/(\d+)-(\d+)\/(\d+)/;class iG{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||_pt,this.controller=new self.AbortController,this.stats=new q4}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=Spt(e,this.controller.signal),o=e.responseType==="arraybuffer",a=o?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:c}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),n.timeout=l&&he(l)?l:c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},n.timeout),(j0(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var f;this.response=this.loader=d;const h=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=c,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},c-(h-i.loading.start)),!d.ok){const{status:m,statusText:g}=d;throw new Tpt(g||"fetch, bad network response",m,d)}i.loading.first=h,i.total=Ept(d.headers)||i.total;const p=(f=this.callbacks)==null?void 0:f.onProgress;return p&&he(n.highWaterMark)?this.loadProgressively(d,i,e,n.highWaterMark,p):o?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var f,h;const p=this.response;if(!p)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const m=d[a];m&&(i.loaded=i.total=m);const g={url:p.url,data:d,code:p.status},y=(f=this.callbacks)==null?void 0:f.onProgress;y&&!he(n.highWaterMark)&&y(i,e,d,p),(h=this.callbacks)==null||h.onSuccess(g,i,e,p)}).catch(d=>{var f;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const h=d&&d.code||0,p=d?d.message:null;(f=this.callbacks)==null||f.onError({code:h,text:p},e,d?d.details:null,i)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,i=0,s){const o=new vce,a=e.body.getReader(),l=()=>a.read().then(c=>{if(c.done)return o.dataLength&&s(n,r,o.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return n.loaded+=d,d<i||o.dataLength?(o.push(u),o.dataLength>=i&&s(n,r,o.flush().buffer,e)):s(n,r,u.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function Spt(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(vt({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function wpt(t){const e=bpt.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Ept(t){const e=t.get("Content-Range");if(e){const r=wpt(e);if(he(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function _pt(t,e){return new self.Request(t.url,e)}class Tpt extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const Cpt=/^age:\s*[\d.]+\s*$/im;class lue{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new q4,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e||!n)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return s(r,n.url)}).catch(o=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",n.url,!0),s(r,n.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(o=>{var a;(a=this.callbacks)==null||a.onError({code:r.status,text:o.message},n,r,i)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const i=n.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:o}=r.loadPolicy;if(i)for(const a in i)e.setRequestHeader(a,i[a]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=s&&he(s)?s:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const i=n.readyState,s=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const c=n.status,u=n.responseType==="text"?n.responseText:null;if(c>=200&&c<300){const p=u??n.response;if(p!=null){var o,a;r.loading.end=Math.max(self.performance.now(),r.loading.first);const m=n.responseType==="arraybuffer"?p.byteLength:p.length;r.loaded=r.total=m,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const g=(o=this.callbacks)==null?void 0:o.onProgress;g&&g(r,e,p,n);const y={url:n.responseURL,data:p,code:c};(a=this.callbacks)==null||a.onSuccess(y,r,e,n);return}}const d=s.loadPolicy.errorRetry,f=r.retry,h={url:e.url,data:void 0,code:c};if(Uw(d,f,!1,h))this.retry(d);else{var l;dt.error(`${c} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:c,text:n.statusText},e,n,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(Uw(e,n,!0))this.retry(e);else{var r;dt.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=Z4(e,r.retry),r.retry++,dt.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Cpt.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const kpt={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},Ppt=ct(ct({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:lue,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:But,bufferController:Aft,capLevelController:f5,errorController:Wut,fpsController:Lht,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:oce,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:kpt},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},Ipt()),{},{subtitleStreamController:zht,subtitleTrackController:Dht,timelineController:mpt,audioStreamController:Cft,audioTrackController:kft,emeController:eh,cmcdController:kht,contentSteeringController:Iht,interstitialsController:Vht});function Ipt(){return{cueHandler:ypt,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Apt(t,e,n){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=HR(t),i=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(o=>{const a=`${o==="level"?"playlist":o}LoadPolicy`,l=e[a]===void 0,c=[];s.forEach(u=>{const d=`${o}Loading${u}`,f=e[d];if(f!==void 0&&l){c.push(d);const h=r[a].default;switch(e[a]={default:h},u){case"TimeOut":h.maxLoadTimeMs=f,h.maxTimeToFirstByteMs=f;break;case"MaxRetry":h.errorRetry.maxNumRetry=f,h.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":h.errorRetry.retryDelayMs=f,h.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=f,h.timeoutRetry.maxRetryDelayMs=f;break}}}),c.length&&n.warn(`hls.js config: "${c.join('", "')}" setting(s) are deprecated, use "${a}": ${xt(e[a])}`)}),ct(ct({},r),e)}function HR(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(HR):Object.keys(t).reduce((e,n)=>(e[n]=HR(t[n]),e),{}):t}function Lpt(t,e){const n=t.loader;n!==iG&&n!==lue?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):xpt()&&(t.loader=iG,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const lb=2,Rpt=.1,Opt=.05,Dpt=100;class Mpt extends tce{constructor(e,n){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(F.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=n,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,n){this.setInterval(Dpt),this.mediaSource=n.mediaSource;const r=this.media=n.media;Er(r,"playing",this.onMediaPlaying),Er(r,"waiting",this.onMediaWaiting),Er(r,"ended",this.onMediaEnded)}onMediaDetaching(e,n){this.clearInterval();const{media:r}=this;r&&(Vr(r,"playing",this.onMediaPlaying),Vr(r,"waiting",this.onMediaWaiting),Vr(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,n){this.buffered=n.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const n=this.media.currentTime;this.poll(n,this.lastCurrentTime),this.lastCurrentTime=n}poll(e,n){var r,i;const s=(r=this.hls)==null?void 0:r.config;if(!s)return;const o=this.media;if(!o)return;const{seeking:a}=o,l=this.seeking&&!a,c=!this.seeking&&a,u=o.paused&&!a||o.ended||o.playbackRate===0;if(this.seeking=a,e!==n){n&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!u&&e>n&&this.nudgeOnVideoHole(e,n)),this.waiting===0&&this.stallResolved(e);return}if(c||l){l&&this.stallResolved(e);return}if(u){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&o.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(F.MEDIA_ENDED,{stalled:!1}));return}if(!Re.getBuffered(o).length){this.nudgeRetry=0;return}const d=Re.bufferInfo(o,e,0),f=d.nextStart||0,h=this.fragmentTracker;if(a&&h&&this.hls){const T=sG(this.hls.inFlightFragments,e),_=d.len>lb,I=!f||T||f-e>lb&&!h.getPartialFragment(e);if(_||I)return;this.moved=!1}const p=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&h){if(!(d.len>0)&&!f)return;const _=Math.max(f,d.start||0)-e,A=!!(p!=null&&p.live)?p.targetduration*2:lb,L=W1(e,h);if(_>0&&(_<=A||L)){o.paused||this._trySkipBufferHole(L);return}}const m=s.detectStallWithCurrentTimeMs,g=self.performance.now(),y=this.waiting;let x=this.stalled;if(x===null)if(y>0&&g-y<m)x=this.stalled=y;else{this.stalled=g;return}const S=g-x;if(!a&&(S>=m||y)&&this.hls){var w;if(((w=this.mediaSource)==null?void 0:w.readyState)==="ended"&&!(p!=null&&p.live)&&Math.abs(e-((p==null?void 0:p.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(F.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}const E=Re.bufferInfo(o,e,s.maxBufferHole);this._tryFixBufferStall(E,S,e)}stallResolved(e){const n=this.stalled;if(n&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-n;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(F.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,n){var r;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&i&&i.length>1&&e>i.end(0)){const s=Re.bufferedInfo(Re.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&n>=s.start){const o=Re.timeRangesToArray(i),a=Re.bufferedInfo(o,n,0).bufferedIndex;if(a>-1&&a<o.length-1){const l=Re.bufferedInfo(o,e,0).bufferedIndex,c=o[a].end,u=o[a+1].start;if((l===-1||l>a)&&u-c<1&&e-c<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${c} -> ${u} buffered index: ${l}`);this.warn(d.message),this.media.currentTime+=1e-6;let f=W1(e,this.fragmentTracker);f&&"fragment"in f?f=f.fragment:f||(f=void 0);const h=Re.bufferInfo(this.media,e,0);this.hls.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:f,buffer:h.len,bufferInfo:h})}}}}}_tryFixBufferStall(e,n,r){var i,s;const{fragmentTracker:o,media:a}=this,l=(i=this.hls)==null?void 0:i.config;if(!a||!o||!l)return;const c=(s=this.hls)==null?void 0:s.latestLevelDetails,u=W1(r,o);if((u||c!=null&&c.live&&r<c.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;const d=e.buffered,f=this.adjacentTraversal(e,r);(d&&d.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-r<l.maxBufferHole||f))&&(n>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,n){const r=this.fragmentTracker,i=e.nextStart;if(r&&i){const s=r.getFragAtPos(n,ge.MAIN),o=r.getFragAtPos(i,ge.MAIN);if(s&&o)return o.sn-s.sn<2}return!1}_reportStall(e){const{hls:n,media:r,stallReported:i,stalled:s}=this;if(!i&&s!==null&&r&&n){this.stallReported=!0;const o=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${xt(e)})`);this.warn(o.message),n.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.BUFFER_STALLED_ERROR,fatal:!1,error:o,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var n;const{fragmentTracker:r,media:i}=this,s=(n=this.hls)==null?void 0:n.config;if(!i||!r||!s)return 0;const o=i.currentTime,a=Re.bufferInfo(i,o,0),l=o<a.start?a.start:a.nextStart;if(l&&this.hls){const u=a.len<=s.maxBufferHole,d=a.len>0&&a.len<1&&i.readyState<3,f=l-o;if(f>0&&(u||d)){if(f>s.maxBufferHole){let p=!1;if(o===0){const m=r.getAppendedFrag(0,ge.MAIN);m&&l<m.end&&(p=!0)}if(!p&&e){var c;if(!((c=this.hls.loadLevelObj)!=null&&c.details)||sG(this.hls.inFlightFragments,l))return 0;let g=!1,y=e.end;for(;y<l;){const x=W1(y,r);if(x)y+=x.duration;else{g=!0;break}}if(g)return 0}}const h=Math.max(l+Opt,o+Rpt);if(this.warn(`skipping hole, adjusting currentTime from ${o} to ${h}`),this.moved=!0,i.currentTime=h,!(e!=null&&e.gap)){const p=new Error(`fragment loaded with buffer holes, seeking from ${o} to ${h}`),m={type:Se.MEDIA_ERROR,details:Y.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,buffer:a.len,bufferInfo:a};e&&("fragment"in e?m.part=e:m.frag=e),this.hls.trigger(F.ERROR,m)}return h}}return 0}_tryNudgeBuffer(e){const{hls:n,media:r,nudgeRetry:i}=this,s=n==null?void 0:n.config;if(!r||!s)return 0;const o=r.currentTime;if(this.nudgeRetry++,i<s.nudgeMaxRetry){const a=o+(i+1)*s.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${o} to ${a}`);this.warn(l.message),r.currentTime=a,n.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const a=new Error(`Playhead still not moving while enough data buffered @${o} after ${s.nudgeMaxRetry} nudges`);this.error(a.message),n.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.BUFFER_STALLED_ERROR,error:a,fatal:!0,buffer:e.len,bufferInfo:e})}}}function sG(t,e){const n=oG(t.main);if(n&&n.start<=e)return n;const r=oG(t.audio);return r&&r.start<=e?r:null}function oG(t){if(!t)return null;switch(t.state){case ee.IDLE:case ee.STOPPED:case ee.ENDED:case ee.ERROR:return null}return t.frag}function W1(t,e){return e.getAppendedFrag(t,ge.MAIN)||e.getPartialFragment(t)}const $pt=.25;function WR(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function rP(t,e,n,r,i){let s=new t(e,n,"");try{s.value=r,i&&(s.type=i)}catch{s=new t(e,n,xt(i?ct({type:i},r):r))}return s}const G1=(()=>{const t=WR();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Npt{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(F.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(F.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(F.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(F.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(F.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,n){var r;this.media=n.media,((r=n.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const n=(e=this.hls)==null?void 0:e.latestLevelDetails;n&&this.updateDateRangeCues(n)}onMediaDetaching(e,n){this.media=null,!n.transferMedia&&(this.id3Track&&(this.removeCues&&Cf(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return Qce(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:r,enableID3MetadataCues:i}=this.hls.config;if(!r&&!i)return;const{samples:s}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=WR();if(o)for(let a=0;a<s.length;a++){const l=s[a].type;if(l===li.emsg&&!r||!i)continue;const c=_ce(s[a].data),u=s[a].pts;let d=u+s[a].duration;d>G1&&(d=G1),d-u<=0&&(d=u+$pt);for(let h=0;h<c.length;h++){const p=c[h];if(!Tce(p)){this.updateId3CueEnds(u,l);const m=rP(o,u,d,p,l);m&&this.id3Track.addCue(m)}}}}updateId3CueEnds(e,n){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let s=i.length;s--;){const o=i[s];o.type===n&&o.startTime<e&&o.endTime===G1&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:i}){const{id3Track:s,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(s&&(a||l)){let c;i==="audio"?c=u=>u.type===li.audioId3&&l:i==="video"?c=u=>u.type===li.emsg&&a:c=u=>u.type===li.audioId3&&l||u.type===li.emsg&&a,VR(s,n,r,c)}}onLevelUpdated(e,{details:n}){this.updateDateRangeCues(n,!0)}onLevelPtsUpdated(e,n){Math.abs(n.drift)>.01&&this.updateDateRangeCues(n.details)}updateDateRangeCues(e,n){if(!this.hls||!this.media)return;const{assetPlayerId:r,timelineOffset:i,enableDateRangeMetadataCues:s,interstitialsController:o}=this.hls.config;if(!s)return;const a=WR();if(r&&i&&!o){const{fragmentStart:m,fragmentEnd:g}=e;let y=this.assetCue;y?(y.startTime=m,y.endTime=g):a&&(y=this.assetCue=rP(a,m,g,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),y&&(y.id=r,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(y),y.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:c}=e,u=Object.keys(c);let d=this.dateRangeCuesAppended;if(l&&n){var f;if((f=l.cues)!=null&&f.length){const m=Object.keys(d).filter(g=>!u.includes(g));for(let g=m.length;g--;){var h;const y=m[g],x=(h=d[y])==null?void 0:h.cues;delete d[y],x&&Object.keys(x).forEach(S=>{const w=x[S];if(w){w.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(w)}catch{}}})}}else d=this.dateRangeCuesAppended={}}const p=e.fragments[e.fragments.length-1];if(!(u.length===0||!he(p==null?void 0:p.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let m=0;m<u.length;m++){const g=u[m],y=c[g],x=y.startTime,S=d[g],w=(S==null?void 0:S.cues)||{};let E=(S==null?void 0:S.durationKnown)||!1,T=G1;const{duration:_,endDate:I}=y;if(I&&_!==null)T=x+_,E=!0;else if(y.endOnNext&&!E){const L=u.reduce((j,D)=>{if(D!==y.id){const O=c[D];if(O.class===y.class&&O.startDate>y.startDate&&(!j||y.startDate<j.startDate))return O}return j},null);L&&(T=L.startTime,E=!0)}const A=Object.keys(y.attr);for(let L=0;L<A.length;L++){const j=A[L];if(!idt(j))continue;const D=w[j];if(D)E&&!(S!=null&&S.durationKnown)?D.endTime=T:Math.abs(D.startTime-x)>.01&&(D.startTime=x,D.endTime=T);else if(a){let O=y.attr[j];sdt(j)&&(O=Mle(O));const R=rP(a,x,T,{key:j,data:O},li.dateRange);R&&(R.id=g,this.id3Track.addCue(R),w[j]=R,o&&(j==="X-ASSET-LIST"||j==="X-ASSET-URL")&&R.addEventListener("enter",this.onEventCueEnter))}}d[g]={cues:w,dateRange:y,durationKnown:E}}}}}class Fpt{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:n}=this,r=this.levelDetails;if(!n||!r)return;this.currentTime=n.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:o}=this.config;if(!s||o===1||!r.live)return;const a=this.targetLatency;if(a===null)return;const l=i-a,c=Math.min(this.maxLatency,a+r.targetduration);if(l<c&&l>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,o)),f=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,h=Math.min(d,Math.max(1,f));this.changeMediaPlaybackRate(n,h)}else n.playbackRate!==1&&n.playbackRate!==0&&this.changeMediaPlaybackRate(n,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const n=this.levelDetails;return n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:n,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let c=a&&r||n;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:o*i);const u=i;return c+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency;if(e===null||n===null)return null;const r=this.levelDetails;if(r===null)return null;const i=r.edge,s=e-n-this.edgeStalled,o=i-r.totalduration,a=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(o,s),a)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e}=this,n=this.levelDetails;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(F.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(F.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(F.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(F.ERROR,this.onError,this))}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){n.advanced&&this.onTimeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,n){var r;n.details===Y.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,n){var r,i;e.playbackRate!==n&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${n}`),e.playbackRate=n)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class jpt extends d5{constructor(e,n){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this),e.on(F.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this),e.off(F.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=this.hls.config.preferManagedMediaSource,i=[],s={},o={};let a=!1,l=!1,c=!1;n.levels.forEach(u=>{const d=u.attrs;let{audioCodec:f,videoCodec:h}=u;f&&(u.audioCodec=f=Nw(f,r)||void 0),h&&(h=u.videoCodec=Sut(h));const{width:p,height:m,unknownCodecs:g}=u,y=(g==null?void 0:g.length)||0;if(a||(a=!!(p&&m)),l||(l=!!h),c||(c=!!f),y||f&&!this.isAudioSupported(f)||h&&!this.isVideoSupported(h)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}const{CODECS:x,"FRAME-RATE":S,"HDCP-LEVEL":w,"PATHWAY-ID":E,RESOLUTION:T,"VIDEO-RANGE":_}=d,A=`${`${E||"."}-`}${u.bitrate}-${T}-${S}-${x}-${_}-${w}`;if(s[A])if(s[A].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const L=o[A]+=1;u.attrs["PATHWAY-ID"]=new Array(L+1).join(".");const j=this.createLevel(u);s[A]=j,i.push(j)}else s[A].addGroupId("audio",d.AUDIO),s[A].addGroupId("text",d.SUBTITLES);else{const L=this.createLevel(u);s[A]=L,o[A]=1,i.push(L)}}),this.filterAndSortMediaOptions(i,n,a,l,c)}createLevel(e){const n=new $0(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(i.message),n.supportedResult=Kle(i,[])}return n}isAudioSupported(e){return D0(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return D0(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,n,r,i,s){var o;let a=[],l=[],c=e;const u=((o=n.stats)==null?void 0:o.parsing)||{};if((r||i)&&s&&(c=c.filter(({videoCodec:x,videoRange:S,width:w,height:E})=>(!!x||!!(w&&E))&&Lut(S))),c.length===0){Promise.resolve().then(()=>{if(this.hls){let x="no level with compatible codecs found in manifest",S=x;n.levels.length&&(S=`one or more CODECS in variant not supported: ${xt(n.levels.map(E=>E.attrs.CODECS).filter((E,T,_)=>_.indexOf(E)===T))}`,this.warn(S),x+=` (${S})`);const w=new Error(x);this.hls.trigger(F.ERROR,{type:Se.MEDIA_ERROR,details:Y.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:w,reason:S})}}),u.end=performance.now();return}n.audioTracks&&(a=n.audioTracks.filter(x=>!x.audioCodec||this.isAudioSupported(x.audioCodec)),aG(a)),n.subtitles&&(l=n.subtitles,aG(l));const d=c.slice(0);c.sort((x,S)=>{if(x.attrs["HDCP-LEVEL"]!==S.attrs["HDCP-LEVEL"])return(x.attrs["HDCP-LEVEL"]||"")>(S.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&x.height!==S.height)return x.height-S.height;if(x.frameRate!==S.frameRate)return x.frameRate-S.frameRate;if(x.videoRange!==S.videoRange)return Fw.indexOf(x.videoRange)-Fw.indexOf(S.videoRange);if(x.videoCodec!==S.videoCodec){const w=ZH(x.videoCodec),E=ZH(S.videoCodec);if(w!==E)return E-w}if(x.uri===S.uri&&x.codecSet!==S.codecSet){const w=$w(x.codecSet),E=$w(S.codecSet);if(w!==E)return E-w}return x.averageBitrate!==S.averageBitrate?x.averageBitrate-S.averageBitrate:0});let f=d[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==d.length)){for(let x=0;x<d.length;x++)if(d[x].pathwayId===c[0].pathwayId){f=d[x];break}}this._levels=c;for(let x=0;x<c.length;x++)if(c[x]===f){var h;this._firstLevel=x;const S=f.bitrate,w=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${S}`),((h=this.hls.userConfig)==null?void 0:h.abrEwmaDefaultEstimate)===void 0){const E=Math.min(S,this.hls.config.abrEwmaDefaultEstimateMax);E>w&&w===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=E)}break}const p=s&&!i,m=this.hls.config,g=!!(m.audioStreamController&&m.audioTrackController),y={levels:c,audioTracks:a,subtitleTracks:l,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:s,video:i,altAudio:g&&!p&&a.some(x=>!!x.url)};u.end=performance.now(),this.hls.trigger(F.MANIFEST_PARSED,y)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,o=n[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,r===e&&i&&s===a)return;this.log(`Switching to level ${e} (${o.height?o.height+"p ":""}${o.videoRange?o.videoRange+" ":""}${o.codecSet?o.codecSet+" ":""}@${o.bitrate})${a?" with Pathway "+a:""} from level ${r}${s?" with Pathway "+s:""}`);const l={level:e,attrs:o.attrs,details:o.details,bitrate:o.bitrate,averageBitrate:o.averageBitrate,maxBitrate:o.maxBitrate,realBitrate:o.realBitrate,width:o.width,height:o.height,codecSet:o.codecSet,audioCodec:o.audioCodec,videoCodec:o.videoCodec,audioGroups:o.audioGroups,subtitleGroups:o.subtitleGroups,loaded:o.loaded,loadError:o.loadError,fragmentError:o.fragmentError,name:o.name,id:o.id,uri:o.uri,url:o.url,urlId:0,audioGroupIds:o.audioGroupIds,textGroupIds:o.textGroupIds};this.hls.trigger(F.LEVEL_SWITCHING,l);const c=o.details;if(!c||c.live){const u=this.switchParams(o.uri,i==null?void 0:i.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const n=this.steering.pathways(),r=e.filter(i=>n.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${n}`);return}this.steering.pathwayPriority=r}}onError(e,n){n.fatal||!n.context||n.context.type===We.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(e,{frag:n}){if(n!==void 0&&n.type===ge.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(s=>!!r[s]))return;const i=this._levels[n.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,n){var r;const{level:i,details:s}=n,o=n.levelInfo;if(!o){var a;this.warn(`Invalid level index ${i}`),(a=n.deliveryDirectives)!=null&&a.skip&&(s.deltaUpdateFailed=!0);return}if(o===this.currentLevel||n.withoutMultiVariant){o.fragmentError===0&&(o.loadError=0);let l=o.details;l===n.details&&l.advanced&&(l=void 0),this.playlistLoaded(i,n,l)}else(r=n.deliveryDirectives)!=null&&r.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,n){super.loadingPlaylist(e,n);const r=this.getUrlWithDirectives(e.uri,n),i=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],o=e.details,a=o==null?void 0:o.age;this.log(`Loading level index ${i}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${s?" Pathway "+s:""}${a&&o.live?" age "+a.toFixed(1)+(o.type&&" "+o.type||""):""} ${r}`),this.hls.trigger(F.LEVEL_LOADING,{url:r,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:n||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var n;if(this._levels.length===1)return;const r=this._levels.filter((s,o)=>o!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(a=>a.level=-1)),!1));pce(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=r.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(F.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(F.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function aG(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}function cue(){return self.SourceBuffer||self.WebKitSourceBuffer}function uue(){if(!uc())return!1;const e=cue();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function Bpt(){if(!uue())return!1;const t=uc();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(M0(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(M0(e,"audio"))))}function Upt(){var t;const e=cue();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const Vpt=100;class zpt extends r5{constructor(e,n,r){super(e,n,r,"stream-controller",ge.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,s=i?i.currentTime:null;if(s===null||!he(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const o=this.getFwdBufferInfoAtPos(i,s,ge.MAIN,0);if(o===null||o.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${o?o.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(F.MANIFEST_PARSED,this.onManifestParsed,this),e.on(F.LEVEL_LOADING,this.onLevelLoading,this),e.on(F.LEVEL_LOADED,this.onLevelLoaded,this),e.on(F.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(F.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(F.BUFFER_CREATED,this.onBufferCreated,this),e.on(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(F.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(F.MANIFEST_PARSED,this.onManifestParsed,this),e.off(F.LEVEL_LOADED,this.onLevelLoaded,this),e.off(F.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(F.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(F.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(F.BUFFER_CREATED,this.onBufferCreated,this),e.off(F.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(F.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,n){if(this.levels){const{lastCurrentTime:r,hls:i}=this;if(this.stopLoad(),this.setInterval(Vpt),this.level=-1,!this.startFragRequested){let s=i.startLevel;s===-1&&(i.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=i.firstAutoLevel),i.nextLoadLevel=s,this.level=i.loadLevel,this._hasEnoughToStart=!!n}r>0&&e===-1&&!n&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=ee.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=n?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=ee.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ee.WAITING_LEVEL:{const{levels:e,level:n}=this,r=e==null?void 0:e[n],i=r==null?void 0:r.details;if(i&&(!i.live||this.levelLastLoaded===r&&!this.waitForLive(r))){if(this.waitForCdnTuneIn(i))break;this.state=ee.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ee.IDLE;break}break}case ee.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===ee.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:i}=this;if(n===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[s]))return;const o=r[s],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const m={};this.altAudio===2&&(m.type="video"),this.hls.trigger(F.BUFFER_EOS,m),this.state=ee.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=o.details;if(!c||this.state===ee.WAITING_LEVEL||this.waitForLive(o)){this.level=s,this.state=ee.WAITING_LEVEL,this.startFragRequested=!1;return}const u=a.len,d=this.getMaxBufferLength(o.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:a.end;let h=this.getNextFragment(f,c);if(this.couldBacktrack&&!this.fragPrevious&&h&&pn(h)&&this.fragmentTracker.getState(h)!==_n.OK){var p;const g=((p=this.backtrackFragment)!=null?p:h).sn-c.startSN,y=c.fragments[g-1];y&&h.cc===y.cc&&(h=y,this.fragmentTracker.removeFragment(y))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(h&&this.isLoopLoading(h,f)){if(!h.gap){const g=this.audioOnly&&!this.altAudio?yt.AUDIO:yt.VIDEO,y=(g===yt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,g,ge.MAIN)}h=this.getNextFragmentLoopLoading(h,c,a,ge.MAIN,d)}h&&(h.initSegment&&!h.initSegment.data&&!this.bitrateTest&&(h=h.initSegment),this.loadFragment(h,o,f))}loadFragment(e,n,r){const i=this.fragmentTracker.getState(e);i===_n.NOT_LOADED||i===_n.PARTIAL?pn(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):super.loadFragment(e,n,r):this._loadInitSegment(e,n):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ge.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const i=this.getAppendedFrag(n.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<s.targetduration*2)return}if(!n.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],c=this.fragLastKbps;c&&this.fragCurrent?r=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:r=0}else r=0;const o=this.getBufferedFrag(n.currentTime+r);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,c=a.duration,u=Math.max(o.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ee.KEY_LOADING:case ee.FRAG_LOADING:case ee.FRAG_LOADING_WAITING_RETRY:case ee.PARSING:case ee.PARSED:this.state=ee.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio===2?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;Er(r,"playing",this.onMediaPlaying),Er(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,n){const{media:r}=this;r&&(Vr(r,"playing",this.onMediaPlaying),Vr(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,n),!n.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(F.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,n){let r=!1,i=!1;for(let s=0;s<n.levels.length;s++){const o=n.levels[s].audioCodec;o&&(r=r||o.indexOf("mp4a.40.2")!==-1,i=i||o.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=r&&i&&!Upt(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==ee.IDLE)return;const i=n.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=ee.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:i,startFragRequested:s}=this,o=n.level,a=n.details,l=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${o}`);return}this.log(`Level ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${l}`);const c=n.levelInfo,u=this.fragCurrent;u&&(this.state===ee.FRAG_LOADING||this.state===ee.FRAG_LOADING_WAITING_RETRY)&&u.level!==n.level&&u.loader&&this.abortCurrentFrag();let d=0;if(a.live||(r=c.details)!=null&&r.live){var f;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;d=this.alignPlaylists(a,c.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(c.details=a,this.levelLastLoaded=c,s||this.setStartPosition(a,d),this.hls.trigger(F.LEVEL_UPDATED,{details:a,level:o}),this.state===ee.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=ee.IDLE}s&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,s=this.getLoadPosition(),o=e.fragmentStart,a=e.edge,l=s>=o-n.maxFragLookUpTolerance&&s<=a;if(i!==null&&r.duration>i&&(s<i||!l)){const u=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;if((!l&&r.readyState<4||s<a-u)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),r.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var c;const d=Re.bufferInfo(r,i,0);if(!((c=d.buffered)!=null&&c.length)){r.currentTime=i;return}if(d.start<=s){r.currentTime=i;return}const{nextStart:h}=Re.bufferedInfo(d.buffered,s,0);h&&(r.currentTime=h)}else r.currentTime=i}}_handleFragmentLoadProgress(e){var n;const r=e.frag,{part:i,payload:s}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const a=o[r.level];if(!a){this.warn(`Level ${r.level} not found on progress`);return}const l=a.details;if(!l){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const c=a.videoCodec,u=l.PTSKnown||!l.live,d=(n=r.initSegment)==null?void 0:n.data,f=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new $ce(this.hls,ge.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=i?i.index:-1,m=p!==-1,g=new e5(r.level,r.sn,r.stats.chunkCount,s.byteLength,p,m),y=this.initPTS[r.cc];h.push(s,d,f,c,r,i,l.totalduration,u,g,y)}onAudioTrackSwitching(e,n){const r=this.hls,i=this.altAudio===2;if(jw(n.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const o=this.fragCurrent;o&&(this.log("Switching to main audio track, cancel main fragment load"),o.abortRequests(),this.fragmentTracker.removeFragment(o)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.fragmentTracker.removeAllFragments(),r.once(F.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(F.AUDIO_TRACK_SWITCHED,n)}),r.trigger(F.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(F.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=jw(n.url,this.hls);if(r){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,n){const r=n.tracks;let i,s,o=!1;for(const a in r){const l=r[a];if(l.id==="main"){if(s=a,i=l,a==="video"){const c=r[a];c&&(this.videoBuffer=c.buffer)}}else o=!0}o&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:i}=n,s=r.type===ge.MAIN;if(s){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ee.PARSED&&(this.state=ee.IDLE);return}const a=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),pn(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}const o=this.media;o&&(!this._hasEnoughToStart&&Re.getBuffered(o).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,n){var r;if(n.fatal){this.state=ee.ERROR;return}switch(n.details){case Y.FRAG_GAP:case Y.FRAG_PARSING_ERROR:case Y.FRAG_DECRYPT_ERROR:case Y.FRAG_LOAD_ERROR:case Y.FRAG_LOAD_TIMEOUT:case Y.KEY_LOAD_ERROR:case Y.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ge.MAIN,n);break;case Y.LEVEL_LOAD_ERROR:case Y.LEVEL_LOAD_TIMEOUT:case Y.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===ee.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===We.LEVEL&&(this.state=ee.IDLE);break;case Y.BUFFER_ADD_CODEC_ERROR:case Y.BUFFER_APPEND_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.resetLoadingState();break;case Y.BUFFER_FULL_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case Y.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onFragLoadEmergencyAborted(){this.state=ee.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==yt.AUDIO||!this.altAudio){const r=(n===yt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,n,ge.MAIN),this.tick())}}onLevelsUpdated(e,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const i=this.timelineOffset;i&&r&&(r+=i);const s=this.getLevelDetails(),o=Re.getBuffered(e),a=o.length?o.start(0):0,l=a-r,c=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<c||this.loadingParts&&l<2*((s==null?void 0:s.partTarget)||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),r+=l,this.startPosition=r),n<r&&(this.log(`seek to target start position ${r} from current time ${n} buffer start ${a}`),e.currentTime=r)}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:i}=this,s=r==null?void 0:r.frag;if(!s||this.fragContextChanged(s))return;n.fragmentError=0,this.state=ee.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const o=s.stats;o.parsing.start=o.parsing.end=o.buffering.start=o.buffering.end=self.performance.now(),i.trigger(F.FRAG_LOADED,r),s.bitrateTest=!1}).catch(r=>{this.state===ee.STOPPED||this.state===ee.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const n=this.playlistType,{hls:r}=this,{remuxResult:i,chunkMeta:s}=e,o=this.getCurrentContext(s);if(!o){this.resetWhenMissingContext(s);return}const{frag:a,part:l,level:c}=o,{video:u,text:d,id3:f,initSegment:h}=i,{details:p}=c,m=this.altAudio?void 0:i.audio;if(this.fragContextChanged(a)){this.fragmentTracker.removeFragment(a);return}if(this.state=ee.PARSING,h){const g=h.tracks;if(g){const w=a.initSegment||a;if(this.unhandledEncryptionError(h,a))return;this._bufferInitSegment(c,g,w,s),r.trigger(F.FRAG_PARSING_INIT_SEGMENT,{frag:w,id:n,tracks:g})}const y=h.initPTS,x=h.timescale,S=this.initPTS[a.cc];if(he(y)&&(!S||S.baseTime!==y||S.timescale!==x)){const w=h.trackId;this.initPTS[a.cc]={baseTime:y,timescale:x,trackId:w},r.trigger(F.INIT_PTS_FOUND,{frag:a,id:n,initPTS:y,timescale:x,trackId:w})}}if(u&&p){m&&u.type==="audiovideo"&&this.logMuxedErr(a);const g=p.fragments[a.sn-1-p.startSN],y=a.sn===p.startSN,x=!g||a.cc>g.cc;if(i.independent!==!1){const{startPTS:S,endPTS:w,startDTS:E,endDTS:T}=u;if(l)l.elementaryStreams[u.type]={startPTS:S,endPTS:w,startDTS:E,endDTS:T};else if(u.firstKeyFrame&&u.independent&&s.id===1&&!x&&(this.couldBacktrack=!0),u.dropped&&u.independent){const _=this.getMainFwdBufferInfo(),I=(_?_.end:this.getLoadPosition())+this.config.maxBufferHole,A=u.firstKeyFramePTS?u.firstKeyFramePTS:S;if(!y&&I<A-this.config.maxBufferHole&&!x){this.backtrack(a);return}else x&&(a.gap=!0);a.setElementaryStreamInfo(u.type,a.start,w,a.start,T,!0)}else y&&S-(p.appliedTimelineOffset||0)>lb&&(a.gap=!0);a.setElementaryStreamInfo(u.type,S,w,E,T),this.backtrackFragment&&(this.backtrackFragment=a),this.bufferFragmentData(u,a,l,s,y||x)}else if(y||x)a.gap=!0;else{this.backtrack(a);return}}if(m){const{startPTS:g,endPTS:y,startDTS:x,endDTS:S}=m;l&&(l.elementaryStreams[yt.AUDIO]={startPTS:g,endPTS:y,startDTS:x,endDTS:S}),a.setElementaryStreamInfo(yt.AUDIO,g,y,x,S),this.bufferFragmentData(m,a,l,s)}if(p&&f!=null&&f.samples.length){const g={id:n,frag:a,details:p,samples:f.samples};r.trigger(F.FRAG_PARSING_METADATA,g)}if(p&&d){const g={id:n,frag:a,details:p,samples:d.samples};r.trigger(F.FRAG_PARSING_USERDATA,g)}}logMuxedErr(e){this.warn(`${pn(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,n,r,i){if(this.state!==ee.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&(delete n.audio,n.audiovideo&&this.logMuxedErr(r));const{audio:s,video:o,audiovideo:a}=n;if(s){const c=e.audioCodec;let u=tb(s.codec,c);u==="mp4a"&&(u="mp4a.40.5");const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){u&&(u.indexOf("mp4a.40.5")!==-1?u="mp4a.40.2":u="mp4a.40.5");const f=s.metadata;f&&"channelCount"in f&&(f.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(u="mp4a.40.5")}u&&u.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log(`Android: force audio codec to ${u}`)),c&&c!==u&&this.log(`Swapping manifest audio codec "${c}" for "${u}"`),s.levelCodec=u,s.id=ge.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${u||""}/${c||""}/${s.codec}]`),delete n.audiovideo}if(o){o.levelCodec=e.videoCodec,o.id=ge.MAIN;const c=o.codec;if((c==null?void 0:c.length)===4)switch(c){case"hvc1":case"hev1":o.codec="hvc1.1.6.L120.90";break;case"av01":o.codec="av01.0.04M.08";break;case"avc1":o.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${c}]${o.codec!==c?" parsed-corrected="+o.codec:""}${o.supplemental?" supplemental="+o.supplemental:""}`),delete n.audiovideo}a&&(this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),delete n.video,delete n.audio);const l=Object.keys(n);if(l.length){if(this.hls.trigger(F.BUFFER_CODECS,n),!this.hls)return;l.forEach(c=>{const d=n[c].initSegment;d!=null&&d.byteLength&&this.hls.trigger(F.BUFFER_APPENDING,{type:c,data:d,frag:r,part:null,chunkMeta:i,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,ge.MAIN)}get maxBufferLength(){const{levels:e,level:n}=this,r=e==null?void 0:e[n];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ee.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(Re.isBuffered(e,r)?n=this.getAppendedFrag(r):Re.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const i=this.fragPlaying,s=n.level;(!i||n.sn!==i.sn||i.level!==s)&&(this.fragPlaying=n,this.hls.trigger(F.FRAG_CHANGED,{frag:n}),(!i||i.level!==s)&&this.hls.trigger(F.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return he(n)?this.getAppendedFrag(n):null}get currentProgramDateTime(){var e;const n=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(he(n)){const r=this.getLevelDetails(),i=this.currentFrag||(r?Hu(null,r.fragments,n):null);if(i){const s=i.programDateTime;if(s!==null){const o=s+(n-i.start)*1e3;return new Date(o)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Hpt extends Zi{constructor(e,n){super("key-loader",n),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[r].loader;if(i){var n;if(e&&e!==((n=i.context)==null?void 0:n.frag.type))return;i.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const n=this.keyIdToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const n=this.keyIdToKeyInfo[e].loader;n&&n.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,n=Y.KEY_LOAD_ERROR,r,i,s){return new Go({type:Se.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:s,error:r,networkDetails:i})}loadClear(e,n,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(n.length)for(let i=0,s=n.length;i<s;i++){const o=n[i];if(e.cc<=o.cc&&(!pn(e)||!pn(o)||e.sn<o.sn)||!r&&i==s-1)return this.emeController.selectKeySystemFormat(o).then(a=>{if(!this.emeController)return;o.setKeyFormat(a);const l=rb(a);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const i=Rm(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,i;n&&e.setKeyFormat(n);const s=e.decryptdata;if(!s){const c=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,Y.KEY_LOAD_ERROR,c))}const o=s.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,Y.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));const a=iP(s);let l=this.keyIdToKeyInfo[a];if((r=l)!=null&&r.decryptdata.key)return s.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(this.emeController&&(i=l)!=null&&i.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(u=>{const{keyInfo:d}=u;return s.key=d.decryptdata.key,{frag:e,keyInfo:d}})}switch(this.log(`${this.keyIdToKeyInfo[a]?"Rel":"L"}oading${s.keyId?" keyId: "+br(s.keyId):""} URI: ${s.uri} from ${e.type} ${e.level}`),l=this.keyIdToKeyInfo[a]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,Y.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i;if(!e.decryptdata.keyId&&(i=n.initSegment)!=null&&i.data){const o=cut(n.initSegment.data);if(o.length){const a=o[0];a.some(l=>l!==0)&&(this.log(`Using keyId found in init segment ${br(a)}`),e.decryptdata.keyId=a,vu.setKeyIdForUri(e.decryptdata.uri,a))}}const s=this.emeController.loadKey(r);return(e.keyLoadPromise=s.then(o=>(e.mediaKeySessionContext=o,r))).catch(o=>{throw e.keyLoadPromise=null,"data"in o&&(o.data.frag=n),o})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,i=r.loader,s=new i(r);return n.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},c=r.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,m)=>{const{frag:g,keyInfo:y}=p,x=iP(y.decryptdata);if(!g.decryptdata||y!==this.keyIdToKeyInfo[x])return a(this.createKeyLoadError(g,Y.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),m));y.decryptdata.key=g.decryptdata.key=new Uint8Array(f.data),g.keyLoader=null,y.loader=null,o({frag:g,keyInfo:y})},onError:(f,h,p,m)=>{this.resetLoader(h),a(this.createKeyLoadError(n,Y.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,ct({url:l.url,data:void 0},f)))},onTimeout:(f,h,p)=>{this.resetLoader(h),a(this.createKeyLoadError(n,Y.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,h,p)=>{this.resetLoader(h),a(this.createKeyLoadError(n,Y.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};s.load(l,u,d)})}resetLoader(e){const{frag:n,keyInfo:r,url:i}=e,s=r.loader;n.keyLoader===s&&(n.keyLoader=null,r.loader=null);const o=iP(r.decryptdata)||i;delete this.keyIdToKeyInfo[o],s&&s.destroy()}}function iP(t){if(t.keyFormat!==Hn.FAIRPLAY){const e=t.keyId;if(e)return br(e)}return t.uri}function lG(t){const{type:e}=t;switch(e){case We.AUDIO_TRACK:return ge.AUDIO;case We.SUBTITLE_TRACK:return ge.SUBTITLE;default:return ge.MAIN}}function sP(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class Wpt{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(F.MANIFEST_LOADING,this.onManifestLoading,this),e.on(F.LEVEL_LOADING,this.onLevelLoading,this),e.on(F.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(F.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(F.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(F.MANIFEST_LOADING,this.onManifestLoading,this),e.off(F.LEVEL_LOADING,this.onLevelLoading,this),e.off(F.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(F.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(F.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,i=n.loader,s=r||i,o=new s(n);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:We.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,n){const{id:r,level:i,pathwayId:s,url:o,deliveryDirectives:a,levelInfo:l}=n;this.load({id:r,level:i,pathwayId:s,responseType:"text",type:We.LEVEL,url:o,deliveryDirectives:a,levelOrTrack:l})}onAudioTrackLoading(e,n){const{id:r,groupId:i,url:s,deliveryDirectives:o,track:a}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:We.AUDIO_TRACK,url:s,deliveryDirectives:o,levelOrTrack:a})}onSubtitleTrackLoading(e,n){const{id:r,groupId:i,url:s,deliveryDirectives:o,track:a}=n;this.load({id:r,groupId:i,level:null,responseType:"text",type:We.SUBTITLE_TRACK,url:s,deliveryDirectives:o,levelOrTrack:a})}onLevelsUpdated(e,n){const r=this.loaders[We.LEVEL];if(r){const i=r.context;i&&!n.levels.some(s=>s===i.levelOrTrack)&&(r.abort(),delete this.loaders[We.LEVEL])}}load(e){var n;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const c=this.hls.logger,u=i.context;if(u&&u.levelOrTrack===e.levelOrTrack&&(u.url===e.url||u.deliveryDirectives&&!e.deliveryDirectives)){u.url===e.url?c.log(`[playlist-loader]: ignore ${e.url} ongoing request`):c.log(`[playlist-loader]: ignore ${e.url} in favor of ${u.url}`);return}c.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===We.MANIFEST?s=r.manifestLoadPolicy.default:s=vt({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),he((n=e.deliveryDirectives)==null?void 0:n.part)){let c;if(e.type===We.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===We.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===We.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const f=Math.max(u*3,d*.8)*1e3;s=vt({},s,{maxTimeToFirstByteMs:Math.min(f,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,s.maxTimeToFirstByteMs)})}}}const o=s.errorRetry||s.timeoutRetry||{},a={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,u,d,f)=>{const h=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=c.data;u.parsing.start=performance.now(),po.isMediaPlaylist(p)||d.type!==We.MANIFEST?this.handleTrackOrLevelPlaylist(c,u,d,f||null,h):this.handleMasterPlaylist(c,u,d,f)},onError:(c,u,d,f)=>{this.handleNetworkError(u,d,!1,c,f)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};i.load(e,a,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:n},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${n}`),this.hls.startLoad(n))}handleMasterPlaylist(e,n,r,i){const s=this.hls,o=e.data,a=sP(e,r),l=po.parseMasterPlaylist(o,a);if(l.playlistParsingError){n.parsing.end=performance.now(),this.handleManifestParsingError(e,r,l.playlistParsingError,i,n);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p}=l;this.variableList=p,u.forEach(x=>{const{unknownCodecs:S}=x;if(S){const{preferManagedMediaSource:w}=this.hls.config;let{audioCodec:E,videoCodec:T}=x;for(let _=S.length;_--;){const I=S[_];D0(I,"audio",w)?(x.audioCodec=E=E?`${E},${I}`:I,Fh.audio[E.substring(0,4)]=2,S.splice(_,1)):D0(I,"video",w)&&(x.videoCodec=T=T?`${T},${I}`:I,Fh.video[T.substring(0,4)]=2,S.splice(_,1))}}});const{AUDIO:m=[],SUBTITLES:g,"CLOSED-CAPTIONS":y}=po.parseMasterPlaylistMedia(o,a,l);m.length&&!m.some(S=>!S.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Vt({}),bitrate:0,url:""})),s.trigger(F.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:g,captions:y,contentSteering:c,url:a,stats:n,networkDetails:i,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,n,r,i,s){const o=this.hls,{id:a,level:l,type:c}=r,u=sP(e,r),d=he(l)?l:he(a)?a:0,f=lG(r),h=po.parseLevelPlaylist(e.data,u,d,f,0,this.variableList);if(c===We.MANIFEST){const p={attrs:new Vt({}),bitrate:0,details:h,name:"",url:u};h.requestScheduled=n.loading.start+dce(h,0),o.trigger(F.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:u,stats:n,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=h,this.handlePlaylistLoaded(h,e,n,r,i,s)}handleManifestParsingError(e,n,r,i,s){this.hls.trigger(F.ERROR,{type:Se.NETWORK_ERROR,details:Y.MANIFEST_PARSING_ERROR,fatal:n.type===We.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:i,stats:s})}handleNetworkError(e,n,r=!1,i,s){let o=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===We.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===We.AUDIO_TRACK||e.type===We.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);this.hls.logger.warn(`[playlist-loader]: ${o}`);let l=Y.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case We.MANIFEST:l=r?Y.MANIFEST_LOAD_TIMEOUT:Y.MANIFEST_LOAD_ERROR,c=!0;break;case We.LEVEL:l=r?Y.LEVEL_LOAD_TIMEOUT:Y.LEVEL_LOAD_ERROR,c=!1;break;case We.AUDIO_TRACK:l=r?Y.AUDIO_TRACK_LOAD_TIMEOUT:Y.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case We.SUBTITLE_TRACK:l=r?Y.SUBTITLE_TRACK_LOAD_TIMEOUT:Y.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:Se.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:a,networkDetails:n,stats:s};if(i){const f=(n==null?void 0:n.url)||e.url;d.response=ct({url:f,data:void 0},i)}this.hls.trigger(F.ERROR,d)}handlePlaylistLoaded(e,n,r,i,s,o){const a=this.hls,{type:l,level:c,levelOrTrack:u,id:d,groupId:f,deliveryDirectives:h}=i,p=sP(n,i),m=lG(i);let g=typeof i.level=="number"&&m===ge.MAIN?c:void 0;const y=e.playlistParsingError;if(y){if(this.hls.logger.warn(`${y} ${e.url}`),!a.config.ignorePlaylistParsingErrors){a.trigger(F.ERROR,{type:Se.NETWORK_ERROR,details:Y.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:y,reason:y.message,response:n,context:i,level:g,parent:m,networkDetails:s,stats:r});return}e.playlistParsingError=null}if(!e.fragments.length){const x=e.playlistParsingError=new Error("No Segments found in Playlist");a.trigger(F.ERROR,{type:Se.NETWORK_ERROR,details:Y.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:x,reason:x.message,response:n,context:i,level:g,parent:m,networkDetails:s,stats:r});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case We.MANIFEST:case We.LEVEL:if(g){if(!u)g=0;else if(u!==a.levels[g]){const x=a.levels.indexOf(u);x>-1&&(g=x)}}a.trigger(F.LEVEL_LOADED,{details:e,levelInfo:u||a.levels[0],level:g||0,id:d||0,stats:r,networkDetails:s,deliveryDirectives:h,withoutMultiVariant:l===We.MANIFEST});break;case We.AUDIO_TRACK:a.trigger(F.AUDIO_TRACK_LOADED,{details:e,track:u,id:d||0,groupId:f||"",stats:r,networkDetails:s,deliveryDirectives:h});break;case We.SUBTITLE_TRACK:a.trigger(F.SUBTITLE_TRACK_LOADED,{details:e,track:u,id:d||0,groupId:f||"",stats:r,networkDetails:s,deliveryDirectives:h});break}}}class Zn{static get version(){return N0}static isMSESupported(){return uue()}static isSupported(){return Bpt()}static getMediaSource(){return uc()}static get Events(){return F}static get MetadataSchema(){return li}static get ErrorTypes(){return Se}static get ErrorDetails(){return Y}static get DefaultConfig(){return Zn.defaultConfig?Zn.defaultConfig:Ppt}static set DefaultConfig(e){Zn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new i5,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const n=this.logger=Xct(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=Apt(Zn.DefaultConfig,e,n);this.userConfig=e,r.progressive&&Lpt(r,n);const{abrController:i,bufferController:s,capLevelController:o,errorController:a,fpsController:l}=r,c=new a(this),u=this.abrController=new i(this),d=new Gut(this),f=r.interstitialsController,h=f?this.interstitialsController=new f(this,Zn):null,p=this.bufferController=new s(this,d),m=this.capLevelController=new o(this),g=new l(this),y=new Wpt(this),x=r.contentSteeringController,S=x?new x(this):null,w=this.levelController=new jpt(this,S),E=new Npt(this),T=new Hpt(this.config,this.logger),_=this.streamController=new zpt(this,d,T),I=this.gapController=new Mpt(this,d);m.setStreamController(_),g.setStreamController(_);const A=[y,w,_];h&&A.splice(1,0,h),S&&A.splice(1,0,S),this.networkControllers=A;const L=[u,p,I,m,g,E,d];this.audioTrackController=this.createController(r.audioTrackController,A);const j=r.audioStreamController;j&&A.push(this.audioStreamController=new j(this,d,T)),this.subtitleTrackController=this.createController(r.subtitleTrackController,A);const D=r.subtitleStreamController;D&&A.push(this.subtititleStreamController=new D(this,d,T)),this.createController(r.timelineController,L),T.emeController=this.emeController=this.createController(r.emeController,L),this.cmcdController=this.createController(r.cmcdController,L),this.latencyController=this.createController(Fpt,L),this.coreComponents=L,A.push(c);const O=c.onErrorOut;typeof O=="function"&&this.on(F.ERROR,O,c),this.on(F.MANIFEST_LOADED,y.onManifestLoaded,y)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,i){this._emitter.off(e,n,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===F.ERROR;this.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(F.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(F.ERROR,{type:Se.OTHER_ERROR,details:Y.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const n="media"in e,r=n?e.media:e,i=n?e:{media:r};this._media=r,this.trigger(F.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(F.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(F.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const n=this.media,r=this._url,i=this._url=K4.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),n&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(F.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,n){this.logger.log(`startLoad(${e+(n?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,n),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[ge.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[ge.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[ge.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,n=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),n&&this.startLoad(n))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=Mht()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Aut(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=n)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let i;if(n===-1&&e!=null&&e.length?i=e.length-1:i=n,r)for(let s=i;s--;){const o=e[s].attrs["HDCP-LEVEL"];if(o&&o<=r)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var n;return((n=this.audioTrackController)==null?void 0:n.setAudioOption(e))||null}setSubtitleOption(e){var n;return((n=this.subtitleTrackController)==null?void 0:n.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,n=this.allAudioTracks){const r=Qle(n);return qle(e,r,navigator.mediaCapabilities)}}Zn.defaultConfig=void 0;var oP="data-hls-initialized",Gpt=function(){return cd()?Zn.isSupported():!0},Kpt=function(e,n,r,i){if(n.getAttribute(oP)==="true")return{destroy:function(){}};n.setAttribute(oP,"true");var s=new Zn(to(to({backBufferLength:60*1.5},i),i!=null&&i.liveSyncDurationCount?{liveSyncDurationCount:i.liveSyncDurationCount}:{liveMaxLatencyDurationCount:7,liveSyncDurationCount:3})),o=function(){var u,d;s==null||(u=s.destroy)===null||u===void 0||u.call(s),n==null||(d=n.removeAttribute)===null||d===void 0||d.call(n,oP)};n&&s.attachMedia(n),s.on(Zn.Events.LEVEL_LOADED,function(){var c=Lt(Ie().mark(function u(d,f){var h,p,m,g,y;return Ie().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:m=f.details,g=m.live,y=m.totalduration,r==null||(h=r.onLive)===null||h===void 0||h.call(r,!!g),r==null||(p=r.onDuration)===null||p===void 0||p.call(r,y??0);case 3:case"end":return S.stop()}},u)}));return function(u,d){return c.apply(this,arguments)}}()),s.on(Zn.Events.MEDIA_ATTACHED,Lt(Ie().mark(function c(){return Ie().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:s.loadSource(e),s.on(Zn.Events.MANIFEST_PARSED,function(f,h){var p;r==null||(p=r.onCanPlay)===null||p===void 0||p.call(r)});case 2:case"end":return d.stop()}},c)}))),s.on(Zn.Events.ERROR,function(){var c=Lt(Ie().mark(function u(d,f){var h,p,m,g;return Ie().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(p=f.details,m=f.fatal,g=Zn.ErrorTypes.NETWORK_ERROR&&p==="manifestParsingError",!(!m&&!g)){x.next=4;break}return x.abrupt("return");case 4:if(r==null||(h=r.onError)===null||h===void 0||h.call(r,f),!m){x.next=17;break}console.error("Fatal error : ".concat(f.details)),x.t0=f.type,x.next=x.t0===Zn.ErrorTypes.MEDIA_ERROR?10:x.t0===Zn.ErrorTypes.NETWORK_ERROR?12:14;break;case 10:return s.recoverMediaError(),x.abrupt("break",17);case 12:return console.error("A network error occurred: ".concat(f.details)),x.abrupt("break",17);case 14:return console.error("An unrecoverable error occurred: ".concat(f.details)),s.destroy(),x.abrupt("break",17);case 17:case"end":return x.stop()}},u)}));return function(u,d){return c.apply(this,arguments)}}());function a(){var c=Date.now(),u=s.playingDate;if(u&&c){var d;r==null||(d=r.onPlaybackOffsetUpdated)===null||d===void 0||d.call(r,c-u.getTime())}}var l=setInterval(a,2e3);return{destroy:function(){var u;o==null||o(),(u=clearInterval)===null||u===void 0||u(l)}}};function et(){et=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(D,O,$){D[O]=$.value},i=typeof Symbol=="function"?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function l(D,O,$){return Object.defineProperty(D,O,{value:$,enumerable:!0,configurable:!0,writable:!0}),D[O]}try{l({},"")}catch{l=function(O,$,R){return O[$]=R}}function c(D,O,$,R){var C=O&&O.prototype instanceof f?O:f,P=Object.create(C.prototype),k=new A(R||[]);return r(P,"_invoke",{value:E(D,$,k)}),P}function u(D,O,$){try{return{type:"normal",arg:D.call(O,$)}}catch(R){return{type:"throw",arg:R}}}t.wrap=c;var d={};function f(){}function h(){}function p(){}var m={};l(m,s,function(){return this});var g=Object.getPrototypeOf,y=g&&g(g(L([])));y&&y!==e&&n.call(y,s)&&(m=y);var x=p.prototype=f.prototype=Object.create(m);function S(D){["next","throw","return"].forEach(function(O){l(D,O,function($){return this._invoke(O,$)})})}function w(D,O){function $(C,P,k,M){var B=u(D[C],D,P);if(B.type!=="throw"){var N=B.arg,V=N.value;return V&&typeof V=="object"&&n.call(V,"__await")?O.resolve(V.__await).then(function(H){$("next",H,k,M)},function(H){$("throw",H,k,M)}):O.resolve(V).then(function(H){N.value=H,k(N)},function(H){return $("throw",H,k,M)})}M(B.arg)}var R;r(this,"_invoke",{value:function(C,P){function k(){return new O(function(M,B){$(C,P,M,B)})}return R=R?R.then(k,k):k()}})}function E(D,O,$){var R="suspendedStart";return function(C,P){if(R==="executing")throw new Error("Generator is already running");if(R==="completed"){if(C==="throw")throw P;return j()}for($.method=C,$.arg=P;;){var k=$.delegate;if(k){var M=T(k,$);if(M){if(M===d)continue;return M}}if($.method==="next")$.sent=$._sent=$.arg;else if($.method==="throw"){if(R==="suspendedStart")throw R="completed",$.arg;$.dispatchException($.arg)}else $.method==="return"&&$.abrupt("return",$.arg);R="executing";var B=u(D,O,$);if(B.type==="normal"){if(R=$.done?"completed":"suspendedYield",B.arg===d)continue;return{value:B.arg,done:$.done}}B.type==="throw"&&(R="completed",$.method="throw",$.arg=B.arg)}}}function T(D,O){var $=O.method,R=D.iterator[$];if(R===void 0)return O.delegate=null,$==="throw"&&D.iterator.return&&(O.method="return",O.arg=void 0,T(D,O),O.method==="throw")||$!=="return"&&(O.method="throw",O.arg=new TypeError("The iterator does not provide a '"+$+"' method")),d;var C=u(R,D.iterator,O.arg);if(C.type==="throw")return O.method="throw",O.arg=C.arg,O.delegate=null,d;var P=C.arg;return P?P.done?(O[D.resultName]=P.value,O.next=D.nextLoc,O.method!=="return"&&(O.method="next",O.arg=void 0),O.delegate=null,d):P:(O.method="throw",O.arg=new TypeError("iterator result is not an object"),O.delegate=null,d)}function _(D){var O={tryLoc:D[0]};1 in D&&(O.catchLoc=D[1]),2 in D&&(O.finallyLoc=D[2],O.afterLoc=D[3]),this.tryEntries.push(O)}function I(D){var O=D.completion||{};O.type="normal",delete O.arg,D.completion=O}function A(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(_,this),this.reset(!0)}function L(D){if(D){var O=D[s];if(O)return O.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var $=-1,R=function C(){for(;++$<D.length;)if(n.call(D,$))return C.value=D[$],C.done=!1,C;return C.value=void 0,C.done=!0,C};return R.next=R}}return{next:j}}function j(){return{value:void 0,done:!0}}return h.prototype=p,r(x,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(D){var O=typeof D=="function"&&D.constructor;return!!O&&(O===h||(O.displayName||O.name)==="GeneratorFunction")},t.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,p):(D.__proto__=p,l(D,a,"GeneratorFunction")),D.prototype=Object.create(x),D},t.awrap=function(D){return{__await:D}},S(w.prototype),l(w.prototype,o,function(){return this}),t.AsyncIterator=w,t.async=function(D,O,$,R,C){C===void 0&&(C=Promise);var P=new w(c(D,O,$,R),C);return t.isGeneratorFunction(O)?P:P.next().then(function(k){return k.done?k.value:P.next()})},S(x),l(x,a,"Generator"),l(x,s,function(){return this}),l(x,"toString",function(){return"[object Generator]"}),t.keys=function(D){var O=Object(D),$=[];for(var R in O)$.push(R);return $.reverse(),function C(){for(;$.length;){var P=$.pop();if(P in O)return C.value=P,C.done=!1,C}return C.done=!0,C}},t.values=L,A.prototype={constructor:A,reset:function(D){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!D)for(var O in this)O.charAt(0)==="t"&&n.call(this,O)&&!isNaN(+O.slice(1))&&(this[O]=void 0)},stop:function(){this.done=!0;var D=this.tryEntries[0].completion;if(D.type==="throw")throw D.arg;return this.rval},dispatchException:function(D){if(this.done)throw D;var O=this;function $(B,N){return P.type="throw",P.arg=D,O.next=B,N&&(O.method="next",O.arg=void 0),!!N}for(var R=this.tryEntries.length-1;R>=0;--R){var C=this.tryEntries[R],P=C.completion;if(C.tryLoc==="root")return $("end");if(C.tryLoc<=this.prev){var k=n.call(C,"catchLoc"),M=n.call(C,"finallyLoc");if(k&&M){if(this.prev<C.catchLoc)return $(C.catchLoc,!0);if(this.prev<C.finallyLoc)return $(C.finallyLoc)}else if(k){if(this.prev<C.catchLoc)return $(C.catchLoc,!0)}else{if(!M)throw new Error("try statement without catch or finally");if(this.prev<C.finallyLoc)return $(C.finallyLoc)}}}},abrupt:function(D,O){for(var $=this.tryEntries.length-1;$>=0;--$){var R=this.tryEntries[$];if(R.tryLoc<=this.prev&&n.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var C=R;break}}C&&(D==="break"||D==="continue")&&C.tryLoc<=O&&O<=C.finallyLoc&&(C=null);var P=C?C.completion:{};return P.type=D,P.arg=O,C?(this.method="next",this.next=C.finallyLoc,d):this.complete(P)},complete:function(D,O){if(D.type==="throw")throw D.arg;return D.type==="break"||D.type==="continue"?this.next=D.arg:D.type==="return"?(this.rval=this.arg=D.arg,this.method="return",this.next="end"):D.type==="normal"&&O&&(this.next=O),d},finish:function(D){for(var O=this.tryEntries.length-1;O>=0;--O){var $=this.tryEntries[O];if($.finallyLoc===D)return this.complete($.completion,$.afterLoc),I($),d}},catch:function(D){for(var O=this.tryEntries.length-1;O>=0;--O){var $=this.tryEntries[O];if($.tryLoc===D){var R=$.completion;if(R.type==="throw"){var C=R.arg;I($)}return C}}throw new Error("illegal catch attempt")},delegateYield:function(D,O,$){return this.delegate={iterator:L(D),resultName:O,nextLoc:$},this.method==="next"&&(this.arg=void 0),d}},t}function cG(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){n(c);return}a.done?e(l):Promise.resolve(l).then(r,i)}function er(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){cG(s,r,i,o,a,"next",l)}function a(l){cG(s,r,i,o,a,"throw",l)}o(void 0)})}}function qpt(t){if(Array.isArray(t))return t}function Ypt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function uG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qpt(t,e){if(t){if(typeof t=="string")return uG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uG(t,e)}}function Xpt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _r(t,e){return qpt(t)||Ypt(t,e)||Qpt(t,e)||Xpt()}var Zpt=function(e){var n=e._element,r=e.setLive,i=e.fullscreen,s=e.togglePlay,o=e._updateMediaStream,a=e.deviceIds;return{_element:n,setLive:r,fullscreen:i,togglePlay:s,_updateMediaStream:o,deviceIds:a}},Jpt=v.forwardRef(function(t,e){var n=t.ingestUrl,r=t.title,i=t.aspectRatio,s=t.objectFit,o=t.webrtcConfig,a=t.onBroadcastError,l=t.onPlaybackStatusUpdate,c=t.playbackStatusSelector,u=v.useContext(q_),d=v.useCallback(function(I){var A;return(A=c==null?void 0:c(I))!==null&&A!==void 0?A:I},[c]);v.useEffect(function(){return u.subscribe(d,function(I,A){return l==null?void 0:l(cw(I),cw(A))})},[l,d,u]);var f=Zt(Zpt),h=f._element,p=f.setLive,m=f.fullscreen,g=f.togglePlay,y=f._updateMediaStream,x=v.useState(null),S=_r(x,2),w=S[0],E=S[1],T=v.useCallback(function(){var I=er(et().mark(function A(L){var j,D,O,$,R,C,P,k;return et().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:y(L.stream,{audio:L==null||(j=L.audioTransceiver)===null||j===void 0||(D=j.sender)===null||D===void 0||(O=D.track)===null||O===void 0||($=O.getSettings())===null||$===void 0?void 0:$.deviceId,video:L==null||(R=L.videoTransceiver)===null||R===void 0||(C=R.sender)===null||C===void 0||(P=C.track)===null||P===void 0||(k=P.getSettings())===null||k===void 0?void 0:k.deviceId}),E({audio:L.audioTransceiver,video:L.videoTransceiver}),a==null||a(null),g==null||g(!0),p(!0);case 5:case"end":return B.stop()}},A)}));return function(A){return I.apply(this,arguments)}}(),[p,a,g,y]),_=v.useCallback(function(I){var A,L,j,D=new Error((A=I==null||(L=I.message)===null||L===void 0||(j=L.toString)===null||j===void 0?void 0:j.call(L))!==null&&A!==void 0?A:"Error with WebRTC");a==null||a(D)},[a]);return v.useEffect(function(){if(h&&n){var I=Nst(n,h,i??"16to9",{onConnected:T,onError:_},o),A=I.destroy;return function(){A==null||A()}}},[o,i,h,T,n,a,_]),v.useEffect(function(){return u.subscribe(function(I,A){var L,j;((L=I._mediaStream)===null||L===void 0?void 0:L.id)!==((j=A._mediaStream)===null||j===void 0?void 0:j.id)&&I._element&&w&&I._mediaStream&&Fst({newMediaStream:I._mediaStream,prevMediaStream:A._mediaStream,aspectRatio:i??"16to9",element:I._element,videoTransceiver:w.video,audioTransceiver:w.audio,onConnected:T}).catch(function(D){return _(D)})})},[u,w,i,T,_]),b.jsx("video",{className:me.media.video({size:m?"fullscreen":s}),"aria-label":r??"Video player",role:"video",width:"100%",height:"100%",ref:e,"webkit-playsinline":"true",playsInline:!0,muted:!0})}),due=function(e){var n=e.value,r=e.onChange,i=e.type,s=e.portalContainer,o=e.mediaDevices,a=v.useMemo(function(){if(n&&o.every(function(d){return n!==d.deviceId})){var l,c=n.split(":",2),u=c.length>1?"".concat((l=c[0])===null||l===void 0?void 0:l.slice(0,10),"...").concat(n.slice(-4)):n.slice(0,8);return u??"screen"}return null},[o,n]);return b.jsxs("div",{className:me.settings.select.group(),children:[b.jsx("label",{className:me.settings.select.label(),htmlFor:i==="audio"?"audio-source":"video-source",children:i==="audio"?"Audio Source":"Video Source"}),b.jsxs(Mct,{disabled:o.length===0,value:n,onValueChange:r,name:i==="audio"?"audio-source":"video-source",children:[b.jsxs($ct,{className:me.settings.select.trigger(),"aria-label":i==="audio"?"Audio Source":"Video Source",children:[b.jsx(Nct,{placeholder:i==="audio"?"Select your audio source...":"Select your video source..."}),b.jsx(Fct,{className:me.settings.select.icon(),children:b.jsx(emt,{})})]}),b.jsx(jct,{container:s,children:b.jsx(Bct,{className:me.settings.select.content(),children:b.jsx(Uct,{className:me.settings.select.viewport(),children:b.jsxs(Vct,{children:[o.map(function(l,c){var u;return b.jsxs(zH,{value:l.deviceId,className:me.settings.select.item(),children:[b.jsx(HH,{children:(u=l.label)!==null&&u!==void 0?u:"".concat(i==="audio"?"Audio Source":"Video Source"," ").concat(c+1," (").concat(l.deviceId==="default"?"default":l.deviceId.slice(0,6),")")}),b.jsx(WH,{className:me.settings.select.itemIndicator(),children:b.jsx(dG,{})})]},l.deviceId)}),n&&a&&b.jsxs(zH,{value:n,className:me.settings.select.item(),children:[b.jsx(HH,{children:"Screen Source (".concat(a,")")}),b.jsx(WH,{className:me.settings.select.itemIndicator(),children:b.jsx(dG,{})})]},n)]})})})})]})]})},emt=function(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 -960 960 960",width:"20",children:b.jsx("path",{fill:"currentColor",d:"M480-345 240-585l43-43 197 198 197-197 43 43-240 239Z"})})},dG=function(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",viewBox:"0 -960 960 960",width:"16",children:b.jsx("path",{d:"M378-246 154-470l43-43 181 181 384-384 43 43-427 427Z"})})},tmt=function(e){var n=e.deviceIds,r=e._updateMediaStream;return{deviceIds:n,_updateMediaStream:r}},nmt=function(e){var n=e.portalContainer,r=e.streamConstraints,i=Zt(tmt),s=i.deviceIds,o=i._updateMediaStream,a=v.useState(null),l=_r(a,2),c=l[0],u=l[1];v.useEffect(function(){var f=Qae(function(h){u(h.filter(function(p){return p.kind==="audioinput"}))});return f},[]);var d=v.useCallback(function(){var f=er(et().mark(function h(p){var m,g,y;return et().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Yae({source:{streamConstraints:r,videoDeviceId:(m=s==null?void 0:s.video)!==null&&m!==void 0?m:void 0,audioDeviceId:(g=p??(s==null?void 0:s.audio))!==null&&g!==void 0?g:void 0}});case 2:y=S.sent,y&&o(y);case 4:case"end":return S.stop()}},h)}));return function(h){return f.apply(this,arguments)}}(),[o,s,r]);return b.jsx(due,{type:"audio",onChange:d,value:s==null?void 0:s.audio,mediaDevices:c??[],portalContainer:n})},rmt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"-320 -1270 1600 1600",children:b.jsx("path",{fill:"currentColor",d:"m686-361-43-43q21-26 31-58.5t10-66.5h60q0 46-15 89t-43 79ZM461-586Zm97 97-53-52v-238q0-17.425-11.788-29.213Q481.425-820 464-820q-17.425 0-29.212 11.787Q423-796.425 423-779v155l-60-60v-95q0-42.083 29.441-71.542Q421.882-880 463.941-880t71.559 29.458Q565-821.083 565-779v250q0 8-1.5 20t-5.5 20ZM434-120v-136q-106-11-178-89t-72-184h60q0 91 64.5 153T464-314q38 0 73.11-12.337Q572.221-338.675 601-361l43 43q-31 26-69.014 41.568Q536.972-260.865 494-256v136h-60Zm397 65L36-850l38-38L869-93l-38 38Z"})})},imt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"-320 -1270 1600 1600",children:b.jsx("path",{fill:"currentColor",d:"M480-423q-43 0-72-30.917-29-30.916-29-75.083v-251q0-41.667 29.441-70.833Q437.882-880 479.941-880t71.559 29.167Q581-821.667 581-780v251q0 44.167-29 75.083Q523-423 480-423Zm0-228Zm-30 531v-136q-106-11-178-89t-72-184h60q0 91 64.288 153t155.5 62Q571-314 635.5-376 700-438 700-529h60q0 106-72 184t-178 89v136h-60Zm30-363q18 0 29.5-13.5T521-529v-251q0-17-11.788-28.5Q497.425-820 480-820q-17.425 0-29.212 11.5Q439-797 439-780v251q0 19 11.5 32.5T480-483Z"})})},smt=function(e){var n=e.isVolumeChangeSupported,r=e.requestToggleMute,i=e.requestVolume,s=e.muted,o=e.volume;return{isVolumeChangeSupported:n,requestToggleMute:r,requestVolume:i,muted:s,volume:o}},omt=function(e){var n=Zt(smt),r=n.volume,i=n.requestToggleMute,s=n.muted,o=n.requestVolume,a=n.isVolumeChangeSupported,l=iae(De({volume:r,requestToggleMute:i,muted:s,requestVolume:o,isVolumeChangeSupported:a,defaultMutedIcon:b.jsx(rmt,{}),defaultUnmutedIcon:b.jsx(imt,{})},e)),c=l.buttonProps,u=l.title;return b.jsx("div",{className:me.volume.container(),children:b.jsx("button",De({style:{width:e.size,height:e.size},className:me.iconButton(),title:u,"aria-label":u,onClick:c.onPress},Oa(c,"onPress","size")))})},amt=function(e){var n=e.deviceIds,r=e._updateMediaStream;return{deviceIds:n,_updateMediaStream:r}},lmt=function(e){var n=e.portalContainer,r=e.streamConstraints,i=Zt(amt),s=i.deviceIds,o=i._updateMediaStream,a=v.useState(null),l=_r(a,2),c=l[0],u=l[1];v.useEffect(function(){var f=Qae(function(h){u(h.filter(function(p){return p.kind==="videoinput"}))});return f},[]);var d=v.useCallback(function(){var f=er(et().mark(function h(p){var m,g,y;return et().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Yae({source:{streamConstraints:r,videoDeviceId:(m=p??(s==null?void 0:s.video))!==null&&m!==void 0?m:void 0,audioDeviceId:(g=s==null?void 0:s.audio)!==null&&g!==void 0?g:void 0}});case 2:y=S.sent,y&&o(y);case 4:case"end":return S.stop()}},h)}));return function(h){return f.apply(this,arguments)}}(),[o,s,r]);return b.jsx(due,{type:"video",onChange:d,value:s==null?void 0:s.video,mediaDevices:c??[],portalContainer:n})},cmt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",children:b.jsx("path",{d:"m 23.94,18.78 c .03,-0.25 .05,-0.51 .05,-0.78 0,-0.27 -0.02,-0.52 -0.05,-0.78 l 1.68,-1.32 c .15,-0.12 .19,-0.33 .09,-0.51 l -1.6,-2.76 c -0.09,-0.17 -0.31,-0.24 -0.48,-0.17 l -1.99,.8 c -0.41,-0.32 -0.86,-0.58 -1.35,-0.78 l -0.30,-2.12 c -0.02,-0.19 -0.19,-0.33 -0.39,-0.33 l -3.2,0 c -0.2,0 -0.36,.14 -0.39,.33 l -0.30,2.12 c -0.48,.2 -0.93,.47 -1.35,.78 l -1.99,-0.8 c -0.18,-0.07 -0.39,0 -0.48,.17 l -1.6,2.76 c -0.10,.17 -0.05,.39 .09,.51 l 1.68,1.32 c -0.03,.25 -0.05,.52 -0.05,.78 0,.26 .02,.52 .05,.78 l -1.68,1.32 c -0.15,.12 -0.19,.33 -0.09,.51 l 1.6,2.76 c .09,.17 .31,.24 .48,.17 l 1.99,-0.8 c .41,.32 .86,.58 1.35,.78 l .30,2.12 c .02,.19 .19,.33 .39,.33 l 3.2,0 c .2,0 .36,-0.14 .39,-0.33 l .30,-2.12 c .48,-0.2 .93,-0.47 1.35,-0.78 l 1.99,.8 c .18,.07 .39,0 .48,-0.17 l 1.6,-2.76 c .09,-0.17 .05,-0.39 -0.09,-0.51 l -1.68,-1.32 0,0 z m -5.94,2.01 c -1.54,0 -2.8,-1.25 -2.8,-2.8 0,-1.54 1.25,-2.8 2.8,-2.8 1.54,0 2.8,1.25 2.8,2.8 0,1.54 -1.25,2.8 -2.8,2.8 l 0,0 z",fill:"currentColor"})})},umt=function(e){var n=e._element;return{_element:n}},dmt=function(e){var n,r,i,s,o=Zt(umt),a=o._element;return b.jsx("div",{className:me.volume.container(),children:b.jsxs(u9e,{children:[b.jsx(d9e,{asChild:!0,children:b.jsx("button",De(De({style:{width:e.size,height:e.size},className:me.iconButton(),title:"Broadcast settings","aria-label":"Broadcast settings"},Oa(e,"icon","size","streamConstraints")),{},{children:(n=e==null?void 0:e.icon)!==null&&n!==void 0?n:b.jsx(cmt,{})}))}),b.jsxs(f9e,{container:(r=a==null?void 0:a.parentElement)!==null&&r!==void 0?r:a,children:[b.jsx(sie,{className:me.settings.overlay()}),b.jsxs(oie,{className:me.settings.content(),children:[b.jsx(h9e,{className:me.settings.title(),children:"Settings"}),b.jsx(lmt,{streamConstraints:e.streamConstraints,portalContainer:(i=a==null?void 0:a.parentElement)!==null&&i!==void 0?i:a}),b.jsx(nmt,{streamConstraints:e.streamConstraints,portalContainer:(s=a==null?void 0:a.parentElement)!==null&&s!==void 0?s:a}),b.jsx(aie,{asChild:!0,children:b.jsx("button",{className:me.settings.close(),"aria-label":"Close",children:b.jsx(fmt,{})})})]})]})]})})},fmt=function(){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:b.jsx("path",{d:"m249-207-42-42 231-231-231-231 42-42 231 231 231-231 42 42-231 231 231 231-42 42-231-231-231 231Z"})})},hmt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"-340 -1265 1600 1600",children:b.jsx("path",{fill:"currentColor",d:"M451-328h59v-194l79 81 43-43-153-152-152 152 43 43 81-81v194ZM140-160q-24 0-42-18t-18-42v-520q0-24 18-42t42-18h680q24 0 42 18t18 42v520q0 24-18 42t-42 18H140Zm0-60h680v-520H140v520Zm0 0v-520 520Z"})})},pmt=function(e){var n=e._updateMediaStream;return{_updateMediaStream:n}},mmt=function(e){var n,r=Zt(pmt),i=r._updateMediaStream,s=v.useCallback(er(et().mark(function o(){var a;return et().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,jst(e==null?void 0:e.options);case 2:a=c.sent,a&&i(a);case 4:case"end":return c.stop()}},o)})),[i,e==null?void 0:e.options]);return b.jsx("button",De(De({style:{width:e.size,height:e.size},className:me.iconButton(),title:"Screen share","aria-label":"Screen share"},Oa(e,"icon","options","size")),{},{onClick:s,children:(n=e==null?void 0:e.icon)!==null&&n!==void 0?n:b.jsx(hmt,{})}))};function gmt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function fue(t,e){if(t==null)return{};var n=gmt(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var vmt=["onIcon","offIcon","onPress"],ymt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"-340 -1265 1600 1600",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{fill:"currentColor",d:"M140-160q-24 0-42-18t-18-42v-520q0-24 18-42t42-18h520q24 0 42 18t18 42v215l160-160v410L720-435v215q0 24-18 42t-42 18H140Zm0-60h520v-520H140v520Zm0 0v-520 520Z"})})},xmt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"-340 -1265 1600 1600",fill:"none",children:b.jsx("path",{fill:"currentColor",d:"M880-275 720-435v111l-60-60v-356H304l-60-60h416q24 0 42 18t18 42v215l160-160v410ZM848-27 39-836l42-42L890-69l-42 42ZM484-560Zm-87 82ZM159-800l60 60h-79v520h520v-79l60 60v19q0 24-18 42t-42 18H140q-24 0-42-18t-18-42v-520q0-24 18-42t42-18h19Z"})})},bmt=function(e){var n=e.toggleVideo,r=e.video;return{toggleVideo:n,video:r}},Smt=function(e){var n=Zt(bmt),r=n.toggleVideo,i=n.video,s=e.onIcon,o=e.offIcon,a=e.onPress,l=fue(e,vmt),c=function(){var f=er(et().mark(function h(){return et().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,a==null?void 0:a();case 2:return m.next=4,r();case 4:case"end":return m.stop()}},h)}));return function(){return f.apply(this,arguments)}}(),u=W_(!!i,s,b.jsx(ymt,{}),o,b.jsx(xmt,{})),d=v.useMemo(function(){return i?"Turn video off (v)":"Turn video on (v)"},[i]);return b.jsx("button",De(De({style:{width:e.size,height:e.size},className:me.iconButton(),title:d,"aria-label":d,onClick:c},Oa(l,"size")),{},{children:u}))},fG=50,wmt=function(e){var n=e.device;return{device:n}},hue=function(e){var n=Zt(wmt),r=n.device,i=v.useRef(null),s=v.useState({width:0,left:0}),o=_r(s,2),a=o[0],l=o[1];v.useEffect(function(){if(typeof window<"u"){var P=function(){var M,B,N,V=(M=i.current)===null||M===void 0?void 0:M.getBoundingClientRect();l({width:(B=V==null?void 0:V.width)!==null&&B!==void 0?B:0,left:(N=V==null?void 0:V.left)!==null&&N!==void 0?N:0})};return P(),window.addEventListener("resize",P),function(){return window.removeEventListener("resize",P)}}},[]);var c=v.useState(!1),u=_r(c,2),d=u[0],f=u[1],h=v.useState(0),p=_r(h,2),m=p[0],g=p[1],y=Jet(De({isActive:d||(r==null?void 0:r.isMobile),sliderWidth:a.width,defaultThumbIcon:b.jsx(Emt,{})},e)),x=y.title,S=y.value,w=y.active,E=y.handle,T=y.sliderProps,_=y.sliderLeftTrackProps,I=y.sliderMiddleTrackProps,A=y.sliderRightTrackProps,L=v.useState(!1),j=_r(L,2),D=j[0],O=j[1];v.useEffect(function(){if(D){var P,k,M,B,N=function(){var z=er(et().mark(function G(K){var Q;return et().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Q=Date.now()-m>fG,Z.next=3,T.onUpdate(K.clientX-a.left,Q);case 3:Q&&g(Date.now());case 4:case"end":return Z.stop()}},G)}));return function(K){return z.apply(this,arguments)}}(),V=function(){var z=er(et().mark(function G(K){var Q,ne,Z,re,de;return et().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(re=Date.now()-m>fG,de=(Q=K.touches)===null||Q===void 0||(ne=Q.item)===null||ne===void 0||(Z=ne.call(Q,0))===null||Z===void 0?void 0:Z.clientX,!de){ke.next=6;break}return ke.next=5,T.onUpdate(de-a.left,re);case 5:re&&g(Date.now());case 6:case"end":return ke.stop()}},G)}));return function(K){return z.apply(this,arguments)}}(),H=function(){var z=er(et().mark(function G(K){var Q;return et().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return O(!1),Z.next=3,T.onUpdate(K.clientX-a.left,!0);case 3:return Z.next=5,e==null||(Q=e.onDone)===null||Q===void 0?void 0:Q.call(e);case 5:case"end":return Z.stop()}},G)}));return function(K){return z.apply(this,arguments)}}(),W=function(){var z=er(et().mark(function G(K){var Q,ne,Z,re,de,Ee,ke,_e,Te;return et().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(O(!1),Te=(Q=(ne=K.touches)===null||ne===void 0||(Z=ne.item)===null||Z===void 0||(re=Z.call(ne,0))===null||re===void 0?void 0:re.clientX)!==null&&Q!==void 0?Q:(de=K.changedTouches)===null||de===void 0||(Ee=de.item)===null||Ee===void 0||(ke=Ee.call(de,0))===null||ke===void 0?void 0:ke.clientX,!Te){Qe.next=5;break}return Qe.next=5,T.onUpdate(Te-a.left,!0);case 5:return Qe.next=7,e==null||(_e=e.onDone)===null||_e===void 0?void 0:_e.call(e);case 7:case"end":return Qe.stop()}},G)}));return function(K){return z.apply(this,arguments)}}();return(P=document)===null||P===void 0||P.addEventListener("mousemove",N),(k=document)===null||k===void 0||k.addEventListener("mouseup",H),(M=document)===null||M===void 0||M.addEventListener("touchmove",V),(B=document)===null||B===void 0||B.addEventListener("touchend",W),function(){var z,G,K,Q;(z=document)===null||z===void 0||z.removeEventListener("mousemove",N),(G=document)===null||G===void 0||G.removeEventListener("mouseup",H),(K=document)===null||K===void 0||K.removeEventListener("touchmove",V),(Q=document)===null||Q===void 0||Q.removeEventListener("touchend",W)}}},[D,T,e,a,m]);var $=v.useCallback(function(){var P=er(et().mark(function k(M){return et().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,T.onUpdate(M.clientX-a.left);case 2:O(!0);case 3:case"end":return N.stop()}},k)}));return function(k){return P.apply(this,arguments)}}(),[T,a]),R=v.useCallback(er(et().mark(function P(){return et().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:f(!0);case 1:case"end":return M.stop()}},P)})),[f]),C=v.useCallback(er(et().mark(function P(){return et().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:f(!1);case 1:case"end":return M.stop()}},P)})),[f]);return b.jsxs("div",{ref:i,onPointerDown:$,onMouseEnter:R,onMouseLeave:C,role:"slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":S,"aria-valuetext":x,"aria-orientation":"horizontal",className:me.slider.container(),children:[_.shown&&b.jsx("div",{className:me.slider.track.left({size:w?"active":"default",rounded:_.rounded,css:_.css})}),E,I.shown&&b.jsx("div",{className:me.slider.track.middle({size:w?"active":"default",rounded:I.rounded,css:I.css})}),A.shown&&b.jsx("div",{className:me.slider.track.right({size:w?"active":"default",rounded:A.rounded,css:A.css})})]})},Emt=function(e){var n=e.size,r=e.css;return b.jsx("div",{className:me.slider.thumb({css:r,size:n})})},_mt=function(e){var n=e.fullscreen;return{fullscreen:n}},pue=function(e){var n=e.children,r=e.aspectRatio,i=e.theme,s=e.tabIndex,o=_ot(i),a=Zt(_mt),l=a.fullscreen;return b.jsx("div",{style:{display:"contents"},className:"".concat(o?"".concat(o," "):"","livepeer-contents-container"),children:b.jsx("div",{className:"".concat(me.container({aspectRatio:r,size:l?"fullscreen":"default"})," livepeer-aspect-ratio-container"),tabIndex:s??0,children:n})})},Tmt=function(){return b.jsxs("svg",{viewBox:"0 0 324 140",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M82 8.30584L239.745 5.68359L242.335 118.151L83.9414 118.502L82 8.30584Z",fill:"#97F2EF"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M66 124.072L254.898 124L258 129L68.3248 128.971L66 124.072Z",fill:"#97F2EF"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M94.2062 111.151L92.5204 15.5292L229.556 14.1187L231.803 111.716L94.2062 111.151Z",fill:"#4CC38A"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M185 58.1481C185 70.8507 174.703 82 162 82C153.04 82 145.277 77.3008 141.48 70.0741C141.421 69.9609 141.362 69.8472 141.305 69.7328C140.965 69.0558 140.782 66.2859 140.704 64.963C140.278 66.2407 140.43 67.3765 140.507 67.9444C139.533 65.4642 139 62.7423 139 59.8519C139 47.1493 149.297 36 162 36C166.913 36 171.467 37.4132 175.204 39.8814C175.63 41.0012 176.226 43.6667 175.204 45.3704C176 44.8025 177.651 43.3259 177.888 41.963C182.27 45.9317 185 51.6082 185 58.1481Z",fill:"#141716"}),b.jsx("path",{d:"M140.704 64.963C140.278 66.2407 140.43 67.3765 140.507 67.9444C140.746 68.5556 141.013 69.1521 141.305 69.7328C140.965 69.0558 140.782 66.2859 140.704 64.963Z",fill:"#141716"}),b.jsx("path",{d:"M171 60.5003L156 70V60.6462V51L166.104 57.3994L171 60.5003Z",stroke:"#4CC38A",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("path",{d:"M101.096 100.921L176.5 101.109M219.885 101.163L198.193 101.136",stroke:"#141716",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M148.197 101.161C148.197 103.28 146.472 104.998 144.344 104.998C142.215 104.998 140.49 103.28 140.49 101.161C140.49 99.042 142.215 97.3242 144.344 97.3242C146.472 97.3242 148.197 99.042 148.197 101.161Z",fill:"#DF0087"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M148.197 101.161C148.197 103.28 146.472 104.998 144.344 104.998C142.215 104.998 140.49 103.28 140.49 101.161C140.49 99.042 142.215 97.3242 144.344 97.3242C146.472 97.3242 148.197 99.042 148.197 101.161Z",stroke:"#141716",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("path",{d:"M93.7252 111.754L91.7752 14.7408L230.275 13.7374L232.225 112.245L93.7252 111.754Z",stroke:"#141716",strokeWidth:"2.5"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M49.0868 58.0273L49.9632 88.7907L19.4093 88.9852L19.0201 58.6113L49.0868 58.0273ZM51 89.7922L50.0663 57L18 57.6228L18.4147 90L51 89.7922Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M296.114 25.1881L297.132 60.7679L261.637 60.9929L261.185 25.8636L296.114 25.1881ZM298.336 61.9263L297.252 24L260 24.7203L260.482 62.1666L298.336 61.9263Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M293.138 78.0001L293 67.2077L303.689 67.0001L304 77.9308L293.138 78.0001ZM304.309 78.2288L292.842 78.3019L292.696 66.9135L303.98 66.6943L304.309 78.2288ZM303.071 67.6482L293.644 67.8313L293.766 77.3599L303.346 77.2989L303.071 67.6482ZM303.362 67.3425L293.34 67.5372L293.47 77.6618L303.654 77.5969L303.362 67.3425Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M303.362 67.3424L303.654 77.5969L293.47 77.6617L293.34 67.5371L303.362 67.3424ZM304 77.9307L303.689 67L293 67.2076L293.138 78L304 77.9307Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M289.594 66.2179L289.78 72.7435L283.299 72.7847L283.216 66.3418L289.594 66.2179ZM290 72.9559L289.802 66L283 66.1321L283.088 73L290 72.9559Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M290.309 73.254L282.792 73.3019L282.696 65.838L290.093 65.6943L290.309 73.254ZM289.594 66.218L289.78 72.7435L283.299 72.7848L283.216 66.3419L289.594 66.218ZM289.471 72.4455L283.595 72.4829L283.52 66.636L289.303 66.5237L289.471 72.4455ZM283.088 73.0001L283 66.1322L289.802 66.0001L290 72.956L283.088 73.0001Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.442 36.3017L47.3038 47.0941L57.9925 47.3017L58.3038 36.371L47.442 36.3017ZM58.6124 36.0729L47.1459 35.9998L47 47.3883L58.284 47.6074L58.6124 36.0729ZM57.3747 46.6536L47.9476 46.4704L48.0697 36.9419L57.6496 37.0029L57.3747 46.6536ZM57.6661 46.9593L47.6438 46.7646L47.7736 36.64L57.9582 36.7048L57.6661 46.9593Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M57.6661 46.9593L57.9582 36.7049L47.7736 36.64L47.6439 46.7646L57.6661 46.9593ZM58.3038 36.371L57.9926 47.3018L47.3038 47.0942L47.4421 36.3018L58.3038 36.371Z",fill:"#434545"})]})},mue=Tmt,Cmt=function(){return b.jsxs("svg",{viewBox:"0 0 324 142",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("circle",{cx:"162",cy:"76",r:"23",stroke:"#141716",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),b.jsx("path",{d:"M242 88.5C242 88.5 206.183 131 162 131C117.817 131 82 88.5 82 88.5C82 88.5 117.817 46 162 46C206.183 46 242 88.5 242 88.5Z",fill:"#97F2EF"}),b.jsx("path",{d:"M249 82C249 82 210.825 128 162.5 128C114.175 128 74.5 82.5 74.5 82.5C74.5 82.5 114.175 32 162.5 32C219 34 249 82 249 82Z",fill:"#97F2EF"}),b.jsx("path",{d:"M249 82.5C249 82.5 210.049 129 162 129C113.951 129 75 82.5 75 82.5C75 82.5 113.951 36 162 36C210.049 36 249 82.5 249 82.5Z",fill:"#4CC38A"}),b.jsx("path",{d:"M216.5 60.8302C202.013 51.0702 182.921 42 162 42C116.713 42 80 84.5 80 84.5C80 84.5 116.713 127 162 127C207.287 127 244 84.5 244 84.5C244 84.5 240.941 80.9589 235.5 75.921",stroke:"#141716",strokeWidth:"2.5"}),b.jsx("path",{d:"M118 117.5C117 119.5 107.5 122.7 107.5 125.5M127 121.5C123.667 126.167 117 136.7 117 141.5",stroke:"#97F2EF",strokeWidth:"2.5"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M193 86C193 100.912 180.912 114 166 114C155.482 114 146.369 108.484 141.912 100C141.842 99.8672 141.773 99.7336 141.706 99.5994C141.306 98.8046 141.091 95.553 141 94C140.5 95.5 140.679 96.8333 140.769 97.5C139.626 94.5884 139 91.3932 139 88C139 73.0883 151.088 60 166 60C171.768 60 177.113 61.6589 181.5 64.5564C182 65.8709 182.7 69 181.5 71C182.434 70.3333 184.373 68.6 184.652 67C189.796 71.6589 193 78.3227 193 86Z",fill:"#141716"}),b.jsx("path",{d:"M141 94C140.5 95.5 140.679 96.8333 140.769 97.5C141.05 98.2174 141.363 98.9177 141.706 99.5994C141.306 98.8046 141.091 95.553 141 94Z",fill:"#141716"}),b.jsx("path",{d:"M170.403 79C176.754 79 182.328 84.8203 182.328 92C182.328 99.1797 177.606 105 171.254 105C167.788 105 164.552 103.266 162.328 100.523C161.871 99.9592 161.457 99.3526 161.092 98.7097C159.98 96.7509 159.328 94.4549 159.328 92C159.328 84.8203 164.051 79 170.403 79Z",fill:"#4CC38A"}),b.jsx("path",{d:"M70.5 43C77 48.1667 87.3 55 94.5 63M98 8C103 19.6667 113 44.8 113 52M156.5 0.5C156 12.5 158 32.5 158 32.5M223 56C231.667 50.6667 241 43 263 39",stroke:"#97F2EF",strokeWidth:"2.5"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M288.028 49.4047L287.706 29.9756L312.554 29.6019L313.278 49.28L288.028 49.4047ZM313.995 49.8165L287.339 49.9481L287 29.4461L313.232 29.0515L313.995 49.8165ZM311.118 30.7687L289.203 31.0984L289.487 48.2522L311.757 48.1424L311.118 30.7687ZM311.795 30.2184L288.497 30.5688L288.798 48.7957L312.474 48.679L311.795 30.2184Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M311.795 30.2182L312.475 48.6788L288.798 48.7955L288.497 30.5687L311.795 30.2182ZM313.278 49.2798L312.554 29.6017L287.706 29.9755L288.028 49.4045L313.278 49.2798Z",fill:"#434545"}),b.jsx("path",{d:"M308.595 29.6018V24.201C308.595 20.224 305.371 17 301.394 17V17C297.417 17 294.193 20.224 294.193 24.201V29.6018",stroke:"#434545",strokeWidth:"2"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.9897 127.881L31.6802 109.168L55.6122 108.808L56.309 127.761L31.9897 127.881ZM57 128.278L31.3266 128.405L31 108.658L56.2646 108.278L57 128.278ZM54.2287 109.932L33.1217 110.25L33.3951 126.771L54.8443 126.665L54.2287 109.932ZM54.8812 109.402L32.4415 109.74L32.732 127.295L55.5352 127.182L54.8812 109.402Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54.8813 109.402L55.5353 127.182L32.7321 127.295L32.4416 109.74L54.8813 109.402ZM56.3091 127.761L55.6122 108.808L31.6803 109.168L31.9898 127.881L56.3091 127.761Z",fill:"#434545"}),b.jsx("path",{d:"M51.7984 108.808V103.606C51.7984 99.776 48.6932 96.6709 44.8628 96.6709V96.6709C41.0325 96.6709 37.9273 99.776 37.9273 103.606V108.808",stroke:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.4568 93.4225L16.3139 85.9741L27.3595 85.8309L27.6811 93.3747L16.4568 93.4225ZM28 93.5804L16.1507 93.6308L16 85.7711L27.6606 85.6199L28 93.5804ZM26.7209 86.2782L16.9793 86.4046L17.1054 92.9807L27.005 92.9386L26.7209 86.2782ZM27.0221 86.0672L16.6653 86.2016L16.7994 93.189L27.324 93.1443L27.0221 86.0672Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.0221 86.0676L27.324 93.1447L16.7994 93.1895L16.6654 86.202L27.0221 86.0676ZM27.6811 93.3751L27.3595 85.8313L16.314 85.9746L16.4568 93.4229L27.6811 93.3751Z",fill:"#434545"}),b.jsx("path",{d:"M25.5992 85.831V84.201C25.5992 82.4331 24.1661 81 22.3982 81V81C20.6304 81 19.1972 82.4331 19.1972 84.201V85.831",stroke:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M289.419 69.8179L289.288 62.3096L299.413 62.1844L299.708 69.7762L289.419 69.8179ZM300 69.9559L289.138 70L289 62.1322L299.689 62L300 69.9559ZM299 63H290L290.013 69.4319L299.088 69.3951L299 63ZM299.104 62.3909L289.61 62.5083L289.733 69.6139L299.38 69.5748L299.104 62.3909Z",fill:"#434545"}),b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M299.104 62.3909L299.38 69.5748L289.733 69.6139L289.61 62.5083L299.104 62.3909ZM299.708 69.7762L299.413 62.1844L289.288 62.3096L289.419 69.8179L299.708 69.7762Z",fill:"#434545"}),b.jsx("path",{d:"M296.752 62.9402V61.2516C296.752 60.0081 295.744 59 294.5 59V59C293.257 59 292.249 60.0081 292.249 61.2516V62.9402",stroke:"#434545"})]})},kmt=Cmt,Pmt=function(e){var n=e.isBroadcast;return b.jsxs("div",{className:me.controlsContainer.error.background(),children:[b.jsx(mue,{}),b.jsx("div",{className:me.controlsContainer.error.title(),children:n?"Stream key invalid":"Stream is offline"}),b.jsx("div",{className:me.controlsContainer.error.text(),children:n?"The provided stream key could not be found. Please check it and try again.":"Playback will start automatically once the stream has started."})]})},Imt=function(){return b.jsxs("div",{className:me.controlsContainer.error.background(),children:[b.jsx(kmt,{}),b.jsx("div",{className:me.controlsContainer.error.title(),children:"Stream is private"}),b.jsx("div",{className:me.controlsContainer.error.text(),children:"It looks like you don't have permission to view this content."})]})},Amt=function(e){var n=e.isBroadcast;return b.jsxs("div",{className:me.controlsContainer.error.background(),children:[b.jsx(mue,{}),b.jsx("div",{className:me.controlsContainer.error.title(),children:n?"Broadcast failed":"Playback failed"}),b.jsx("div",{className:me.controlsContainer.error.text(),children:n?"There was an error with broadcasting - please try again later.":"There was an error with playback - please wait while we are retrying in the background."})]})},Lmt=function(e){var n=e.hidden,r=e.togglePlay,i=e.canPlay,s=e.hasPlayed,o=e.buffered,a=e.ingestUrl,l=e._updateLastInteraction;return{hidden:n,togglePlay:r,canPlay:i,hasPlayed:s,buffered:o,ingestUrl:a,_updateLastInteraction:l}},gue=function(e){var n=e.top,r=e.middle,i=e.left,s=e.right,o=e.poster,a=e.showLoadingSpinner,l=a===void 0?!0:a,c=e.hidePosterOnPlayed,u=c===void 0?!0:c,d=e.loadingText,f=e.error,h=e.children,p=e.playbackFailedErrorComponent,m=e.streamOfflineErrorComponent,g=e.accessControlErrorComponent,y=Zt(Lmt),x=y.hidden,S=y.togglePlay,w=y.canPlay,E=y.hasPlayed,T=y.buffered,_=y.ingestUrl,I=y._updateLastInteraction,A=v.useMemo(function(){return!!_},[_]),L=ttt({togglePlay:S,canPlay:w,buffered:T,isBroadcast:A,_updateLastInteraction:I}),j=L.isLoaded,D=L.containerProps;return b.jsxs(b.Fragment,{children:[o?b.jsx("div",{className:me.controlsContainer.background({display:E&&u?"hidden":"shown"}),onMouseUp:D.onPress,children:o}):b.jsx("div",{className:me.controlsContainer.background({display:"hidden"}),onMouseUp:D.onPress}),l&&!j&&(!(f!=null&&f.type)||f.type==="fallback")&&b.jsxs("div",{className:me.controlsContainer.background(),onMouseUp:D.onPress,children:[d&&b.jsx("div",{className:me.controlsContainer.loadingText(),children:d}),b.jsx("div",{className:me.controlsContainer.loading()})]}),f!=null&&f.type&&f.type!=="fallback"?b.jsx("div",{className:me.controlsContainer.background(),onMouseUp:D.onPress,children:(f==null?void 0:f.type)==="access-control"?g||b.jsx(Imt,{}):(f==null?void 0:f.type)==="offline"?m||b.jsx(Pmt,{isBroadcast:A}):p||b.jsx(Amt,{isBroadcast:A})}):j&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:me.controlsContainer.gradient({display:x?"hidden":"shown"}),onMouseUp:D.onPress}),b.jsx("div",{className:me.controlsContainer.top.container({display:x?"hidden":"shown"}),children:n}),b.jsxs("div",{className:me.controlsContainer.bottom.container({display:x?"hidden":"shown"}),children:[b.jsx("div",{className:me.controlsContainer.bottom.middle.container(),children:r}),b.jsxs("div",{className:me.controlsContainer.bottom.lower.container(),children:[b.jsx("div",{className:me.controlsContainer.bottom.lower.left(),children:i}),b.jsx("div",{className:me.controlsContainer.bottom.lower.right(),children:s})]})]}),h&&b.jsx("div",{className:me.controlsContainer.background({display:x?"hidden":"shown"}),children:h})]})]})},Rmt=function(){return b.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("path",{fill:"currentColor",d:"m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"}),b.jsx("path",{fill:"currentColor",d:"m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"}),b.jsx("path",{fill:"currentColor",d:"m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"}),b.jsx("path",{fill:"currentColor",d:"M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"})]})},Omt=function(){return b.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",children:[b.jsx("path",{fill:"currentColor",d:"m 14,14 -4,0 0,2 6,0 0,-6 -2,0 0,4 0,0 z"}),b.jsx("path",{fill:"currentColor",d:"m 22,14 0,-4 -2,0 0,6 6,0 0,-2 -4,0 0,0 z"}),b.jsx("path",{fill:"currentColor",d:"m 20,26 2,0 0,-4 4,0 0,-2 -6,0 0,6 0,0 z"}),b.jsx("path",{fill:"currentColor",d:"m 10,22 4,0 0,4 2,0 0,-6 -6,0 0,2 0,0 z"})]})},Dmt=function(e){var n=e.fullscreen,r=e.pictureInPicture,i=e.requestToggleFullscreen;return{fullscreen:n,pictureInPicture:r,requestToggleFullscreen:i}},vue=function(e){var n=Zt(Dmt),r=n.fullscreen,i=n.pictureInPicture,s=n.requestToggleFullscreen,o=ntt(De({fullscreen:r,pictureInPicture:i,requestToggleFullscreen:s,defaultEnterIcon:b.jsx(Rmt,{}),defaultExitIcon:b.jsx(Omt,{})},e)),a=o.title,l=o.buttonProps;return l?b.jsx("button",De({style:{width:e.size,height:e.size},className:me.iconButton(),title:a,"aria-label":a,onClick:l.onPress},Oa(l,"onPress","size"))):b.jsx(b.Fragment,{})},Mmt=["icon","onPress"],$mt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{fill:"currentColor",d:"M25,17 L17,17 L17,23 L25,23 L25,17 L25,17 Z M29,25 L29,10.98 C29,9.88 28.1,9 27,9 L9,9 C7.9,9 7,9.88 7,10.98 L7,25 C7,26.1 7.9,27 9,27 L27,27 C28.1,27 29,26.1 29,25 L29,25 Z M27,25.02 L9,25.02 L9,10.97 L27,10.97 L27,25.02 L27,25.02 Z"})})},Nmt=function(e){var n=e.requestTogglePictureInPicture,r=e.pictureInPicture,i=e._element,s=e.fullscreen;return{requestTogglePictureInPicture:n,pictureInPicture:r,_element:i,fullscreen:s}},yue=function(e){var n=Zt(Nmt),r=n.requestTogglePictureInPicture,i=n._element,s=n.pictureInPicture,o=n.fullscreen,a=e.icon,l=e.onPress,c=fue(e,Mmt),u=v.useCallback(er(et().mark(function p(){return et().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,l==null?void 0:l();case 2:return g.next=4,r();case 4:case"end":return g.stop()}},p)})),[l,r]),d=v.useMemo(function(){return aot(i)},[i]),f=v.useMemo(function(){return s?"Exit mini player (i)":"Mini player (i)"},[s]);if(!d||o)return b.jsx(b.Fragment,{});var h=a||b.jsx($mt,{});return b.jsx("button",De(De({style:{width:e.size,height:e.size},className:me.iconButton(),title:f,"aria-label":f,onClick:u},c),{},{children:h}))},Fmt=function(e){var n=e.duration,r=e.progress,i=e.live;return{duration:n,progress:r,live:i}},xue=function(){var e=Zt(Fmt),n=e.duration,r=e.progress,i=e.live,s=stt({duration:n,progress:r,live:i}),o=s.title,a=s.live;return b.jsx(b.Fragment,{children:a?b.jsxs("div",{className:me.time.container(),children:[b.jsx("div",{className:me.time.liveIndicator()}),b.jsx("span",{className:me.time.text(),"aria-label":"Live streaming media",children:"LIVE"})]}):b.jsx("span",{className:me.time.text(),"aria-label":"Playback time",children:o})})},bue=function(e){var n=e.content;return b.jsx("span",{className:me.title(),"aria-label":"Title",children:n})},jmt=function(e){var n=Zet(e),r=n.mediaElement,i=n.broadcastProps,s=n.mediaControllerProps,o=n.controlsContainerProps,a=n.props,l=a.children,c=a.controls,u=a.theme,d=a.title,f=a.aspectRatio,h=a.renderChildrenOutsideContainer;return b.jsxs(tle,{element:r,opts:c,mediaProps:s,children:[b.jsxs(pue,{theme:u,aspectRatio:f,tabIndex:e.tabIndex,children:[b.jsx(Jpt,De({},i)),!h&&v.isValidElement(l)?v.cloneElement(l,o):b.jsx(gue,De(De({},o),{},{top:b.jsx(b.Fragment,{children:d&&b.jsx(bue,{content:d})}),left:b.jsxs(b.Fragment,{children:[b.jsx(Smt,{}),b.jsx(omt,{}),b.jsx(mmt,{options:e==null?void 0:e.displayMediaOptions}),b.jsx(xue,{})]}),right:b.jsxs(b.Fragment,{children:[e.showPipButton&&b.jsx(yue,{}),b.jsx(dmt,{streamConstraints:e.mediaStreamConstraints}),b.jsx(vue,{})]})}))]}),h&&v.isValidElement(l)?l:b.jsx(b.Fragment,{})]})},Bmt=v.memo,Umt=Bmt(jmt),Vmt=function(e){var n=e.fullscreen;return{fullscreen:n}},Sue=v.forwardRef(function(t,e){var n=t.src,r=t.autoPlay,i=t.title,s=t.loop,o=t.muted,a=t.objectFit,l=t.allowCrossOriginCredentials,c=Zt(Vmt),u=c.fullscreen,d=v.useMemo(function(){var f;return(f=n==null?void 0:n.filter(function(h){return(h==null?void 0:h.mime)&&Poe(h)}))!==null&&f!==void 0?f:[]},[n]);return b.jsxs("audio",{className:me.media.audio({size:u?"fullscreen":a}),loop:s,"aria-label":i??"Audio player",role:"audio",autoPlay:r,ref:e,"webkit-playsinline":"true",playsInline:!0,muted:o,crossOrigin:l?"use-credentials":"anonymous",children:[d.map(function(f){return b.jsx("source",{src:f.src,type:f.mime},f.src)}),"Your browser doesn't support the HTML5 <code>audio</code> tag, or the audio format."]})});Sue.displayName="AudioPlayer";var zmt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"-6 -6 36 36",focusable:"false",children:b.jsx("path",{fill:"currentColor",d:"M8 7c0 .55-.45 1-1 1s-1-.45-1-1 .45-1 1-1 1 .45 1 1zm-1 9c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1zm3.79-7.77L21 18.44V20h-3.27l-5.76-5.76-1.27 1.27c.19.46.3.96.3 1.49 0 2.21-1.79 4-4 4s-4-1.79-4-4 1.79-4 4-4c.42 0 .81.08 1.19.2l1.37-1.37-1.11-1.11C8 10.89 7.51 11 7 11c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4c0 .43-.09.84-.21 1.23zm-.71.71-.43-.44.19-.58c.11-.34.16-.64.16-.92 0-1.65-1.35-3-3-3S4 5.35 4 7s1.35 3 3 3c.36 0 .73-.07 1.09-.21l.61-.24.46.46 1.11 1.11.71.71-.71.71-1.37 1.37-.43.43-.58-.18C7.55 14.05 7.27 14 7 14c-1.65 0-3 1.35-3 3s1.35 3 3 3 3-1.35 3-3c0-.38-.07-.75-.22-1.12l-.25-.61.47-.47 1.27-1.27.71-.71.71.71L18.15 19H20v-.15l-9.92-9.91zM17.73 4H21v1.56l-5.52 5.52-2.41-2.41L17.73 4zm.42 1-3.67 3.67 1 1L20 5.15V5h-1.85z"})})},Hmt=function(e){var n=e.live,r=e.requestClip,i=e.playbackId;return{live:n,requestClip:r,playbackId:i}},Wmt=function(e){var n=Zt(Hmt),r=n.live,i=n.requestClip,s=n.playbackId,o=ett(De({live:r,requestClip:i,playbackId:s,defaultIcon:b.jsx(zmt,{})},e)),a=o.buttonProps,l=o.title,c=o.isShown;return c?b.jsx("button",De({style:{width:e.size,height:e.size},className:me.iconButton(),title:l,"aria-label":l,onClick:a.onPress},Oa(a,"onPress","size"))):b.jsx(b.Fragment,{})},Gmt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:b.jsx("path",{d:"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z",fill:"currentColor"})})},Kmt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",children:b.jsx("path",{d:"M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z",fill:"currentColor"})})},qmt=function(e){var n=e.togglePlay,r=e.playing;return{togglePlay:n,playing:r}},Ymt=function(e){var n=Zt(qmt),r=n.togglePlay,i=n.playing,s=rtt(De({togglePlay:r,playing:i,defaultPauseIcon:b.jsx(Kmt,{}),defaultPlayIcon:b.jsx(Gmt,{})},e)),o=s.buttonProps,a=s.title;return b.jsx("button",De({style:{width:e.size,height:e.size},className:me.iconButton(),title:a,"aria-label":a,onClick:o.onPress},Oa(o,"onPress","size")))},Qmt=function(e){var n=e.fullscreen;return{fullscreen:n}},Xmt=function(e){var n=Zt(Qmt),r=n.fullscreen,i=e.content,s=e.title;return typeof i=="string"?b.jsx("img",{className:me.media.poster({size:r?"fullscreen":"default"}),"aria-label":s,alt:s,src:i}):v.isValidElement(i)?v.cloneElement(i,{className:me.media.poster({size:r?"fullscreen":"default"})}):b.jsx(b.Fragment,{})},Zmt=function(e){var n=e.duration,r=e.progress,i=e.requestSeek,s=e.buffered,o=e.live;return{duration:n,progress:r,requestSeek:i,buffered:s,live:o}},Jmt=function(e){var n=Zt(Zmt),r=n.duration,i=n.progress,s=n.requestSeek,o=n.buffered,a=n.live,l=itt(De({duration:r,progress:i,requestSeek:s,buffered:o,live:a},e)),c=l.isVisible,u=l.progressProps,d=l.title;return c?b.jsx(hue,De(De({},u),{},{ariaName:d})):b.jsx(b.Fragment,{})},egt=function(){return b.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",children:[b.jsx("path",{d:"M 9.25,9 7.98,10.27 24.71,27 l 1.27,-1.27 Z",fill:"currentColor"}),b.jsx("path",{fill:"currentColor",d:"M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 ZM19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"})]})},tgt=function(){return b.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",children:b.jsx("path",{fill:"currentColor",d:"M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 ZM19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"})})},ngt=function(e){var n=e.isVolumeChangeSupported,r=e.requestToggleMute,i=e.requestVolume,s=e.muted,o=e.volume;return{isVolumeChangeSupported:n,requestToggleMute:r,requestVolume:i,muted:s,volume:o}},rgt=function(e){var n=Zt(ngt),r=n.volume,i=n.requestToggleMute,s=n.muted,o=n.requestVolume,a=n.isVolumeChangeSupported,l=iae(De({volume:r,requestToggleMute:i,muted:s,requestVolume:o,isVolumeChangeSupported:a,defaultMutedIcon:b.jsx(egt,{}),defaultUnmutedIcon:b.jsx(tgt,{})},e)),c=l.progressProps,u=l.buttonProps,d=l.title;return b.jsxs("div",{className:me.volume.container(),children:[b.jsx("button",De({style:{width:e.size,height:e.size},className:me.iconButton(),title:d,"aria-label":d,onClick:u.onPress},Oa(u,"onPress","size"))),c.shown&&b.jsx(hue,De({ariaName:"volume",value:s?0:r},c))]})},wue=function(e,n){var r=v.useState(e),i=_r(r,2),s=i[0],o=i[1];return v.useEffect(function(){var a=setTimeout(function(){o(e)},n+1e3*Math.random());return function(){clearTimeout(a)}},[e,n]),s},igt=function(e){var n=e.setLive,r=e.onDurationChange,i=e.onCanPlay,s=e._element,o=e._updatePlaybackOffsetMs;return{setLive:n,onDurationChange:r,onCanPlay:i,_element:s,_updatePlaybackOffsetMs:o}},sgt=v.forwardRef(function(t,e){var n=t.src,r=t.hlsConfig,i=t.autoPlay,s=t.title,o=t.loop,a=t.muted,l=t.poster,c=t.objectFit,u=t.fullscreen,d=t.onPlaybackError,f=t.priority,h=t.allowCrossOriginCredentials,p=t.playRecording,m=Zt(igt),g=m.setLive,y=m.onCanPlay,x=m.onDurationChange,S=m._element,w=m._updatePlaybackOffsetMs,E=v.useCallback(function(){var j=er(et().mark(function D(O){return et().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:d==null||d(null),p||g(O);case 2:case"end":return R.stop()}},D)}));return function(D){return j.apply(this,arguments)}}(),[d,g,p]),T=v.useState(0),_=_r(T,2),I=_[0],A=_[1],L=wue(I,1e3*I);return v.useEffect(function(){if(S&&n){var j=function(R){var C,P,k,M,B;A(function(V){return V+1});var N=new Error((C=R==null||(P=R.response)===null||P===void 0||(k=P.data)===null||k===void 0||(M=k.toString)===null||M===void 0?void 0:M.call(k))!==null&&C!==void 0?C:(R==null||(B=R.response)===null||B===void 0?void 0:B.code)===401?IM:"Error with HLS.js");d==null||d(N)},D=Kpt(n==null?void 0:n.src,S,{onLive:E,onDuration:x,onCanPlay:y,onError:j,onPlaybackOffsetUpdated:w},De({autoplay:i,xhrSetup:function(R,C){R.withCredentials=!!h}},r)),O=D.destroy;return function(){O==null||O()}}},[i,r,x,y,S,n,E,d,h,L,w]),b.jsx("video",{className:me.media.video({size:u?"fullscreen":c}),loop:o,"aria-label":s??"Video player",role:"video",width:"100%",height:"100%",ref:e,"webkit-playsinline":"true",playsInline:!0,autoPlay:i,muted:a,poster:typeof l=="string"?l:void 0,preload:f?"auto":"metadata",crossOrigin:h?"use-credentials":"anonymous"})}),ogt=function(e){var n=e.canPlay;return{canPlay:n}},Eue=v.forwardRef(function(t,e){var n,r=t.autoPlay,i=t.title,s=t.loop,o=t.muted,a=t.poster,l=t.objectFit,c=t.priority,u=t.onPlaybackError,d=t.src,f=t.fullscreen,h=Zt(ogt),p=h.canPlay,m=v.useCallback(function(){var g=er(et().mark(function y(x){var S,w,E,T,_;return et().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(w=x.target,E=w==null?void 0:w.parentElement,T=(S=E==null?void 0:E.currentSrc)!==null&&S!==void 0?S:w==null?void 0:w.currentSrc,!T){A.next=22;break}return A.prev=4,A.next=7,fetch(T);case 7:if(_=A.sent,_.status!==404){A.next=13;break}return console.warn("Video not found"),A.abrupt("return",u==null?void 0:u(new Error(Eie)));case 13:if(_.status!==401){A.next=16;break}return console.warn("Unauthorized to view video"),A.abrupt("return",u==null?void 0:u(new Error(IM)));case 16:A.next=22;break;case 18:return A.prev=18,A.t0=A.catch(4),console.warn(A.t0),A.abrupt("return",u==null?void 0:u(new Error("Error fetching video URL")));case 22:return console.warn("Unknown error loading video"),A.abrupt("return",u==null?void 0:u(new Error("Unknown error loading video")));case 24:case"end":return A.stop()}},y,null,[[4,18]])}));return function(y){return g.apply(this,arguments)}}(),[u]);return v.useEffect(function(){p&&(u==null||u(null))},[p,u]),b.jsx("video",{className:me.media.video({size:f?"fullscreen":l}),loop:s,"aria-label":i??"Video player",role:"video",autoPlay:r,width:"100%",height:"100%",ref:e,"webkit-playsinline":"true",playsInline:!0,muted:o,poster:typeof a=="string"?a:void 0,onError:m,preload:c?"auto":"metadata",src:(n=d==null?void 0:d.src)!==null&&n!==void 0?n:void 0,children:"Your browser doesn't support the HTML5 <code>video</code> tag, or the video format."})});Eue.displayName="HtmlVideoPlayer";var agt=function(e){var n=e.metadata,r=e._element,i=e.setLive,s=e._updatePlaybackOffsetMs;return{metadata:n,_element:r,setLive:i,_updatePlaybackOffsetMs:s}},lgt=v.forwardRef(function(t,e){var n=t.src,r=t.autoPlay,i=t.title,s=t.loop,o=t.muted,a=t.poster,l=t.objectFit,c=t.fullscreen,u=t.onPlaybackError,d=t.priority,f=t.webrtcConfig,h=Zt(agt),p=h.metadata,m=h._element,g=h.setLive,y=h._updatePlaybackOffsetMs,x=v.useCallback(er(et().mark(function I(){return et().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:u==null||u(null),g(!0);case 2:case"end":return L.stop()}},I)})),[u,g]);v.useEffect(function(){p!=null&&p.bframes&&u(new Error(_ie))},[p,u]);var S=v.useState(0),w=_r(S,2),E=w[0],T=w[1],_=wue(E,1e3*E);return v.useEffect(function(){if(m&&n.src){var I=function(D){var O,$,R;T(function(P){return P+1});var C=new Error((O=D==null||($=D.message)===null||$===void 0||(R=$.toString)===null||R===void 0?void 0:R.call($))!==null&&O!==void 0?O:"Error with WebRTC");u==null||u(C)},A=$st(n==null?void 0:n.src,m,{onConnected:x,onError:I,onPlaybackOffsetUpdated:y},f),L=A.destroy;return function(){L==null||L()}}},[f,m,x,n,u,_]),b.jsx("video",{className:me.media.video({size:c?"fullscreen":l}),loop:s,"aria-label":i??"Video player",role:"video",width:"100%",height:"100%",ref:e,"webkit-playsinline":"true",playsInline:!0,autoPlay:r,muted:o,poster:typeof a=="string"?a:void 0,preload:d?"auto":"metadata"})}),cgt=function(e){var n=e.fullscreen;return{fullscreen:n}};function ugt(t,e){var n=null,r=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];n===null&&(n=setTimeout(function(){n=null,t.apply(void 0,a)},e))},i=function(){n&&(clearTimeout(n),n=null)};return{debouncedFn:r,cancel:i}}var dgt=v.forwardRef(function(t,e){var n=Zt(cgt),r=n.fullscreen,i=t.src,s=t.onPlaybackError,o=t.playbackError,a=t.lowLatency,l=a===void 0?!0:a,c=t.onPlaybackStatusUpdate,u=t.playbackStatusSelector,d=v.useMemo(function(){return[Gpt(),Lst()]},[]),f=_r(d,2),h=f[0],p=f[1],m=v.useMemo(function(){var O;return i==null||(O=i.filter(function($){return l==="force"&&i!==null&&i!==void 0&&i.some(function(R){return(R==null?void 0:R.type)==="webrtc"})?$.type==="webrtc":l?!0:$.type!=="webrtc"}))===null||O===void 0?void 0:O.map(function($){return $.type==="hls"&&!h?De(De({},$),{},{type:"video",mime:"application/vnd.apple.mpegurl"}):$})},[i,h,l]),g=v.useState(0),y=_r(g,2),x=y[0],S=y[1],w=v.useCallback(function(){S(function(O){return O+1})},[S]),E=v.useMemo(function(){return ugt(w,500*x)},[w,x]),T=E.debouncedFn,_=E.cancel,I=v.useRef(T),A=v.useRef(_);v.useEffect(function(){I.current=T,A.current=_},[T,_]);var L=v.useMemo(function(){var O,$;return(O=m==null?void 0:m[x%(($=m==null?void 0:m.length)!==null&&$!==void 0?$:0)])!==null&&O!==void 0?O:null},[m,x]);v.useEffect(function(){if((o==null?void 0:o.type)==="fallback"||(o==null?void 0:o.type)==="unknown"){var O;I==null||(O=I.current)===null||O===void 0||O.call(I)}else if(o===null){var $;A==null||($=A.current)===null||$===void 0||$.call(A)}},[o]),v.useEffect(function(){var O=(L==null?void 0:L.type)==="webrtc"&&!p||(L==null?void 0:L.type)==="hls"&&!h||(L==null?void 0:L.type)==="video"&&!Poe(L);if(O){var $;I==null||($=I.current)===null||$===void 0||$.call(I)}},[h,p,L]);var j=v.useContext(q_),D=v.useCallback(function(O){return u?u(O):O},[u]);return v.useEffect(function(){return j.subscribe(D,function(O,$){return c==null?void 0:c(cw(O),cw($))})},[c,D,j]),v.useEffect(function(){if(L){var O,$,R;j==null||(O=j.getState)===null||O===void 0||($=O.call(j))===null||$===void 0||(R=$._updateSource)===null||R===void 0||R.call($,L==null?void 0:L.src)}},[j,L]),v.useEffect(function(){var O=aUe(j,function(R){s==null||s(R),console.error("Not able to report player metrics",R)}),$=O.destroy;return $},[s,j]),(L==null?void 0:L.type)==="webrtc"?b.jsx(lgt,De(De({},t),{},{ref:e,src:L,fullscreen:r})):(L==null?void 0:L.type)==="hls"?b.jsx(sgt,De(De({},t),{},{ref:e,src:L,fullscreen:r})):b.jsx(Eue,De(De({},t),{},{ref:e,src:L,fullscreen:r}))}),fgt=v.memo(dgt),hgt=function(e){var n=v.useState(!1),r=_r(n,2),i=r[0],s=r[1];return v.useEffect(function(){if(typeof window<"u"&&e)if("IntersectionObserver"in window){var o=new IntersectionObserver(function(a){var l=_r(a,1),c=l[0];return s(!!(c!=null&&c.isIntersecting))});return o.observe(e),function(){o.disconnect()}}else s(!0)},[e]),i},pgt=function(e){var n,r=v.useState(!1),i=_r(r,2),s=i[0],o=i[1],a=v.useMemo(function(){var A,L,j,D;return typeof window<"u"&&(A=((L=window)===null||L===void 0||(j=L.screen)===null||j===void 0?void 0:j.availWidth)||((D=window)===null||D===void 0?void 0:D.innerWidth))!==null&&A!==void 0?A:null},[]),l=v.useMemo(function(){var A;return(A=e._isCurrentlyShown)!==null&&A!==void 0?A:s},[e._isCurrentlyShown,s]),c=ctt(De(De({},e),{},{_isCurrentlyShown:l}),{_screenWidth:a}),u=c.mediaElement,d=c.playerProps,f=c.mediaControllerProps,h=c.controlsContainerProps,p=c.source,m=c.props,g=m.children,y=m.controls,x=m.theme,S=m.title,w=m.poster,E=m.showTitle,T=m.aspectRatio,_=m.renderChildrenOutsideContainer,I=hgt(u);return v.useEffect(function(){o(I)},[I]),b.jsxs(tle,{element:u,opts:y,mediaProps:f,children:[b.jsxs(pue,{theme:x,aspectRatio:T,tabIndex:e.tabIndex,children:[p&&(p==null||(n=p[0])===null||n===void 0?void 0:n.type)==="audio"?b.jsx(Sue,De(De({},d),{},{src:p,allowCrossOriginCredentials:e.allowCrossOriginCredentials})):b.jsx(fgt,De(De({},d),{},{hlsConfig:e.hlsConfig,webrtcConfig:e.webrtcConfig,lowLatency:e.lowLatency,playRecording:e.playRecording,playbackStatusSelector:e.playbackStatusSelector,allowCrossOriginCredentials:e.allowCrossOriginCredentials,src:p})),!_&&v.isValidElement(g)?v.cloneElement(g,h):b.jsx(gue,De(De({},h),{},{poster:w&&b.jsx(Xmt,{content:w,title:S}),top:b.jsx(b.Fragment,{children:S&&E&&b.jsx(bue,{content:S})}),middle:b.jsx(Jmt,{}),left:b.jsxs(b.Fragment,{children:[b.jsx(Ymt,{}),b.jsx(rgt,{}),b.jsx(xue,{})]}),right:b.jsxs(b.Fragment,{children:[e.clipLength&&b.jsx(Wmt,{length:e.clipLength}),e.showPipButton&&b.jsx(yue,{}),b.jsx(vue,{})]})}))]}),_&&v.isValidElement(g)?g:b.jsx(b.Fragment,{})]})},mgt=v.memo,oT=mgt(pgt),ggt=function(e){var n=e.theme,r=e.children;return b.jsx(ele.Provider,{value:n??null,children:r})};function vgt(t){var e=t.children,n=t.client,r=t.theme,i=t.dehydratedState;return b.jsx(KJe,{client:n,dehydratedState:i,children:b.jsx(ggt,{theme:r,children:e})})}const _ue=({data:t})=>b.jsx(xgt,{children:b.jsx(Tue,{data:t})}),ygt=({keyName:t,value:e,level:n=0})=>{const[r,i]=v.useState(!1),s=typeof e=="object"&&e!==null;return b.jsxs(b.Fragment,{children:[b.jsxs(bgt,{level:n,isObject:s,onClick:()=>s&&i(!r),children:[t,": ",s?r?"":"":String(e)]}),b.jsx(Cr,{children:s&&r&&b.jsx(Sgt,{initial:{height:0},animate:{height:"auto"},exit:{height:0},children:b.jsx(Tue,{data:e,level:n+1})})})]})},Tue=({data:t,level:e=0})=>b.jsx(b.Fragment,{children:Object.keys(t).map(n=>b.jsx(ygt,{keyName:n,value:t[n],level:e},n))}),xgt=U.div`
  height: 300px;
  max-height: 100vh;
  overflow: auto;
`,bgt=U(ue.div)`
  margin-left: ${t=>t.level*20}px;
  padding: 10px;
  border-bottom: 1px solid #ccc;
  cursor: ${t=>t.isObject?"pointer":"default"};
`,Sgt=U(ue.div)`
  overflow: hidden;
`,wgt=U(ue.div)`
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  padding: 100px;
  box-sizing: border-box;
  background-color: #f4f4f4;
`,Egt=U(ue.div)`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  width: 100%;
  padding: 10px;
  background-color: #2c3e50;
  border-radius: 5px;
  color: white;

  @media (max-width: 600px) {
    flex-direction: column;
    align-items: center;
  }
`,hG=U.div`
  font-size: 1rem;
`,_gt=U.button`
  margin-top: 10px;
  background: #27ae60;
  color: white;
  border: none;
  border-radius: 5px;
  padding: 8px 16px;
  cursor: pointer;
`,Tgt=({playbackID:t})=>{const[e,n]=v.useState(!1),[r,i]=v.useState(null),[s,o]=v.useState(null);v.useEffect(()=>{t&&(a(),l())},[t]);const a=async()=>{const{viewership:c,error:u}=await cS.get.viewership(t);u&&console.log(u),c&&i(c)},l=async()=>{const{video:c,error:u}=await ZD.get.video(t);u&&console.error(u),c&&o(c)};return b.jsxs(wgt,{children:[b.jsx(oT,{style:{width:"100%",height:"auto"},title:"Title",playbackId:t}),b.jsx(Egt,{children:r&&b.jsxs(b.Fragment,{children:[b.jsxs(hG,{children:["Views: ",r.viewCount]}),b.jsxs(hG,{children:["Watch Time: ",r.playtimeMins," mins"]})]})}),b.jsx(_gt,{onClick:()=>n(!e),children:`${e?"Hide":"View"} Extended Data`}),b.jsx(Cr,{children:e&&b.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s&&b.jsx(_ue,{data:s})})})]})},Cgt=U(ue.div)`
width: 50%;
padding: 20px;
background-color: #f4f4f4;
border-radius: 8px;
box-sizing: border-box;
text-align: center;

@media (max-width: 768px) {
    width: 100%;
}
`,kgt=U.table`
width: 100%;
margin-bottom: 20px;

th,
td {
  padding-left: 4px;
  text-align: left;
  border-bottom: 1px solid #ddd;

  @media (max-width: 768px) {
    width: 50%;
}
}
`,Pgt=U(ue.div)`
border-top: 1px solid #ccc;
padding-top: 20px;
overflow: hidden;
`,Igt=U(ue.button)`
padding: 8px 16px;
margin-top: 10px;
margin-bottom: 10px;
cursor: pointer;
border: none;
background-color: #007bff;
color: white;
border-radius: 4px;
`,Agt=({stream:t})=>{const[e,n]=v.useState(!1);return b.jsxs(Cgt,{initial:{opacity:0},animate:{opacity:1},children:[b.jsx(kgt,{children:b.jsxs("tbody",{children:[b.jsxs("tr",{children:[b.jsx("th",{children:"Stream Name"}),b.jsx("td",{children:t==null?void 0:t.name})]}),b.jsxs("tr",{children:[b.jsx("th",{children:"Stream Status"}),b.jsx("td",{children:t!=null&&t.isActive?"Active":"Not Active"})]}),b.jsxs("tr",{children:[b.jsx("th",{children:"Stream Key"}),b.jsx("td",{children:t==null?void 0:t.streamKey})]}),b.jsxs("tr",{children:[b.jsx("th",{children:"PlaybackId"}),b.jsx("td",{children:t==null?void 0:t.playbackId})]})]})}),b.jsx(Igt,{onClick:()=>n(!e),children:e?"View Less":"View More"}),b.jsx(Cr,{children:e&&b.jsx(Pgt,{initial:{height:0},animate:{height:"300px"},exit:{height:0},children:b.jsx(_ue,{data:t})})})]})},Lgt=U(ue.div)`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
`,Rgt=U(ue.div)`
  background-color: #fff;
  border-radius: 12px;
  overflow: hidden;
  width: 80%;
  max-width: 500px;
  z-index: 1001;
`,Ogt=U(ue.button)`
  position: absolute;
  top: 10px;
  right: 10px;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 1002;
`,Dgt=({streamKey:t,webBroadcast:e})=>{const n=()=>{e.setIsWebBroadcast(!1)};return b.jsx(Cr,{children:e&&b.jsxs(Lgt,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[b.jsx(Ogt,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:n,children:"X"}),b.jsx(Rgt,{initial:{y:"-100vh"},animate:{y:0},exit:{y:"-100vh"},children:b.jsx(Umt,{streamKey:t,controls:{autohide:3e3},theme:{borderStyles:{containerBorderStyle:"hidden"},radii:{containerBorderRadius:"10px"}}})})]})})},Mgt=U(ue.div)`
  width: 100%;
  min-width: 300px;
  height: auto;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 100px;
  box-sizing: border-box;

  @media (max-width: 768px) {
    padding: 50px;
    padding-top: 100px;
  }
`,$gt=U(ue.button)`
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  background-color: #e74c3c;
  color: white;
  cursor: pointer;
  transition: background-color 0.3s ease;

  &:hover {
    background-color: #c0392b;
  }

  &:disabled {
    background-color: #ccc;
    cursor: not-allowed;
  }
`,Ngt=U(ue.div)`
  width: 100%;
`,Cue=({stream:t})=>{const[e,n]=v.useState(!1),r={isWebBroadcast:e,setIsWebBroadcast:n};return b.jsxs(Mgt,{children:[b.jsx(Ngt,{children:(t==null?void 0:t.playbackId)&&b.jsx(oT,{title:t==null?void 0:t.name,playbackId:t==null?void 0:t.playbackId,autoPlay:!0,muted:!0})}),(t==null?void 0:t.playbackId)&&b.jsx(Agt,{stream:t}),(t==null?void 0:t.streamKey)&&b.jsx($gt,{onClick:()=>n(!e),children:"Broadcast Stream"}),e&&(t==null?void 0:t.streamKey)&&b.jsx(Dgt,{streamKey:t.streamKey,webBroadcast:r})]})},Fgt=({playbackId:t})=>{const[e,n]=v.useState({});return v.useEffect(()=>{(async()=>{const{stream:i,error:s}=await ZD.get.stream(t);s&&console.error(s),i&&n(i)})()},[t]),b.jsx(b.Fragment,{children:e?b.jsx(Cue,{stream:e}):b.jsx(oT,{title:"Stream",playbackId:t,autoPlay:!0,muted:!0})})},jgt=U.div`
height: 100%;
width: 100%;
max-width: 400px;
margin: 0 auto; 
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;

${on} { 
  margin-top: 12px;
}
`,Bgt=U.div`
width: 100%;
`,Ugt=()=>{const{STATES:t,ACTIONS:e}=jn(),[n,r]=v.useState(""),{mutate:i,data:s,status:o}=Tot(n?{name:n}:null),a=v.useMemo(()=>o==="loading",[o]),{user:l}=t||{};v.useEffect(()=>{s!=null&&s.playbackId&&(console.log(s),c())},[s]);const c=async()=>{if(!(l!=null&&l.uid))return!1;const{result:u,error:d}=await ZD.create.stream(s,l==null?void 0:l.uid);if(d&&(console.error(d),e==null||e.logNotification("error",d.message)),u)return e==null||e.logNotification("","Stream Created"),u;e==null||e.logNotification("alert","Could Not Save Stream")};return b.jsxs(jgt,{initial:{opacity:0},animate:{opacity:1},children:[!(s!=null&&s.playbackId)&&b.jsxs(_t,{children:[b.jsx(Ui,{children:"Stream name"}),b.jsx(qt,{type:"text",onChange:u=>r(u.target.value)})]}),b.jsx(Bgt,{children:!s&&b.jsx(on,{onClick:()=>{i==null||i()},disabled:a||!i,children:"Create Stream"})}),b.jsx(Cr,{children:(s==null?void 0:s.playbackId)&&(s==null?void 0:s.streamKey)&&b.jsx(Cue,{stream:s})})]})},Vgt=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Bh(t,e,n){const r=zgt(t),{webkitRelativePath:i}=t,s=typeof e=="string"?e:typeof i=="string"&&i.length>0?i:`./${t.name}`;return typeof r.path!="string"&&pG(r,"path",s),n!==void 0&&Object.defineProperty(r,"handle",{value:n,writable:!1,configurable:!1,enumerable:!0}),pG(r,"relativePath",s),r}function zgt(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),i=Vgt.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}function pG(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const Hgt=[".DS_Store","Thumbs.db"];function Wgt(t){return td(this,void 0,void 0,function*(){return Kw(t)&&Ggt(t.dataTransfer)?Qgt(t.dataTransfer,t.type):Kgt(t)?qgt(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?Ygt(t):[]})}function Ggt(t){return Kw(t)}function Kgt(t){return Kw(t)&&Kw(t.target)}function Kw(t){return typeof t=="object"&&t!==null}function qgt(t){return GR(t.target.files).map(e=>Bh(e))}function Ygt(t){return td(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>Bh(n))})}function Qgt(t,e){return td(this,void 0,void 0,function*(){if(t.items){const n=GR(t.items).filter(i=>i.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(Xgt));return mG(kue(r))}return mG(GR(t.files).map(n=>Bh(n)))})}function mG(t){return t.filter(e=>Hgt.indexOf(e.name)===-1)}function GR(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function Xgt(t){if(typeof t.webkitGetAsEntry!="function")return gG(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?Pue(e):gG(t,e)}function kue(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?kue(n):[n]],[])}function gG(t,e){return td(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const s=yield t.getAsFileSystemHandle();if(s===null)throw new Error(`${t} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,Bh(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return Bh(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function Zgt(t){return td(this,void 0,void 0,function*(){return t.isDirectory?Pue(t):Jgt(t)})}function Pue(t){const e=t.createReader();return new Promise((n,r)=>{const i=[];function s(){e.readEntries(o=>td(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(Zgt));i.push(a),s()}else try{const a=yield Promise.all(i);n(a)}catch(a){r(a)}}),o=>{r(o)})}s()})}function Jgt(t){return td(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const i=Bh(r,t.fullPath);e(i)},r=>{n(r)})})})}var aP=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function vG(t){return n0t(t)||t0t(t)||Aue(t)||e0t()}function e0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function n0t(t){if(Array.isArray(t))return KR(t)}function yG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xG(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yG(Object(n),!0).forEach(function(r){Iue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Iue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U0(t,e){return s0t(t)||i0t(t,e)||Aue(t,e)||r0t()}function r0t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aue(t,e){if(t){if(typeof t=="string")return KR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KR(t,e)}}function KR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i0t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function s0t(t){if(Array.isArray(t))return t}var o0t=typeof aP=="function"?aP:aP.default,a0t="file-invalid-type",l0t="file-too-large",c0t="file-too-small",u0t="too-many-files",d0t=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:a0t,message:"File type must be ".concat(r)}},bG=function(e){return{code:l0t,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},SG=function(e){return{code:c0t,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},f0t={code:u0t,message:"Too many files"};function Lue(t,e){var n=t.type==="application/x-moz-file"||o0t(t,e);return[n,n?null:d0t(e)]}function Rue(t,e,n){if(qc(t.size))if(qc(e)&&qc(n)){if(t.size>n)return[!1,bG(n)];if(t.size<e)return[!1,SG(e)]}else{if(qc(e)&&t.size<e)return[!1,SG(e)];if(qc(n)&&t.size>n)return[!1,bG(n)]}return[!0,null]}function qc(t){return t!=null}function h0t(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles,a=t.validator;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(l){var c=Lue(l,n),u=U0(c,1),d=u[0],f=Rue(l,r,i),h=U0(f,1),p=h[0],m=a?a(l):null;return d&&p&&!m})}function qw(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function K1(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function wG(t){t.preventDefault()}function p0t(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function m0t(t){return t.indexOf("Edge/")!==-1}function g0t(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return p0t(t)||m0t(t)}function Ks(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!qw(r)&&a&&a.apply(void 0,[r].concat(s)),qw(r)})}}function v0t(){return"showOpenFilePicker"in window}function y0t(t){if(qc(t)){var e=Object.entries(t).filter(function(n){var r=U0(n,2),i=r[0],s=r[1],o=!0;return Oue(i)||(console.warn('Skipped "'.concat(i,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(Due))&&(console.warn('Skipped "'.concat(i,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var i=U0(r,2),s=i[0],o=i[1];return xG(xG({},n),{},Iue({},s,o))},{});return[{description:"Files",accept:e}]}return t}function x0t(t){if(qc(t))return Object.entries(t).reduce(function(e,n){var r=U0(n,2),i=r[0],s=r[1];return[].concat(vG(e),[i],vG(s))},[]).filter(function(e){return Oue(e)||Due(e)}).join(",")}function b0t(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function S0t(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function Oue(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function Due(t){return/^.*\.[\w]+$/.test(t)}var w0t=["children"],E0t=["open"],_0t=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],T0t=["refKey","onChange","onClick"];function C0t(t){return I0t(t)||P0t(t)||Mue(t)||k0t()}function k0t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P0t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I0t(t){if(Array.isArray(t))return qR(t)}function lP(t,e){return R0t(t)||L0t(t,e)||Mue(t,e)||A0t()}function A0t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mue(t,e){if(t){if(typeof t=="string")return qR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qR(t,e)}}function qR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L0t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function R0t(t){if(Array.isArray(t))return t}function EG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EG(Object(n),!0).forEach(function(r){YR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YR(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yw(t,e){if(t==null)return{};var n=O0t(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function O0t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var v5=v.forwardRef(function(t,e){var n=t.children,r=Yw(t,w0t),i=Nue(r),s=i.open,o=Yw(i,E0t);return v.useImperativeHandle(e,function(){return{open:s}},[s]),te.createElement(v.Fragment,null,n(zt(zt({},o),{},{open:s})))});v5.displayName="Dropzone";var $ue={disabled:!1,getFilesFromEvent:Wgt,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};v5.defaultProps=$ue;v5.propTypes={children:ie.func,accept:ie.objectOf(ie.arrayOf(ie.string)),multiple:ie.bool,preventDropOnDocument:ie.bool,noClick:ie.bool,noKeyboard:ie.bool,noDrag:ie.bool,noDragEventsBubbling:ie.bool,minSize:ie.number,maxSize:ie.number,maxFiles:ie.number,disabled:ie.bool,getFilesFromEvent:ie.func,onFileDialogCancel:ie.func,onFileDialogOpen:ie.func,useFsAccessApi:ie.bool,autoFocus:ie.bool,onDragEnter:ie.func,onDragLeave:ie.func,onDragOver:ie.func,onDrop:ie.func,onDropAccepted:ie.func,onDropRejected:ie.func,onError:ie.func,validator:ie.func};var QR={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Nue(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=zt(zt({},$ue),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,u=e.onDragLeave,d=e.onDragOver,f=e.onDrop,h=e.onDropAccepted,p=e.onDropRejected,m=e.onFileDialogCancel,g=e.onFileDialogOpen,y=e.useFsAccessApi,x=e.autoFocus,S=e.preventDropOnDocument,w=e.noClick,E=e.noKeyboard,T=e.noDrag,_=e.noDragEventsBubbling,I=e.onError,A=e.validator,L=v.useMemo(function(){return x0t(n)},[n]),j=v.useMemo(function(){return y0t(n)},[n]),D=v.useMemo(function(){return typeof g=="function"?g:_G},[g]),O=v.useMemo(function(){return typeof m=="function"?m:_G},[m]),$=v.useRef(null),R=v.useRef(null),C=v.useReducer(D0t,QR),P=lP(C,2),k=P[0],M=P[1],B=k.isFocused,N=k.isFileDialogActive,V=v.useRef(typeof window<"u"&&window.isSecureContext&&y&&v0t()),H=function(){!V.current&&N&&setTimeout(function(){if(R.current){var pe=R.current.files;pe.length||(M({type:"closeDialog"}),O())}},300)};v.useEffect(function(){return window.addEventListener("focus",H,!1),function(){window.removeEventListener("focus",H,!1)}},[R,N,O,V]);var W=v.useRef([]),z=function(pe){$.current&&$.current.contains(pe.target)||(pe.preventDefault(),W.current=[])};v.useEffect(function(){return S&&(document.addEventListener("dragover",wG,!1),document.addEventListener("drop",z,!1)),function(){S&&(document.removeEventListener("dragover",wG),document.removeEventListener("drop",z))}},[$,S]),v.useEffect(function(){return!r&&x&&$.current&&$.current.focus(),function(){}},[$,x,r]);var G=v.useCallback(function(se){I?I(se):console.error(se)},[I]),K=v.useCallback(function(se){se.preventDefault(),se.persist(),ot(se),W.current=[].concat(C0t(W.current),[se.target]),K1(se)&&Promise.resolve(i(se)).then(function(pe){if(!(qw(se)&&!_)){var it=pe.length,bt=it>0&&h0t({files:pe,accept:L,minSize:o,maxSize:s,multiple:a,maxFiles:l,validator:A}),Pn=it>0&&!bt;M({isDragAccept:bt,isDragReject:Pn,isDragActive:!0,type:"setDraggedFiles"}),c&&c(se)}}).catch(function(pe){return G(pe)})},[i,c,G,_,L,o,s,a,l,A]),Q=v.useCallback(function(se){se.preventDefault(),se.persist(),ot(se);var pe=K1(se);if(pe&&se.dataTransfer)try{se.dataTransfer.dropEffect="copy"}catch{}return pe&&d&&d(se),!1},[d,_]),ne=v.useCallback(function(se){se.preventDefault(),se.persist(),ot(se);var pe=W.current.filter(function(bt){return $.current&&$.current.contains(bt)}),it=pe.indexOf(se.target);it!==-1&&pe.splice(it,1),W.current=pe,!(pe.length>0)&&(M({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),K1(se)&&u&&u(se))},[$,u,_]),Z=v.useCallback(function(se,pe){var it=[],bt=[];se.forEach(function(Pn){var Zr=Lue(Pn,L),Ei=lP(Zr,2),Or=Ei[0],fd=Ei[1],Fa=Rue(Pn,o,s),bc=lP(Fa,2),ja=bc[0],hd=bc[1],Ba=A?A(Pn):null;if(Or&&ja&&!Ba)it.push(Pn);else{var pd=[fd,hd];Ba&&(pd=pd.concat(Ba)),bt.push({file:Pn,errors:pd.filter(function(md){return md})})}}),(!a&&it.length>1||a&&l>=1&&it.length>l)&&(it.forEach(function(Pn){bt.push({file:Pn,errors:[f0t]})}),it.splice(0)),M({acceptedFiles:it,fileRejections:bt,isDragReject:bt.length>0,type:"setFiles"}),f&&f(it,bt,pe),bt.length>0&&p&&p(bt,pe),it.length>0&&h&&h(it,pe)},[M,a,L,o,s,l,f,h,p,A]),re=v.useCallback(function(se){se.preventDefault(),se.persist(),ot(se),W.current=[],K1(se)&&Promise.resolve(i(se)).then(function(pe){qw(se)&&!_||Z(pe,se)}).catch(function(pe){return G(pe)}),M({type:"reset"})},[i,Z,G,_]),de=v.useCallback(function(){if(V.current){M({type:"openDialog"}),D();var se={multiple:a,types:j};window.showOpenFilePicker(se).then(function(pe){return i(pe)}).then(function(pe){Z(pe,null),M({type:"closeDialog"})}).catch(function(pe){b0t(pe)?(O(pe),M({type:"closeDialog"})):S0t(pe)?(V.current=!1,R.current?(R.current.value=null,R.current.click()):G(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):G(pe)});return}R.current&&(M({type:"openDialog"}),D(),R.current.value=null,R.current.click())},[M,D,O,y,Z,G,j,a]),Ee=v.useCallback(function(se){!$.current||!$.current.isEqualNode(se.target)||(se.key===" "||se.key==="Enter"||se.keyCode===32||se.keyCode===13)&&(se.preventDefault(),de())},[$,de]),ke=v.useCallback(function(){M({type:"focus"})},[]),_e=v.useCallback(function(){M({type:"blur"})},[]),Te=v.useCallback(function(){w||(g0t()?setTimeout(de,0):de())},[w,de]),Oe=function(pe){return r?null:pe},Qe=function(pe){return E?null:Oe(pe)},Ct=function(pe){return T?null:Oe(pe)},ot=function(pe){_&&pe.stopPropagation()},Sn=v.useMemo(function(){return function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=se.refKey,it=pe===void 0?"ref":pe,bt=se.role,Pn=se.onKeyDown,Zr=se.onFocus,Ei=se.onBlur,Or=se.onClick,fd=se.onDragEnter,Fa=se.onDragOver,bc=se.onDragLeave,ja=se.onDrop,hd=Yw(se,_0t);return zt(zt(YR({onKeyDown:Qe(Ks(Pn,Ee)),onFocus:Qe(Ks(Zr,ke)),onBlur:Qe(Ks(Ei,_e)),onClick:Oe(Ks(Or,Te)),onDragEnter:Ct(Ks(fd,K)),onDragOver:Ct(Ks(Fa,Q)),onDragLeave:Ct(Ks(bc,ne)),onDrop:Ct(Ks(ja,re)),role:typeof bt=="string"&&bt!==""?bt:"presentation"},it,$),!r&&!E?{tabIndex:0}:{}),hd)}},[$,Ee,ke,_e,Te,K,Q,ne,re,E,T,r]),Rr=v.useCallback(function(se){se.stopPropagation()},[]),Ji=v.useMemo(function(){return function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=se.refKey,it=pe===void 0?"ref":pe,bt=se.onChange,Pn=se.onClick,Zr=Yw(se,T0t),Ei=YR({accept:L,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Oe(Ks(bt,re)),onClick:Oe(Ks(Pn,Rr)),tabIndex:-1},it,R);return zt(zt({},Ei),Zr)}},[R,n,a,re,r]);return zt(zt({},k),{},{isFocused:B&&!r,getRootProps:Sn,getInputProps:Ji,rootRef:$,inputRef:R,open:Oe(de)})}function D0t(t,e){switch(e.type){case"focus":return zt(zt({},t),{},{isFocused:!0});case"blur":return zt(zt({},t),{},{isFocused:!1});case"openDialog":return zt(zt({},QR),{},{isFileDialogActive:!0});case"closeDialog":return zt(zt({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return zt(zt({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return zt(zt({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return zt({},QR);default:return t}}function _G(){}function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function TG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$0t(r.key),r)}}function M0t(t,e,n){return e&&TG(t.prototype,e),n&&TG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $0t(t){var e=N0t(t,"string");return Uh(e)=="symbol"?e:e+""}function N0t(t,e){if(Uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j0t(t,e,n){return e=z0(e),B0t(t,y5()?Reflect.construct(e,n||[],z0(t).constructor):e.apply(t,n))}function B0t(t,e){if(e&&(Uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U0t(t)}function U0t(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V0t(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V0(t,e)}function XR(t){var e=typeof Map=="function"?new Map:void 0;return XR=function(r){if(r===null||!H0t(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return z0t(r,arguments,z0(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),V0(i,r)},XR(t)}function z0t(t,e,n){if(y5())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&V0(i,n.prototype),i}function y5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y5=function(){return!!t})()}function H0t(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function V0(t,e){return V0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V0(t,e)}function z0(t){return z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z0(t)}var q1=function(t){function e(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(F0t(this,e),r=j0t(this,e,[n]),r.originalRequest=s,r.originalResponse=o,r.causingError=i,i!=null&&(n+=", caused by ".concat(i.toString())),s!=null){var a=s.getHeader("X-Request-ID")||"n/a",l=s.getMethod(),c=s.getURL(),u=o?o.getStatus():"n/a",d=o?o.getBody()||"":"n/a";n+=", originated from request (method: ".concat(l,", url: ").concat(c,", response code: ").concat(u,", response text: ").concat(d,", request id: ").concat(a,")")}return r.message=n,r}return V0t(e,t),M0t(e)}(XR(Error));function H0(t){"@babel/helpers - typeof";return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H0(t)}function W0t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K0t(r.key),r)}}function G0t(t,e,n){return e&&CG(t.prototype,e),n&&CG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K0t(t){var e=q0t(t,"string");return H0(e)=="symbol"?e:e+""}function q0t(t,e){if(H0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(H0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Y0t=function(){function t(){W0t(this,t)}return G0t(t,[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(n){return Promise.resolve([])}},{key:"removeUpload",value:function(n){return Promise.resolve()}},{key:"addUpload",value:function(n,r){return Promise.resolve(null)}}])}();function Q0t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t==="x"?e:e&3|8;return n.toString(16)})}function ZR(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ZR=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(C,P,k){C[P]=k.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(C,P,k){return Object.defineProperty(C,P,{value:k,enumerable:!0,configurable:!0,writable:!0}),C[P]}try{c({},"")}catch{c=function(k,M,B){return k[M]=B}}function u(C,P,k,M){var B=P&&P.prototype instanceof y?P:y,N=Object.create(B.prototype),V=new $(M||[]);return i(N,"_invoke",{value:L(C,k,V)}),N}function d(C,P,k){try{return{type:"normal",arg:C.call(P,k)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function y(){}function x(){}function S(){}var w={};c(w,o,function(){return this});var E=Object.getPrototypeOf,T=E&&E(E(R([])));T&&T!==n&&r.call(T,o)&&(w=T);var _=S.prototype=y.prototype=Object.create(w);function I(C){["next","throw","return"].forEach(function(P){c(C,P,function(k){return this._invoke(P,k)})})}function A(C,P){function k(B,N,V,H){var W=d(C[B],C,N);if(W.type!=="throw"){var z=W.arg,G=z.value;return G&&Wu(G)=="object"&&r.call(G,"__await")?P.resolve(G.__await).then(function(K){k("next",K,V,H)},function(K){k("throw",K,V,H)}):P.resolve(G).then(function(K){z.value=K,V(z)},function(K){return k("throw",K,V,H)})}H(W.arg)}var M;i(this,"_invoke",{value:function(N,V){function H(){return new P(function(W,z){k(N,V,W,z)})}return M=M?M.then(H,H):H()}})}function L(C,P,k){var M=f;return function(B,N){if(M===p)throw Error("Generator is already running");if(M===m){if(B==="throw")throw N;return{value:t,done:!0}}for(k.method=B,k.arg=N;;){var V=k.delegate;if(V){var H=j(V,k);if(H){if(H===g)continue;return H}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(M===f)throw M=m,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);M=p;var W=d(C,P,k);if(W.type==="normal"){if(M=k.done?m:h,W.arg===g)continue;return{value:W.arg,done:k.done}}W.type==="throw"&&(M=m,k.method="throw",k.arg=W.arg)}}}function j(C,P){var k=P.method,M=C.iterator[k];if(M===t)return P.delegate=null,k==="throw"&&C.iterator.return&&(P.method="return",P.arg=t,j(C,P),P.method==="throw")||k!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+k+"' method")),g;var B=d(M,C.iterator,P.arg);if(B.type==="throw")return P.method="throw",P.arg=B.arg,P.delegate=null,g;var N=B.arg;return N?N.done?(P[C.resultName]=N.value,P.next=C.nextLoc,P.method!=="return"&&(P.method="next",P.arg=t),P.delegate=null,g):N:(P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,g)}function D(C){var P={tryLoc:C[0]};1 in C&&(P.catchLoc=C[1]),2 in C&&(P.finallyLoc=C[2],P.afterLoc=C[3]),this.tryEntries.push(P)}function O(C){var P=C.completion||{};P.type="normal",delete P.arg,C.completion=P}function $(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(D,this),this.reset(!0)}function R(C){if(C||C===""){var P=C[o];if(P)return P.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var k=-1,M=function B(){for(;++k<C.length;)if(r.call(C,k))return B.value=C[k],B.done=!1,B;return B.value=t,B.done=!0,B};return M.next=M}}throw new TypeError(Wu(C)+" is not iterable")}return x.prototype=S,i(_,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:x,configurable:!0}),x.displayName=c(S,l,"GeneratorFunction"),e.isGeneratorFunction=function(C){var P=typeof C=="function"&&C.constructor;return!!P&&(P===x||(P.displayName||P.name)==="GeneratorFunction")},e.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,S):(C.__proto__=S,c(C,l,"GeneratorFunction")),C.prototype=Object.create(_),C},e.awrap=function(C){return{__await:C}},I(A.prototype),c(A.prototype,a,function(){return this}),e.AsyncIterator=A,e.async=function(C,P,k,M,B){B===void 0&&(B=Promise);var N=new A(u(C,P,k,M),B);return e.isGeneratorFunction(P)?N:N.next().then(function(V){return V.done?V.value:N.next()})},I(_),c(_,l,"Generator"),c(_,o,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),e.keys=function(C){var P=Object(C),k=[];for(var M in P)k.push(M);return k.reverse(),function B(){for(;k.length;){var N=k.pop();if(N in P)return B.value=N,B.done=!1,B}return B.done=!0,B}},e.values=R,$.prototype={constructor:$,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!P)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var P=this.tryEntries[0].completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var k=this;function M(z,G){return V.type="throw",V.arg=P,k.next=z,G&&(k.method="next",k.arg=t),!!G}for(var B=this.tryEntries.length-1;B>=0;--B){var N=this.tryEntries[B],V=N.completion;if(N.tryLoc==="root")return M("end");if(N.tryLoc<=this.prev){var H=r.call(N,"catchLoc"),W=r.call(N,"finallyLoc");if(H&&W){if(this.prev<N.catchLoc)return M(N.catchLoc,!0);if(this.prev<N.finallyLoc)return M(N.finallyLoc)}else if(H){if(this.prev<N.catchLoc)return M(N.catchLoc,!0)}else{if(!W)throw Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return M(N.finallyLoc)}}}},abrupt:function(P,k){for(var M=this.tryEntries.length-1;M>=0;--M){var B=this.tryEntries[M];if(B.tryLoc<=this.prev&&r.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var N=B;break}}N&&(P==="break"||P==="continue")&&N.tryLoc<=k&&k<=N.finallyLoc&&(N=null);var V=N?N.completion:{};return V.type=P,V.arg=k,N?(this.method="next",this.next=N.finallyLoc,g):this.complete(V)},complete:function(P,k){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&k&&(this.next=k),g},finish:function(P){for(var k=this.tryEntries.length-1;k>=0;--k){var M=this.tryEntries[k];if(M.finallyLoc===P)return this.complete(M.completion,M.afterLoc),O(M),g}},catch:function(P){for(var k=this.tryEntries.length-1;k>=0;--k){var M=this.tryEntries[k];if(M.tryLoc===P){var B=M.completion;if(B.type==="throw"){var N=B.arg;O(M)}return N}}throw Error("illegal catch attempt")},delegateYield:function(P,k,M){return this.delegate={iterator:R(P),resultName:k,nextLoc:M},this.method==="next"&&(this.arg=t),g}},e}function kG(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){n(c);return}a.done?e(l):Promise.resolve(l).then(r,i)}function X0t(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){kG(s,r,i,o,a,"next",l)}function a(l){kG(s,r,i,o,a,"throw",l)}o(void 0)})}}function Fue(t,e){return evt(t)||J0t(t,e)||jue(t,e)||Z0t()}function Z0t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J0t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function evt(t){if(Array.isArray(t))return t}function Wu(t){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wu(t)}function tvt(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=jue(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}function jue(t,e){if(t){if(typeof t=="string")return PG(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PG(t,e)}}function PG(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ud(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IG(Object(n),!0).forEach(function(r){nvt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nvt(t,e,n){return e=Bue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rvt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bue(r.key),r)}}function ivt(t,e,n){return e&&AG(t.prototype,e),n&&AG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bue(t){var e=svt(t,"string");return Wu(e)=="symbol"?e:e+""}function svt(t,e){if(Wu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cb="tus-v1",ub="ietf-draft-03",Om="ietf-draft-05",ovt={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:Uue,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:cb},Qw=function(){function t(e,n){rvt(this,t),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return ivt(t,[{key:"findPreviousUploads",value:function(){var n=this;return this.options.fingerprint(this.file,this.options).then(function(r){return n._urlStorage.findUploadsByFingerprint(r)})}},{key:"resumeFromPreviousUpload",value:function(n){this.url=n.uploadUrl||null,this._parallelUploadUrls=n.parallelUploadUrls||null,this._urlStorageKey=n.urlStorageKey}},{key:"start",value:function(){var n=this,r=this.file;if(!r){this._emitError(new Error("tus: no file or stream to upload provided"));return}if(![cb,ub,Om].includes(this.options.protocol)){this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));return}var i=this.options.retryDelays;if(i!=null&&Object.prototype.toString.call(i)!=="[object Array]"){this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var s=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];s<o.length;s++){var a=o[s];if(this.options[a]){this._emitError(new Error("tus: cannot use the ".concat(a," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(r,this.options).then(function(l){return n._fingerprint=l,n._source?n._source:n.options.fileReader.openFile(r,n.options.chunkSize)}).then(function(l){if(n._source=l,n.options.uploadLengthDeferred)n._size=null;else if(n.options.uploadSize!=null){if(n._size=Number(n.options.uploadSize),Number.isNaN(n._size)){n._emitError(new Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(n._size=n._source.size,n._size==null){n._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}n.options.parallelUploads>1||n._parallelUploadUrls!=null?n._startParallelUpload():n._startSingleUpload()}).catch(function(l){n._emitError(l)})}},{key:"_startParallelUpload",value:function(){var n,r=this,i=this._size,s=0;this._parallelUploads=[];var o=this._parallelUploadUrls!=null?this._parallelUploadUrls.length:this.options.parallelUploads,a=(n=this.options.parallelUploadBoundaries)!==null&&n!==void 0?n:lvt(this._source.size,o);this._parallelUploadUrls&&a.forEach(function(u,d){u.uploadUrl=r._parallelUploadUrls[d]||null}),this._parallelUploadUrls=new Array(a.length);var l=a.map(function(u,d){var f=0;return r._source.slice(u.start,u.end).then(function(h){var p=h.value;return new Promise(function(m,g){var y=Ud(Ud({},r.options),{},{uploadUrl:u.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:r.options.metadataForPartialUploads,headers:Ud(Ud({},r.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:m,onError:g,onProgress:function(w){s=s-f+w,f=w,r._emitProgress(s,i)},onUploadUrlAvailable:function(){r._parallelUploadUrls[d]=x.url,r._parallelUploadUrls.filter(function(w){return!!w}).length===a.length&&r._saveUploadInUrlStorage()}}),x=new t(p,y);x.start(),r._parallelUploads.push(x)})})}),c;Promise.all(l).then(function(){c=r._openRequest("POST",r.options.endpoint),c.setHeader("Upload-Concat","final;".concat(r._parallelUploadUrls.join(" ")));var u=LG(r.options.metadata);return u!==""&&c.setHeader("Upload-Metadata",u),r._sendRequest(c,null)}).then(function(u){if(!Kd(u.getStatus(),200)){r._emitHttpError(c,u,"tus: unexpected response while creating upload");return}var d=u.getHeader("Location");if(d==null){r._emitHttpError(c,u,"tus: invalid or missing Location header");return}r.url=MG(r.options.endpoint,d),"Created upload at ".concat(r.url),r._emitSuccess(u)}).catch(function(u){r._emitError(u)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,this.url!=null){"Resuming upload from previous URL: ".concat(this.url),this._resumeUpload();return}if(this.options.uploadUrl!=null){"Resuming upload from provided URL: ".concat(this.options.uploadUrl),this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(n){var r=this;if(this._parallelUploads!=null){var i=tvt(this._parallelUploads),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;o.abort(n)}}catch(a){i.e(a)}finally{i.f()}}return this._req!==null&&this._req.abort(),this._aborted=!0,this._retryTimeout!=null&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),!n||this.url==null?Promise.resolve():t.terminate(this.url,this.options).then(function(){return r._removeFromUrlStorage()})}},{key:"_emitHttpError",value:function(n,r,i,s){this._emitError(new q1(i,s,n,r))}},{key:"_emitError",value:function(n){var r=this;if(!this._aborted){if(this.options.retryDelays!=null){var i=this._offset!=null&&this._offset>this._offsetBeforeRetry;if(i&&(this._retryAttempt=0),DG(n,this._retryAttempt,this.options)){var s=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){r.start()},s);return}}if(typeof this.options.onError=="function")this.options.onError(n);else throw n}}},{key:"_emitSuccess",value:function(n){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),typeof this.options.onSuccess=="function"&&this.options.onSuccess({lastResponse:n})}},{key:"_emitProgress",value:function(n,r){typeof this.options.onProgress=="function"&&this.options.onProgress(n,r)}},{key:"_emitChunkComplete",value:function(n,r,i){typeof this.options.onChunkComplete=="function"&&this.options.onChunkComplete(n,r,i)}},{key:"_createUpload",value:function(){var n=this;if(!this.options.endpoint){this._emitError(new Error("tus: unable to create upload because no endpoint is provided"));return}var r=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?r.setHeader("Upload-Defer-Length","1"):r.setHeader("Upload-Length","".concat(this._size));var i=LG(this.options.metadata);i!==""&&r.setHeader("Upload-Metadata",i);var s;this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,s=this._addChunkToRequest(r)):((this.options.protocol===ub||this.options.protocol===Om)&&r.setHeader("Upload-Complete","?0"),s=this._sendRequest(r,null)),s.then(function(o){if(!Kd(o.getStatus(),200)){n._emitHttpError(r,o,"tus: unexpected response while creating upload");return}var a=o.getHeader("Location");if(a==null){n._emitHttpError(r,o,"tus: invalid or missing Location header");return}if(n.url=MG(n.options.endpoint,a),"Created upload at ".concat(n.url),typeof n.options.onUploadUrlAvailable=="function"&&n.options.onUploadUrlAvailable(),n._size===0){n._emitSuccess(o),n._source.close();return}n._saveUploadInUrlStorage().then(function(){n.options.uploadDataDuringCreation?n._handleUploadResponse(r,o):(n._offset=0,n._performUpload())})}).catch(function(o){n._emitHttpError(r,null,"tus: failed to create upload",o)})}},{key:"_resumeUpload",value:function(){var n=this,r=this._openRequest("HEAD",this.url),i=this._sendRequest(r,null);i.then(function(s){var o=s.getStatus();if(!Kd(o,200)){if(o===423){n._emitHttpError(r,s,"tus: upload is currently locked; retry later");return}if(Kd(o,400)&&n._removeFromUrlStorage(),!n.options.endpoint){n._emitHttpError(r,s,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}n.url=null,n._createUpload();return}var a=Number.parseInt(s.getHeader("Upload-Offset"),10);if(Number.isNaN(a)){n._emitHttpError(r,s,"tus: invalid or missing offset value");return}var l=Number.parseInt(s.getHeader("Upload-Length"),10);if(Number.isNaN(l)&&!n.options.uploadLengthDeferred&&n.options.protocol===cb){n._emitHttpError(r,s,"tus: invalid or missing length value");return}typeof n.options.onUploadUrlAvailable=="function"&&n.options.onUploadUrlAvailable(),n._saveUploadInUrlStorage().then(function(){if(a===l){n._emitProgress(l,l),n._emitSuccess(s);return}n._offset=a,n._performUpload()})}).catch(function(s){n._emitHttpError(r,null,"tus: failed to resume upload",s)})}},{key:"_performUpload",value:function(){var n=this;if(!this._aborted){var r;this.options.overridePatchMethod?(r=this._openRequest("POST",this.url),r.setHeader("X-HTTP-Method-Override","PATCH")):r=this._openRequest("PATCH",this.url),r.setHeader("Upload-Offset","".concat(this._offset));var i=this._addChunkToRequest(r);i.then(function(s){if(!Kd(s.getStatus(),200)){n._emitHttpError(r,s,"tus: unexpected response while uploading chunk");return}n._handleUploadResponse(r,s)}).catch(function(s){n._aborted||n._emitHttpError(r,null,"tus: failed to upload chunk at offset ".concat(n._offset),s)})}}},{key:"_addChunkToRequest",value:function(n){var r=this,i=this._offset,s=this._offset+this.options.chunkSize;return n.setProgressHandler(function(o){r._emitProgress(i+o,r._size)}),this.options.protocol===cb?n.setHeader("Content-Type","application/offset+octet-stream"):this.options.protocol===Om&&n.setHeader("Content-Type","application/partial-upload"),(s===Number.POSITIVE_INFINITY||s>this._size)&&!this.options.uploadLengthDeferred&&(s=this._size),this._source.slice(i,s).then(function(o){var a=o.value,l=o.done,c=a!=null&&a.size?a.size:0;r.options.uploadLengthDeferred&&l&&(r._size=r._offset+c,n.setHeader("Upload-Length","".concat(r._size)));var u=r._offset+c;return!r.options.uploadLengthDeferred&&l&&u!==r._size?Promise.reject(new Error("upload was configured with a size of ".concat(r._size," bytes, but the source is done after ").concat(u," bytes"))):a===null?r._sendRequest(n):((r.options.protocol===ub||r.options.protocol===Om)&&n.setHeader("Upload-Complete",l?"?1":"?0"),r._emitProgress(r._offset,r._size),r._sendRequest(n,a))})}},{key:"_handleUploadResponse",value:function(n,r){var i=Number.parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(i)){this._emitHttpError(n,r,"tus: invalid or missing offset value");return}if(this._emitProgress(i,this._size),this._emitChunkComplete(i-this._offset,i,this._size),this._offset=i,i===this._size){this._emitSuccess(r),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(n,r){var i=RG(n,r,this.options);return this._req=i,i}},{key:"_removeFromUrlStorage",value:function(){var n=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(r){n._emitError(r)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var n=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||this._urlStorageKey!==null)return Promise.resolve();var r={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?r.parallelUploadUrls=this._parallelUploadUrls:r.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,r).then(function(i){n._urlStorageKey=i})}},{key:"_sendRequest",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return OG(n,r,this.options)}}],[{key:"terminate",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=RG("DELETE",n,r);return OG(i,null,r).then(function(s){if(s.getStatus()!==204)throw new q1("tus: unexpected response while terminating upload",null,i,s)}).catch(function(s){if(s instanceof q1||(s=new q1("tus: failed to terminate upload",s,i,null)),!DG(s,0,r))throw s;var o=r.retryDelays[0],a=r.retryDelays.slice(1),l=Ud(Ud({},r),{},{retryDelays:a});return new Promise(function(c){return setTimeout(c,o)}).then(function(){return t.terminate(n,l)})})}}])}();function LG(t){return Object.entries(t).map(function(e){var n=Fue(e,2),r=n[0],i=n[1];return"".concat(r," ").concat(Yie.encode(String(i)))}).join(",")}function Kd(t,e){return t>=e&&t<e+100}function RG(t,e,n){var r=n.httpStack.createRequest(t,e);n.protocol===ub?r.setHeader("Upload-Draft-Interop-Version","5"):n.protocol===Om?r.setHeader("Upload-Draft-Interop-Version","6"):r.setHeader("Tus-Resumable","1.0.0");for(var i=n.headers||{},s=0,o=Object.entries(i);s<o.length;s++){var a=Fue(o[s],2),l=a[0],c=a[1];r.setHeader(l,c)}if(n.addRequestId){var u=Q0t();r.setHeader("X-Request-ID",u)}return r}function OG(t,e,n){return JR.apply(this,arguments)}function JR(){return JR=X0t(ZR().mark(function t(e,n,r){var i;return ZR().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(typeof r.onBeforeRequest!="function"){o.next=3;break}return o.next=3,r.onBeforeRequest(e);case 3:return o.next=5,e.send(n);case 5:if(i=o.sent,typeof r.onAfterResponse!="function"){o.next=9;break}return o.next=9,r.onAfterResponse(e,i);case 9:return o.abrupt("return",i);case 10:case"end":return o.stop()}},t)})),JR.apply(this,arguments)}function avt(){var t=!0;return typeof navigator<"u"&&navigator.onLine===!1&&(t=!1),t}function DG(t,e,n){return n.retryDelays==null||e>=n.retryDelays.length||t.originalRequest==null?!1:n&&typeof n.onShouldRetry=="function"?n.onShouldRetry(t,e,n):Uue(t)}function Uue(t){var e=t.originalResponse?t.originalResponse.getStatus():0;return(!Kd(e,400)||e===409||e===423)&&avt()}function MG(t,e){return new tse(e,t).toString()}function lvt(t,e){for(var n=Math.floor(t/e),r=[],i=0;i<e;i++)r.push({start:n*i,end:n*(i+1)});return r[e-1].end=t,r}Qw.defaultOptions=ovt;var Vue=function(){return typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative"};function cvt(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var i=r.response;e(i)},r.onerror=function(i){n(i)},r.open("GET",t),r.send()})}var uvt=function(){return typeof window<"u"&&(typeof window.PhoneGap<"u"||typeof window.Cordova<"u"||typeof window.cordova<"u")};function dvt(t){return new Promise(function(e,n){var r=new FileReader;r.onload=function(){var i=new Uint8Array(r.result);e({value:i})},r.onerror=function(i){n(i)},r.readAsArrayBuffer(t)})}function W0(t){"@babel/helpers - typeof";return W0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W0(t)}function fvt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pvt(r.key),r)}}function hvt(t,e,n){return e&&$G(t.prototype,e),n&&$G(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pvt(t){var e=mvt(t,"string");return W0(e)=="symbol"?e:e+""}function mvt(t,e){if(W0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(W0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NG=function(){function t(e){fvt(this,t),this._file=e,this.size=e.size}return hvt(t,[{key:"slice",value:function(n,r){if(uvt())return dvt(this._file.slice(n,r));var i=this._file.slice(n,r),s=r>=this.size;return Promise.resolve({value:i,done:s})}},{key:"close",value:function(){}}])}();function G0(t){"@babel/helpers - typeof";return G0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G0(t)}function gvt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yvt(r.key),r)}}function vvt(t,e,n){return e&&FG(t.prototype,e),n&&FG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yvt(t){var e=xvt(t,"string");return G0(e)=="symbol"?e:e+""}function xvt(t,e){if(G0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(G0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jG(t){return t===void 0?0:t.size!==void 0?t.size:t.length}function bvt(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var n=new t.constructor(t.length+e.length);return n.set(t),n.set(e,t.length),n}throw new Error("Unknown data type")}var Svt=function(){function t(e){gvt(this,t),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return vvt(t,[{key:"slice",value:function(n,r){return n<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(n,r)}},{key:"_readUntilEnoughDataOrDone",value:function(n,r){var i=this,s=r<=this._bufferOffset+jG(this._buffer);if(this._done||s){var o=this._getDataFromBuffer(n,r),a=o==null?this._done:!1;return Promise.resolve({value:o,done:a})}return this._reader.read().then(function(l){var c=l.value,u=l.done;return u?i._done=!0:i._buffer===void 0?i._buffer=c:i._buffer=bvt(i._buffer,c),i._readUntilEnoughDataOrDone(n,r)})}},{key:"_getDataFromBuffer",value:function(n,r){n>this._bufferOffset&&(this._buffer=this._buffer.slice(n-this._bufferOffset),this._bufferOffset=n);var i=jG(this._buffer)===0;return this._done&&i?null:this._buffer.slice(0,r-n)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])}();function Gu(t){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(t)}function eO(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */eO=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(C,P,k){C[P]=k.value},s=typeof Symbol=="function"?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(C,P,k){return Object.defineProperty(C,P,{value:k,enumerable:!0,configurable:!0,writable:!0}),C[P]}try{c({},"")}catch{c=function(k,M,B){return k[M]=B}}function u(C,P,k,M){var B=P&&P.prototype instanceof y?P:y,N=Object.create(B.prototype),V=new $(M||[]);return i(N,"_invoke",{value:L(C,k,V)}),N}function d(C,P,k){try{return{type:"normal",arg:C.call(P,k)}}catch(M){return{type:"throw",arg:M}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",g={};function y(){}function x(){}function S(){}var w={};c(w,o,function(){return this});var E=Object.getPrototypeOf,T=E&&E(E(R([])));T&&T!==n&&r.call(T,o)&&(w=T);var _=S.prototype=y.prototype=Object.create(w);function I(C){["next","throw","return"].forEach(function(P){c(C,P,function(k){return this._invoke(P,k)})})}function A(C,P){function k(B,N,V,H){var W=d(C[B],C,N);if(W.type!=="throw"){var z=W.arg,G=z.value;return G&&Gu(G)=="object"&&r.call(G,"__await")?P.resolve(G.__await).then(function(K){k("next",K,V,H)},function(K){k("throw",K,V,H)}):P.resolve(G).then(function(K){z.value=K,V(z)},function(K){return k("throw",K,V,H)})}H(W.arg)}var M;i(this,"_invoke",{value:function(N,V){function H(){return new P(function(W,z){k(N,V,W,z)})}return M=M?M.then(H,H):H()}})}function L(C,P,k){var M=f;return function(B,N){if(M===p)throw Error("Generator is already running");if(M===m){if(B==="throw")throw N;return{value:t,done:!0}}for(k.method=B,k.arg=N;;){var V=k.delegate;if(V){var H=j(V,k);if(H){if(H===g)continue;return H}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(M===f)throw M=m,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);M=p;var W=d(C,P,k);if(W.type==="normal"){if(M=k.done?m:h,W.arg===g)continue;return{value:W.arg,done:k.done}}W.type==="throw"&&(M=m,k.method="throw",k.arg=W.arg)}}}function j(C,P){var k=P.method,M=C.iterator[k];if(M===t)return P.delegate=null,k==="throw"&&C.iterator.return&&(P.method="return",P.arg=t,j(C,P),P.method==="throw")||k!=="return"&&(P.method="throw",P.arg=new TypeError("The iterator does not provide a '"+k+"' method")),g;var B=d(M,C.iterator,P.arg);if(B.type==="throw")return P.method="throw",P.arg=B.arg,P.delegate=null,g;var N=B.arg;return N?N.done?(P[C.resultName]=N.value,P.next=C.nextLoc,P.method!=="return"&&(P.method="next",P.arg=t),P.delegate=null,g):N:(P.method="throw",P.arg=new TypeError("iterator result is not an object"),P.delegate=null,g)}function D(C){var P={tryLoc:C[0]};1 in C&&(P.catchLoc=C[1]),2 in C&&(P.finallyLoc=C[2],P.afterLoc=C[3]),this.tryEntries.push(P)}function O(C){var P=C.completion||{};P.type="normal",delete P.arg,C.completion=P}function $(C){this.tryEntries=[{tryLoc:"root"}],C.forEach(D,this),this.reset(!0)}function R(C){if(C||C===""){var P=C[o];if(P)return P.call(C);if(typeof C.next=="function")return C;if(!isNaN(C.length)){var k=-1,M=function B(){for(;++k<C.length;)if(r.call(C,k))return B.value=C[k],B.done=!1,B;return B.value=t,B.done=!0,B};return M.next=M}}throw new TypeError(Gu(C)+" is not iterable")}return x.prototype=S,i(_,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:x,configurable:!0}),x.displayName=c(S,l,"GeneratorFunction"),e.isGeneratorFunction=function(C){var P=typeof C=="function"&&C.constructor;return!!P&&(P===x||(P.displayName||P.name)==="GeneratorFunction")},e.mark=function(C){return Object.setPrototypeOf?Object.setPrototypeOf(C,S):(C.__proto__=S,c(C,l,"GeneratorFunction")),C.prototype=Object.create(_),C},e.awrap=function(C){return{__await:C}},I(A.prototype),c(A.prototype,a,function(){return this}),e.AsyncIterator=A,e.async=function(C,P,k,M,B){B===void 0&&(B=Promise);var N=new A(u(C,P,k,M),B);return e.isGeneratorFunction(P)?N:N.next().then(function(V){return V.done?V.value:N.next()})},I(_),c(_,l,"Generator"),c(_,o,function(){return this}),c(_,"toString",function(){return"[object Generator]"}),e.keys=function(C){var P=Object(C),k=[];for(var M in P)k.push(M);return k.reverse(),function B(){for(;k.length;){var N=k.pop();if(N in P)return B.value=N,B.done=!1,B}return B.done=!0,B}},e.values=R,$.prototype={constructor:$,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!P)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var P=this.tryEntries[0].completion;if(P.type==="throw")throw P.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var k=this;function M(z,G){return V.type="throw",V.arg=P,k.next=z,G&&(k.method="next",k.arg=t),!!G}for(var B=this.tryEntries.length-1;B>=0;--B){var N=this.tryEntries[B],V=N.completion;if(N.tryLoc==="root")return M("end");if(N.tryLoc<=this.prev){var H=r.call(N,"catchLoc"),W=r.call(N,"finallyLoc");if(H&&W){if(this.prev<N.catchLoc)return M(N.catchLoc,!0);if(this.prev<N.finallyLoc)return M(N.finallyLoc)}else if(H){if(this.prev<N.catchLoc)return M(N.catchLoc,!0)}else{if(!W)throw Error("try statement without catch or finally");if(this.prev<N.finallyLoc)return M(N.finallyLoc)}}}},abrupt:function(P,k){for(var M=this.tryEntries.length-1;M>=0;--M){var B=this.tryEntries[M];if(B.tryLoc<=this.prev&&r.call(B,"finallyLoc")&&this.prev<B.finallyLoc){var N=B;break}}N&&(P==="break"||P==="continue")&&N.tryLoc<=k&&k<=N.finallyLoc&&(N=null);var V=N?N.completion:{};return V.type=P,V.arg=k,N?(this.method="next",this.next=N.finallyLoc,g):this.complete(V)},complete:function(P,k){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&k&&(this.next=k),g},finish:function(P){for(var k=this.tryEntries.length-1;k>=0;--k){var M=this.tryEntries[k];if(M.finallyLoc===P)return this.complete(M.completion,M.afterLoc),O(M),g}},catch:function(P){for(var k=this.tryEntries.length-1;k>=0;--k){var M=this.tryEntries[k];if(M.tryLoc===P){var B=M.completion;if(B.type==="throw"){var N=B.arg;O(M)}return N}}throw Error("illegal catch attempt")},delegateYield:function(P,k,M){return this.delegate={iterator:R(P),resultName:k,nextLoc:M},this.method==="next"&&(this.arg=t),g}},e}function BG(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){n(c);return}a.done?e(l):Promise.resolve(l).then(r,i)}function wvt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){BG(s,r,i,o,a,"next",l)}function a(l){BG(s,r,i,o,a,"throw",l)}o(void 0)})}}function Evt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tvt(r.key),r)}}function _vt(t,e,n){return e&&UG(t.prototype,e),n&&UG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tvt(t){var e=Cvt(t,"string");return Gu(e)=="symbol"?e:e+""}function Cvt(t,e){if(Gu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kvt=function(){function t(){Evt(this,t)}return _vt(t,[{key:"openFile",value:function(){var e=wvt(eO().mark(function r(i,s){var o;return eO().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(Vue()&&i&&typeof i.uri<"u")){l.next=11;break}return l.prev=1,l.next=4,cvt(i.uri);case 4:return o=l.sent,l.abrupt("return",new NG(o));case 8:throw l.prev=8,l.t0=l.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(l.t0));case 11:if(!(typeof i.slice=="function"&&typeof i.size<"u")){l.next=13;break}return l.abrupt("return",Promise.resolve(new NG(i)));case 13:if(typeof i.read!="function"){l.next=18;break}if(s=Number(s),Number.isFinite(s)){l.next=17;break}return l.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return l.abrupt("return",Promise.resolve(new Svt(i,s)));case 18:return l.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return l.stop()}},r,null,[[1,8]])}));function n(r,i){return e.apply(this,arguments)}return n}()}])}();function Pvt(t,e){return Vue()?Promise.resolve(Ivt(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}function Ivt(t,e){var n=t.exif?Avt(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",n,e.endpoint].join("/")}function Avt(t){var e=0;if(t.length===0)return e;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);e=(e<<5)-e+r,e&=e}return e}function K0(t){"@babel/helpers - typeof";return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K0(t)}function x5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lvt(r.key),r)}}function b5(t,e,n){return e&&VG(t.prototype,e),n&&VG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lvt(t){var e=Rvt(t,"string");return K0(e)=="symbol"?e:e+""}function Rvt(t,e){if(K0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(K0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ovt=function(){function t(){x5(this,t)}return b5(t,[{key:"createRequest",value:function(n,r){return new Dvt(n,r)}},{key:"getName",value:function(){return"XHRHttpStack"}}])}(),Dvt=function(){function t(e,n){x5(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,n,!0),this._method=e,this._url=n,this._headers={}}return b5(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(n,r){this._xhr.setRequestHeader(n,r),this._headers[n]=r}},{key:"getHeader",value:function(n){return this._headers[n]}},{key:"setProgressHandler",value:function(n){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(r){r.lengthComputable&&n(r.loaded)})}},{key:"send",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise(function(i,s){n._xhr.onload=function(){i(new Mvt(n._xhr))},n._xhr.onerror=function(o){s(o)},n._xhr.send(r)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}(),Mvt=function(){function t(e){x5(this,t),this._xhr=e}return b5(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(n){return this._xhr.getResponseHeader(n)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}();function q0(t){"@babel/helpers - typeof";return q0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q0(t)}function $vt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fvt(r.key),r)}}function Nvt(t,e,n){return e&&zG(t.prototype,e),n&&zG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fvt(t){var e=jvt(t,"string");return q0(e)=="symbol"?e:e+""}function jvt(t,e){if(q0(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(q0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tO=!1;try{tO="localStorage"in window;var cP="tusSupport",HG=localStorage.getItem(cP);localStorage.setItem(cP,HG),HG===null&&localStorage.removeItem(cP)}catch(t){if(t.code===t.SECURITY_ERR||t.code===t.QUOTA_EXCEEDED_ERR)tO=!1;else throw t}var Bvt=tO,Uvt=function(){function t(){$vt(this,t)}return Nvt(t,[{key:"findAllUploads",value:function(){var n=this._findEntries("tus::");return Promise.resolve(n)}},{key:"findUploadsByFingerprint",value:function(n){var r=this._findEntries("tus::".concat(n,"::"));return Promise.resolve(r)}},{key:"removeUpload",value:function(n){return localStorage.removeItem(n),Promise.resolve()}},{key:"addUpload",value:function(n,r){var i=Math.round(Math.random()*1e12),s="tus::".concat(n,"::").concat(i);return localStorage.setItem(s,JSON.stringify(r)),Promise.resolve(s)}},{key:"_findEntries",value:function(n){for(var r=[],i=0;i<localStorage.length;i++){var s=localStorage.key(i);if(s.indexOf(n)===0)try{var o=JSON.parse(localStorage.getItem(s));o.urlStorageKey=s,r.push(o)}catch{}}return r}}])}();function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function Vvt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hue(r.key),r)}}function zvt(t,e,n){return e&&WG(t.prototype,e),n&&WG(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hvt(t,e,n){return e=Xw(e),Wvt(t,zue()?Reflect.construct(e,n||[],Xw(t).constructor):e.apply(t,n))}function Wvt(t,e){if(e&&(Vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gvt(t)}function Gvt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zue(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zue=function(){return!!t})()}function Xw(t){return Xw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xw(t)}function Kvt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nO(t,e)}function nO(t,e){return nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},nO(t,e)}function GG(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GG(Object(n),!0).forEach(function(r){qvt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GG(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qvt(t,e,n){return e=Hue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hue(t){var e=Yvt(t,"string");return Vh(e)=="symbol"?e:e+""}function Yvt(t,e){if(Vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KG=kf(kf({},Qw.defaultOptions),{},{httpStack:new Ovt,fileReader:new kvt,urlStorage:Bvt?new Uvt:new Y0t,fingerprint:Pvt}),Qvt=function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Vvt(this,e),r=kf(kf({},KG),r),Hvt(this,e,[n,r])}return Kvt(e,t),zvt(e,null,[{key:"terminate",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return i=kf(kf({},KG),i),Qw.terminate(r,i)}}])}(Qw),Xvt=typeof XMLHttpRequest=="function"&&typeof Blob=="function"&&typeof Blob.prototype.slice=="function";const Zvt=U(ue.div)`
  border: 1px solid #ccc;
  padding: 20px;
  margin: 20px;
  border-radius: 8px;
  background-color: #f9f9f9;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

  h2 {
    margin-top: 0;
  }

  .asset-details {
    margin-top: 20px;
  }

  .asset-details p {
    margin: 5px 0;
  }

  button {
    margin-top: 10px;
    padding: 10px 20px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }

  button:hover {
    background-color: #0056b3;
  }
`,Jvt=({asset:t})=>{const[e,n]=v.useState(!1),r=()=>{n(!e)};return b.jsxs(Zvt,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.5},children:[b.jsx("h2",{children:t.name}),b.jsxs("p",{children:[b.jsx("strong",{children:"ID:"})," ",t.id]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Playback ID:"})," ",t.playbackId]}),b.jsx(Wue,{onClick:r,children:e?"Hide Details":"Show Details"}),e&&b.jsxs("div",{className:"asset-details",children:[b.jsxs("p",{children:[b.jsx("strong",{children:"Source Type:"})," ",t.source.type]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Created At:"})," ",new Date(t.createdAt).toLocaleString()]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Updated At:"})," ",new Date(t.status.updatedAt).toLocaleString()]})]})]})};function eyt(t){const{text:e="Loading"}=t;return b.jsxs("div",{children:[e," ",b.jsx(COe,{color:"white"})]})}const Vd={primaryBlue:"#1B3B6F",accentBlue:"#62B6F1",white:"#FFFFFF",lightGrey:"#F0F0F0",darkGrey:"#333333"},tyt=U(ue.div)`
width: 50%;
  border: 1px dashed ${({theme:t})=>t.colors.ui300};
  padding: 40px 24px;
  height: 250px;
  border-radius: ${({theme:t})=>t.borderRadius};
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 500;
  background: ${({theme:t})=>t.colors.ui50};
  border-radius: ${({theme:t})=>t.borderRadius.default};

  margin-bottom: 40px;
  .drag-n-drop-title {
    text-align: center;
    color: ${({theme:t})=>t.colors.ui800};
    font-weight: 500;
  }
`,nyt=U.div`
  width: 90%;
  height: 300px;
  margin: 0 auto;
  overflow-y: auto;

  .video-link {
    margin: 10px;
    padding: 5px 10px;
    border: 1px solid ${Vd.darkGrey};
    border-radius: 5px;
    text-decoration: none;
    color: ${Vd.white};
    background: ${Vd.accentBlue};
    transition: transform 0.3s ease-in-out;

    &:hover {
      transform: scale(1.1);
    }
  }

  .btn-more-data {
    margin: 5px;
    padding: 5px 10px;
    border: 1px solid ${Vd.darkGrey};
    border-radius: 5px;
    color: ${Vd.white};
    background: ${Vd.primaryBlue};
    transition: transform 0.2s ease-in-out;

    &:hover {
      transform: scale(1.1);
    }
  }
`,ryt=U.div`
  width: 100%;
  display: flex;
  justify-content: center;

  .flex-col {
    width: 100%;
    display: flex;
    flex-direction: column;
  }

  @media (max-width: 768px) {
    flex-direction: column;
    justify-content: flex-start;

    .flex-col {
      padding: 1rem;
      box-sizing: border-box;
    }
  }
`,iyt=U(ue.div)`
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin: 0 auto;
`,S5=`
  width: 100%;
  height: 30rem;
  padding: 1rem;
  box-sizing: border-box;

  @media (max-width: 768px) {
    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 2px 6px 2px;
  }
`,syt=U.video`
  ${S5}
`,oyt=U(oT)`
  ${S5}
`,ayt=U.iframe`
  ${S5}
`,lyt=U.div`
  background: ${yh.primary};
  color: #fff;
  padding: 0.5rem 1rem;
  border-radius: 0.5rem;
  transition: 0.3s ease-in-out;
  cursor: pointer;

  &:hover {
    padding: 0.8rem 1.3rem;
    background: ${yh.primary};
    color: #fff;
  }

  background: #000;
  width: 60%;
  margin: auto;
`,Wue=U.div`
 background: ${yh.primary};
 color: #fff;
 padding: 0.5rem 1rem;
 border-radius: 0.5rem;
 transition: 0.3s ease-in-out;
 display: flex;
 justify-content: center;
 margin: auto;
 margin-bottom: 1rem;
 cursor: pointer;

 &:hover {
 padding: 0.8rem 1.3rem;
 background: ${yh.primary};
 color: #fff;
 }
`,cyt=U(Wue)`
 width: 20%;
`,uyt=(t,e)=>(t==null?void 0:t.length)>0?e==="video/mp4"?b.jsxs(syt,{controls:!0,children:[b.jsx("source",{src:t,type:"video/mp4"}),"Your browser does not support the video tag."]}):e==="application/pdf"?b.jsx(ayt,{src:t,title:"PDF Preview",children:"This browser does not support PDFs. Please download the PDF to view it."}):null:null,uP=["https://www.ncl.ac.uk/mediav8/newcastle-university-in-singapore/images/key-water.jpg"],dyt=()=>{const{STATES:t}=jn(),[e,n]=v.useState(null),[r,i]=v.useState(""),[s,o]=v.useState(""),[a,l]=v.useState(!1),[c,u]=v.useState(0),[d,f]=v.useState(null),h=Po(),{user:p}=t||{},{activeFile:m,previewURL:g}=e||{};v.useEffect(()=>()=>{g&&URL.revokeObjectURL(g)},[g]),v.useEffect(()=>{m!=null&&m.name&&r.length===0&&i(m.name)},[m]);const y=v.useCallback(_=>{const I=_.filter(A=>A.type==="video/mp4"||A.type==="application/pdf");if(I.length===0){alert("No valid files. Only MP4 videos and PDF files are allowed.");return}n({activeFile:I[0],previewURL:URL.createObjectURL(I[0])})},[]),{getRootProps:x,getInputProps:S}=Nue({onDrop:y,multiple:!1,accept:{"video/mp4":[".mp4"],"application/pdf":[".pdf"]}}),w=()=>{h("/features/verification")},E=async()=>{if(!m){alert("No file selected for upload.");return}l(!0);try{const{result:L}=await cS.createAsset({name:r,staticMp4:m.type==="video/mp4",storage:{ipfs:!0,metadata:{name:r,description:s}}},p==null?void 0:p.uid)||{},{tusEndpoint:j,asset:D}=L||{};if(vs("Media Upload",{result:L,tusEndpoint:j}),Xvt||alert("This browser does not support uploads. Please use a modern browser instead."),j){const O=`${ve.server_url}${OSe(j)}`;console.log("proxy-endpoint",O);const $=new Qvt(m,{endpoint:j,retryDelays:[0,3e3,5e3,1e4,2e4],metadata:{filename:r,filetype:m.type},uploadSize:m.size,overridePatchMethod:!0,onError(C){console.error("Error uploading file:",C),u(0)},onProgress(C,P){u(Math.round(C/P*100))},onSuccess(){console.log("Upload finished:",$.url,D),setTimeout(()=>{A(D)},5e3)}}),R=await $.findPreviousUploads();R.length>0&&$.resumeFromPreviousUpload(R[0]),$.start()}else throw new Error("Could not get upload endpoint")}catch(L){console.error("Error uploading the asset:",L),alert("Error uploading the asset. Please try again.")}finally{l(!1)}async function _(L){if(!L)return uP;const j=L.meta.source.find(D=>D.type==="image/jpeg"||D.hrn==="Thumbnail (JPEG)"&&D.type.includes("image"));if(j)return[j.url];{const D=L.meta.source.find(O=>O.type==="text/vtt");if(D){const O=D.url;return await I(O)}else return console.warn("No thumbnail source found in playback info"),uP}}async function I(L){const O=(await(await fetch(L)).text()).split(`
`),$=[];for(let R=0;R<O.length;R++)O[R].endsWith(".jpg")&&$.push(new URL(O[R],L).toString());return $}const A=async L=>{if(L!=null&&L.id){var j;try{const{playbackInfo:D}=await cS.getPlaybackInfo(L.playbackId);vs("playbackInfo",{playbackInfo:D,playbackID:L.playbackId}),j=D}catch(D){console.error(D)}await gm.addMetadata(L.id,{name:r,description:s,tags:["NPC"],thumbnailUrl:j?await _(j):uP}),f(L),u(0)}}},T=()=>{n(null),i(""),o(""),f(null)};return b.jsxs(yv,{title:"Media Upload",children:[b.jsx(cyt,{onClick:w,children:"My Uploads"}),b.jsxs(nyt,{isLoading:a||c>0,children:[" ",b.jsxs(ryt,{children:[d?b.jsx("div",{className:"flex-col",children:b.jsx(oyt,{title:d.name,playbackId:d.playbackId})}):(g==null?void 0:g.length)>0&&(m==null?void 0:m.type)==="video/mp4"?b.jsx("div",{className:"flex-col",children:uyt(g,m.type)}):b.jsx(b.Fragment,{}),!d&&b.jsxs(tyt,{...x(),isPreview:g,children:[b.jsx("input",{...S()}),b.jsxs("p",{className:"drag-n-drop-title",children:["Drag & drop a MP4 or PDF file here. ",b.jsx("br",{}),"Or click to select one"]})]})]}),d?b.jsx(Cr,{children:b.jsxs("div",{className:"flex-col",children:[b.jsx(Jvt,{asset:d}),b.jsx(lyt,{onClick:T,children:"Conclude"})]})}):m&&b.jsx(Cr,{children:b.jsxs(iyt,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.5},children:[b.jsx(_t,{label:"File name",children:b.jsx(qt,{type:"text",placeholder:"Enter file name",value:r,onChange:_=>i(_.target.value)})}),b.jsx(_t,{label:"File description",children:b.jsx(qt,{type:"text",placeholder:"Enter file description",value:s,onChange:_=>o(_.target.value)})}),b.jsx(on,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:E,disabled:a,children:a?b.jsx(eyt,{}):"Upload"})]})})]})]})};function am(){const{serviceID:t,playbackID:e,liveID:n}=cD(),[r,i]=v.useState(null),[s,o]=v.useState(),[a,l]=v.useState(!0);v.useEffect(()=>{c()},[]),v.useEffect(()=>{if(s){const d=GJe({provider:XVe(s)});console.log("client",{client:d}),i(d)}},[s]);const c=async()=>{try{o(await cS.getKey())}catch(d){throw d}finally{l(!1)}},u=d=>{switch(d){case"stream":return b.jsx(Ugt,{});case"upload-media":return b.jsx(dyt,{});default:return b.jsx("p",{children:"Service Unavailable"})}};return r===null?b.jsx("p",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:a?"Loading...":"Client Unavailable"}):b.jsxs(vgt,{client:r,children:[t&&u(t),e&&b.jsx(Tgt,{playbackID:e}),n&&b.jsx(Fgt,{playbackId:n})]})}const Y1=["Submitted","Disputed","Approved","Denied"],fyt=({metadata:t,onClick:e})=>{const{thumbnailUrl:n,name:r,description:i,tags:s,status:o}=t||{},a=u=>{switch(u){case"Submitted":return"Dispute Submission";case"Disputed":return"Resolve Dispute";case"Approved":return"View Approval";case"Denied":return"Dispute Denial";default:return"Contact Support"}},l=u=>{const d=Y1.indexOf(o),f=Y1.indexOf(u);return d===f?"current":d>f?"completed":""},c=a(o);return b.jsxs(hyt,{children:[b.jsx("div",{className:"thumbnail-container",children:b.jsx("img",{src:n,alt:"Asset Thumbnail",className:"thumbnail"})}),b.jsxs("div",{className:"details-container",children:[b.jsxs("div",{className:"header",children:[b.jsx("span",{className:"title",children:r}),b.jsx("i",{className:"icon",children:""})]}),b.jsxs("div",{className:"asset-details",children:[b.jsx("div",{className:"detail",children:i}),s==null?void 0:s.map((u,d)=>b.jsx("div",{className:"detail",children:u},d))]}),b.jsx("div",{className:"status-container",children:Y1.map((u,d)=>b.jsx("div",{className:`status-circle ${l(u)}`,children:d!==Y1.length-1&&b.jsx("div",{className:"status-line"})},d))})]}),b.jsx("button",{className:"cta-button",onClick:e,children:c})]})},hyt=U(ue.div)`
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 400px;
  margin: 0 auto;
  border: 1px solid #ddd;
  border-radius: 8px;
  overflow: hidden;
  position: relative;
  background-color: #fff;

  .thumbnail-container {
    flex: 1;
    height: 50%;
    overflow: hidden;
  }

  .thumbnail {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .details-container {
    padding: 16px;
    display: flex;
    flex-direction: column;
    height: 50%;
  }

  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
  }

  .title {
    font-size: 1.2rem;
    font-weight: bold;
  }

  .icon {
    font-size: 1.2rem;
  }

  .asset-details {
    display: flex;
    flex-direction: column;
    margin-bottom: 16px;
  }

  .detail {
    text-align: left;
    margin-bottom: 4px;
  }

  .status-container {
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding-bottom: 3rem;
  }

  .status-circle {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid #ddd;
    position: relative;
  }

  .status-circle.completed {
    background-color: #4caf50;
  }

  .status-circle.current {
    background-color: #ff9800;
  }

  .status-line {
    position: absolute;
    width: calc(100% + 20px);
    height: 2px;
    background-color: #ddd;
    top: 50%;
    left: 100%;
    transform: translateY(-50%);
  }

  .cta-button {
    position: absolute;
    bottom: 16px;
    right: 16px;
    padding: 8px 16px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .cta-button:hover {
    background-color: #0056b3;
  }

  @media (max-width: 768px) {
    max-width: 100%;

    .thumbnail {
      height: 200px;
    }

    .cta-button {
      bottom: 8px;
      right: 8px;
    }
  }
`,db={lightBlue:"#8abbd0",darkBlue:"#005f73",green:"#0a9396",white:"#e9ecef",navy:"#003459"};U(ue.div)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 65, 93, 0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
`;U(ue.div)`
  background-color: white;
  padding: 50px;
  border-radius: 10px;
  width: 90%;
  max-width: 1000px;
  position: relative;
  background-color: white;
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37); // Soft glow effect
  backdrop-filter: blur(8px);
  border: 1px solid ${db.lightBlue};
  box-sizing: border-box;

  @media (min-width: 768px) {
    width: 80%;
  }
`;U(ue.button)`
  position: absolute;
  top: 10px;
  right: 10px;
  color: #222;
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  transition: transform 0.3s;

  &:hover {
    transform: scale(1.1);
  }
`;const Gue=U.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 10px;
  gap: 10px;
  overflow: auto;
  @media (min-width: 768px) {
    flex-direction: row;
  }
`,pyt=U(Gue)`
  height: 100%;
`;U(ue.button)`
  padding: 10px 20px;
  border: none;
  background-color: ${t=>t.active?db.darkBlue:"transparent"};
  color: ${t=>t.active?db.white:db.lightBlue};
  cursor: pointer;
  transition: background-color 0.3s;

  &:hover {
    background-color: ${t=>t.active?"#0056b3":"#f0f0f0"};
  }
`;const Q1=U.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 600px;
  margin: 0 auto;
  gap: 24px;

  .input-button-wrap {
    display: flex;
    align-items: center;
  }
`,myt=U.div`
  margin-top: 20px;
  font-size: 18px;
  color: ${({theme:t})=>t.colors.ui800};
  animation: spin 0.2s infinite linear;

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
`;U.div`
  margin-top: 20px;
  font-size: 18px;
  color: red;
  animation: shake 0.5s;

  @keyframes shake {
    0%,
    100% {
      transform: translateX(0);
    }
    10%,
    30%,
    50%,
    70%,
    90% {
      transform: translateX(-10px);
    }
    20%,
    40%,
    60%,
    80% {
      transform: translateX(10px);
    }
  }
`;const gyt=U.div`
  width: 100%;
  height: 100%;
`,vyt={initial:{x:-10,opacity:0},animate:{x:0,opacity:1,transition:{type:"spring",stiffness:300}},exit:{x:10,opacity:0}};function yyt(){const{STATES:t,ACTIONS:e}=jn(),[n,r]=v.useState([]),[i,s]=v.useState(""),[o,a]=v.useState(!1),[l,c]=v.useState([]),[u,d]=v.useState([]),[f,h]=v.useState([]),[p,m]=v.useState([]),{user:g,verificationUIOpen:y,verificationData:x}=t||{},{setTxPopupVisible:S,setResult:w,setVerificationData:E}=e||{},{assetID:T}=x||{};v.useEffect(()=>{if(g!=null&&g.role){const N=B(g.role);r(N),s(N[0]),_(),I(),A(),L()}},[g]),v.useEffect(()=>{console.log("activeTab: ",i)},[i]);const _=async()=>{const{user_media:N}=await mm.media.getUserMedia(g.uid);Array.isArray(N)&&c(N)},I=async()=>{const{user_assets:N}=await mm.assets.getUserAssets(g.uid);Array.isArray(N)&&d(N)},A=async()=>{const{user_disputes:N}=await mm.assets.getUserAssetDisputes(g.uid);Array.isArray(N)&&h(N)},L=async()=>{const{user_approvals:N}=await mm.assets.getUserAssetApprovals(g.uid);Array.isArray(N)&&m(N)},j=py(gm.submit),D=py(gm.approve),O=py(gm.dispute),$=py(gm.closeDispute),R=async(N,V=null)=>{var H;a(!0);try{V?await N.mutateAsync(V):await N.mutateAsync();const W=N.data;console.log(N),S(!0),W!=null&&W.hash?w==null||w({title:"Confirmed",message:"",txHash:W.hash}):w==null||w({title:"Failed",message:((H=N==null?void 0:N.error)==null?void 0:H.reason)||"Could not transact."})}catch(W){w==null||w({title:"Error",message:(W==null?void 0:W.reason)||(W==null?void 0:W.message)})}finally{a(!1)}},C=async()=>{vs("Verification: Handle Submission",{assetID:T})},P=["uploads","submissions","disputes","approvals"],k={farmer:P,verifier:["submissions","disputes","approvals"],admin:P},M=async()=>{},B=N=>k[N]||[];return b.jsxs(gyt,{children:[b.jsx(Gue,{children:n.map(N=>b.jsx(AS,{active:i===N,onClick:()=>s(N),variants:vyt,initial:"initial",animate:"animate",exit:"exit",children:ISe.toTitleCase(N)},N))}),o?b.jsx(myt,{children:b.jsx(jt,{icon:Qve})}):b.jsxs(pyt,{children:[i==="uploads"&&b.jsx(Q1,{children:(l==null?void 0:l.length)<1?b.jsx("p",{children:"No Uploads"}):l.map((N,V)=>b.jsx(fyt,{metadata:N==null?void 0:N.metadata,onClick:()=>R(j,N.assetID)}))}),i==="submissions"&&b.jsx(Q1,{children:(u==null?void 0:u.length)<1?b.jsx("p",{children:"No Submissions"}):u.map((N,V)=>b.jsxs("div",{children:[b.jsx("label",{children:N==null?void 0:N.assetID}),b.jsx("label",{children:N==null?void 0:N.txHash}),b.jsx(Button,{onClick:()=>R((g==null?void 0:g.role)==="verifier"?D:O,N==null?void 0:N.assetID),children:(g==null?void 0:g.role)==="verifier"?"Approve":"Dispute"})]},V))}),i==="disputes"&&b.jsx(Q1,{children:(f==null?void 0:f.length)<1?b.jsx("p",{children:"No Disputes"}):f.map((N,V)=>b.jsxs("div",{children:[b.jsx("label",{children:N==null?void 0:N.assetID}),b.jsx("label",{children:N==null?void 0:N.txHash}),b.jsx(on,{onClick:()=>R($,N==null?void 0:N.assetID),children:"Resolve Dispute"})]},V))}),i==="approvals"&&b.jsx(Q1,{children:(p==null?void 0:p.length)<1?b.jsx("p",{children:"No Approvals"}):p.map((N,V)=>b.jsxs("div",{children:[b.jsx("label",{children:N==null?void 0:N.assetID}),b.jsx("label",{children:N==null?void 0:N.txHash}),b.jsx(Button,{onClick:()=>M(N==null?void 0:N.assetID),children:"Approval Details"})]},V))})]}),T&&b.jsx(Button,{onClick:C,children:"Submit for Verification"})]})}const Kue=()=>{var o,a;const{STATES:t,ACTIONS:e}=jn(),n=(o=t.confirmation)==null?void 0:o.msg,r=(a=t.confirmation)==null?void 0:a.action,i=e.cancelConfirmation;if(!n)return null;const s=()=>{r&&r(),i(!0)};return b.jsx(Cr,{children:n&&b.jsx(xyt,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:i,children:b.jsxs(byt,{initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{type:"spring",stiffness:300},children:[b.jsx("p",{children:n}),r&&b.jsx(qG,{primary:!0,onClick:s,children:"Confirm"}),b.jsx(qG,{onClick:()=>i(!1),children:"Cancel"})]})})})};Kue.propTypes={message:ie.string.isRequired,onConfirm:ie.func,onCancel:ie.func.isRequired};const xyt=U(ue.div)`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(3px);
  z-index: 9999;
`,byt=U(ue.div)`
  background-color: white;
  padding: 20px;

  display: flex;
  flex-direction: column;

  border-radius: 10px;
  box-shadow: 0px 2px 16px 0px rgba(0, 0, 0, 0.5);

  max-width: 50%;
  box-sizing: border-box;
  z-index: 1000;

  p {
    font-size: 20px;
    color: ${({theme:t})=>t.colors.ui800};
    font-weight: 500;
  }

  @media (max-width: 768px) {
    max-width: 90%;
    padding: 15px;
  }
`,qG=U.button`
  padding: 10px 20px;
  margin: 10px;
  cursor: pointer;
  border: none;
  border-radius: 4px;
  background-color: ${t=>t.primary?t.theme.colors.primary500:t.theme.colors.red500};
  display: flex;
  justify-content: center;
  color: white;
  transition: 0.3s ease-in-out;

  &:hover {
    scale: 1.05;
  }
`,Syt=U(ue.div)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  visibility: ${t=>t.isVisible?"visible":"hidden"};
  opacity: ${t=>t.isVisible?"1":"0"};
  transition: visibility 0.3s, opacity 0.3s;
  z-index: 10000;
`,wyt=U(ue.div)`
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  width: 400px;
  text-align: center;
`,Eyt=U.h3`
  margin-bottom: 15px;
`,_yt=U.p`
  margin-bottom: 20px;
`,dP=U.a`
  display: inline-block;
  background: #333;
  color: #fff;
  padding: 10px 20px;
  border-radius: 5px;
  text-decoration: none;
  cursor: pointer;
  margin: 5px;
  &:hover {
    background: #555;
  }
`,Tyt=U.a`
  margin: 0;
  color: #aaa;
  font-size: 24px;
  cursor: pointer;
  &:hover {
    color: #333;
  }
`,que=()=>{var l,c,u,d,f;const{STATES:t,ACTIONS:e}=jn(),n=!!((l=t.result)!=null&&l.title),r=(c=t.result)==null?void 0:c.title,i=(u=t.result)==null?void 0:u.message,s=(d=t.result)==null?void 0:d.txHash,o=(f=t.result)==null?void 0:f.handleRetry,a=()=>e.setResult(null);return b.jsx(Syt,{isVisible:n,initial:{opacity:0},animate:{opacity:n?1:0},children:b.jsxs(wyt,{initial:{scale:.7},animate:{scale:n?1:.7},children:[b.jsx(Tyt,{onClick:a,children:""}),b.jsx(Eyt,{children:r}),b.jsx(_yt,{children:i}),s?b.jsx(dP,{href:`${ve.blockchain.NETWORKS[ve.blockchain.MODE+"net"].explorer}/tx/${s}`,target:"_blank",rel:"noopener noreferrer",children:"Verify"}):o?b.jsx(dP,{onClick:o,children:"Retry"}):b.jsx(dP,{onClick:a,children:"Close"})]})})};que.propTypes={isVisible:ie.bool.isRequired,title:ie.string.isRequired,message:ie.string.isRequired,txHash:ie.string,onRetry:ie.func,onClose:ie.func.isRequired};const Cyt=U.main`
  width: 100%;
  min-height: calc(100vh - 72px); /* subtract header */
  padding: 24px 16px 40px;
  box-sizing: border-box;

  display: flex;
  justify-content: center;

  background: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.bg)||"#f5f5f5"}};
`,kyt=U.div`
  width: 100%;
  max-width: 1100px;
  margin: 0 auto;

  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
  padding: 24px;
  box-sizing: border-box;

  display: flex;
  flex-direction: column;
  gap: 24px;

  @media (max-width: 768px) {
    padding: 20px 16px 24px;
    border-radius: 16px;
  }
`,Pyt=U.div`
  display: flex;
  flex-direction: column;
  gap: 6px;
`,Iyt=U.h1`
  margin: 0;
  font-size: 22px;
  line-height: 1.3;
  font-weight: 700;
  color: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.ui900)||"#0f172a"}};
`,Ayt=U.p`
  margin: 0;
  font-size: 14px;
  line-height: 1.5;
  color: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.ui600)||"#4b5563"}};
`,Lyt=U.div`
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
`,X1=U.button`
  border-radius: 999px;
  border: 1px solid
    ${({active:t,theme:e})=>{var n,r;return t?((n=e.colors)==null?void 0:n.primary300)||"#7dd3fc":((r=e.colors)==null?void 0:r.ui200)||"#e5e7eb"}};
  padding: 6px 12px;
  font-size: 13px;
  font-weight: 500;
  cursor: default;

  background: ${({active:t,theme:e})=>{var n;return t?((n=e.colors)==null?void 0:n.primary50)||"#e0f2ff":"#ffffff"}};
  color: ${({active:t,theme:e})=>{var n,r;return t?((n=e.colors)==null?void 0:n.primary700)||"#0369a1":((r=e.colors)==null?void 0:r.ui800)||"#111827"}};
`,Ryt=U.div`
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;

  @media (max-width: 640px) {
    flex-direction: column;
    align-items: stretch;
  }
`,Oyt=U.div`
  h2 {
    margin: 0;
    font-size: 16px;
    font-weight: 600;
    color: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.ui900)||"#0f172a"}};
  }

  p {
    margin: 4px 0 0;
    font-size: 13px;
    color: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.ui600)||"#4b5563"}};
  }
`,Dyt=U.button`
  border: none;
  border-radius: 999px;
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;

  background: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.primary600)||"#0284c7"}};
  color: #ffffff;

  &:hover {
    background: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.primary700)||"#0369a1"}};
  }
`,Myt=U.div`
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: 12px;

  @media (min-width: 900px) {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  @media (min-width: 640px) and (max-width: 899px) {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
`,fP=U.div`
  border-radius: 16px;
  border: 1px solid ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.ui200)||"#e5e7eb"}};
  padding: 14px 16px;
  background: #ffffff;
  display: flex;
  flex-direction: column;
  gap: 6px;
`,hP=U.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,pP=U.div`
  font-size: 14px;
  font-weight: 600;
  color: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.ui900)||"#0f172a"}};
`,mP=U.span`
  border-radius: 999px;
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 600;
  color: #ffffff;
  background: ${({variant:t})=>t==="warning"?"#f97316":t==="offline"?"#dc2626":"#16a34a"};
`,gP=U.div`
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 12px;
  color: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.ui600)||"#4b5563"}};
`,$yt=U.div`
  margin-top: 4px;
  font-size: 11px;
  color: ${({theme:t})=>{var e;return((e=t.colors)==null?void 0:e.ui500)||"#6b7280"}};
`;function Nyt(){return b.jsx(Cyt,{children:b.jsxs(kyt,{children:[b.jsxs(Pyt,{children:[b.jsx(Iyt,{children:"BlueSignal Cloud Monitoring"}),b.jsx(Ayt,{children:"Your devices, signals, and water quality in one view. Add a gateway or probe to start streaming real-time data into the cloud."})]}),b.jsxs(Lyt,{children:[b.jsx(X1,{active:!0,children:"Environment"}),b.jsx(X1,{children:"Marketplace"}),b.jsx(X1,{children:"Finance"}),b.jsx(X1,{children:"Dashboard"})]}),b.jsxs("div",{children:[b.jsxs(Ryt,{children:[b.jsxs(Oyt,{children:[b.jsx("h2",{children:"Your Devices"}),b.jsx("p",{children:"Example layout until real devices are synced."})]}),b.jsx(Dyt,{type:"button",children:"+ Add Device"})]}),b.jsxs(Myt,{children:[b.jsxs(fP,{children:[b.jsxs(hP,{children:[b.jsx(pP,{children:"Lakefront Buoy #1"}),b.jsx(mP,{children:"Online"})]}),b.jsxs(gP,{children:[b.jsx("span",{children:"Type: Water Quality Buoy"}),b.jsx("span",{children:"Location: North Shore Cove"}),b.jsx("span",{children:"Temp: 18.4C  pH 7.2  DO 8.1 mg/L"})]})]}),b.jsxs(fP,{children:[b.jsxs(hP,{children:[b.jsx(pP,{children:"East Field Soil Probe"}),b.jsx(mP,{variant:"warning",children:"Warning"})]}),b.jsxs(gP,{children:[b.jsx("span",{children:"Type: Soil NPK Probe"}),b.jsx("span",{children:"Location: East Field  Row 12"}),b.jsx("span",{children:"Moisture: 42%  Nitrate: 18 ppm  Phosphate: 7 ppm"})]})]}),b.jsxs(fP,{children:[b.jsxs(hP,{children:[b.jsx(pP,{children:"Algae Emitter  Dock"}),b.jsx(mP,{variant:"offline",children:"Offline"})]}),b.jsxs(gP,{children:[b.jsx("span",{children:"Type: Ultrasonic Algae Control"}),b.jsx("span",{children:"Location: Dock"}),b.jsx("span",{children:"Last heartbeat: "})]}),b.jsx($yt,{children:"No link  0 devices"})]})]})]})]})})}function Fyt(){const{STATES:t}=jn(),{user:e}=t||{},n=window.location.hostname,r=new URLSearchParams(window.location.search);let i="marketplace";if(n==="cloud.bluesignal.xyz"||n.endsWith(".cloud.bluesignal.xyz"))i="cloud";else if(n==="waterquality.trading"||n==="waterquality-trading.web.app"||n.endsWith(".waterquality.trading"))i="marketplace";else{const s=r.get("app");(s==="cloud"||s==="marketplace")&&(i=s)}return b.jsx(ege,{children:b.jsx(jyt,{mode:i,user:e})})}function jyt({mode:t,user:e}){const n=Qh(),[r,i]=te.useState(!1),[s,o]=te.useState(!1),a=()=>i(u=>!u),l=()=>o(u=>!u);te.useEffect(()=>{t==="cloud"?document.title="BlueSignal Cloud Monitoring":document.title="WaterQuality.Trading"},[t]),te.useEffect(()=>{i(!1),o(!1)},[n.pathname]);const c=n.pathname==="/";return b.jsxs(Wyt,{children:[!c&&t==="cloud"&&b.jsx(rye,{onMenuClick:a}),!c&&t==="marketplace"&&b.jsx(cye,{onMenuClick:l}),b.jsx(Hyt,{}),t==="marketplace"&&b.jsx(uye,{open:s,onClose:()=>o(!1),user:e}),t==="cloud"&&b.jsx(dye,{open:r,onClose:()=>i(!1),user:e}),t==="cloud"?b.jsx(Vyt,{user:e}):b.jsx(zyt,{user:e}),(e==null?void 0:e.uid)&&b.jsx(fye,{})]})}const Byt=({user:t})=>{const e=Po();return te.useEffect(()=>{t!=null&&t.uid&&e("/dashboard/main",{replace:!0})},[t,e]),b.jsx($ne,{})},Uyt=({user:t})=>{const e=Po();return te.useEffect(()=>{t!=null&&t.uid&&e("/marketplace",{replace:!0})},[t,e]),b.jsx($ne,{})},Vyt=({user:t})=>b.jsxs(eQ,{children:[b.jsx(Ht,{path:"/",element:b.jsx(Byt,{user:t})}),(t==null?void 0:t.uid)&&b.jsxs(b.Fragment,{children:[b.jsx(Ht,{path:"/dashboard/:dashID",element:b.jsx(kRe,{})}),b.jsx(Ht,{path:"/dashboard/main",element:b.jsx(Nyt,{})}),b.jsx(Ht,{path:"/features/nutrient-calculator",element:b.jsx(SBe,{})}),b.jsx(Ht,{path:"/features/verification",element:b.jsx(yyt,{})}),b.jsx(Ht,{path:"/features/stream",element:b.jsx(am,{})}),b.jsx(Ht,{path:"/features/upload-media",element:b.jsx(am,{})}),b.jsx(Ht,{path:"/features/:serviceID",element:b.jsx(am,{})}),b.jsx(Ht,{path:"/media/:playbackID",element:b.jsx(am,{})}),b.jsx(Ht,{path:"/media/live/:liveID",element:b.jsx(am,{})})]}),b.jsx(Ht,{path:"*",element:b.jsx(Nne,{})})]}),zyt=({user:t})=>b.jsxs(eQ,{children:[b.jsx(Ht,{path:"/",element:b.jsx(Uyt,{user:t})}),(t==null?void 0:t.uid)&&b.jsxs(b.Fragment,{children:[b.jsx(Ht,{path:"/marketplace/seller-dashboard",element:b.jsx(fDe,{})}),b.jsx(Ht,{path:"/dashboard/financial",element:b.jsx(O8e,{})})]}),b.jsx(Ht,{path:"/marketplace",element:b.jsx(bDe,{})}),b.jsx(Ht,{path:"/marketplace/listing/:id",element:b.jsx(oOe,{})}),b.jsx(Ht,{path:"/recent-removals",element:b.jsx(r6e,{})}),b.jsx(Ht,{path:"/certificate/:id",element:b.jsx(h6e,{})}),b.jsx(Ht,{path:"/registry",element:b.jsx(K8e,{})}),b.jsx(Ht,{path:"/map",element:b.jsx(g6e,{})}),b.jsx(Ht,{path:"/presale",element:b.jsx(Fje,{})}),b.jsx(Ht,{path:"*",element:b.jsx(Nne,{})})]}),Hyt=()=>b.jsxs(b.Fragment,{children:[b.jsx(iM,{}),b.jsx(Kue,{}),b.jsx(que,{}),b.jsx(U9e,{}),b.jsx(oBe,{})]}),Wyt=U.div`
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  width: 100vw;
  overflow-x: hidden;
`;const Gyt=new Vhe;vP.createRoot(document.getElementById("root")).render(b.jsx(te.StrictMode,{children:b.jsx(qhe,{client:Gyt,children:b.jsxs(Xpe,{theme:VZ,children:[b.jsx(ime,{}),b.jsx(PRe,{children:b.jsx(Fyt,{})})]})})}));
